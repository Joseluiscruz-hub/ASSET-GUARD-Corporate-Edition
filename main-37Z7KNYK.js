import{a as S,b as $,d as Ii,g as Or,h as _}from"./chunk-FJYW2LMB.js";function md(n,e){return Object.is(n,e)}var Me=null,Ra=!1,gd=1,bt=Symbol("SIGNAL");function G(n){let e=Me;return Me=n,e}function yd(){return Me}var Di={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Rs(n){if(Ra)throw new Error("");if(Me===null)return;Me.consumerOnSignalRead(n);let e=Me.nextProducerIndex++;if(La(Me),e<Me.producerNode.length&&Me.producerNode[e]!==n&&Ns(Me)){let t=Me.producerNode[e];Fa(t,Me.producerIndexOfThis[e])}Me.producerNode[e]!==n&&(Me.producerNode[e]=n,Me.producerIndexOfThis[e]=Ns(Me)?Gy(n,Me,e):0),Me.producerLastReadVersion[e]=n.version}function Wy(){gd++}function _d(n){if(!(Ns(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===gd)){if(!n.producerMustRecompute(n)&&!Oa(n)){pd(n);return}n.producerRecomputeValue(n),pd(n)}}function vd(n){if(n.liveConsumerNode===void 0)return;let e=Ra;Ra=!0;try{for(let t of n.liveConsumerNode)t.dirty||US(t)}finally{Ra=e}}function Ed(){return Me?.consumerAllowSignalWrites!==!1}function US(n){n.dirty=!0,vd(n),n.consumerMarkedDirty?.(n)}function pd(n){n.dirty=!1,n.lastCleanEpoch=gd}function ks(n){return n&&(n.nextProducerIndex=0),G(n)}function Pa(n,e){if(G(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(Ns(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Fa(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function Oa(n){La(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(_d(t),r!==t.version))return!0}return!1}function Ps(n){if(La(n),Ns(n))for(let e=0;e<n.producerNode.length;e++)Fa(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function Gy(n,e,t){if(qy(n),n.liveConsumerNode.length===0&&Ky(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=Gy(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function Fa(n,e){if(qy(n),n.liveConsumerNode.length===1&&Ky(n))for(let r=0;r<n.producerNode.length;r++)Fa(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];La(i),i.producerIndexOfThis[r]=e}}function Ns(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function La(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function qy(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function Ky(n){return n.producerNode!==void 0}function wd(n,e){let t=Object.create(BS);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(_d(t),Rs(t),t.value===ka)throw t.error;return t.value};return r[bt]=t,r}var fd=Symbol("UNSET"),hd=Symbol("COMPUTING"),ka=Symbol("ERRORED"),BS=$(S({},Di),{value:fd,dirty:!0,error:null,equal:md,kind:"computed",producerMustRecompute(n){return n.value===fd||n.value===hd},producerRecomputeValue(n){if(n.value===hd)throw new Error("Detected cycle in computations.");let e=n.value;n.value=hd;let t=ks(n),r,i=!1;try{r=n.computation(),G(null),i=e!==fd&&e!==ka&&r!==ka&&n.equal(e,r)}catch(s){r=ka,n.error=s}finally{Pa(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function HS(){throw new Error}var Yy=HS;function Qy(n){Yy(n)}function bd(n){Yy=n}var $S=null;function Cd(n,e){let t=Object.create(Va);t.value=n,e!==void 0&&(t.equal=e);let r=()=>(Rs(t),t.value);return r[bt]=t,r}function Os(n,e){Ed()||Qy(n),n.equal(n.value,e)||(n.value=e,zS(n))}function Id(n,e){Ed()||Qy(n),Os(n,e(n.value))}var Va=$(S({},Di),{equal:md,value:void 0,kind:"signal"});function zS(n){n.version++,Wy(),vd(n),$S?.()}function Dd(n){let e=G(null);try{return n()}finally{G(e)}}var Sd;function Fs(){return Sd}function Sn(n){let e=Sd;return Sd=n,e}var ja=Symbol("NotFound");function ne(n){return typeof n=="function"}function Ua(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Ba=Ua(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Ls(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Ye=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let s of t)s.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(ne(r))try{r()}catch(s){e=s instanceof Ba?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{Zy(s)}catch(o){e=e??[],o instanceof Ba?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Ba(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Zy(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Ls(t,e)}remove(e){let{_finalizers:t}=this;t&&Ls(t,e),e instanceof n&&e._removeParent(this)}};Ye.EMPTY=(()=>{let n=new Ye;return n.closed=!0,n})();var Td=Ye.EMPTY;function Ha(n){return n instanceof Ye||n&&"closed"in n&&ne(n.remove)&&ne(n.add)&&ne(n.unsubscribe)}function Zy(n){ne(n)?n():n.unsubscribe()}var Vt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Si={setTimeout(n,e,...t){let{delegate:r}=Si;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Si;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function $a(n){Si.setTimeout(()=>{let{onUnhandledError:e}=Vt;if(e)e(n);else throw n})}function xd(){}var Jy=Ad("C",void 0,void 0);function Xy(n){return Ad("E",void 0,n)}function e_(n){return Ad("N",n,void 0)}function Ad(n,e,t){return{kind:n,value:e,error:t}}var Fr=null;function Ti(n){if(Vt.useDeprecatedSynchronousErrorHandling){let e=!Fr;if(e&&(Fr={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=Fr;if(Fr=null,t)throw r}}else n()}function t_(n){Vt.useDeprecatedSynchronousErrorHandling&&Fr&&(Fr.errorThrown=!0,Fr.error=n)}var Lr=class extends Ye{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Ha(e)&&e.add(this)):this.destination=QS}static create(e,t,r){return new xi(e,t,r)}next(e){this.isStopped?Nd(e_(e),this):this._next(e)}error(e){this.isStopped?Nd(Xy(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Nd(Jy,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},KS=Function.prototype.bind;function Md(n,e){return KS.call(n,e)}var Rd=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){za(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){za(r)}else za(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){za(t)}}},xi=class extends Lr{constructor(e,t,r){super();let i;if(ne(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&Vt.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Md(e.next,s),error:e.error&&Md(e.error,s),complete:e.complete&&Md(e.complete,s)}):i=e}this.destination=new Rd(i)}};function za(n){Vt.useDeprecatedSynchronousErrorHandling?t_(n):$a(n)}function YS(n){throw n}function Nd(n,e){let{onStoppedNotification:t}=Vt;t&&Si.setTimeout(()=>t(n,e))}var QS={closed:!0,next:xd,error:YS,complete:xd};var Ai=typeof Symbol=="function"&&Symbol.observable||"@@observable";function n_(n){return n}function r_(n){return n.length===0?n_:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var Se=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let s=JS(t)?t:new xi(t,r,i);return Ti(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=i_(r),new r((i,s)=>{let o=new xi({next:a=>{try{t(a)}catch(l){s(l),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Ai](){return this}pipe(...t){return r_(t)(this)}toPromise(t){return t=i_(t),new t((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function i_(n){var e;return(e=n??Vt.Promise)!==null&&e!==void 0?e:Promise}function ZS(n){return n&&ne(n.next)&&ne(n.error)&&ne(n.complete)}function JS(n){return n&&n instanceof Lr||ZS(n)&&Ha(n)}function XS(n){return ne(n?.lift)}function rt(n){return e=>{if(XS(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function it(n,e,t,r,i){return new kd(n,e,t,r,i)}var kd=class extends Lr{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(l){e.error(l)}}:super._next,this._error=i?function(a){try{i(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};var s_=Ua(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Tn=(()=>{class n extends Se{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Wa(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new s_}next(t){Ti(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Ti(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Ti(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:s}=this;return r||i?Td:(this.currentObservers=null,s.push(t),new Ye(()=>{this.currentObservers=null,Ls(s,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){let t=new Se;return t.source=this,t}}return n.create=(e,t)=>new Wa(e,t),n})(),Wa=class extends Tn{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Td}};var Vs=class extends Tn{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};function o_(n){return n&&ne(n.schedule)}function a_(n){return n[n.length-1]}function l_(n){return ne(a_(n))?n.pop():void 0}function c_(n){return o_(a_(n))?n.pop():void 0}function d_(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})}function u_(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Vr(n){return this instanceof Vr?(this.v=n,this):new Vr(n)}function f_(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(h){return function(y){return Promise.resolve(y).then(h,d)}}function a(h,y){r[h]&&(i[h]=function(E){return new Promise(function(b,D){s.push([h,E,b,D])>1||l(h,E)})},y&&(i[h]=y(i[h])))}function l(h,y){try{c(r[h](y))}catch(E){f(s[0][3],E)}}function c(h){h.value instanceof Vr?Promise.resolve(h.value.v).then(u,d):f(s[0][2],h)}function u(h){l("next",h)}function d(h){l("throw",h)}function f(h,y){h(y),s.shift(),s.length&&l(s[0][0],s[0][1])}}function h_(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof u_=="function"?u_(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(o){return new Promise(function(a,l){o=n[s](o),i(a,l,o.done,o.value)})}}function i(s,o,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},o)}}var Ga=n=>n&&typeof n.length=="number"&&typeof n!="function";function qa(n){return ne(n?.then)}function Ka(n){return ne(n[Ai])}function Ya(n){return Symbol.asyncIterator&&ne(n?.[Symbol.asyncIterator])}function Qa(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function eT(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Za=eT();function Ja(n){return ne(n?.[Za])}function Xa(n){return f_(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield Vr(t.read());if(i)return yield Vr(void 0);yield yield Vr(r)}}finally{t.releaseLock()}})}function el(n){return ne(n?.getReader)}function st(n){if(n instanceof Se)return n;if(n!=null){if(Ka(n))return tT(n);if(Ga(n))return nT(n);if(qa(n))return rT(n);if(Ya(n))return p_(n);if(Ja(n))return iT(n);if(el(n))return sT(n)}throw Qa(n)}function tT(n){return new Se(e=>{let t=n[Ai]();if(ne(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function nT(n){return new Se(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function rT(n){return new Se(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,$a)})}function iT(n){return new Se(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function p_(n){return new Se(e=>{oT(n,e).catch(t=>e.error(t))})}function sT(n){return p_(Xa(n))}function oT(n,e){var t,r,i,s;return d_(this,void 0,void 0,function*(){try{for(t=h_(n);r=yield t.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})}function Ct(n,e,t,r=0,i=!1){let s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function tl(n,e=0){return rt((t,r)=>{t.subscribe(it(r,i=>Ct(r,n,()=>r.next(i),e),()=>Ct(r,n,()=>r.complete(),e),i=>Ct(r,n,()=>r.error(i),e)))})}function nl(n,e=0){return rt((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function m_(n,e){return st(n).pipe(nl(e),tl(e))}function g_(n,e){return st(n).pipe(nl(e),tl(e))}function y_(n,e){return new Se(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function __(n,e){return new Se(t=>{let r;return Ct(t,e,()=>{r=n[Za](),Ct(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){t.error(o);return}s?t.complete():t.next(i)},0,!0)}),()=>ne(r?.return)&&r.return()})}function rl(n,e){if(!n)throw new Error("Iterable cannot be null");return new Se(t=>{Ct(t,e,()=>{let r=n[Symbol.asyncIterator]();Ct(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function v_(n,e){return rl(Xa(n),e)}function E_(n,e){if(n!=null){if(Ka(n))return m_(n,e);if(Ga(n))return y_(n,e);if(qa(n))return g_(n,e);if(Ya(n))return rl(n,e);if(Ja(n))return __(n,e);if(el(n))return v_(n,e)}throw Qa(n)}function jr(n,e){return e?E_(n,e):st(n)}function il(...n){let e=c_(n);return jr(n,e)}function ot(n,e){return rt((t,r)=>{let i=0;t.subscribe(it(r,s=>{r.next(n.call(e,s,i++))}))})}var{isArray:aT}=Array;function lT(n,e){return aT(e)?n(...e):n(e)}function w_(n){return ot(e=>lT(n,e))}var{isArray:cT}=Array,{getPrototypeOf:uT,prototype:dT,keys:fT}=Object;function b_(n){if(n.length===1){let e=n[0];if(cT(e))return{args:e,keys:null};if(hT(e)){let t=fT(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function hT(n){return n&&typeof n=="object"&&uT(n)===dT}function C_(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function I_(n,e,t,r,i,s,o,a){let l=[],c=0,u=0,d=!1,f=()=>{d&&!l.length&&!c&&e.complete()},h=E=>c<r?y(E):l.push(E),y=E=>{s&&e.next(E),c++;let b=!1;st(t(E,u++)).subscribe(it(e,D=>{i?.(D),s?h(D):e.next(D)},()=>{b=!0},void 0,()=>{if(b)try{for(c--;l.length&&c<r;){let D=l.shift();o?Ct(e,o,()=>y(D)):y(D)}f()}catch(D){e.error(D)}}))};return n.subscribe(it(e,h,()=>{d=!0,f()})),()=>{a?.()}}function sl(n,e,t=1/0){return ne(e)?sl((r,i)=>ot((s,o)=>e(r,s,i,o))(st(n(r,i))),t):(typeof e=="number"&&(t=e),rt((r,i)=>I_(r,i,n,t)))}function Pd(...n){let e=l_(n),{args:t,keys:r}=b_(n),i=new Se(s=>{let{length:o}=t;if(!o){s.complete();return}let a=new Array(o),l=o,c=o;for(let u=0;u<o;u++){let d=!1;st(t[u]).subscribe(it(s,f=>{d||(d=!0,c--),a[u]=f},()=>l--,void 0,()=>{(!l||!d)&&(c||s.next(r?C_(r,a):a),s.complete())}))}});return e?i.pipe(w_(e)):i}function Od(n,e){return rt((t,r)=>{let i=0;t.subscribe(it(r,s=>n.call(e,s,i++)&&r.next(s)))})}function Fd(n,e){return ne(e)?sl(n,e,1):sl(n,1)}function Ld(n){return rt((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Vd(n,e){return rt((t,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();t.subscribe(it(r,l=>{i?.unsubscribe();let c=0,u=s++;st(n(l,u)).subscribe(i=it(r,d=>r.next(e?e(l,d,u,c++):d),()=>{i=null,a()}))},()=>{o=!0,a()}))})}var dv="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",I=class extends Error{code;constructor(e,t){super(fv(e,t)),this.code=e}};function pT(n){return`NG0${Math.abs(n)}`}function fv(n,e){return`${pT(n)}${e?": "+e:""}`}var hv=Symbol("InputSignalNode#UNSET"),mT=$(S({},Va),{transformFn:void 0,applyValueToInputSignal(n,e){Os(n,e)}});function pv(n,e){let t=Object.create(mT);t.value=n,t.transformFn=e?.transform;function r(){if(Rs(t),t.value===hv){let i=null;throw new I(-950,i)}return t.value}return r[bt]=t,r}function Ll(n){return{toString:n}.toString()}var nn=globalThis;function ye(n){for(let e in n)if(n[e]===ye)return e;throw Error("Could not find renamed property on target object.")}function gT(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function It(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(It).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function ef(n,e){return n?e?`${n} ${e}`:n:e||""}var yT=ye({__forward_ref__:ye});function ln(n){return n.__forward_ref__=ln,n.toString=function(){return It(this())},n}function Qe(n){return mv(n)?n():n}function mv(n){return typeof n=="function"&&n.hasOwnProperty(yT)&&n.__forward_ref__===ln}function q(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Fn(n){return{providers:n.providers||[],imports:n.imports||[]}}function eh(n){return D_(n,gv)||D_(n,yv)}function D_(n,e){return n.hasOwnProperty(e)?n[e]:null}function _T(n){let e=n&&(n[gv]||n[yv]);return e||null}function S_(n){return n&&(n.hasOwnProperty(T_)||n.hasOwnProperty(vT))?n[T_]:null}var gv=ye({\u0275prov:ye}),T_=ye({\u0275inj:ye}),yv=ye({ngInjectableDef:ye}),vT=ye({ngInjectorDef:ye}),R=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=q({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function _v(n){return n&&!!n.\u0275providers}var ET=ye({\u0275cmp:ye}),wT=ye({\u0275dir:ye}),bT=ye({\u0275pipe:ye});var ml=ye({\u0275fac:ye}),Hs=ye({__NG_ELEMENT_ID__:ye}),x_=ye({__NG_ENV_ID__:ye});function xn(n){return typeof n=="string"?n:n==null?"":String(n)}function CT(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():xn(n)}function vv(n,e){throw new I(-200,n)}function th(n,e){throw new I(-201,!1)}var Q=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(Q||{}),tf;function Ev(){return tf}function at(n){let e=tf;return tf=n,e}function wv(n,e,t){let r=eh(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&Q.Optional)return null;if(e!==void 0)return e;th(n,"Injector")}var IT={},Br=IT,DT="__NG_DI_FLAG__",gl=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=t;return this.injector.get(e,r.optional?ja:Br,r)}},yl="ngTempTokenPath",ST="ngTokenPath",TT=/\n/gm,xT="\u0275",A_="__source";function AT(n,e=Q.Default){if(Fs()===void 0)throw new I(-203,!1);if(Fs()===null)return wv(n,void 0,e);{let t=Fs(),r;return t instanceof gl?r=t.injector:r=t,r.get(n,e&Q.Optional?null:void 0,e)}}function j(n,e=Q.Default){return(Ev()||AT)(Qe(n),e)}function T(n,e=Q.Default){return j(n,Vl(e))}function Vl(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function nf(n){let e=[];for(let t=0;t<n.length;t++){let r=Qe(n[t]);if(Array.isArray(r)){if(r.length===0)throw new I(900,!1);let i,s=Q.Default;for(let o=0;o<r.length;o++){let a=r[o],l=MT(a);typeof l=="number"?l===-1?i=a.token:s|=l:i=a}e.push(j(i,s))}else e.push(j(r))}return e}function MT(n){return n[DT]}function NT(n,e,t,r){let i=n[yl];throw e[A_]&&i.unshift(e[A_]),n.message=RT(`
`+n.message,i,t,r),n[ST]=i,n[yl]=null,n}function RT(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==xT?n.slice(2):n;let i=It(e);if(Array.isArray(e))i=e.map(It).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):It(a)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(TT,`
  `)}`}function Hr(n,e){let t=n.hasOwnProperty(ml);return t?n[ml]:null}function nh(n,e){n.forEach(t=>Array.isArray(t)?nh(t,e):e(t))}function kT(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function bv(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function PT(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let s=i-2;n[i]=n[s],i--}n[e]=t,n[e+1]=r}}function rh(n,e,t){let r=Zs(n,e);return r>=0?n[r|1]=t:(r=~r,PT(n,r,e,t)),r}function jd(n,e){let t=Zs(n,e);if(t>=0)return n[t|1]}function Zs(n,e){return OT(n,e,1)}function OT(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}var $r={},lt=[],$s=new R(""),Cv=new R("",-1),Iv=new R(""),_l=class{get(e,t=Br){if(t===Br){let r=new Error(`NullInjectorError: No provider for ${It(e)}!`);throw r.name="NullInjectorError",r}return t}};function ih(n){return n[ET]||null}function FT(n){return n[wT]||null}function LT(n){return n[bT]||null}function jl(n){return{\u0275providers:n}}function VT(...n){return{\u0275providers:Dv(!0,n),\u0275fromNgModule:!0}}function Dv(n,...e){let t=[],r=new Set,i,s=o=>{t.push(o)};return nh(e,o=>{let a=o;rf(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&Sv(i,s),t}function Sv(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];sh(i,s=>{e(s,r)})}}function rf(n,e,t,r){if(n=Qe(n),!n)return!1;let i=null,s=S_(n),o=!s&&ih(n);if(!s&&!o){let l=n.ngModule;if(s=S_(l),s)i=l;else return!1}else{if(o&&!o.standalone)return!1;i=n}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let l=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let c of l)rf(c,e,t,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let c;try{nh(s.imports,u=>{rf(u,e,t,r)&&(c||=[],c.push(u))})}finally{}c!==void 0&&Sv(c,e)}if(!a){let c=Hr(i)||(()=>new i);e({provide:i,useFactory:c,deps:lt},i),e({provide:Iv,useValue:i,multi:!0},i),e({provide:$s,useValue:()=>j(i),multi:!0},i)}let l=s.providers;if(l!=null&&!a){let c=n;sh(l,u=>{e(u,c)})}}else return!1;return i!==n&&n.providers!==void 0}function sh(n,e){for(let t of n)_v(t)&&(t=t.\u0275providers),Array.isArray(t)?sh(t,e):e(t)}var jT=ye({provide:String,useValue:ye});function Tv(n){return n!==null&&typeof n=="object"&&jT in n}function UT(n){return!!(n&&n.useExisting)}function BT(n){return!!(n&&n.useFactory)}function Pi(n){return typeof n=="function"}function HT(n){return!!n.useClass}var Ul=new R(""),ul={},M_={},Ud;function oh(){return Ud===void 0&&(Ud=new _l),Ud}var An=class{},zs=class extends An{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,of(e,o=>this.processProvider(o)),this.records.set(Cv,Mi(void 0,this)),i.has("environment")&&this.records.set(An,Mi(void 0,this));let s=this.records.get(Ul);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(Iv,lt,Q.Self))}retrieve(e,t){let r=t;return this.get(e,r.optional?ja:Br,r)}destroy(){Us(this),this._destroyed=!0;let e=G(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),G(e)}}onDestroy(e){return Us(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Us(this);let t=Sn(this),r=at(void 0),i;try{return e()}finally{Sn(t),at(r)}}get(e,t=Br,r=Q.Default){if(Us(this),e.hasOwnProperty(x_))return e[x_](this);r=Vl(r);let i,s=Sn(this),o=at(void 0);try{if(!(r&Q.SkipSelf)){let l=this.records.get(e);if(l===void 0){let c=qT(e)&&eh(e);c&&this.injectableDefInScope(c)?l=Mi(sf(e),ul):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l,r)}let a=r&Q.Self?oh():this.parent;return t=r&Q.Optional&&t===Br?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[yl]=a[yl]||[]).unshift(It(e)),s)throw a;return NT(a,e,"R3InjectorError",this.source)}else throw a}finally{at(o),Sn(s)}}resolveInjectorInitializers(){let e=G(null),t=Sn(this),r=at(void 0),i;try{let s=this.get($s,lt,Q.Self);for(let o of s)o()}finally{Sn(t),at(r),G(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(It(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=Qe(e);let t=Pi(e)?e:Qe(e&&e.provide),r=zT(e);if(!Pi(e)&&e.multi===!0){let i=this.records.get(t);i||(i=Mi(void 0,ul,!0),i.factory=()=>nf(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let i=G(null);try{return t.value===M_?vv(It(e)):t.value===ul&&(t.value=M_,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&GT(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{G(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Qe(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function sf(n){let e=eh(n),t=e!==null?e.factory:Hr(n);if(t!==null)return t;if(n instanceof R)throw new I(204,!1);if(n instanceof Function)return $T(n);throw new I(204,!1)}function $T(n){if(n.length>0)throw new I(204,!1);let t=_T(n);return t!==null?()=>t.factory(n):()=>new n}function zT(n){if(Tv(n))return Mi(void 0,n.useValue);{let e=xv(n);return Mi(e,ul)}}function xv(n,e,t){let r;if(Pi(n)){let i=Qe(n);return Hr(i)||sf(i)}else if(Tv(n))r=()=>Qe(n.useValue);else if(BT(n))r=()=>n.useFactory(...nf(n.deps||[]));else if(UT(n))r=(i,s)=>j(Qe(n.useExisting),s!==void 0&&s&Q.Optional?Q.Optional:void 0);else{let i=Qe(n&&(n.useClass||n.provide));if(WT(n))r=()=>new i(...nf(n.deps));else return Hr(i)||sf(i)}return r}function Us(n){if(n.destroyed)throw new I(205,!1)}function Mi(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function WT(n){return!!n.deps}function GT(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function qT(n){return typeof n=="function"||typeof n=="object"&&n instanceof R}function of(n,e){for(let t of n)Array.isArray(t)?of(t,e):t&&_v(t)?of(t.\u0275providers,e):e(t)}function Bl(n,e){let t;n instanceof zs?(Us(n),t=n):t=new gl(n);let r,i=Sn(t),s=at(void 0);try{return e()}finally{Sn(i),at(s)}}function Av(){return Ev()!==void 0||Fs()!=null}function KT(n){if(!Av())throw new I(-203,!1)}var Ln=0,ee=1,V=2,St=3,Bt=4,cn=5,Ws=6,vl=7,Ne=8,Oi=9,Mn=10,Re=11,Gs=12,N_=13,Bi=14,Ht=15,Fi=16,Ni=17,Li=18,Hl=19,Mv=20,sr=21,Bd=22,zr=23,Dt=24,Hd=25,He=26,Nv=1;var qs=7,YT=8,El=9,ct=10;function or(n){return Array.isArray(n)&&typeof n[Nv]=="object"}function Qr(n){return Array.isArray(n)&&n[Nv]===!0}function Rv(n){return(n.flags&4)!==0}function Hi(n){return n.componentOffset>-1}function ah(n){return(n.flags&1)===1}function sn(n){return!!n.template}function wl(n){return(n[V]&512)!==0}function $i(n){return(n[V]&256)===256}var af=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function kv(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var $l=(()=>{let n=()=>Pv;return n.ngInherit=!0,n})();function Pv(n){return n.type.prototype.ngOnChanges&&(n.setInput=ZT),QT}function QT(){let n=Fv(this),e=n?.current;if(e){let t=n.previous;if(t===$r)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function ZT(n,e,t,r,i){let s=this.declaredInputs[r],o=Fv(n)||JT(n,{previous:$r,current:null}),a=o.current||(o.current={}),l=o.previous,c=l[s];a[s]=new af(c&&c.currentValue,t,l===$r),kv(n,e,i,t)}var Ov="__ngSimpleChanges__";function Fv(n){return n[Ov]||null}function JT(n,e){return n[Ov]=e}var R_=null;var pe=function(n,e=null,t){R_?.(n,e,t)},XT="svg",ex="math";function Nn(n){for(;Array.isArray(n);)n=n[Ln];return n}function Lv(n,e){return Nn(e[n])}function Vn(n,e){return Nn(e[n.index])}function lh(n,e){return n.data[e]}function ch(n,e){return n[e]}function tx(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function on(n,e){let t=e[n];return or(t)?t:t[Ln]}function uh(n){return(n[V]&128)===128}function Vi(n,e){return e==null?null:n[e]}function Vv(n){n[Ni]=0}function jv(n){n[V]&1024||(n[V]|=1024,uh(n)&&Js(n))}function nx(n,e){for(;n>0;)e=e[Bi],n--;return e}function zl(n){return!!(n[V]&9216||n[Dt]?.dirty)}function lf(n){n[Mn].changeDetectionScheduler?.notify(8),n[V]&64&&(n[V]|=1024),zl(n)&&Js(n)}function Js(n){n[Mn].changeDetectionScheduler?.notify(0);let e=Wr(n);for(;e!==null&&!(e[V]&8192||(e[V]|=8192,!uh(e)));)e=Wr(e)}function Uv(n,e){if($i(n))throw new I(911,!1);n[sr]===null&&(n[sr]=[]),n[sr].push(e)}function rx(n,e){if(n[sr]===null)return;let t=n[sr].indexOf(e);t!==-1&&n[sr].splice(t,1)}function Wr(n){let e=n[St];return Qr(e)?e[St]:e}function Bv(n){return n[vl]??=[]}function Hv(n){return n.cleanup??=[]}var K={lFrame:Jv(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var cf=!1;function ix(){return K.lFrame.elementDepthCount}function sx(){K.lFrame.elementDepthCount++}function ox(){K.lFrame.elementDepthCount--}function $v(){return K.bindingsEnabled}function ax(){return K.skipHydrationRootTNode!==null}function lx(n){return K.skipHydrationRootTNode===n}function cx(){K.skipHydrationRootTNode=null}function ae(){return K.lFrame.lView}function $e(){return K.lFrame.tView}function U(n){return K.lFrame.contextLView=n,n[Ne]}function B(n){return K.lFrame.contextLView=null,n}function $t(){let n=zv();for(;n!==null&&n.type===64;)n=n.parent;return n}function zv(){return K.lFrame.currentTNode}function ux(){let n=K.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Xs(n,e){let t=K.lFrame;t.currentTNode=n,t.isParent=e}function Wv(){return K.lFrame.isParent}function dx(){K.lFrame.isParent=!1}function fx(){return K.lFrame.contextLView}function Gv(){return cf}function bl(n){let e=cf;return cf=n,e}function qv(){let n=K.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function Kv(){return K.lFrame.bindingIndex}function hx(n){return K.lFrame.bindingIndex=n}function zi(){return K.lFrame.bindingIndex++}function Wl(n){let e=K.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function px(){return K.lFrame.inI18n}function mx(n,e){let t=K.lFrame;t.bindingIndex=t.bindingRootIndex=n,uf(e)}function gx(){return K.lFrame.currentDirectiveIndex}function uf(n){K.lFrame.currentDirectiveIndex=n}function yx(n){let e=K.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function Yv(n){K.lFrame.currentQueryIndex=n}function _x(n){let e=n[ee];return e.type===2?e.declTNode:e.type===1?n[cn]:null}function Qv(n,e,t){if(t&Q.SkipSelf){let i=e,s=n;for(;i=i.parent,i===null&&!(t&Q.Host);)if(i=_x(s),i===null||(s=s[Bi],i.type&10))break;if(i===null)return!1;e=i,n=s}let r=K.lFrame=Zv();return r.currentTNode=e,r.lView=n,!0}function dh(n){let e=Zv(),t=n[ee];K.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function Zv(){let n=K.lFrame,e=n===null?null:n.child;return e===null?Jv(n):e}function Jv(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function Xv(){let n=K.lFrame;return K.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var e0=Xv;function fh(){let n=Xv();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function vx(n){return(K.lFrame.contextLView=nx(n,K.lFrame.contextLView))[Ne]}function un(){return K.lFrame.selectedIndex}function Gr(n){K.lFrame.selectedIndex=n}function hh(){let n=K.lFrame;return lh(n.tView,n.selectedIndex)}function Ex(){return K.lFrame.currentNamespace}var t0=!0;function ph(){return t0}function mh(n){t0=n}function wx(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=Pv(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}function n0(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),l&&(n.viewHooks??=[]).push(-t,l),c&&((n.viewHooks??=[]).push(t,c),(n.viewCheckHooks??=[]).push(t,c)),u!=null&&(n.destroyHooks??=[]).push(t,u)}}function dl(n,e,t){r0(n,e,3,t)}function fl(n,e,t,r){(n[V]&3)===t&&r0(n,e,t,r)}function $d(n,e){let t=n[V];(t&3)===e&&(t&=16383,t+=1,n[V]=t)}function r0(n,e,t,r){let i=r!==void 0?n[Ni]&65535:0,s=r??-1,o=e.length-1,a=0;for(let l=i;l<o;l++)if(typeof e[l+1]=="number"){if(a=e[l],r!=null&&a>=r)break}else e[l]<0&&(n[Ni]+=65536),(a<s||s==-1)&&(bx(n,t,e,l),n[Ni]=(n[Ni]&4294901760)+l+2),l++}function k_(n,e){pe(4,n,e);let t=G(null);try{e.call(n)}finally{G(t),pe(5,n,e)}}function bx(n,e,t,r){let i=t[r]<0,s=t[r+1],o=i?-t[r]:t[r],a=n[o];i?n[V]>>14<n[Ni]>>16&&(n[V]&3)===e&&(n[V]+=16384,k_(a,s)):k_(a,s)}var ki=-1,qr=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r){this.factory=e,this.canSeeViewProviders=t,this.injectImpl=r}};function Cx(n){return(n.flags&8)!==0}function Ix(n){return(n.flags&16)!==0}function Dx(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{let s=i,o=t[++r];Tx(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function Sx(n){return n===3||n===4||n===6}function Tx(n){return n.charCodeAt(0)===64}function Ks(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?P_(n,t,i,null,e[++r]):P_(n,t,i,null,null))}}return n}function P_(n,e,t,r,i){let s=0,o=n.length;if(e===-1)o=-1;else for(;s<n.length;){let a=n[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<n.length;){let a=n[s];if(typeof a=="number")break;if(a===t){i!==null&&(n[s+1]=i);return}s++,i!==null&&s++}o!==-1&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),i!==null&&n.splice(s++,0,i)}function xx(n){return n!==ki}function df(n){return n&32767}function Ax(n){return n>>16}function ff(n,e){let t=Ax(n),r=e;for(;t>0;)r=r[Bi],t--;return r}var hf=!0;function Cl(n){let e=hf;return hf=n,e}var Mx=256,i0=Mx-1,s0=5,Nx=0,rn={};function Rx(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(Hs)&&(r=t[Hs]),r==null&&(r=t[Hs]=Nx++);let i=r&i0,s=1<<i;e.data[n+(i>>s0)]|=s}function Il(n,e){let t=o0(n,e);if(t!==-1)return t;let r=e[ee];r.firstCreatePass&&(n.injectorIndex=e.length,zd(r.data,n),zd(e,null),zd(r.blueprint,null));let i=a0(n,e),s=n.injectorIndex;if(xx(i)){let o=df(i),a=ff(i,e),l=a[ee].data;for(let c=0;c<8;c++)e[s+c]=a[o+c]|l[o+c]}return e[s+8]=i,s}function zd(n,e){n.push(0,0,0,0,0,0,0,0,e)}function o0(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function a0(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=f0(i),r===null)return ki;if(t++,i=i[Bi],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return ki}function pf(n,e,t){Rx(n,e,t)}function l0(n,e,t){if(t&Q.Optional||n!==void 0)return n;th(e,"NodeInjector")}function c0(n,e,t,r){if(t&Q.Optional&&r===void 0&&(r=null),(t&(Q.Self|Q.Host))===0){let i=n[Oi],s=at(void 0);try{return i?i.get(e,r,t&Q.Optional):wv(e,r,t&Q.Optional)}finally{at(s)}}return l0(r,e,t)}function u0(n,e,t,r=Q.Default,i){if(n!==null){if(e[V]&2048&&!(r&Q.Self)){let o=Lx(n,e,t,r,rn);if(o!==rn)return o}let s=d0(n,e,t,r,rn);if(s!==rn)return s}return c0(e,t,r,i)}function d0(n,e,t,r,i){let s=Ox(t);if(typeof s=="function"){if(!Qv(e,n,r))return r&Q.Host?l0(i,t,r):c0(e,t,r,i);try{let o;if(o=s(r),o==null&&!(r&Q.Optional))th(t);else return o}finally{e0()}}else if(typeof s=="number"){let o=null,a=o0(n,e),l=ki,c=r&Q.Host?e[Ht][cn]:null;for((a===-1||r&Q.SkipSelf)&&(l=a===-1?a0(n,e):e[a+8],l===ki||!F_(r,!1)?a=-1:(o=e[ee],a=df(l),e=ff(l,e)));a!==-1;){let u=e[ee];if(O_(s,a,u.data)){let d=kx(a,e,t,o,r,c);if(d!==rn)return d}l=e[a+8],l!==ki&&F_(r,e[ee].data[a+8]===c)&&O_(s,a,e)?(o=u,a=df(l),e=ff(l,e)):a=-1}}return i}function kx(n,e,t,r,i,s){let o=e[ee],a=o.data[n+8],l=r==null?Hi(a)&&hf:r!=o&&(a.type&3)!==0,c=i&Q.Host&&s===a,u=Px(a,o,t,l,c);return u!==null?Dl(e,o,u,a,i):rn}function Px(n,e,t,r,i){let s=n.providerIndexes,o=e.data,a=s&1048575,l=n.directiveStart,c=n.directiveEnd,u=s>>20,d=r?a:a+u,f=i?a+u:c;for(let h=d;h<f;h++){let y=o[h];if(h<l&&t===y||h>=l&&y.type===t)return h}if(i){let h=o[l];if(h&&sn(h)&&h.type===t)return l}return null}function Dl(n,e,t,r,i){let s=n[t],o=e.data;if(s instanceof qr){let a=s;a.resolving&&vv(CT(o[t]));let l=Cl(a.canSeeViewProviders);a.resolving=!0;let c,u=a.injectImpl?at(a.injectImpl):null,d=Qv(n,r,Q.Default);try{s=n[t]=a.factory(void 0,i,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&wx(t,o[t],e)}finally{u!==null&&at(u),Cl(l),a.resolving=!1,e0()}}return s}function Ox(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Hs)?n[Hs]:void 0;return typeof e=="number"?e>=0?e&i0:Fx:e}function O_(n,e,t){let r=1<<n;return!!(t[e+(n>>s0)]&r)}function F_(n,e){return!(n&Q.Self)&&!(n&Q.Host&&e)}var Sl=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return u0(this._tNode,this._lView,e,Vl(r),t)}};function Fx(){return new Sl($t(),ae())}function Wi(n){return Ll(()=>{let e=n.prototype.constructor,t=e[ml]||mf(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let s=i[ml]||mf(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function mf(n){return mv(n)?()=>{let e=mf(Qe(n));return e&&e()}:Hr(n)}function Lx(n,e,t,r,i){let s=n,o=e;for(;s!==null&&o!==null&&o[V]&2048&&!wl(o);){let a=d0(s,o,t,r|Q.Self,rn);if(a!==rn)return a;let l=s.parent;if(!l){let c=o[Mv];if(c){let u=c.get(t,rn,r);if(u!==rn)return u}l=f0(o),o=o[Bi]}s=l}return i}function f0(n){let e=n[ee],t=e.type;return t===2?e.declTNode:t===1?n[cn]:null}function L_(n,e=null,t=null,r){let i=Vx(n,e,t,r);return i.resolveInjectorInitializers(),i}function Vx(n,e=null,t=null,r,i=new Set){let s=[t||lt,VT(n)];return r=r||(typeof n=="object"?void 0:It(n)),new zs(s,e||oh(),r||null,i)}var Rn=class n{static THROW_IF_NOT_FOUND=Br;static NULL=new _l;static create(e,t){if(Array.isArray(e))return L_({name:""},t,e,"");{let r=e.name??"";return L_({name:r},e.parent,e.providers,r)}}static \u0275prov=q({token:n,providedIn:"any",factory:()=>j(Cv)});static __NG_ELEMENT_ID__=-1};var jx=new R("");jx.__NG_ELEMENT_ID__=n=>{let e=$t();if(e===null)throw new I(204,!1);if(e.type&2)return e.value;if(n&Q.Optional)return null;throw new I(204,!1)};var h0=!1,Gl=(()=>{class n{static __NG_ELEMENT_ID__=Ux;static __NG_ENV_ID__=t=>t}return n})(),Tl=class extends Gl{_lView;constructor(e){super(),this._lView=e}onDestroy(e){let t=this._lView;return $i(t)?(e(),()=>{}):(Uv(t,e),()=>rx(t,e))}};function Ux(){return new Tl(ae())}var Kr=class{},ql=new R("",{providedIn:"root",factory:()=>!1});var p0=new R(""),gh=new R(""),Gi=(()=>{class n{taskId=0;pendingTasks=new Set;get _hasPendingTasks(){return this.hasPendingTasks.value}hasPendingTasks=new Vs(!1);add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static \u0275prov=q({token:n,providedIn:"root",factory:()=>new n})}return n})();var gf=class extends Tn{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,Av()&&(this.destroyRef=T(Gl,{optional:!0})??void 0,this.pendingTasks=T(Gi,{optional:!0})??void 0)}emit(e){let t=G(null);try{super.next(e)}finally{G(t)}}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&typeof e=="object"){let l=e;i=l.next?.bind(l),s=l.error?.bind(l),o=l.complete?.bind(l)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof Ye&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},vt=gf;function Ys(...n){}function m0(n){let e,t;function r(){n=Ys;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function V_(n){return queueMicrotask(()=>n()),()=>{n=Ys}}var yh="isAngularZone",xl=yh+"_ID",Bx=0,Ce=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new vt(!1);onMicrotaskEmpty=new vt(!1);onStable=new vt(!1);onError=new vt(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=h0}=e;if(typeof Zone>"u")throw new I(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&r,o.shouldCoalesceRunChangeDetection=i,o.callbackScheduled=!1,o.scheduleInRootZone=s,zx(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(yh)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new I(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new I(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,Hx,Ys,Ys);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},Hx={};function _h(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function $x(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){m0(()=>{n.callbackScheduled=!1,yf(n),n.isCheckStableRunning=!0,_h(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),yf(n)}function zx(n){let e=()=>{$x(n)},t=Bx++;n._inner=n._inner.fork({name:"angular",properties:{[yh]:!0,[xl]:t,[xl+t]:!0},onInvokeTask:(r,i,s,o,a,l)=>{if(Wx(l))return r.invokeTask(s,o,a,l);try{return j_(n),r.invokeTask(s,o,a,l)}finally{(n.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),U_(n)}},onInvoke:(r,i,s,o,a,l,c)=>{try{return j_(n),r.invoke(s,o,a,l,c)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!Gx(l)&&e(),U_(n)}},onHasTask:(r,i,s,o)=>{r.hasTask(s,o),i===s&&(o.change=="microTask"?(n._hasPendingMicrotasks=o.microTask,yf(n),_h(n)):o.change=="macroTask"&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,s,o)=>(r.handleError(s,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}function yf(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function j_(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function U_(n){n._nesting--,_h(n)}var Al=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new vt;onMicrotaskEmpty=new vt;onStable=new vt;onError=new vt;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function Wx(n){return g0(n,"__ignore_ng_zone__")}function Gx(n){return g0(n,"__scheduler_tick__")}function g0(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var kn=class{_console=console;handleError(e){this._console.error("ERROR",e)}},qx=new R("",{providedIn:"root",factory:()=>{let n=T(Ce),e=T(kn);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function B_(n,e){return pv(n,e)}function Kx(n){return pv(hv,n)}var y0=(B_.required=Kx,B_);function Yx(){return _0($t(),ae())}function _0(n,e){return new lr(Vn(n,e))}var lr=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=Yx}return n})();function Qx(n){return typeof n=="function"&&n[bt]!==void 0}function F(n,e){let t=Cd(n,e?.equal),r=t[bt];return t.set=i=>Os(r,i),t.update=i=>Id(r,i),t.asReadonly=Zx.bind(t),t}function Zx(){let n=this[bt];if(n.readonlyFn===void 0){let e=()=>this();e[bt]=n,n.readonlyFn=e}return n.readonlyFn}function v0(n){return Qx(n)&&typeof n.set=="function"}function E0(n){return(n.flags&128)===128}var w0=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(w0||{}),b0=new Map,Jx=0;function Xx(){return Jx++}function eA(n){b0.set(n[Hl],n)}function _f(n){b0.delete(n[Hl])}var H_="__ngContext__";function eo(n,e){or(e)?(n[H_]=e[Hl],eA(e)):n[H_]=e}function C0(n){return D0(n[Gs])}function I0(n){return D0(n[Bt])}function D0(n){for(;n!==null&&!Qr(n);)n=n[Bt];return n}var vf;function S0(n){vf=n}function T0(){if(vf!==void 0)return vf;if(typeof document<"u")return document;throw new I(210,!1)}var vh=new R("",{providedIn:"root",factory:()=>tA}),tA="ng",Eh=new R(""),to=new R("",{providedIn:"platform",factory:()=>"unknown"});var wh=new R(""),bh=new R("",{providedIn:"root",factory:()=>T0().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var nA="h",rA="b";var x0=!1,iA=new R("",{providedIn:"root",factory:()=>x0});var A0=function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n}(A0||{}),Kl=new R(""),$_=new Set;function qi(n){$_.has(n)||($_.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var M0=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=sA}return n})();function sA(){return new M0(ae(),$t())}var oA=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=q({token:n,providedIn:"root",factory:()=>new n})}return n})();var aA=(n,e,t,r)=>{};function lA(n,e,t,r){aA(n,e,t,r)}var cA=()=>null;function N0(n,e,t=!1){return cA(n,e,t)}function R0(n,e){let t=n.contentQueries;if(t!==null){let r=G(null);try{for(let i=0;i<t.length;i+=2){let s=t[i],o=t[i+1];if(o!==-1){let a=n.data[o];Yv(s),a.contentQueries(2,e[o],o)}}}finally{G(r)}}}function Ef(n,e,t){Yv(0);let r=G(null);try{e(n,t)}finally{G(r)}}function k0(n,e,t){if(Rv(e)){let r=G(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=n.data[o];if(a.contentQueries){let l=t[o];a.contentQueries(1,l,o)}}}finally{G(r)}}}var an=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(an||{});var ol;function uA(){if(ol===void 0&&(ol=null,nn.trustedTypes))try{ol=nn.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return ol}function Yl(n){return uA()?.createHTML(n)||n}var al;function dA(){if(al===void 0&&(al=null,nn.trustedTypes))try{al=nn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return al}function z_(n){return dA()?.createHTML(n)||n}var Pn=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${dv})`}},wf=class extends Pn{getTypeName(){return"HTML"}},bf=class extends Pn{getTypeName(){return"Style"}},Cf=class extends Pn{getTypeName(){return"Script"}},If=class extends Pn{getTypeName(){return"URL"}},Df=class extends Pn{getTypeName(){return"ResourceURL"}};function jn(n){return n instanceof Pn?n.changingThisBreaksApplicationSecurity:n}function Zr(n,e){let t=fA(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${dv})`)}return t===e}function fA(n){return n instanceof Pn&&n.getTypeName()||null}function P0(n){return new wf(n)}function O0(n){return new bf(n)}function F0(n){return new Cf(n)}function L0(n){return new If(n)}function V0(n){return new Df(n)}function hA(n){let e=new Tf(n);return pA()?new Sf(e):e}var Sf=class{inertDocumentHelper;constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{let t=new window.DOMParser().parseFromString(Yl(e),"text/html").body;return t===null?this.inertDocumentHelper.getInertBodyElement(e):(t.firstChild?.remove(),t)}catch{return null}}},Tf=class{defaultDoc;inertDocument;constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){let t=this.inertDocument.createElement("template");return t.innerHTML=Yl(e),t}};function pA(){try{return!!new window.DOMParser().parseFromString(Yl(""),"text/html")}catch{return!1}}var mA=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Ch(n){return n=String(n),n.match(mA)?n:"unsafe:"+n}function Un(n){let e={};for(let t of n.split(","))e[t]=!0;return e}function no(...n){let e={};for(let t of n)for(let r in t)t.hasOwnProperty(r)&&(e[r]=!0);return e}var j0=Un("area,br,col,hr,img,wbr"),U0=Un("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),B0=Un("rp,rt"),gA=no(B0,U0),yA=no(U0,Un("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),_A=no(B0,Un("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),W_=no(j0,yA,_A,gA),H0=Un("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),vA=Un("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),EA=Un("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),wA=no(H0,vA,EA),bA=Un("script,style,template"),xf=class{sanitizedSomething=!1;buf=[];sanitizeChildren(e){let t=e.firstChild,r=!0,i=[];for(;t;){if(t.nodeType===Node.ELEMENT_NODE?r=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,r&&t.firstChild){i.push(t),t=DA(t);continue}for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let s=IA(t);if(s){t=s;break}t=i.pop()}}return this.buf.join("")}startElement(e){let t=G_(e).toLowerCase();if(!W_.hasOwnProperty(t))return this.sanitizedSomething=!0,!bA.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);let r=e.attributes;for(let i=0;i<r.length;i++){let s=r.item(i),o=s.name,a=o.toLowerCase();if(!wA.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let l=s.value;H0[a]&&(l=Ch(l)),this.buf.push(" ",o,'="',q_(l),'"')}return this.buf.push(">"),!0}endElement(e){let t=G_(e).toLowerCase();W_.hasOwnProperty(t)&&!j0.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(q_(e))}};function CA(n,e){return(n.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function IA(n){let e=n.nextSibling;if(e&&n!==e.previousSibling)throw $0(e);return e}function DA(n){let e=n.firstChild;if(e&&CA(n,e))throw $0(e);return e}function G_(n){let e=n.nodeName;return typeof e=="string"?e:"FORM"}function $0(n){return new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`)}var SA=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,TA=/([^\#-~ |!])/g;function q_(n){return n.replace(/&/g,"&amp;").replace(SA,function(e){let t=e.charCodeAt(0),r=e.charCodeAt(1);return"&#"+((t-55296)*1024+(r-56320)+65536)+";"}).replace(TA,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var ll;function Ih(n,e){let t=null;try{ll=ll||hA(n);let r=e?String(e):"";t=ll.getInertBodyElement(r);let i=5,s=r;do{if(i===0)throw new Error("Failed to sanitize html because the input is unstable");i--,r=s,s=t.innerHTML,t=ll.getInertBodyElement(r)}while(r!==s);let a=new xf().sanitizeChildren(K_(t)||t);return Yl(a)}finally{if(t){let r=K_(t)||t;for(;r.firstChild;)r.firstChild.remove()}}}function K_(n){return"content"in n&&xA(n)?n.content:null}function xA(n){return n.nodeType===Node.ELEMENT_NODE&&n.nodeName==="TEMPLATE"}function AA(n,e){return n.createText(e)}function MA(n,e,t){n.setValue(e,t)}function z0(n,e,t){return n.createElement(e,t)}function Af(n,e,t,r,i){n.insertBefore(e,t,r,i)}function W0(n,e,t){n.appendChild(e,t)}function Y_(n,e,t,r,i){r!==null?Af(n,e,t,r,i):W0(n,e,t)}function NA(n,e,t){n.removeChild(null,e,t)}function RA(n,e,t){n.setAttribute(e,"style",t)}function kA(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function G0(n,e,t){let{mergedAttrs:r,classes:i,styles:s}=t;r!==null&&Dx(n,e,r),i!==null&&kA(n,e,i),s!==null&&RA(n,e,s)}var Bn=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(Bn||{});function Jr(n){let e=PA();return e?z_(e.sanitize(Bn.HTML,n)||""):Zr(n,"HTML")?z_(jn(n)):Ih(T0(),xn(n))}function PA(){let n=ae();return n&&n[Mn].sanitizer}function OA(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}var q0="ng-template";function FA(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&OA(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(Dh(n))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===t)return!0}return!1}function Dh(n){return n.type===4&&n.value!==q0}function LA(n,e,t){let r=n.type===4&&!t?q0:n.value;return e===r}function VA(n,e,t){let r=4,i=n.attrs,s=i!==null?BA(i):0,o=!1;for(let a=0;a<e.length;a++){let l=e[a];if(typeof l=="number"){if(!o&&!jt(r)&&!jt(l))return!1;if(o&&jt(l))continue;o=!1,r=l|r&1;continue}if(!o)if(r&4){if(r=2|r&1,l!==""&&!LA(n,l,t)||l===""&&e.length===1){if(jt(r))return!1;o=!0}}else if(r&8){if(i===null||!FA(n,i,l,t)){if(jt(r))return!1;o=!0}}else{let c=e[++a],u=jA(l,i,Dh(n),t);if(u===-1){if(jt(r))return!1;o=!0;continue}if(c!==""){let d;if(u>s?d="":d=i[u+1].toLowerCase(),r&2&&c!==d){if(jt(r))return!1;o=!0}}}}return jt(r)||o}function jt(n){return(n&1)===0}function jA(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){let o=e[i];if(o===n)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return HA(e,n)}function UA(n,e,t=!1){for(let r=0;r<e.length;r++)if(VA(n,e[r],t))return!0;return!1}function BA(n){for(let e=0;e<n.length;e++){let t=n[e];if(Sx(t))return e}return n.length}function HA(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function Q_(n,e){return n?":not("+e.trim()+")":e}function $A(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if(typeof o=="string")if(r&2){let a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!jt(o)&&(e+=Q_(s,i),i=""),r=o,s=s||!jt(r);t++}return i!==""&&(e+=Q_(s,i)),e}function zA(n){return n.map($A).join(",")}function WA(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let s=n[r];if(typeof s=="string")i===2?s!==""&&e.push(s,n[++r]):i===8&&t.push(s);else{if(!jt(i))break;i=s}r++}return t.length&&e.push(1,...t),e}var ut={};function Sh(n,e,t,r,i,s,o,a,l,c,u){let d=He+r,f=d+i,h=GA(d,f),y=typeof c=="function"?c():c;return h[ee]={type:n,blueprint:h,template:t,queries:null,viewQuery:a,declTNode:e,data:h.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:l,consts:y,incompleteFirstPass:!1,ssrId:u}}function GA(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:ut);return t}function qA(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=Sh(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Th(n,e,t,r,i,s,o,a,l,c,u){let d=e.blueprint.slice();return d[Ln]=i,d[V]=r|4|128|8|64|1024,(c!==null||n&&n[V]&2048)&&(d[V]|=2048),Vv(d),d[St]=d[Bi]=n,d[Ne]=t,d[Mn]=o||n&&n[Mn],d[Re]=a||n&&n[Re],d[Oi]=l||n&&n[Oi]||null,d[cn]=s,d[Hl]=Xx(),d[Ws]=u,d[Mv]=c,d[Ht]=e.type==2?n[Ht]:d,d}function KA(n,e,t){let r=Vn(e,n),i=qA(t),s=n[Mn].rendererFactory,o=Q0(n,Th(n,i,null,K0(t),r,e,null,s.createRenderer(r,t),null,null,null));return n[e.index]=o}function K0(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function Y0(n,e,t,r){if(t===0)return-1;let i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function Q0(n,e){return n[Gs]?n[N_][Bt]=e:n[Gs]=e,n[N_]=e,e}function v(n=1){Z0($e(),ae(),un()+n,!1)}function Z0(n,e,t,r){if(!r)if((e[V]&3)===3){let s=n.preOrderCheckHooks;s!==null&&dl(e,s,t)}else{let s=n.preOrderHooks;s!==null&&fl(e,s,0,t)}Gr(t)}var Ql=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(Ql||{});function Mf(n,e,t,r){let i=G(null);try{let[s,o,a]=n.inputs[t],l=null;(o&Ql.SignalBased)!==0&&(l=e[s][bt]),l!==null&&l.transformFn!==void 0?r=l.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,l,r,t,s):kv(e,l,s,r)}finally{G(i)}}function J0(n,e,t,r,i){let s=un(),o=r&2;try{Gr(-1),o&&e.length>He&&Z0(n,e,He,!1),pe(o?2:0,i),t(r,i)}finally{Gr(s),pe(o?3:1,i)}}function xh(n,e,t){eM(n,e,t),(t.flags&64)===64&&tM(n,e,t)}function X0(n,e,t=Vn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?t(e,n):n[o];n[i++]=a}}}function YA(n,e,t,r){let s=r.get(iA,x0)||t===an.ShadowDom,o=n.selectRootElement(e,s);return QA(o),o}function QA(n){ZA(n)}var ZA=()=>null;function JA(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function eE(n,e,t,r,i,s,o,a){if(!a&&Ah(e,n,t,r,i)){Hi(e)&&XA(t,e.index);return}if(e.type&3){let l=Vn(e,t);r=JA(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(l,r,i)}else e.type&12}function XA(n,e){let t=on(e,n);t[V]&16||(t[V]|=64)}function eM(n,e,t){let r=t.directiveStart,i=t.directiveEnd;Hi(t)&&KA(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||Il(t,e);let s=t.initialInputs;for(let o=r;o<i;o++){let a=n.data[o],l=Dl(e,n,o,t);if(eo(l,e),s!==null&&sM(e,o-r,l,a,t,s),sn(a)){let c=on(t.index,e);c[Ne]=Dl(e,n,o,t)}}}function tM(n,e,t){let r=t.directiveStart,i=t.directiveEnd,s=t.index,o=gx();try{Gr(s);for(let a=r;a<i;a++){let l=n.data[a],c=e[a];uf(a),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&nM(l,c)}}finally{Gr(-1),uf(o)}}function nM(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function tE(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let s=t[i];UA(e,s.selectors,!1)&&(r??=[],sn(s)?r.unshift(s):r.push(s))}return r}function rM(n,e,t,r,i,s){let o=Vn(n,e);iM(e[Re],o,s,n.value,t,r,i)}function iM(n,e,t,r,i,s,o){if(s==null)n.removeAttribute(e,i,t);else{let a=o==null?xn(s):o(s,r||"",i);n.setAttribute(e,i,a,t)}}function sM(n,e,t,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;a+=2){let l=o[a],c=o[a+1];Mf(r,t,l,c)}}function oM(n,e){let t=n[Oi],r=t?t.get(kn,null):null;r&&r.handleError(e)}function Ah(n,e,t,r,i){let s=n.inputs?.[r],o=n.hostDirectiveInputs?.[r],a=!1;if(o)for(let l=0;l<o.length;l+=2){let c=o[l],u=o[l+1],d=e.data[c];Mf(d,t[c],u,i),a=!0}if(s)for(let l of s){let c=t[l],u=e.data[l];Mf(u,c,r,i),a=!0}return a}function aM(n,e){let t=on(e,n),r=t[ee];lM(r,t);let i=t[Ln];i!==null&&t[Ws]===null&&(t[Ws]=N0(i,t[Oi])),pe(18),Mh(r,t,t[Ne]),pe(19,t[Ne])}function lM(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function Mh(n,e,t){dh(e);try{let r=n.viewQuery;r!==null&&Ef(1,r,t);let i=n.template;i!==null&&J0(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Li]?.finishViewCreation(n),n.staticContentQueries&&R0(n,e),n.staticViewQueries&&Ef(2,n.viewQuery,t);let s=n.components;s!==null&&cM(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[V]&=-5,fh()}}function cM(n,e){for(let t=0;t<e.length;t++)aM(n,e[t])}function Nh(n,e,t,r){let i=G(null);try{let s=e.tView,a=n[V]&4096?4096:16,l=Th(n,s,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),c=n[e.index];l[Fi]=c;let u=n[Li];return u!==null&&(l[Li]=u.createEmbeddedView(s)),Mh(s,l,t),l}finally{G(i)}}function Rh(n,e){return!e||e.firstChild===null||E0(n)}var uM;function kh(n,e){return uM(n,e)}var On=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(On||{});function nE(n){return(n.flags&32)===32}function Ri(n,e,t,r,i){if(r!=null){let s,o=!1;Qr(r)?s=r:or(r)&&(o=!0,r=r[Ln]);let a=Nn(r);n===0&&t!==null?i==null?W0(e,t,a):Af(e,t,a,i||null,!0):n===1&&t!==null?Af(e,t,a,i||null,!0):n===2?NA(e,a,o):n===3&&e.destroyNode(a),s!=null&&bM(e,n,s,t,i)}}function dM(n,e){rE(n,e),e[Ln]=null,e[cn]=null}function fM(n,e,t,r,i,s){r[Ln]=i,r[cn]=e,Zl(n,r,t,1,i,s)}function rE(n,e){e[Mn].changeDetectionScheduler?.notify(9),Zl(n,e,e[Re],2,null,null)}function hM(n){let e=n[Gs];if(!e)return Wd(n[ee],n);for(;e;){let t=null;if(or(e))t=e[Gs];else{let r=e[ct];r&&(t=r)}if(!t){for(;e&&!e[Bt]&&e!==n;)or(e)&&Wd(e[ee],e),e=e[St];e===null&&(e=n),or(e)&&Wd(e[ee],e),t=e&&e[Bt]}e=t}}function Ph(n,e){let t=n[El],r=t.indexOf(e);t.splice(r,1)}function Oh(n,e){if($i(e))return;let t=e[Re];t.destroyNode&&Zl(n,e,t,3,null,null),hM(e)}function Wd(n,e){if($i(e))return;let t=G(null);try{e[V]&=-129,e[V]|=256,e[Dt]&&Ps(e[Dt]),mM(n,e),pM(n,e),e[ee].type===1&&e[Re].destroy();let r=e[Fi];if(r!==null&&Qr(e[St])){r!==e[St]&&Ph(r,e);let i=e[Li];i!==null&&i.detachView(n)}_f(e)}finally{G(t)}}function pM(n,e){let t=n.cleanup,r=e[vl];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let a=t[o+3];a>=0?r[a]():r[-a].unsubscribe(),o+=2}else{let a=r[t[o+1]];t[o].call(a)}r!==null&&(e[vl]=null);let i=e[sr];if(i!==null){e[sr]=null;for(let o=0;o<i.length;o++){let a=i[o];a()}}let s=e[zr];if(s!==null){e[zr]=null;for(let o of s)o.destroy()}}function mM(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof qr)){let s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],l=s[o+1];pe(4,a,l);try{l.call(a)}finally{pe(5,a,l)}}else{pe(4,i,s);try{s.call(i)}finally{pe(5,i,s)}}}}}function gM(n,e,t){return yM(n,e.parent,t)}function yM(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[Ln];if(Hi(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===an.None||i===an.Emulated)return null}return Vn(r,t)}function _M(n,e,t){return EM(n,e,t)}function vM(n,e,t){return n.type&40?Vn(n,t):null}var EM=vM,Z_;function Fh(n,e,t,r){let i=gM(n,r,e),s=e[Re],o=r.parent||e[cn],a=_M(o,r,e);if(i!=null)if(Array.isArray(t))for(let l=0;l<t.length;l++)Y_(s,i,t[l],a,!1);else Y_(s,i,t,a,!1);Z_!==void 0&&Z_(s,r,e,t,i)}function Bs(n,e){if(e!==null){let t=e.type;if(t&3)return Vn(e,n);if(t&4)return Nf(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return Bs(n,r);{let i=n[e.index];return Qr(i)?Nf(-1,i):Nn(i)}}else{if(t&128)return Bs(n,e.next);if(t&32)return kh(e,n)()||Nn(n[e.index]);{let r=iE(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Wr(n[Ht]);return Bs(i,r)}else return Bs(n,e.next)}}}return null}function iE(n,e){if(e!==null){let r=n[Ht][cn],i=e.projection;return r.projection[i]}return null}function Nf(n,e){let t=ct+n+1;if(t<e.length){let r=e[t],i=r[ee].firstChild;if(i!==null)return Bs(r,i)}return e[qs]}function Lh(n,e,t,r,i,s,o){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],l=t.type;if(o&&e===0&&(a&&eo(Nn(a),r),t.flags|=2),!nE(t))if(l&8)Lh(n,e,t.child,r,i,s,!1),Ri(e,n,i,a,s);else if(l&32){let c=kh(t,r),u;for(;u=c();)Ri(e,n,i,u,s);Ri(e,n,i,a,s)}else l&16?wM(n,e,r,t,i,s):Ri(e,n,i,a,s);t=o?t.projectionNext:t.next}}function Zl(n,e,t,r,i,s){Lh(t,r,n.firstChild,e,i,s,!1)}function wM(n,e,t,r,i,s){let o=t[Ht],l=o[cn].projection[r.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++){let u=l[c];Ri(e,n,i,u,s)}else{let c=l,u=o[St];E0(r)&&(c.flags|=128),Lh(n,e,c,u,i,s,!0)}}function bM(n,e,t,r,i){let s=t[qs],o=Nn(t);s!==o&&Ri(e,n,r,s,i);for(let a=ct;a<t.length;a++){let l=t[a];Zl(l[ee],l,n,e,r,s)}}function CM(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=r.indexOf("-")===-1?void 0:On.DashCase;i==null?n.removeStyle(t,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=On.Important),n.setStyle(t,r,i,s))}}function Ml(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let s=e[t.index];s!==null&&r.push(Nn(s)),Qr(s)&&IM(s,r);let o=t.type;if(o&8)Ml(n,e,t.child,r);else if(o&32){let a=kh(t,e),l;for(;l=a();)r.push(l)}else if(o&16){let a=iE(e,t);if(Array.isArray(a))r.push(...a);else{let l=Wr(e[Ht]);Ml(l[ee],l,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function IM(n,e){for(let t=ct;t<n.length;t++){let r=n[t],i=r[ee].firstChild;i!==null&&Ml(r[ee],r,i,e)}n[qs]!==n[Ln]&&e.push(n[qs])}function sE(n){if(n[Hd]!==null){for(let e of n[Hd])e.impl.addSequence(e);n[Hd].length=0}}var oE=[];function DM(n){return n[Dt]??SM(n)}function SM(n){let e=oE.pop()??Object.create(xM);return e.lView=n,e}function TM(n){n.lView[Dt]!==n&&(n.lView=null,oE.push(n))}var xM=$(S({},Di),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{Js(n.lView)},consumerOnSignalRead(){this.lView[Dt]=this}});function AM(n){let e=n[Dt]??Object.create(MM);return e.lView=n,e}var MM=$(S({},Di),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=Wr(n.lView);for(;e&&!aE(e[ee]);)e=Wr(e);e&&jv(e)},consumerOnSignalRead(){this.lView[Dt]=this}});function aE(n){return n.type!==2}function lE(n){if(n[zr]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[zr])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[V]&8192)}}var NM=100;function cE(n,e=!0,t=0){let i=n[Mn].rendererFactory,s=!1;s||i.begin?.();try{RM(n,t)}catch(o){throw e&&oM(n,o),o}finally{s||i.end?.()}}function RM(n,e){let t=Gv();try{bl(!0),Rf(n,e);let r=0;for(;zl(n);){if(r===NM)throw new I(103,!1);r++,Rf(n,1)}}finally{bl(t)}}function kM(n,e,t,r){if($i(e))return;let i=e[V],s=!1,o=!1;dh(e);let a=!0,l=null,c=null;s||(aE(n)?(c=DM(e),l=ks(c)):yd()===null?(a=!1,c=AM(e),l=ks(c)):e[Dt]&&(Ps(e[Dt]),e[Dt]=null));try{Vv(e),hx(n.bindingStartIndex),t!==null&&J0(n,e,t,2,r);let u=(i&3)===3;if(!s)if(u){let h=n.preOrderCheckHooks;h!==null&&dl(e,h,null)}else{let h=n.preOrderHooks;h!==null&&fl(e,h,0,null),$d(e,0)}if(o||PM(e),lE(e),uE(e,0),n.contentQueries!==null&&R0(n,e),!s)if(u){let h=n.contentCheckHooks;h!==null&&dl(e,h)}else{let h=n.contentHooks;h!==null&&fl(e,h,1),$d(e,1)}FM(n,e);let d=n.components;d!==null&&fE(e,d,0);let f=n.viewQuery;if(f!==null&&Ef(2,f,r),!s)if(u){let h=n.viewCheckHooks;h!==null&&dl(e,h)}else{let h=n.viewHooks;h!==null&&fl(e,h,2),$d(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Bd]){for(let h of e[Bd])h();e[Bd]=null}s||(sE(e),e[V]&=-73)}catch(u){throw s||Js(e),u}finally{c!==null&&(Pa(c,l),a&&TM(c)),fh()}}function uE(n,e){for(let t=C0(n);t!==null;t=I0(t))for(let r=ct;r<t.length;r++){let i=t[r];dE(i,e)}}function PM(n){for(let e=C0(n);e!==null;e=I0(e)){if(!(e[V]&2))continue;let t=e[El];for(let r=0;r<t.length;r++){let i=t[r];jv(i)}}}function OM(n,e,t){pe(18);let r=on(e,n);dE(r,t),pe(19,r[Ne])}function dE(n,e){uh(n)&&Rf(n,e)}function Rf(n,e){let r=n[ee],i=n[V],s=n[Dt],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&Oa(s)),o||=!1,s&&(s.dirty=!1),n[V]&=-9217,o)kM(r,n,r.template,n[Ne]);else if(i&8192){lE(n),uE(n,1);let a=r.components;a!==null&&fE(n,a,1),sE(n)}}function fE(n,e,t){for(let r=0;r<e.length;r++)OM(n,e[r],t)}function FM(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)Gr(~i);else{let s=i,o=t[++r],a=t[++r];mx(o,s);let l=e[s];pe(24,l),a(2,l),pe(25,l)}}}finally{Gr(-1)}}function Vh(n,e){let t=Gv()?64:1088;for(n[Mn].changeDetectionScheduler?.notify(e);n;){n[V]|=t;let r=Wr(n);if(wl(n)&&!r)return n;n=r}return null}function LM(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function hE(n,e){let t=ct+e;if(t<n.length)return n[t]}function jh(n,e,t,r=!0){let i=e[ee];if(VM(i,e,n,t),r){let o=Nf(t,n),a=e[Re],l=a.parentNode(n[qs]);l!==null&&fM(i,n[cn],a,e,l,o)}let s=e[Ws];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function pE(n,e){let t=Uh(n,e);return t!==void 0&&Oh(t[ee],t),t}function Uh(n,e){if(n.length<=ct)return;let t=ct+e,r=n[t];if(r){let i=r[Fi];i!==null&&i!==n&&Ph(i,r),e>0&&(n[t-1][Bt]=r[Bt]);let s=bv(n,ct+e);dM(r[ee],r);let o=s[Li];o!==null&&o.detachView(s[ee]),r[St]=null,r[Bt]=null,r[V]&=-129}return r}function VM(n,e,t,r){let i=ct+r,s=t.length;r>0&&(t[i-1][Bt]=e),r<s-ct?(e[Bt]=t[i],kT(t,ct+r,e)):(t.push(e),e[Bt]=null),e[St]=t;let o=e[Fi];o!==null&&t!==o&&mE(o,e);let a=e[Li];a!==null&&a.insertView(n),lf(e),e[V]|=128}function mE(n,e){let t=n[El],r=e[St];if(or(r))n[V]|=2;else{let i=r[St][Ht];e[Ht]!==i&&(n[V]|=2)}t===null?n[El]=[e]:t.push(e)}var kf=class{_lView;_cdRefInjectingView;notifyErrorHandler;_appRef=null;_attachedToViewContainer=!1;get rootNodes(){let e=this._lView,t=e[ee];return Ml(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r}get context(){return this._lView[Ne]}set context(e){this._lView[Ne]=e}get destroyed(){return $i(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[St];if(Qr(e)){let t=e[YT],r=t?t.indexOf(this):-1;r>-1&&(Uh(e,r),bv(t,r))}this._attachedToViewContainer=!1}Oh(this._lView[ee],this._lView)}onDestroy(e){Uv(this._lView,e)}markForCheck(){Vh(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[V]&=-129}reattach(){lf(this._lView),this._lView[V]|=128}detectChanges(){this._lView[V]|=1024,cE(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new I(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=wl(this._lView),t=this._lView[Fi];t!==null&&!e&&Ph(t,this._lView),rE(this._lView[ee],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new I(902,!1);this._appRef=e;let t=wl(this._lView),r=this._lView[Fi];r!==null&&!t&&mE(r,this._lView),lf(this._lView)}};function Bh(n,e,t,r,i){let s=n.data[e];if(s===null)s=jM(n,e,t,r,i),px()&&(s.flags|=32);else if(s.type&64){s.type=t,s.value=r,s.attrs=i;let o=ux();s.injectorIndex=o===null?-1:o.injectorIndex}return Xs(s,!0),s}function jM(n,e,t,r,i){let s=zv(),o=Wv(),a=o?s:s&&s.parent,l=n.data[e]=BM(n,a,t,e,r,i);return UM(n,l,s,o),l}function UM(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function BM(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,a=0;return ax()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var i5=new RegExp(`^(\\d+)*(${rA}|${nA})*(.*)`);var HM=()=>null;function Hh(n,e){return HM(n,e)}var $M=class{},gE=class{},Pf=class{resolveComponentFactory(e){throw Error(`No component factory found for ${It(e)}.`)}},$h=class{static NULL=new Pf},ar=class{},Xr=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>zM()}return n})();function zM(){let n=ae(),e=$t(),t=on(e.index,n);return(or(t)?t:n)[Re]}var WM=(()=>{class n{static \u0275prov=q({token:n,providedIn:"root",factory:()=>null})}return n})();var Gd={},Of=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=Vl(r);let i=this.injector.get(e,Gd,r);return i!==Gd||t===Gd?i:this.parentInjector.get(e,t,r)}};function J_(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=ef(i,a);else if(s==2){let l=a,c=e[++o];r=ef(r,l+": "+c+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function re(n,e=Q.Default){let t=ae();if(t===null)return j(n,e);let r=$t();return u0(r,t,Qe(n),e)}function yE(n,e,t,r,i){let s=r===null?null:{"":-1},o=i(n,t);if(o!==null){let a,l=null,c=null,u=qM(o);u===null?a=o:[a,l,c]=u,QM(n,e,t,a,s,l,c)}s!==null&&r!==null&&GM(t,r,s)}function GM(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let s=t[e[i+1]];if(s==null)throw new I(-301,!1);r.push(e[i],s)}}function qM(n){let e=null,t=!1;for(let o=0;o<n.length;o++){let a=n[o];if(o===0&&sn(a)&&(e=a),a.findHostDirectiveDefs!==null){t=!0;break}}if(!t)return null;let r=null,i=null,s=null;for(let o of n)o.findHostDirectiveDefs!==null&&(r??=[],i??=new Map,s??=new Map,KM(o,r,s,i)),o===e&&(r??=[],r.push(o));return r!==null?(r.push(...e===null?n:n.slice(1)),[r,i,s]):null}function KM(n,e,t,r){let i=e.length;n.findHostDirectiveDefs(n,e,r),t.set(n,[i,e.length-1])}function YM(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function QM(n,e,t,r,i,s,o){let a=r.length,l=!1;for(let f=0;f<a;f++){let h=r[f];!l&&sn(h)&&(l=!0,YM(n,t,f)),pf(Il(t,e),n,h.type)}n1(t,n.data.length,a);for(let f=0;f<a;f++){let h=r[f];h.providersResolver&&h.providersResolver(h)}let c=!1,u=!1,d=Y0(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let f=0;f<a;f++){let h=r[f];if(t.mergedAttrs=Ks(t.mergedAttrs,h.hostAttrs),JM(n,t,e,d,h),t1(d,h,i),o!==null&&o.has(h)){let[E,b]=o.get(h);t.directiveToIndex.set(h.type,[d,E+t.directiveStart,b+t.directiveStart])}else(s===null||!s.has(h))&&t.directiveToIndex.set(h.type,d);h.contentQueries!==null&&(t.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(t.flags|=64);let y=h.type.prototype;!c&&(y.ngOnChanges||y.ngOnInit||y.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),c=!0),!u&&(y.ngOnChanges||y.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),u=!0),d++}ZM(n,t,s)}function ZM(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))X_(0,e,i,r),X_(1,e,i,r),tv(e,r,!1);else{let s=t.get(i);ev(0,e,s,r),ev(1,e,s,r),tv(e,r,!0)}}}function X_(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let s in i)if(i.hasOwnProperty(s)){let o;n===0?o=e.inputs??={}:o=e.outputs??={},o[s]??=[],o[s].push(r),_E(e,s)}}function ev(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let s in i)if(i.hasOwnProperty(s)){let o=i[s],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[o]??=[],a[o].push(r,s),_E(e,o)}}function _E(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function tv(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:s}=n;if(r===null||!t&&i===null||t&&s===null||Dh(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let o=null,a=0;for(;a<r.length;){let l=r[a];if(l===0){a+=4;continue}else if(l===5){a+=2;continue}else if(typeof l=="number")break;if(!t&&i.hasOwnProperty(l)){let c=i[l];for(let u of c)if(u===e){o??=[],o.push(l,r[a+1]);break}}else if(t&&s.hasOwnProperty(l)){let c=s[l];for(let u=0;u<c.length;u+=2)if(c[u]===e){o??=[],o.push(c[u+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(o)}function JM(n,e,t,r,i){n.data[r]=i;let s=i.factory||(i.factory=Hr(i.type,!0)),o=new qr(s,sn(i),re);n.blueprint[r]=o,t[r]=o,XM(n,e,r,Y0(n,t,i.hostVars,ut),i)}function XM(n,e,t,r,i){let s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;o===null&&(o=n.hostBindingOpCodes=[]);let a=~e.index;e1(o)!=a&&o.push(a),o.push(t,r,s)}}function e1(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function t1(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;sn(e)&&(t[""]=n)}}function n1(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function vE(n,e,t,r,i,s,o,a){let l=e.consts,c=Vi(l,o),u=Bh(e,n,2,r,c);return s&&yE(e,t,u,Vi(l,a),i),u.mergedAttrs=Ks(u.mergedAttrs,u.attrs),u.attrs!==null&&J_(u,u.attrs,!1),u.mergedAttrs!==null&&J_(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function EE(n,e){n0(n,e),Rv(e)&&n.queries.elementEnd(e)}var Ff=class extends $h{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=ih(e);return new Lf(t,this.ngModule)}};function r1(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],s={propName:t,templateName:e,isSignal:(r&Ql.SignalBased)!==0};return i&&(s.transform=i),s})}function i1(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function s1(n,e,t){let r=e instanceof An?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new Of(t,r):t}function o1(n){let e=n.get(ar,null);if(e===null)throw new I(407,!1);let t=n.get(WM,null),r=n.get(Kr,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r}}function a1(n,e){let t=(n.selectors[0][0]||"div").toLowerCase();return z0(e,t,t==="svg"?XT:t==="math"?ex:null)}var Lf=class extends gE{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=r1(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=i1(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=zA(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i){pe(22);let s=G(null);try{let o=this.componentDef,a=r?["ng-version","19.2.18"]:WA(this.componentDef.selectors[0]),l=Sh(0,null,null,1,0,null,null,null,null,[a],null),c=s1(o,i||this.ngModule,e),u=o1(c),d=u.rendererFactory.createRenderer(null,o),f=r?YA(d,r,o.encapsulation,c):a1(o,d),h=Th(null,l,null,512|K0(o),null,null,u,d,c,null,N0(f,c,!0));h[He]=f,dh(h);let y=null;try{let E=vE(He,l,h,"#host",()=>[this.componentDef],!0,0);f&&(G0(d,f,E),eo(f,h)),xh(l,h,E),k0(l,E,h),EE(l,E),t!==void 0&&l1(E,this.ngContentSelectors,t),y=on(E.index,h),h[Ne]=y[Ne],Mh(l,h,null)}catch(E){throw y!==null&&_f(y),_f(h),E}finally{pe(23),fh()}return new Vf(this.componentType,h)}finally{G(s)}}},Vf=class extends $M{_rootLView;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t){super(),this._rootLView=t,this._tNode=lh(t[ee],He),this.location=_0(this._tNode,t),this.instance=on(this._tNode.index,t)[Ne],this.hostView=this.changeDetectorRef=new kf(t,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,s=Ah(r,i[ee],i,e,t);this.previousInputValues.set(e,t);let o=on(r.index,i);Vh(o,1)}get injector(){return new Sl(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function l1(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let s=t[i];r.push(s!=null&&s.length?Array.from(s):null)}}var c1=()=>!1;function u1(n,e,t){return c1(n,e,t)}var Nl=class{};var Rl=class extends Nl{injector;componentFactoryResolver=new Ff(this);instance=null;constructor(e){super();let t=new zs([...e.providers,{provide:Nl,useValue:this},{provide:$h,useValue:this.componentFactoryResolver}],e.parent||oh(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function d1(n,e,t=null){return new Rl({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var f1=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=Dv(!1,t.type),i=r.length>0?d1([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=q({token:n,providedIn:"environment",factory:()=>new n(j(An))})}return n})();function Oe(n){return Ll(()=>{let e=wE(n),t=$(S({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===w0.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(f1).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||an.Emulated,styles:n.styles||lt,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&qi("NgStandalone"),bE(t);let r=n.dependencies;return t.directiveDefs=nv(r,!1),t.pipeDefs=nv(r,!0),t.id=y1(t),t})}function h1(n){return ih(n)||FT(n)}function p1(n){return n!==null}function Hn(n){return Ll(()=>({type:n.type,bootstrap:n.bootstrap||lt,declarations:n.declarations||lt,imports:n.imports||lt,exports:n.exports||lt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function m1(n,e){if(n==null)return $r;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],s,o,a,l;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s,l=i[3]||null):(s=i,o=i,a=Ql.None,l=null),t[s]=[r,a,l],e[s]=o}return t}function g1(n){if(n==null)return $r;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function Fe(n){return Ll(()=>{let e=wE(n);return bE(e),e})}function zh(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function wE(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||$r,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||lt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:m1(n.inputs,e),outputs:g1(n.outputs),debugInfo:null}}function bE(n){n.features?.forEach(e=>e(n))}function nv(n,e){if(!n)return null;let t=e?LT:h1;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(p1)}function y1(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let s of r.join("|"))e=Math.imul(31,e)+s.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function _1(n){return Object.getPrototypeOf(n.prototype).constructor}function xt(n){let e=_1(n.type),t=!0,r=[n];for(;e;){let i;if(sn(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new I(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let o=n;o.inputs=qd(n.inputs),o.declaredInputs=qd(n.declaredInputs),o.outputs=qd(n.outputs);let a=i.hostBindings;a&&C1(n,a);let l=i.viewQuery,c=i.contentQueries;if(l&&w1(n,l),c&&b1(n,c),v1(n,i),gT(n.outputs,i.outputs),sn(i)&&i.data.animation){let u=n.data;u.animation=(u.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(n),a===xt&&(t=!1)}}e=Object.getPrototypeOf(e)}E1(r)}function v1(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function E1(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Ks(i.hostAttrs,t=Ks(t,i.hostAttrs))}}function qd(n){return n===$r?{}:n===lt?[]:n}function w1(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function b1(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,s)=>{e(r,i,s),t(r,i,s)}:n.contentQueries=e}function C1(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function CE(n,e,t){return n[e]=t}function Tt(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function Wh(n,e,t,r){let i=Tt(n,e,t);return Tt(n,e+1,r)||i}function I1(n,e,t,r,i){let s=Wh(n,e,t,r);return Tt(n,e+2,i)||s}function D1(n,e,t,r,i,s,o,a,l){let c=e.consts,u=Bh(e,n,4,o||null,a||null);$v()&&yE(e,t,u,Vi(c,l),tE),u.mergedAttrs=Ks(u.mergedAttrs,u.attrs),n0(e,u);let d=u.tView=Sh(2,u,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c,null);return e.queries!==null&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}function jf(n,e,t,r,i,s,o,a,l,c){let u=t+He,d=e.firstCreatePass?D1(u,e,n,r,i,s,o,a,l):e.data[u];Xs(d,!1);let f=S1(e,n,d,t);ph()&&Fh(e,n,f,d),eo(f,n);let h=LM(f,n,f,d);return n[u]=h,Q0(n,h),u1(h,d,n),ah(d)&&xh(e,n,d),l!=null&&X0(n,d,c),d}function ie(n,e,t,r,i,s,o,a){let l=ae(),c=$e(),u=Vi(c.consts,s);return jf(l,c,n,e,t,r,i,u,o,a),ie}var S1=T1;function T1(n,e,t,r){return mh(!0),e[Re].createComment("")}var IE=new R("");var DE=(()=>{class n{static \u0275prov=q({token:n,providedIn:"root",factory:()=>new Uf})}return n})(),Uf=class{queuedEffectCount=0;queues=new Map;schedule(e){this.enqueue(e)}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),this.queuedEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||(this.queuedEffectCount++,r.add(e))}flush(){for(;this.queuedEffectCount>0;)for(let[e,t]of this.queues)e===null?this.flushQueue(t):e.run(()=>this.flushQueue(t))}flushQueue(e){for(let t of e)e.delete(t),this.queuedEffectCount--,t.run()}};function ro(n){return!!n&&typeof n.then=="function"}function SE(n){return!!n&&typeof n.subscribe=="function"}var x1=new R("");var TE=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=T(x1,{optional:!0})??[];injector=T(Rn);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let s=Bl(this.injector,i);if(ro(s))t.push(s);else if(SE(s)){let o=new Promise((a,l)=>{s.subscribe({complete:a,error:l})});t.push(o)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),A1=new R("");function M1(){bd(()=>{throw new I(600,!1)})}function N1(n){return n.isBoundToModule}var R1=10;var ji=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=T(qx);afterRenderManager=T(oA);zonelessEnabled=T(ql);rootEffectScheduler=T(DE);dirtyFlags=0;tracingSnapshot=null;externalTestViews=new Set;afterTick=new Tn;get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];isStable=T(Gi).hasPendingTasks.pipe(ot(t=>!t));constructor(){T(Kl,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=T(An);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=Rn.NULL){pe(10);let s=t instanceof gE;if(!this._injector.get(TE).done){let h="";throw new I(405,h)}let a;s?a=t:a=this._injector.get($h).resolveComponentFactory(t),this.componentTypes.push(a.componentType);let l=N1(a)?void 0:this._injector.get(Nl),c=r||a.selector,u=a.create(i,[],c,l),d=u.location.nativeElement,f=u.injector.get(IE,null);return f?.registerApplication(d),u.onDestroy(()=>{this.detachView(u.hostView),hl(this.components,u),f?.unregisterApplication(d)}),this._loadComponent(u),pe(11,u),u}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){pe(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(A0.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new I(101,!1);let t=G(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,G(t),this.afterTick.next(),pe(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(ar,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<R1;)pe(14),this.synchronizeOnce(),pe(15)}synchronizeOnce(){if(this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush()),this.dirtyFlags&7){let t=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:r,notifyErrorHandler:i}of this.allViews)k1(r,i,t,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}else this._rendererFactory?.begin?.(),this._rendererFactory?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>zl(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;hl(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(A1,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>hl(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new I(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function hl(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function k1(n,e,t,r){if(!t&&!zl(n))return;cE(n,e,t&&!r?0:1)}function Jl(n,e,t,r){let i=ae(),s=zi();if(Tt(i,s,e)){let o=$e(),a=hh();rM(a,i,n,e,t,r)}return Jl}function P1(n,e,t,r){return Tt(n,zi(),t)?e+xn(t)+r:ut}function O1(n,e,t,r,i,s){let o=Kv(),a=Wh(n,o,t,i);return Wl(2),a?e+xn(t)+r+xn(i)+s:ut}function F1(n,e,t,r,i,s,o,a){let l=Kv(),c=I1(n,l,t,i,o);return Wl(3),c?e+xn(t)+r+xn(i)+s+xn(o)+a:ut}function cl(n,e){return n<<17|e<<2}function Yr(n){return n>>17&32767}function L1(n){return(n&2)==2}function V1(n,e){return n&131071|e<<17}function Bf(n){return n|2}function Ui(n){return(n&131068)>>2}function Kd(n,e){return n&-131069|e<<2}function j1(n){return(n&1)===1}function Hf(n){return n|1}function U1(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=Yr(o),l=Ui(o);n[r]=t;let c=!1,u;if(Array.isArray(t)){let d=t;u=d[1],(u===null||Zs(d,u)>0)&&(c=!0)}else u=t;if(i)if(l!==0){let f=Yr(n[a+1]);n[r+1]=cl(f,a),f!==0&&(n[f+1]=Kd(n[f+1],r)),n[a+1]=V1(n[a+1],r)}else n[r+1]=cl(a,0),a!==0&&(n[a+1]=Kd(n[a+1],r)),a=r;else n[r+1]=cl(l,0),a===0?a=r:n[l+1]=Kd(n[l+1],r),l=r;c&&(n[r+1]=Bf(n[r+1])),rv(n,u,r,!0),rv(n,u,r,!1),B1(e,u,n,r,s),o=cl(a,l),s?e.classBindings=o:e.styleBindings=o}function B1(n,e,t,r,i){let s=i?n.residualClasses:n.residualStyles;s!=null&&typeof e=="string"&&Zs(s,e)>=0&&(t[r+1]=Hf(t[r+1]))}function rv(n,e,t,r){let i=n[t+1],s=e===null,o=r?Yr(i):Ui(i),a=!1;for(;o!==0&&(a===!1||s);){let l=n[o],c=n[o+1];H1(l,e)&&(a=!0,n[o+1]=r?Hf(c):Bf(c)),o=r?Yr(c):Ui(c)}a&&(n[t+1]=r?Bf(i):Hf(i))}function H1(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?Zs(n,e)>=0:!1}var Ut={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function $1(n){return n.substring(Ut.key,Ut.keyEnd)}function z1(n){return W1(n),xE(n,AE(n,0,Ut.textEnd))}function xE(n,e){let t=Ut.textEnd;return t===e?-1:(e=Ut.keyEnd=G1(n,Ut.key=e,t),AE(n,e,t))}function W1(n){Ut.key=0,Ut.keyEnd=0,Ut.value=0,Ut.valueEnd=0,Ut.textEnd=n.length}function AE(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function G1(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}function ce(n,e,t){let r=ae(),i=zi();if(Tt(r,i,e)){let s=$e(),o=hh();eE(s,o,r,n,e,r[Re],t,!1)}return ce}function $f(n,e,t,r,i){Ah(e,n,t,i?"class":"style",r)}function _e(n,e){return K1(n,e,null,!0),_e}function ve(n){Y1(tN,q1,n,!0)}function q1(n,e){for(let t=z1(e);t>=0;t=xE(e,t))rh(n,$1(e),!0)}function K1(n,e,t,r){let i=ae(),s=$e(),o=Wl(2);if(s.firstUpdatePass&&NE(s,n,o,r),e!==ut&&Tt(i,o,e)){let a=s.data[un()];RE(s,a,i,i[Re],n,i[o+1]=rN(e,t),r,o)}}function Y1(n,e,t,r){let i=$e(),s=Wl(2);i.firstUpdatePass&&NE(i,null,s,r);let o=ae();if(t!==ut&&Tt(o,s,t)){let a=i.data[un()];if(kE(a,r)&&!ME(i,s)){let l=r?a.classesWithoutHost:a.stylesWithoutHost;l!==null&&(t=ef(l,t||"")),$f(i,a,o,t,r)}else nN(i,a,o,o[Re],o[s+1],o[s+1]=eN(n,e,t),r,s)}}function ME(n,e){return e>=n.expandoStartIndex}function NE(n,e,t,r){let i=n.data;if(i[t+1]===null){let s=i[un()],o=ME(n,t);kE(s,r)&&e===null&&!o&&(e=!1),e=Q1(i,s,e,r),U1(i,s,e,t,o,r)}}function Q1(n,e,t,r){let i=yx(n),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=Yd(null,n,e,t,r),t=Qs(t,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||n[o]!==i)if(t=Yd(i,n,e,t,r),s===null){let l=Z1(n,e,r);l!==void 0&&Array.isArray(l)&&(l=Yd(null,n,e,l[1],r),l=Qs(l,e.attrs,r),J1(n,e,r,l))}else s=X1(n,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),t}function Z1(n,e,t){let r=t?e.classBindings:e.styleBindings;if(Ui(r)!==0)return n[Yr(r)]}function J1(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[Yr(i)]=r}function X1(n,e,t){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=n[s].hostAttrs;r=Qs(r,o,t)}return Qs(r,e.attrs,t)}function Yd(n,e,t,r,i){let s=null,o=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<o&&(s=e[a],r=Qs(r,s.hostAttrs,i),s!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function Qs(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),rh(n,o,t?!0:e[++s]))}return n===void 0?null:n}function eN(n,e,t){if(t==null||t==="")return lt;let r=[],i=jn(t);if(Array.isArray(i))for(let s=0;s<i.length;s++)n(r,i[s],!0);else if(typeof i=="object")for(let s in i)i.hasOwnProperty(s)&&n(r,s,i[s]);else typeof i=="string"&&e(r,i);return r}function tN(n,e,t){let r=String(e);r!==""&&!r.includes(" ")&&rh(n,r,t)}function nN(n,e,t,r,i,s,o,a){i===ut&&(i=lt);let l=0,c=0,u=0<i.length?i[0]:null,d=0<s.length?s[0]:null;for(;u!==null||d!==null;){let f=l<i.length?i[l+1]:void 0,h=c<s.length?s[c+1]:void 0,y=null,E;u===d?(l+=2,c+=2,f!==h&&(y=d,E=h)):d===null||u!==null&&u<d?(l+=2,y=u):(c+=2,y=d,E=h),y!==null&&RE(n,e,t,r,y,E,o,a),u=l<i.length?i[l]:null,d=c<s.length?s[c]:null}}function RE(n,e,t,r,i,s,o,a){if(!(e.type&3))return;let l=n.data,c=l[a+1],u=j1(c)?iv(l,e,t,i,Ui(c),o):void 0;if(!kl(u)){kl(s)||L1(c)&&(s=iv(l,null,t,i,a,o));let d=Lv(un(),t);CM(r,o,d,i,s)}}function iv(n,e,t,r,i,s){let o=e===null,a;for(;i>0;){let l=n[i],c=Array.isArray(l),u=c?l[1]:l,d=u===null,f=t[i+1];f===ut&&(f=d?lt:void 0);let h=d?jd(f,r):u===r?f:void 0;if(c&&!kl(h)&&(h=jd(l,r)),kl(h)&&(a=h,o))return a;let y=n[i+1];i=o?Yr(y):Ui(y)}if(e!==null){let l=s?e.residualClasses:e.residualStyles;l!=null&&(a=jd(l,r))}return a}function kl(n){return n!==void 0}function rN(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=It(jn(n)))),n}function kE(n,e){return(n.flags&(e?8:16))!==0}var zf=class{destroy(e){}updateValue(e,t){}swap(e,t){let r=Math.min(e,t),i=Math.max(e,t),s=this.detach(i);if(i-r>1){let o=this.detach(r);this.attach(r,s),this.attach(i,o)}else this.attach(r,s)}move(e,t){this.attach(t,this.detach(e))}};function Qd(n,e,t,r,i){return n===t&&Object.is(e,r)?1:Object.is(i(n,e),i(t,r))?-1:0}function iN(n,e,t){let r,i,s=0,o=n.length-1,a=void 0;if(Array.isArray(e)){let l=e.length-1;for(;s<=o&&s<=l;){let c=n.at(s),u=e[s],d=Qd(s,c,s,u,t);if(d!==0){d<0&&n.updateValue(s,u),s++;continue}let f=n.at(o),h=e[l],y=Qd(o,f,l,h,t);if(y!==0){y<0&&n.updateValue(o,h),o--,l--;continue}let E=t(s,c),b=t(o,f),D=t(s,u);if(Object.is(D,b)){let O=t(l,h);Object.is(O,E)?(n.swap(s,o),n.updateValue(o,h),l--,o--):n.move(o,s),n.updateValue(s,u),s++;continue}if(r??=new Pl,i??=ov(n,s,o,t),Wf(n,r,s,D))n.updateValue(s,u),s++,o++;else if(i.has(D))r.set(E,n.detach(s)),o--;else{let O=n.create(s,e[s]);n.attach(s,O),s++,o++}}for(;s<=l;)sv(n,r,t,s,e[s]),s++}else if(e!=null){let l=e[Symbol.iterator](),c=l.next();for(;!c.done&&s<=o;){let u=n.at(s),d=c.value,f=Qd(s,u,s,d,t);if(f!==0)f<0&&n.updateValue(s,d),s++,c=l.next();else{r??=new Pl,i??=ov(n,s,o,t);let h=t(s,d);if(Wf(n,r,s,h))n.updateValue(s,d),s++,o++,c=l.next();else if(!i.has(h))n.attach(s,n.create(s,d)),s++,o++,c=l.next();else{let y=t(s,u);r.set(y,n.detach(s)),o--}}}for(;!c.done;)sv(n,r,t,n.length,c.value),c=l.next()}for(;s<=o;)n.destroy(n.detach(o--));r?.forEach(l=>{n.destroy(l)})}function Wf(n,e,t,r){return e!==void 0&&e.has(r)?(n.attach(t,e.get(r)),e.delete(r),!0):!1}function sv(n,e,t,r,i){if(Wf(n,e,r,t(r,i)))n.updateValue(r,i);else{let s=n.create(r,i);n.attach(r,s)}}function ov(n,e,t,r){let i=new Set;for(let s=e;s<=t;s++)i.add(r(s,n.at(s)));return i}var Pl=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let t=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(t)?(this.kvMap.set(e,this._vMap.get(t)),this._vMap.delete(t)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,t){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,t)}else this.kvMap.set(e,t)}forEach(e){for(let[t,r]of this.kvMap)if(e(r,t),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,t)}}};function se(n,e){qi("NgControlFlow");let t=ae(),r=zi(),i=t[r]!==ut?t[r]:-1,s=i!==-1?Ol(t,He+i):void 0,o=0;if(Tt(t,r,n)){let a=G(null);try{if(s!==void 0&&pE(s,o),n!==-1){let l=He+n,c=Ol(t,l),u=Yf(t[ee],l),d=Hh(c,u.tView.ssrId),f=Nh(t,u,e,{dehydratedView:d});jh(c,f,o,Rh(u,d))}}finally{G(a)}}else if(s!==void 0){let a=hE(s,o);a!==void 0&&(a[Ne]=e)}}var Gf=class{lContainer;$implicit;$index;constructor(e,t,r){this.lContainer=e,this.$implicit=t,this.$index=r}get $count(){return this.lContainer.length-ct}};function Xl(n){return n}var qf=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,t,r){this.hasEmptyBlock=e,this.trackByFn=t,this.liveCollection=r}};function Ze(n,e,t,r,i,s,o,a,l,c,u,d,f){qi("NgControlFlow");let h=ae(),y=$e(),E=l!==void 0,b=ae(),D=a?o.bind(b[Ht][Ne]):o,O=new qf(E,D);b[He+n]=O,jf(h,y,n+1,e,t,r,i,Vi(y.consts,s)),E&&jf(h,y,n+2,l,c,u,d,Vi(y.consts,f))}var Kf=class extends zf{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,t,r){super(),this.lContainer=e,this.hostLView=t,this.templateTNode=r}get length(){return this.lContainer.length-ct}at(e){return this.getLView(e)[Ne].$implicit}attach(e,t){let r=t[Ws];this.needsIndexUpdate||=e!==this.length,jh(this.lContainer,t,e,Rh(this.templateTNode,r))}detach(e){return this.needsIndexUpdate||=e!==this.length-1,sN(this.lContainer,e)}create(e,t){let r=Hh(this.lContainer,this.templateTNode.tView.ssrId),i=Nh(this.hostLView,this.templateTNode,new Gf(this.lContainer,t,e),{dehydratedView:r});return this.operationsCounter?.recordCreate(),i}destroy(e){Oh(e[ee],e),this.operationsCounter?.recordDestroy()}updateValue(e,t){this.getLView(e)[Ne].$implicit=t}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[Ne].$index=e}getLView(e){return oN(this.lContainer,e)}};function Je(n){let e=G(null),t=un();try{let r=ae(),i=r[ee],s=r[t],o=t+1,a=Ol(r,o);if(s.liveCollection===void 0){let c=Yf(i,o);s.liveCollection=new Kf(a,r,c)}else s.liveCollection.reset();let l=s.liveCollection;if(iN(l,n,s.trackByFn),l.updateIndexes(),s.hasEmptyBlock){let c=zi(),u=l.length===0;if(Tt(r,c,u)){let d=t+2,f=Ol(r,d);if(u){let h=Yf(i,d),y=Hh(f,h.tView.ssrId),E=Nh(r,h,void 0,{dehydratedView:y});jh(f,E,0,Rh(h,y))}else pE(f,0)}}}finally{G(e)}}function Ol(n,e){return n[e]}function sN(n,e){return Uh(n,e)}function oN(n,e){return hE(n,e)}function Yf(n,e){return lh(n,e)}function p(n,e,t,r){let i=ae(),s=$e(),o=He+n,a=i[Re],l=s.firstCreatePass?vE(o,s,i,e,tE,$v(),t,r):s.data[o],c=aN(s,i,l,a,e,n);i[o]=c;let u=ah(l);return Xs(l,!0),G0(a,c,l),!nE(l)&&ph()&&Fh(s,i,c,l),(ix()===0||u)&&eo(c,i),sx(),u&&(xh(s,i,l),k0(s,l,i)),r!==null&&X0(i,l),p}function m(){let n=$t();Wv()?dx():(n=n.parent,Xs(n,!1));let e=n;lx(e)&&cx(),ox();let t=$e();return t.firstCreatePass&&EE(t,e),e.classesWithoutHost!=null&&Cx(e)&&$f(t,e,ae(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&Ix(e)&&$f(t,e,ae(),e.stylesWithoutHost,!1),m}function w(n,e,t,r){return p(n,e,t,r),m(),w}var aN=(n,e,t,r,i,s)=>(mh(!0),z0(r,i,Ex()));function Ee(){return ae()}var Ur=void 0;function lN(n){let e=Math.floor(Math.abs(n)),t=n.toString().replace(/^[^.]*\.?/,"").length;return e===1&&t===0?1:5}var cN=["en",[["a","p"],["AM","PM"],Ur],[["AM","PM"],Ur,Ur],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ur,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ur,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ur,"{1} 'at' {0}",Ur],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",lN],Zd={};function dt(n){let e=uN(n),t=av(e);if(t)return t;let r=e.split("-")[0];if(t=av(r),t)return t;if(r==="en")return cN;throw new I(701,!1)}function av(n){return n in Zd||(Zd[n]=nn.ng&&nn.ng.common&&nn.ng.common.locales&&nn.ng.common.locales[n]),Zd[n]}var be=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(be||{});function uN(n){return n.toLowerCase().replace(/_/g,"-")}var Fl="en-US",dN="USD";var fN=Fl;function hN(n){typeof n=="string"&&(fN=n.toLowerCase().replace(/_/g,"-"))}function lv(n,e,t){return function r(i){if(i===Function)return t;let s=Hi(n)?on(n.index,e):e;Vh(s,5);let o=e[Ne],a=cv(e,o,t,i),l=r.__ngNextListenerFn__;for(;l;)a=cv(e,o,l,i)&&a,l=l.__ngNextListenerFn__;return a}}function cv(n,e,t,r){let i=G(null);try{return pe(6,e,t),t(r)!==!1}catch(s){return pN(n,s),!1}finally{pe(7,e,t),G(i)}}function pN(n,e){let t=n[Oi],r=t?t.get(kn,null):null;r&&r.handleError(e)}function uv(n,e,t,r,i,s){let o=e[t],a=e[ee],c=a.data[t].outputs[r],u=o[c],d=a.firstCreatePass?Hv(a):null,f=Bv(e),h=u.subscribe(s),y=f.length;f.push(s,h),d&&d.push(i,n.index,y,-(y+1))}function M(n,e,t,r){let i=ae(),s=$e(),o=$t();return PE(s,i,i[Re],o,n,e,r),M}function mN(n,e,t,r){let i=n.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===t&&i[s+1]===r){let a=e[vl],l=i[s+2];return a.length>l?a[l]:null}typeof o=="string"&&(s+=2)}return null}function PE(n,e,t,r,i,s,o){let a=ah(r),c=n.firstCreatePass?Hv(n):null,u=Bv(e),d=!0;if(r.type&3||o){let f=Vn(r,e),h=o?o(f):f,y=u.length,E=o?D=>o(Nn(D[r.index])):r.index,b=null;if(!o&&a&&(b=mN(n,e,i,r.index)),b!==null){let D=b.__ngLastListenerFn__||b;D.__ngNextListenerFn__=s,b.__ngLastListenerFn__=s,d=!1}else{s=lv(r,e,s),lA(e,h,i,s);let D=t.listen(h,i,s);u.push(s,D),c&&c.push(i,E,y,y+1)}}else s=lv(r,e,s);if(d){let f=r.outputs?.[i],h=r.hostDirectiveOutputs?.[i];if(h&&h.length)for(let y=0;y<h.length;y+=2){let E=h[y],b=h[y+1];uv(r,e,E,b,i,s)}if(f&&f.length)for(let y of f)uv(r,e,y,i,i,s)}}function x(n=1){return vx(n)}function dn(n){let e=fx();return ch(e,He+n)}function g(n,e=""){let t=ae(),r=$e(),i=n+He,s=r.firstCreatePass?Bh(r,i,1,e,null):r.data[i],o=gN(r,t,s,e,n);t[i]=o,ph()&&Fh(r,t,o,s),Xs(s,!1)}var gN=(n,e,t,r,i)=>(mh(!0),AA(e[Re],r));function Z(n){return L("",n,""),Z}function L(n,e,t){let r=ae(),i=P1(r,n,e,t);return i!==ut&&Gh(r,un(),i),L}function io(n,e,t,r,i){let s=ae(),o=O1(s,n,e,t,r,i);return o!==ut&&Gh(s,un(),o),io}function ec(n,e,t,r,i,s,o){let a=ae(),l=F1(a,n,e,t,r,i,s,o);return l!==ut&&Gh(a,un(),l),ec}function Gh(n,e,t){let r=Lv(e,n);MA(n[Re],r,t)}function At(n,e,t){v0(e)&&(e=e());let r=ae(),i=zi();if(Tt(r,i,e)){let s=$e(),o=hh();eE(s,o,r,n,e,r[Re],t,!1)}return At}function zt(n,e){let t=v0(n);return t&&n.set(e),t}function Mt(n,e){let t=ae(),r=$e(),i=$t();return PE(r,t,t[Re],i,n,e),Mt}function yN(n,e,t){let r=$e();if(r.firstCreatePass){let i=sn(n);Qf(t,r.data,r.blueprint,i,!0),Qf(e,r.data,r.blueprint,i,!1)}}function Qf(n,e,t,r,i){if(n=Qe(n),Array.isArray(n))for(let s=0;s<n.length;s++)Qf(n[s],e,t,r,i);else{let s=$e(),o=ae(),a=$t(),l=Pi(n)?n:Qe(n.provide),c=xv(n),u=a.providerIndexes&1048575,d=a.directiveStart,f=a.providerIndexes>>20;if(Pi(n)||!n.multi){let h=new qr(c,i,re),y=Xd(l,e,i?u:u+f,d);y===-1?(pf(Il(a,o),s,l),Jd(s,n,e.length),e.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(h),o.push(h)):(t[y]=h,o[y]=h)}else{let h=Xd(l,e,u+f,d),y=Xd(l,e,u,u+f),E=h>=0&&t[h],b=y>=0&&t[y];if(i&&!b||!i&&!E){pf(Il(a,o),s,l);let D=EN(i?vN:_N,t.length,i,r,c);!i&&b&&(t[y].providerFactory=D),Jd(s,n,e.length,0),e.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(D),o.push(D)}else{let D=OE(t[i?y:h],c,!i&&r);Jd(s,n,h>-1?h:y,D)}!i&&r&&b&&t[y].componentProviders++}}}function Jd(n,e,t,r){let i=Pi(e),s=HT(e);if(i||s){let l=(s?Qe(e.useClass):e).prototype.ngOnDestroy;if(l){let c=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let u=c.indexOf(t);u===-1?c.push(t,[r,l]):c[u+1].push(r,l)}else c.push(t,l)}}}function OE(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function Xd(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function _N(n,e,t,r,i){return Zf(this.multi,[])}function vN(n,e,t,r,i){let s=this.multi,o;if(this.providerFactory){let a=this.providerFactory.componentProviders,l=Dl(r,r[ee],this.providerFactory.index,i);o=l.slice(0,a),Zf(s,o);for(let c=a;c<l.length;c++)o.push(l[c])}else o=[],Zf(s,o);return o}function Zf(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function EN(n,e,t,r,i){let s=new qr(n,t,re);return s.multi=[],s.index=e,s.componentProviders=0,OE(s,i,r&&!t),s}function cr(n,e=[]){return t=>{t.providersResolver=(r,i)=>yN(r,i?i(n):n,e)}}function FE(n,e){let t=n[e];return t===ut?void 0:t}function wN(n,e,t,r,i,s){let o=e+t;return Tt(n,o,i)?CE(n,o+1,s?r.call(s,i):r(i)):FE(n,o+1)}function bN(n,e,t,r,i,s,o){let a=e+t;return Wh(n,a,i,s)?CE(n,a+2,o?r.call(o,i,s):r(i,s)):FE(n,a+2)}function Nt(n,e){let t=$e(),r,i=n+He;t.firstCreatePass?(r=CN(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let s=r.factory||(r.factory=Hr(r.type,!0)),o,a=at(re);try{let l=Cl(!1),c=s();return Cl(l),tx(t,ae(),i,c),c}finally{at(a)}}function CN(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function tc(n,e,t){let r=n+He,i=ae(),s=ch(i,r);return LE(i,r)?wN(i,qv(),e,s.transform,t,s):s.transform(t)}function fn(n,e,t,r){let i=n+He,s=ae(),o=ch(s,i);return LE(s,i)?bN(s,qv(),e,o.transform,t,r,o):o.transform(t,r)}function LE(n,e){return n[ee].data[e].pure}var IN=(()=>{class n{zone=T(Ce);changeDetectionScheduler=T(Kr);applicationRef=T(ji);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function DN({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new Ce($(S({},SN()),{scheduleInRootZone:t})),[{provide:Ce,useFactory:n},{provide:$s,multi:!0,useFactory:()=>{let r=T(IN,{optional:!0});return()=>r.initialize()}},{provide:$s,multi:!0,useFactory:()=>{let r=T(TN);return()=>{r.initialize()}}},e===!0?{provide:p0,useValue:!0}:[],{provide:gh,useValue:t??h0}]}function SN(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var TN=(()=>{class n{subscription=new Ye;initialized=!1;zone=T(Ce);pendingTasks=T(Gi);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Ce.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Ce.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var VE=(()=>{class n{appRef=T(ji);taskService=T(Gi);ngZone=T(Ce);zonelessEnabled=T(ql);tracing=T(Kl,{optional:!0});disableScheduling=T(p0,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Ye;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(xl):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(T(gh,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Al||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let r=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?V_:m0;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(xl+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,V_(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function jE(){return qi("NgZoneless"),jl([{provide:Kr,useExisting:VE},{provide:Ce,useClass:Al},{provide:ql,useValue:!0},{provide:gh,useValue:!1},[]])}function xN(){return typeof $localize<"u"&&$localize.locale||Fl}var so=new R("",{providedIn:"root",factory:()=>T(so,Q.Optional|Q.SkipSelf)||xN()}),UE=new R("",{providedIn:"root",factory:()=>dN});var Jf=new R(""),AN=new R("");function js(n){return!n.moduleRef}function MN(n){let e=js(n)?n.r3Injector:n.moduleRef.injector,t=e.get(Ce);return t.run(()=>{js(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(kn,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:s=>{r.handleError(s)}})}),js(n)){let s=()=>e.destroy(),o=n.platformInjector.get(Jf);o.add(s),e.onDestroy(()=>{i.unsubscribe(),o.delete(s)})}else{let s=()=>n.moduleRef.destroy(),o=n.platformInjector.get(Jf);o.add(s),n.moduleRef.onDestroy(()=>{hl(n.allPlatformModules,n.moduleRef),i.unsubscribe(),o.delete(s)})}return RN(r,t,()=>{let s=e.get(TE);return s.runInitializers(),s.donePromise.then(()=>{let o=e.get(so,Fl);if(hN(o||Fl),!e.get(AN,!0))return js(n)?e.get(ji):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(js(n)){let l=e.get(ji);return n.rootComponent!==void 0&&l.bootstrap(n.rootComponent),l}else return NN(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function NN(n,e){let t=n.injector.get(ji);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new I(-403,!1);e.push(n)}function RN(n,e,t){try{let r=t();return ro(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}var pl=null;function kN(n=[],e){return Rn.create({name:e,providers:[{provide:Ul,useValue:"platform"},{provide:Jf,useValue:new Set([()=>pl=null])},...n]})}function PN(n=[]){if(pl)return pl;let e=kN(n);return pl=e,M1(),ON(e),e}function ON(n){let e=n.get(Eh,null);Bl(n,()=>{e?.forEach(t=>t())})}var qh=(()=>{class n{static __NG_ELEMENT_ID__=FN}return n})();function FN(n){return LN($t(),ae(),(n&16)===16)}function LN(n,e,t){if(Hi(n)&&!t){let r=on(n.index,e);return new kf(r,r)}else if(n.type&175){let r=e[Ht];return new kf(r,e)}return null}function BE(n){let{rootComponent:e,appProviders:t,platformProviders:r,platformRef:i}=n;pe(8);try{let s=i?.injector??PN(r),o=[DN({}),{provide:Kr,useExisting:VE},...t||[]],a=new Rl({providers:o,parent:s,debugName:"",runEnvironmentInitializers:!1});return MN({r3Injector:a.injector,platformInjector:s,rootComponent:e})}catch(s){return Promise.reject(s)}finally{pe(9)}}function Kh(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function $n(n){return Dd(n)}function z(n,e){return wd(n,e?.equal)}var Xf=class{[bt];constructor(e){this[bt]=e}destroy(){this[bt].destroy()}};function ei(n,e){!e?.injector&&KT(ei);let t=e?.injector??T(Rn),r=e?.manualCleanup!==!0?t.get(Gl):null,i,s=t.get(M0,null,{optional:!0}),o=t.get(Kr);return s!==null&&!e?.forceRoot?(i=UN(s.view,o,n),r instanceof Tl&&r._lView===s.view&&(r=null)):i=BN(n,t.get(DE),o),i.injector=t,r!==null&&(i.onDestroyFn=r.onDestroy(()=>i.destroy())),new Xf(i)}var HE=$(S({},Di),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,dirty:!0,hasRun:!1,cleanupFns:void 0,zone:null,kind:"effect",onDestroyFn:Ys,run(){if(this.dirty=!1,this.hasRun&&!Oa(this))return;this.hasRun=!0;let n=r=>(this.cleanupFns??=[]).push(r),e=ks(this),t=bl(!1);try{this.maybeCleanup(),this.fn(n)}finally{bl(t),Pa(this,e)}},maybeCleanup(){if(this.cleanupFns?.length)try{for(;this.cleanupFns.length;)this.cleanupFns.pop()()}finally{this.cleanupFns=[]}}}),VN=$(S({},HE),{consumerMarkedDirty(){this.scheduler.schedule(this),this.notifier.notify(12)},destroy(){Ps(this),this.onDestroyFn(),this.maybeCleanup(),this.scheduler.remove(this)}}),jN=$(S({},HE),{consumerMarkedDirty(){this.view[V]|=8192,Js(this.view),this.notifier.notify(13)},destroy(){Ps(this),this.onDestroyFn(),this.maybeCleanup(),this.view[zr]?.delete(this)}});function UN(n,e,t){let r=Object.create(jN);return r.view=n,r.zone=typeof Zone<"u"?Zone.current:null,r.notifier=e,r.fn=t,n[zr]??=new Set,n[zr].add(r),r.consumerMarkedDirty(r),r}function BN(n,e,t){let r=Object.create(VN);return r.fn=n,r.scheduler=e,r.notifier=t,r.zone=typeof Zone<"u"?Zone.current:null,r.scheduler.schedule(r),r.notifier.notify(12),r}var ze=new R("");var $E=null;function zn(){return $E}function Yh(n){$E??=n}var oo=class{};var KE={ADP:[void 0,void 0,0],AFN:[void 0,"\u060B",0],ALL:[void 0,void 0,0],AMD:[void 0,"\u058F",2],AOA:[void 0,"Kz"],ARS:[void 0,"$"],AUD:["A$","$"],AZN:[void 0,"\u20BC"],BAM:[void 0,"KM"],BBD:[void 0,"$"],BDT:[void 0,"\u09F3"],BHD:[void 0,void 0,3],BIF:[void 0,void 0,0],BMD:[void 0,"$"],BND:[void 0,"$"],BOB:[void 0,"Bs"],BRL:["R$"],BSD:[void 0,"$"],BWP:[void 0,"P"],BYN:[void 0,void 0,2],BYR:[void 0,void 0,0],BZD:[void 0,"$"],CAD:["CA$","$",2],CHF:[void 0,void 0,2],CLF:[void 0,void 0,4],CLP:[void 0,"$",0],CNY:["CN\xA5","\xA5"],COP:[void 0,"$",2],CRC:[void 0,"\u20A1",2],CUC:[void 0,"$"],CUP:[void 0,"$"],CZK:[void 0,"K\u010D",2],DJF:[void 0,void 0,0],DKK:[void 0,"kr",2],DOP:[void 0,"$"],EGP:[void 0,"E\xA3"],ESP:[void 0,"\u20A7",0],EUR:["\u20AC"],FJD:[void 0,"$"],FKP:[void 0,"\xA3"],GBP:["\xA3"],GEL:[void 0,"\u20BE"],GHS:[void 0,"GH\u20B5"],GIP:[void 0,"\xA3"],GNF:[void 0,"FG",0],GTQ:[void 0,"Q"],GYD:[void 0,"$",2],HKD:["HK$","$"],HNL:[void 0,"L"],HRK:[void 0,"kn"],HUF:[void 0,"Ft",2],IDR:[void 0,"Rp",2],ILS:["\u20AA"],INR:["\u20B9"],IQD:[void 0,void 0,0],IRR:[void 0,void 0,0],ISK:[void 0,"kr",0],ITL:[void 0,void 0,0],JMD:[void 0,"$"],JOD:[void 0,void 0,3],JPY:["\xA5",void 0,0],KHR:[void 0,"\u17DB"],KMF:[void 0,"CF",0],KPW:[void 0,"\u20A9",0],KRW:["\u20A9",void 0,0],KWD:[void 0,void 0,3],KYD:[void 0,"$"],KZT:[void 0,"\u20B8"],LAK:[void 0,"\u20AD",0],LBP:[void 0,"L\xA3",0],LKR:[void 0,"Rs"],LRD:[void 0,"$"],LTL:[void 0,"Lt"],LUF:[void 0,void 0,0],LVL:[void 0,"Ls"],LYD:[void 0,void 0,3],MGA:[void 0,"Ar",0],MGF:[void 0,void 0,0],MMK:[void 0,"K",0],MNT:[void 0,"\u20AE",2],MRO:[void 0,void 0,0],MUR:[void 0,"Rs",2],MXN:["MX$","$"],MYR:[void 0,"RM"],NAD:[void 0,"$"],NGN:[void 0,"\u20A6"],NIO:[void 0,"C$"],NOK:[void 0,"kr",2],NPR:[void 0,"Rs"],NZD:["NZ$","$"],OMR:[void 0,void 0,3],PHP:["\u20B1"],PKR:[void 0,"Rs",2],PLN:[void 0,"z\u0142"],PYG:[void 0,"\u20B2",0],RON:[void 0,"lei"],RSD:[void 0,void 0,0],RUB:[void 0,"\u20BD"],RWF:[void 0,"RF",0],SBD:[void 0,"$"],SEK:[void 0,"kr",2],SGD:[void 0,"$"],SHP:[void 0,"\xA3"],SLE:[void 0,void 0,2],SLL:[void 0,void 0,0],SOS:[void 0,void 0,0],SRD:[void 0,"$"],SSP:[void 0,"\xA3"],STD:[void 0,void 0,0],STN:[void 0,"Db"],SYP:[void 0,"\xA3",0],THB:[void 0,"\u0E3F"],TMM:[void 0,void 0,0],TND:[void 0,void 0,3],TOP:[void 0,"T$"],TRL:[void 0,void 0,0],TRY:[void 0,"\u20BA"],TTD:[void 0,"$"],TWD:["NT$","$",2],TZS:[void 0,void 0,2],UAH:[void 0,"\u20B4"],UGX:[void 0,void 0,0],USD:["$"],UYI:[void 0,void 0,0],UYU:[void 0,"$"],UYW:[void 0,void 0,4],UZS:[void 0,void 0,2],VEF:[void 0,"Bs",2],VND:["\u20AB",void 0,0],VUV:[void 0,void 0,0],XAF:["FCFA",void 0,0],XCD:["EC$","$"],XOF:["F\u202FCFA",void 0,0],XPF:["CFPF",void 0,0],XXX:["\xA4"],YER:[void 0,void 0,0],ZAR:[void 0,"R"],ZMK:[void 0,void 0,0],ZMW:[void 0,"ZK"],ZWD:[void 0,void 0,0]},np=function(n){return n[n.Decimal=0]="Decimal",n[n.Percent=1]="Percent",n[n.Currency=2]="Currency",n[n.Scientific=3]="Scientific",n}(np||{});var We=function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n}(We||{}),he=function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n}(he||{}),ft=function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n}(ft||{}),ht={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function YE(n){return dt(n)[be.LocaleId]}function QE(n,e,t){let r=dt(n),i=[r[be.DayPeriodsFormat],r[be.DayPeriodsStandalone]],s=Rt(i,e);return Rt(s,t)}function ZE(n,e,t){let r=dt(n),i=[r[be.DaysFormat],r[be.DaysStandalone]],s=Rt(i,e);return Rt(s,t)}function JE(n,e,t){let r=dt(n),i=[r[be.MonthsFormat],r[be.MonthsStandalone]],s=Rt(i,e);return Rt(s,t)}function XE(n,e){let r=dt(n)[be.Eras];return Rt(r,e)}function ao(n,e){let t=dt(n);return Rt(t[be.DateFormat],e)}function lo(n,e){let t=dt(n);return Rt(t[be.TimeFormat],e)}function co(n,e){let r=dt(n)[be.DateTimeFormat];return Rt(r,e)}function hn(n,e){let t=dt(n),r=t[be.NumberSymbols][e];if(typeof r>"u"){if(e===ht.CurrencyDecimal)return t[be.NumberSymbols][ht.Decimal];if(e===ht.CurrencyGroup)return t[be.NumberSymbols][ht.Group]}return r}function ew(n,e){return dt(n)[be.NumberFormats][e]}function HN(n){return dt(n)[be.Currencies]}function tw(n){if(!n[be.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[be.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function nw(n){let e=dt(n);return tw(e),(e[be.ExtraData][2]||[]).map(r=>typeof r=="string"?Qh(r):[Qh(r[0]),Qh(r[1])])}function rw(n,e,t){let r=dt(n);tw(r);let i=[r[be.ExtraData][0],r[be.ExtraData][1]],s=Rt(i,e)||[];return Rt(s,t)||[]}function Rt(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new Error("Locale data API: locale data undefined")}function Qh(n){let[e,t]=n.split(":");return{hours:+e,minutes:+t}}function iw(n,e,t="en"){let r=HN(t)[n]||KE[n]||[],i=r[1];return e==="narrow"&&typeof i=="string"?i:r[0]||n}var $N=2;function sw(n){let e,t=KE[n];return t&&(e=t[2]),typeof e=="number"?e:$N}var zN=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,nc={},WN=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function ow(n,e,t,r){let i=eR(n);e=Wn(t,e)||e;let o=[],a;for(;e;)if(a=WN.exec(e),a){o=o.concat(a.slice(1));let u=o.pop();if(!u)break;e=u}else{o.push(e);break}let l=i.getTimezoneOffset();r&&(l=lw(r,l),i=XN(i,r));let c="";return o.forEach(u=>{let d=ZN(u);c+=d?d(i,t,l):u==="''"?"'":u.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),c}function ac(n,e,t){let r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function Wn(n,e){let t=YE(n);if(nc[t]??={},nc[t][e])return nc[t][e];let r="";switch(e){case"shortDate":r=ao(n,ft.Short);break;case"mediumDate":r=ao(n,ft.Medium);break;case"longDate":r=ao(n,ft.Long);break;case"fullDate":r=ao(n,ft.Full);break;case"shortTime":r=lo(n,ft.Short);break;case"mediumTime":r=lo(n,ft.Medium);break;case"longTime":r=lo(n,ft.Long);break;case"fullTime":r=lo(n,ft.Full);break;case"short":let i=Wn(n,"shortTime"),s=Wn(n,"shortDate");r=rc(co(n,ft.Short),[i,s]);break;case"medium":let o=Wn(n,"mediumTime"),a=Wn(n,"mediumDate");r=rc(co(n,ft.Medium),[o,a]);break;case"long":let l=Wn(n,"longTime"),c=Wn(n,"longDate");r=rc(co(n,ft.Long),[l,c]);break;case"full":let u=Wn(n,"fullTime"),d=Wn(n,"fullDate");r=rc(co(n,ft.Full),[u,d]);break}return r&&(nc[t][e]=r),r}function rc(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return e!=null&&r in e?e[r]:t})),n}function Wt(n,e,t="-",r,i){let s="";(n<0||i&&n<=0)&&(i?n=-n+1:(n=-n,s=t));let o=String(n);for(;o.length<e;)o="0"+o;return r&&(o=o.slice(o.length-e)),s+o}function GN(n,e){return Wt(n,3).substring(0,e)}function xe(n,e,t=0,r=!1,i=!1){return function(s,o){let a=qN(n,s);if((t>0||a>-t)&&(a+=t),n===3)a===0&&t===-12&&(a=12);else if(n===6)return GN(a,e);let l=hn(o,ht.MinusSign);return Wt(a,e,l,r,i)}}function qN(n,e){switch(n){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();case 3:return e.getHours();case 4:return e.getMinutes();case 5:return e.getSeconds();case 6:return e.getMilliseconds();case 7:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}function me(n,e,t=We.Format,r=!1){return function(i,s){return KN(i,s,n,e,t,r)}}function KN(n,e,t,r,i,s){switch(t){case 2:return JE(e,i,r)[n.getMonth()];case 1:return ZE(e,i,r)[n.getDay()];case 0:let o=n.getHours(),a=n.getMinutes();if(s){let c=nw(e),u=rw(e,i,r),d=c.findIndex(f=>{if(Array.isArray(f)){let[h,y]=f,E=o>=h.hours&&a>=h.minutes,b=o<y.hours||o===y.hours&&a<y.minutes;if(h.hours<y.hours){if(E&&b)return!0}else if(E||b)return!0}else if(f.hours===o&&f.minutes===a)return!0;return!1});if(d!==-1)return u[d]}return QE(e,i,r)[o<12?0:1];case 3:return XE(e,r)[n.getFullYear()<=0?0:1];default:let l=t;throw new Error(`unexpected translation type ${l}`)}}function ic(n){return function(e,t,r){let i=-1*r,s=hn(t,ht.MinusSign),o=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case 0:return(i>=0?"+":"")+Wt(o,2,s)+Wt(Math.abs(i%60),2,s);case 1:return"GMT"+(i>=0?"+":"")+Wt(o,1,s);case 2:return"GMT"+(i>=0?"+":"")+Wt(o,2,s)+":"+Wt(Math.abs(i%60),2,s);case 3:return r===0?"Z":(i>=0?"+":"")+Wt(o,2,s)+":"+Wt(Math.abs(i%60),2,s);default:throw new Error(`Unknown zone width "${n}"`)}}}var YN=0,oc=4;function QN(n){let e=ac(n,YN,1).getDay();return ac(n,0,1+(e<=oc?oc:oc+7)-e)}function aw(n){let e=n.getDay(),t=e===0?-3:oc-e;return ac(n.getFullYear(),n.getMonth(),n.getDate()+t)}function Zh(n,e=!1){return function(t,r){let i;if(e){let s=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,o=t.getDate();i=1+Math.floor((o+s)/7)}else{let s=aw(t),o=QN(s.getFullYear()),a=s.getTime()-o.getTime();i=1+Math.round(a/6048e5)}return Wt(i,n,hn(r,ht.MinusSign))}}function sc(n,e=!1){return function(t,r){let s=aw(t).getFullYear();return Wt(s,n,hn(r,ht.MinusSign),e)}}var Jh={};function ZN(n){if(Jh[n])return Jh[n];let e;switch(n){case"G":case"GG":case"GGG":e=me(3,he.Abbreviated);break;case"GGGG":e=me(3,he.Wide);break;case"GGGGG":e=me(3,he.Narrow);break;case"y":e=xe(0,1,0,!1,!0);break;case"yy":e=xe(0,2,0,!0,!0);break;case"yyy":e=xe(0,3,0,!1,!0);break;case"yyyy":e=xe(0,4,0,!1,!0);break;case"Y":e=sc(1);break;case"YY":e=sc(2,!0);break;case"YYY":e=sc(3);break;case"YYYY":e=sc(4);break;case"M":case"L":e=xe(1,1,1);break;case"MM":case"LL":e=xe(1,2,1);break;case"MMM":e=me(2,he.Abbreviated);break;case"MMMM":e=me(2,he.Wide);break;case"MMMMM":e=me(2,he.Narrow);break;case"LLL":e=me(2,he.Abbreviated,We.Standalone);break;case"LLLL":e=me(2,he.Wide,We.Standalone);break;case"LLLLL":e=me(2,he.Narrow,We.Standalone);break;case"w":e=Zh(1);break;case"ww":e=Zh(2);break;case"W":e=Zh(1,!0);break;case"d":e=xe(2,1);break;case"dd":e=xe(2,2);break;case"c":case"cc":e=xe(7,1);break;case"ccc":e=me(1,he.Abbreviated,We.Standalone);break;case"cccc":e=me(1,he.Wide,We.Standalone);break;case"ccccc":e=me(1,he.Narrow,We.Standalone);break;case"cccccc":e=me(1,he.Short,We.Standalone);break;case"E":case"EE":case"EEE":e=me(1,he.Abbreviated);break;case"EEEE":e=me(1,he.Wide);break;case"EEEEE":e=me(1,he.Narrow);break;case"EEEEEE":e=me(1,he.Short);break;case"a":case"aa":case"aaa":e=me(0,he.Abbreviated);break;case"aaaa":e=me(0,he.Wide);break;case"aaaaa":e=me(0,he.Narrow);break;case"b":case"bb":case"bbb":e=me(0,he.Abbreviated,We.Standalone,!0);break;case"bbbb":e=me(0,he.Wide,We.Standalone,!0);break;case"bbbbb":e=me(0,he.Narrow,We.Standalone,!0);break;case"B":case"BB":case"BBB":e=me(0,he.Abbreviated,We.Format,!0);break;case"BBBB":e=me(0,he.Wide,We.Format,!0);break;case"BBBBB":e=me(0,he.Narrow,We.Format,!0);break;case"h":e=xe(3,1,-12);break;case"hh":e=xe(3,2,-12);break;case"H":e=xe(3,1);break;case"HH":e=xe(3,2);break;case"m":e=xe(4,1);break;case"mm":e=xe(4,2);break;case"s":e=xe(5,1);break;case"ss":e=xe(5,2);break;case"S":e=xe(6,1);break;case"SS":e=xe(6,2);break;case"SSS":e=xe(6,3);break;case"Z":case"ZZ":case"ZZZ":e=ic(0);break;case"ZZZZZ":e=ic(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=ic(1);break;case"OOOO":case"ZZZZ":case"zzzz":e=ic(2);break;default:return null}return Jh[n]=e,e}function lw(n,e){n=n.replace(/:/g,"");let t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function JN(n,e){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+e),n}function XN(n,e,t){let i=n.getTimezoneOffset(),s=lw(e,i);return JN(n,-1*(s-i))}function eR(n){if(zE(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[i,s=1,o=1]=n.split("-").map(a=>+a);return ac(i,s-1,o)}let t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(zN))return tR(r)}let e=new Date(n);if(!zE(e))throw new Error(`Unable to convert "${n}" into a date`);return e}function tR(n){let e=new Date(0),t=0,r=0,i=n[8]?e.setUTCFullYear:e.setFullYear,s=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));let o=Number(n[4]||0)-t,a=Number(n[5]||0)-r,l=Number(n[6]||0),c=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return s.call(e,o,a,l,c),e}function zE(n){return n instanceof Date&&!isNaN(n.valueOf())}var nR=/^(\d+)?\.((\d+)(-(\d+))?)?$/,WE=22,lc=".",uo="0",rR=";",iR=",",Xh="#",GE="\xA4";function sR(n,e,t,r,i,s,o=!1){let a="",l=!1;if(!isFinite(n))a=hn(t,ht.Infinity);else{let c=lR(n);o&&(c=aR(c));let u=e.minInt,d=e.minFrac,f=e.maxFrac;if(s){let O=s.match(nR);if(O===null)throw new Error(`${s} is not a valid digit info`);let H=O[1],de=O[3],Lt=O[5];H!=null&&(u=ep(H)),de!=null&&(d=ep(de)),Lt!=null?f=ep(Lt):de!=null&&d>f&&(f=d)}cR(c,d,f);let h=c.digits,y=c.integerLen,E=c.exponent,b=[];for(l=h.every(O=>!O);y<u;y++)h.unshift(0);for(;y<0;y++)h.unshift(0);y>0?b=h.splice(y,h.length):(b=h,h=[0]);let D=[];for(h.length>=e.lgSize&&D.unshift(h.splice(-e.lgSize,h.length).join(""));h.length>e.gSize;)D.unshift(h.splice(-e.gSize,h.length).join(""));h.length&&D.unshift(h.join("")),a=D.join(hn(t,r)),b.length&&(a+=hn(t,i)+b.join("")),E&&(a+=hn(t,ht.Exponential)+"+"+E)}return n<0&&!l?a=e.negPre+a+e.negSuf:a=e.posPre+a+e.posSuf,a}function cw(n,e,t,r,i){let s=ew(e,np.Currency),o=oR(s,hn(e,ht.MinusSign));return o.minFrac=sw(r),o.maxFrac=o.minFrac,sR(n,o,e,ht.CurrencyGroup,ht.CurrencyDecimal,i).replace(GE,t).replace(GE,"").trim()}function oR(n,e="-"){let t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(rR),i=r[0],s=r[1],o=i.indexOf(lc)!==-1?i.split(lc):[i.substring(0,i.lastIndexOf(uo)+1),i.substring(i.lastIndexOf(uo)+1)],a=o[0],l=o[1]||"";t.posPre=a.substring(0,a.indexOf(Xh));for(let u=0;u<l.length;u++){let d=l.charAt(u);d===uo?t.minFrac=t.maxFrac=u+1:d===Xh?t.maxFrac=u+1:t.posSuf+=d}let c=a.split(iR);if(t.gSize=c[1]?c[1].length:0,t.lgSize=c[2]||c[1]?(c[2]||c[1]).length:0,s){let u=i.length-t.posPre.length-t.posSuf.length,d=s.indexOf(Xh);t.negPre=s.substring(0,d).replace(/'/g,""),t.negSuf=s.slice(d+u).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}function aR(n){if(n.digits[0]===0)return n;let e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(e===0?n.digits.push(0,0):e===1&&n.digits.push(0),n.integerLen+=2),n}function lR(n){let e=Math.abs(n)+"",t=0,r,i,s,o,a;for((i=e.indexOf(lc))>-1&&(e=e.replace(lc,"")),(s=e.search(/e/i))>0?(i<0&&(i=s),i+=+e.slice(s+1),e=e.substring(0,s)):i<0&&(i=e.length),s=0;e.charAt(s)===uo;s++);if(s===(a=e.length))r=[0],i=1;else{for(a--;e.charAt(a)===uo;)a--;for(i-=s,r=[],o=0;s<=a;s++,o++)r[o]=Number(e.charAt(s))}return i>WE&&(r=r.splice(0,WE-1),t=i-1,i=1),{digits:r,exponent:t,integerLen:i}}function cR(n,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let r=n.digits,i=r.length-n.integerLen,s=Math.min(Math.max(e,i),t),o=s+n.integerLen,a=r[o];if(o>0){r.splice(Math.max(n.integerLen,o));for(let d=o;d<r.length;d++)r[d]=0}else{i=Math.max(0,i),n.integerLen=1,r.length=Math.max(1,o=s+1),r[0]=0;for(let d=1;d<o;d++)r[d]=0}if(a>=5)if(o-1<0){for(let d=0;d>o;d--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[o-1]++;for(;i<Math.max(0,s);i++)r.push(0);let l=s!==0,c=e+n.integerLen,u=r.reduceRight(function(d,f,h,y){return f=f+d,y[h]=f<10?f:f-10,l&&(y[h]===0&&h>=c?y.pop():l=!1),f>=10?1:0},0);u&&(r.unshift(u),n.integerLen++)}function ep(n){let e=parseInt(n);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+n);return e}var tp=/\s+/,qE=[],fo=(()=>{class n{_ngEl;_renderer;initialClasses=qE;rawClass;stateMap=new Map;constructor(t,r){this._ngEl=t,this._renderer=r}set klass(t){this.initialClasses=t!=null?t.trim().split(tp):qE}set ngClass(t){this.rawClass=typeof t=="string"?t.trim().split(tp):t}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(let r of t)this._updateState(r,!0);else if(t!=null)for(let r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){let i=this.stateMap.get(t);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let t of this.stateMap){let r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){t=t.trim(),t.length>0&&t.split(tp).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static \u0275fac=function(r){return new(r||n)(re(lr),re(Xr))};static \u0275dir=Fe({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return n})();function uw(n,e){return new I(2100,!1)}var uR="mediumDate",dw=new R(""),fw=new R(""),Gn=(()=>{class n{locale;defaultTimezone;defaultOptions;constructor(t,r,i){this.locale=t,this.defaultTimezone=r,this.defaultOptions=i}transform(t,r,i,s){if(t==null||t===""||t!==t)return null;try{let o=r??this.defaultOptions?.dateFormat??uR,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return ow(t,o,s||this.locale,a)}catch(o){throw uw(n,o.message)}}static \u0275fac=function(r){return new(r||n)(re(so,16),re(dw,24),re(fw,24))};static \u0275pipe=zh({name:"date",type:n,pure:!0})}return n})();var ho=(()=>{class n{_locale;_defaultCurrencyCode;constructor(t,r="USD"){this._locale=t,this._defaultCurrencyCode=r}transform(t,r=this._defaultCurrencyCode,i="symbol",s,o){if(!dR(t))return null;o||=this._locale,typeof i=="boolean"&&(i=i?"symbol":"code");let a=r||this._defaultCurrencyCode;i!=="code"&&(i==="symbol"||i==="symbol-narrow"?a=iw(a,i==="symbol"?"wide":"narrow",o):a=i);try{let l=fR(t);return cw(l,o,a,r,s)}catch(l){throw uw(n,l.message)}}static \u0275fac=function(r){return new(r||n)(re(so,16),re(UE,16))};static \u0275pipe=zh({name:"currency",type:n,pure:!0})}return n})();function dR(n){return!(n==null||n===""||n!==n)}function fR(n){if(typeof n=="string"&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if(typeof n!="number")throw new Error(`${n} is not a number`);return n}var Ae=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Hn({type:n});static \u0275inj=Fn({})}return n})();function po(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,s]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var rp="browser",hw="server";function cc(n){return n===hw}var ti=class{};var fc=new R(""),ap=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i,s){return this._findPluginFor(r).addEventListener(t,r,i,s)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new I(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(j(fc),j(Ce))};static \u0275prov=q({token:n,factory:n.\u0275fac})}return n})(),go=class{_doc;constructor(e){this._doc=e}manager},uc="ng-app-id";function pw(n){for(let e of n)e.remove()}function mw(n,e){let t=e.createElement("style");return t.textContent=n,t}function pR(n,e,t,r){let i=n.head?.querySelectorAll(`style[${uc}="${e}"],link[${uc}="${e}"]`);if(i)for(let s of i)s.removeAttribute(uc),s instanceof HTMLLinkElement?r.set(s.href.slice(s.href.lastIndexOf("/")+1),{usage:0,elements:[s]}):s.textContent&&t.set(s.textContent,{usage:0,elements:[s]})}function sp(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var lp=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,this.isServer=cc(s),pR(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,mw);r?.forEach(i=>this.addUsage(i,this.external,sp))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let s=r.get(t);s?s.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(o=>this.addElement(o,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(pw(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])pw(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,mw(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,sp(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),this.isServer&&r.setAttribute(uc,this.appId),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(j(ze),j(vh),j(bh,8),j(to))};static \u0275prov=q({token:n,factory:n.\u0275fac})}return n})(),ip={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},cp=/%COMP%/g;var yw="%COMP%",mR=`_nghost-${yw}`,gR=`_ngcontent-${yw}`,yR=!0,_R=new R("",{providedIn:"root",factory:()=>yR});function vR(n){return gR.replace(cp,n)}function ER(n){return mR.replace(cp,n)}function _w(n,e){return e.map(t=>t.replace(cp,n))}var vo=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,s,o,a,l,c=null,u=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=l,this.nonce=c,this.tracingService=u,this.platformIsServer=cc(a),this.defaultRenderer=new yo(t,o,l,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===an.ShadowDom&&(r=$(S({},r),{encapsulation:an.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof dc?i.applyToHost(t):i instanceof _o&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,s=i.get(r.id);if(!s){let o=this.doc,a=this.ngZone,l=this.eventManager,c=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,d=this.platformIsServer,f=this.tracingService;switch(r.encapsulation){case an.Emulated:s=new dc(l,c,r,this.appId,u,o,a,d,f);break;case an.ShadowDom:return new op(l,c,t,r,o,a,this.nonce,d,f);default:s=new _o(l,c,r,u,o,a,d,f);break}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(j(ap),j(lp),j(vh),j(_R),j(ze),j(to),j(Ce),j(bh),j(Kl,8))};static \u0275prov=q({token:n,factory:n.\u0275fac})}return n})(),yo=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,s){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=s}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(ip[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(gw(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(gw(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new I(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let s=ip[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=ip[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(On.DashCase|On.Important)?e.style.setProperty(t,r,i&On.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&On.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=zn().getGlobalEventTarget(this.doc,e),!e))throw new I(5102,!1);let s=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(s=this.tracingService.wrapEventListener(e,t,s)),this.eventManager.addEventListener(e,t,s,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function gw(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var op=class extends yo{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,r,i,s,o,a,l,c){super(e,s,o,l,c),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=i.styles;u=_w(i.id,u);for(let f of u){let h=document.createElement("style");a&&h.setAttribute("nonce",a),h.textContent=f,this.shadowRoot.appendChild(h)}let d=i.getExternalStyles?.();if(d)for(let f of d){let h=sp(f,s);a&&h.setAttribute("nonce",a),this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},_o=class extends yo{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,s,o,a,l,c){super(e,s,o,a,l),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let u=r.styles;this.styles=c?_w(c,u):u,this.styleUrls=r.getExternalStyles?.(c)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},dc=class extends _o{contentAttr;hostAttr;constructor(e,t,r,i,s,o,a,l,c){let u=i+"-"+r.id;super(e,t,r,s,o,a,l,c,u),this.contentAttr=vR(u),this.hostAttr=ER(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var hc=class n extends oo{supportsDOMEvents=!0;static makeCurrent(){Yh(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=wR();return t==null?null:bR(t)}resetBaseElement(){Eo=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return po(document.cookie,e)}},Eo=null;function wR(){return Eo=Eo||document.head.querySelector("base"),Eo?Eo.getAttribute("href"):null}function bR(n){return new URL(n,document.baseURI).pathname}var CR=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac})}return n})(),Ew=(()=>{class n extends go{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,s){return t.addEventListener(r,i,s),()=>this.removeEventListener(t,r,i,s)}removeEventListener(t,r,i,s){return t.removeEventListener(r,i,s)}static \u0275fac=function(r){return new(r||n)(j(ze))};static \u0275prov=q({token:n,factory:n.\u0275fac})}return n})(),vw=["alt","control","meta","shift"],IR={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},DR={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},ww=(()=>{class n extends go{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,s){let o=n.parseEventName(r),a=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>zn().onAndCancel(t,o.domEventName,a,s))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let s=n._normalizeKey(r.pop()),o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),vw.forEach(c=>{let u=r.indexOf(c);u>-1&&(r.splice(u,1),o+=c+".")}),o+=s,r.length!=0||s.length===0)return null;let l={};return l.domEventName=i,l.fullKey=o,l}static matchEventFullKeyCode(t,r){let i=IR[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),vw.forEach(o=>{if(o!==i){let a=DR[o];a(t)&&(s+=o+".")}}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(j(ze))};static \u0275prov=q({token:n,factory:n.\u0275fac})}return n})();function up(n,e,t){return BE(S({rootComponent:n,platformRef:t?.platformRef},SR(e)))}function SR(n){return{appProviders:[...NR,...n?.providers??[]],platformProviders:MR}}function TR(){hc.makeCurrent()}function xR(){return new kn}function AR(){return S0(document),document}var MR=[{provide:to,useValue:rp},{provide:Eh,useValue:TR,multi:!0},{provide:ze,useFactory:AR}];var NR=[{provide:Ul,useValue:"root"},{provide:kn,useFactory:xR},{provide:fc,useClass:Ew,multi:!0,deps:[ze]},{provide:fc,useClass:ww,multi:!0,deps:[ze]},vo,lp,ap,{provide:ar,useExisting:vo},{provide:ti,useClass:CR},[]];var Yi=class{},bo=class{},ni=class n{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(e){e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let i=t.slice(0,r),s=t.slice(r+1).trim();this.addHeaderEntry(i,s)}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.addHeaderEntry(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let i=(e.op==="a"?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":let s=e.value;if(!s)this.headers.delete(t),this.normalizedNames.delete(t);else{let o=this.headers.get(t);if(!o)return;o=o.filter(a=>s.indexOf(a)===-1),o.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}break}}addHeaderEntry(e,t){let r=e.toLowerCase();this.maybeSetNormalizedName(e,r),this.headers.has(r)?this.headers.get(r).push(t):this.headers.set(r,[t])}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(s=>s.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var mc=class{encodeKey(e){return bw(e)}encodeValue(e){return bw(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function RR(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{let s=i.indexOf("="),[o,a]=s==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],l=t.get(o)||[];l.push(a),t.set(o,l)}),t}var kR=/%(\d[a-f0-9])/gi,PR={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function bw(n){return encodeURIComponent(n).replace(kR,(e,t)=>PR[t]??e)}function pc(n){return`${n}`}var ur=class n{map;encoder;updates=null;cloneFrom=null;constructor(e={}){if(this.encoder=e.encoder||new mc,e.fromString){if(e.fromObject)throw new I(2805,!1);this.map=RR(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let r=e.fromObject[t],i=Array.isArray(r)?r.map(pc):[pc(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(s=>{t.push({param:r,value:s,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(pc(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(pc(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var gc=class{map=new Map;set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function OR(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function Cw(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function Iw(n){return typeof Blob<"u"&&n instanceof Blob}function Dw(n){return typeof FormData<"u"&&n instanceof FormData}function FR(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var Sw="Content-Type",Tw="Accept",xw="X-Request-URL",Aw="text/plain",Mw="application/json",LR=`${Mw}, ${Aw}, */*`,wo=class n{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;responseType="json";method;params;urlWithParams;transferCache;constructor(e,t,r,i){this.url=t,this.method=e.toUpperCase();let s;if(OR(this.method)||i?(this.body=r!==void 0?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers??=new ni,this.context??=new gc,!this.params)this.params=new ur,this.urlWithParams=t;else{let o=this.params.toString();if(o.length===0)this.urlWithParams=t;else{let a=t.indexOf("?"),l=a===-1?"?":a<t.length-1?"&":"";this.urlWithParams=t+l+o}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||Cw(this.body)||Iw(this.body)||Dw(this.body)||FR(this.body)?this.body:this.body instanceof ur?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||Dw(this.body)?null:Iw(this.body)?this.body.type||null:Cw(this.body)?null:typeof this.body=="string"?Aw:this.body instanceof ur?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?Mw:null}clone(e={}){let t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,s=e.transferCache??this.transferCache,o=e.body!==void 0?e.body:this.body,a=e.withCredentials??this.withCredentials,l=e.reportProgress??this.reportProgress,c=e.headers||this.headers,u=e.params||this.params,d=e.context??this.context;return e.setHeaders!==void 0&&(c=Object.keys(e.setHeaders).reduce((f,h)=>f.set(h,e.setHeaders[h]),c)),e.setParams&&(u=Object.keys(e.setParams).reduce((f,h)=>f.set(h,e.setParams[h]),u)),new n(t,r,o,{params:u,headers:c,context:d,reportProgress:l,responseType:i,withCredentials:a,transferCache:s})}},Ki=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(Ki||{}),Qi=class{headers;status;statusText;url;ok;type;constructor(e,t=200,r="OK"){this.headers=e.headers||new ni,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},yc=class n extends Qi{constructor(e={}){super(e)}type=Ki.ResponseHeader;clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},_c=class n extends Qi{body;constructor(e={}){super(e),this.body=e.body!==void 0?e.body:null}type=Ki.Response;clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},vc=class extends Qi{name="HttpErrorResponse";message;error;ok=!1;constructor(e){super(e,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},VR=200,jR=204;function dp(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var UR=(()=>{class n{handler;constructor(t){this.handler=t}request(t,r,i={}){let s;if(t instanceof wo)s=t;else{let l;i.headers instanceof ni?l=i.headers:l=new ni(i.headers);let c;i.params&&(i.params instanceof ur?c=i.params:c=new ur({fromObject:i.params})),s=new wo(t,r,i.body!==void 0?i.body:null,{headers:l,context:i.context,params:c,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache})}let o=il(s).pipe(Fd(l=>this.handler.handle(l)));if(t instanceof wo||i.observe==="events")return o;let a=o.pipe(Od(l=>l instanceof _c));switch(i.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe(ot(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new I(2806,!1);return l.body}));case"blob":return a.pipe(ot(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new I(2807,!1);return l.body}));case"text":return a.pipe(ot(l=>{if(l.body!==null&&typeof l.body!="string")throw new I(2808,!1);return l.body}));case"json":default:return a.pipe(ot(l=>l.body))}case"response":return a;default:throw new I(2809,!1)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:new ur().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,dp(i,r))}post(t,r,i={}){return this.request("POST",t,dp(i,r))}put(t,r,i={}){return this.request("PUT",t,dp(i,r))}static \u0275fac=function(r){return new(r||n)(j(Yi))};static \u0275prov=q({token:n,factory:n.\u0275fac})}return n})();var BR=new R("");function HR(n,e){return e(n)}function $R(n,e,t){return(r,i)=>Bl(t,()=>e(r,s=>n(s,i)))}var Nw=new R(""),zR=new R(""),Rw=new R("",{providedIn:"root",factory:()=>!0});var Ec=(()=>{class n extends Yi{backend;injector;chain=null;pendingTasks=T(Gi);contributeToStability=T(Rw);constructor(t,r){super(),this.backend=t,this.injector=r}handle(t){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(Nw),...this.injector.get(zR,[])]));this.chain=r.reduceRight((i,s)=>$R(i,s,this.injector),HR)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(Ld(()=>this.pendingTasks.remove(r)))}else return this.chain(t,r=>this.backend.handle(r))}static \u0275fac=function(r){return new(r||n)(j(bo),j(An))};static \u0275prov=q({token:n,factory:n.\u0275fac})}return n})();var WR=/^\)\]\}',?\n/,GR=RegExp(`^${xw}:`,"m");function qR(n){return"responseURL"in n&&n.responseURL?n.responseURL:GR.test(n.getAllResponseHeaders())?n.getResponseHeader(xw):null}var fp=(()=>{class n{xhrFactory;constructor(t){this.xhrFactory=t}handle(t){if(t.method==="JSONP")throw new I(-2800,!1);let r=this.xhrFactory;return(r.\u0275loadImpl?jr(r.\u0275loadImpl()):il(null)).pipe(Vd(()=>new Se(s=>{let o=r.build();if(o.open(t.method,t.urlWithParams),t.withCredentials&&(o.withCredentials=!0),t.headers.forEach((E,b)=>o.setRequestHeader(E,b.join(","))),t.headers.has(Tw)||o.setRequestHeader(Tw,LR),!t.headers.has(Sw)){let E=t.detectContentTypeHeader();E!==null&&o.setRequestHeader(Sw,E)}if(t.responseType){let E=t.responseType.toLowerCase();o.responseType=E!=="json"?E:"text"}let a=t.serializeBody(),l=null,c=()=>{if(l!==null)return l;let E=o.statusText||"OK",b=new ni(o.getAllResponseHeaders()),D=qR(o)||t.url;return l=new yc({headers:b,status:o.status,statusText:E,url:D}),l},u=()=>{let{headers:E,status:b,statusText:D,url:O}=c(),H=null;b!==jR&&(H=typeof o.response>"u"?o.responseText:o.response),b===0&&(b=H?VR:0);let de=b>=200&&b<300;if(t.responseType==="json"&&typeof H=="string"){let Lt=H;H=H.replace(WR,"");try{H=H!==""?JSON.parse(H):null}catch(Et){H=Lt,de&&(de=!1,H={error:Et,text:H})}}de?(s.next(new _c({body:H,headers:E,status:b,statusText:D,url:O||void 0})),s.complete()):s.error(new vc({error:H,headers:E,status:b,statusText:D,url:O||void 0}))},d=E=>{let{url:b}=c(),D=new vc({error:E,status:o.status||0,statusText:o.statusText||"Unknown Error",url:b||void 0});s.error(D)},f=!1,h=E=>{f||(s.next(c()),f=!0);let b={type:Ki.DownloadProgress,loaded:E.loaded};E.lengthComputable&&(b.total=E.total),t.responseType==="text"&&o.responseText&&(b.partialText=o.responseText),s.next(b)},y=E=>{let b={type:Ki.UploadProgress,loaded:E.loaded};E.lengthComputable&&(b.total=E.total),s.next(b)};return o.addEventListener("load",u),o.addEventListener("error",d),o.addEventListener("timeout",d),o.addEventListener("abort",d),t.reportProgress&&(o.addEventListener("progress",h),a!==null&&o.upload&&o.upload.addEventListener("progress",y)),o.send(a),s.next({type:Ki.Sent}),()=>{o.removeEventListener("error",d),o.removeEventListener("abort",d),o.removeEventListener("load",u),o.removeEventListener("timeout",d),t.reportProgress&&(o.removeEventListener("progress",h),a!==null&&o.upload&&o.upload.removeEventListener("progress",y)),o.readyState!==o.DONE&&o.abort()}})))}static \u0275fac=function(r){return new(r||n)(j(ti))};static \u0275prov=q({token:n,factory:n.\u0275fac})}return n})(),kw=new R(""),KR="XSRF-TOKEN",YR=new R("",{providedIn:"root",factory:()=>KR}),QR="X-XSRF-TOKEN",ZR=new R("",{providedIn:"root",factory:()=>QR}),Co=class{},JR=(()=>{class n{doc;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(t,r){this.doc=t,this.cookieName=r}getToken(){let t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=po(t,this.cookieName),this.lastCookieString=t),this.lastToken}static \u0275fac=function(r){return new(r||n)(j(ze),j(YR))};static \u0275prov=q({token:n,factory:n.\u0275fac})}return n})(),XR=/^(?:https?:)?\/\//i;function ek(n,e){if(!T(kw)||n.method==="GET"||n.method==="HEAD"||XR.test(n.url))return e(n);let t=T(Co).getToken(),r=T(ZR);return t!=null&&!n.headers.has(r)&&(n=n.clone({headers:n.headers.set(r,t)})),e(n)}function hp(...n){let e=[UR,fp,Ec,{provide:Yi,useExisting:Ec},{provide:bo,useFactory:()=>T(BR,{optional:!0})??T(fp)},{provide:Nw,useValue:ek,multi:!0},{provide:kw,useValue:!0},{provide:Co,useClass:JR}];for(let t of n)e.push(...t.\u0275providers);return jl(e)}var ri=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:function(r){let i=null;return r?i=new(r||n):i=j(nk),i},providedIn:"root"})}return n})(),nk=(()=>{class n extends ri{_doc;constructor(t){super(),this._doc=t}sanitize(t,r){if(r==null)return null;switch(t){case Bn.NONE:return r;case Bn.HTML:return Zr(r,"HTML")?jn(r):Ih(this._doc,String(r)).toString();case Bn.STYLE:return Zr(r,"Style")?jn(r):r;case Bn.SCRIPT:if(Zr(r,"Script"))return jn(r);throw new I(5200,!1);case Bn.URL:return Zr(r,"URL")?jn(r):Ch(String(r));case Bn.RESOURCE_URL:if(Zr(r,"ResourceURL"))return jn(r);throw new I(5201,!1);default:throw new I(5202,!1)}}bypassSecurityTrustHtml(t){return P0(t)}bypassSecurityTrustStyle(t){return O0(t)}bypassSecurityTrustScript(t){return F0(t)}bypassSecurityTrustUrl(t){return L0(t)}bypassSecurityTrustResourceUrl(t){return V0(t)}static \u0275fac=function(r){return new(r||n)(j(ze))};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Pw=()=>{};var mp={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};var C=function(n,e){if(!n)throw ii(e)},ii=function(n){return new Error("Firebase Database ("+mp.SDK_VERSION+") INTERNAL ASSERT FAILED: "+n)};var Lw=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},rk=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],o=n[t++],a=n[t++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{let s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},bc={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],o=i+1<n.length,a=o?n[i+1]:0,l=i+2<n.length,c=l?n[i+2]:0,u=s>>2,d=(s&3)<<4|a>>4,f=(a&15)<<2|c>>6,h=c&63;l||(h=64,o||(f=64)),r.push(t[u],t[d],t[f],t[h])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Lw(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):rk(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let c=i<n.length?t[n.charAt(i)]:64;++i;let d=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||a==null||c==null||d==null)throw new gp;let f=s<<2|a>>4;if(r.push(f),c!==64){let h=a<<4&240|c>>2;if(r.push(h),d!==64){let y=c<<6&192|d;r.push(y)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},gp=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},_p=function(n){let e=Lw(n);return bc.encodeByteArray(e,!0)},Do=function(n){return _p(n).replace(/\./g,"")},Zi=function(n){try{return bc.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Vw(n){return jw(void 0,n)}function jw(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:let t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(let t in e)!e.hasOwnProperty(t)||!ik(t)||(n[t]=jw(n[t],e[t]));return n}function ik(n){return n!=="__proto__"}function sk(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var ok=()=>sk().__FIREBASE_DEFAULTS__,ak=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},lk=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Zi(n[1]);return e&&JSON.parse(e)},vp=()=>{try{return Pw()||ok()||ak()||lk()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Ep=n=>vp()?.emulatorHosts?.[n],Uw=n=>{let e=Ep(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},wp=()=>vp()?.config,bp=n=>vp()?.[`_${n}`];var qn=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function dr(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}function Cc(n){return _(this,null,function*(){return(yield fetch(n,{credentials:"include"})).ok})}function Bw(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=S({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Do(JSON.stringify(t)),Do(JSON.stringify(o)),""].join(".")}var Io={};function ck(){let n={prod:[],emulator:[]};for(let e of Object.keys(Io))Io[e]?n.emulator.push(e):n.prod.push(e);return n}function uk(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var Ow=!1;function Ic(n,e){if(typeof window>"u"||typeof document>"u"||!dr(window.location.host)||Io[n]===e||Io[n]||Ow)return;Io[n]=e;function t(f){return`__firebase__banner__${f}`}let r="__firebase__banner",s=ck().prod.length>0;function o(){let f=document.getElementById(r);f&&f.remove()}function a(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function l(f,h){f.setAttribute("width","24"),f.setAttribute("id",h),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function c(){let f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{Ow=!0,o()},f}function u(f,h){f.setAttribute("id",h),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function d(){let f=uk(r),h=t("text"),y=document.getElementById(h)||document.createElement("span"),E=t("learnmore"),b=document.getElementById(E)||document.createElement("a"),D=t("preprendIcon"),O=document.getElementById(D)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){let H=f.element;a(H),u(b,E);let de=c();l(O,D),H.append(O,y,b,de),document.body.appendChild(H)}s?(y.innerText="Preview backend disconnected.",O.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(O.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,y.innerText="Preview backend running in this workspace."),y.setAttribute("id",h)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}function Ge(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function So(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ge())}function Hw(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function $w(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Dc(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function zw(){let n=Ge();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function pn(){return mp.NODE_CLIENT===!0||mp.NODE_ADMIN===!0}function Ww(){try{return typeof indexedDB=="object"}catch{return!1}}function Gw(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}var dk="FirebaseError",Gt=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=dk,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Kn.prototype.create)}},Kn=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?fk(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Gt(i,a,r)}};function fk(n,e){return n.replace(hk,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var hk=/\{\$([^}]+)}/g;function Ji(n){return JSON.parse(n)}function ke(n){return JSON.stringify(n)}var qw=function(n){let e={},t={},r={},i="";try{let s=n.split(".");e=Ji(Zi(s[0])||""),t=Ji(Zi(s[1])||""),i=s[2],r=t.d||{},delete t.d}catch{}return{header:e,claims:t,data:r,signature:i}};var Kw=function(n){let e=qw(n),t=e.claims;return!!t&&typeof t=="object"&&t.hasOwnProperty("iat")},Yw=function(n){let e=qw(n).claims;return typeof e=="object"&&e.admin===!0};function qt(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function si(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]}function To(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function xo(n,e,t){let r={};for(let i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=e.call(t,n[i],i,n));return r}function mn(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let s=n[i],o=e[i];if(Fw(s)&&Fw(o)){if(!mn(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function Fw(n){return n!==null&&typeof n=="object"}function oi(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Xi(n){let e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function es(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}var wc=class{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);let r=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)r[d]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let d=0;d<16;d++)r[d]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let d=16;d<80;d++){let f=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(f<<1|f>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],l=this.chain_[4],c,u;for(let d=0;d<80;d++){d<40?d<20?(c=a^s&(o^a),u=1518500249):(c=s^o^a,u=1859775393):d<60?(c=s&o|a&(s|o),u=2400959708):(c=s^o^a,u=3395469782);let f=(i<<5|i>>>27)+c+l+u+r[d]&4294967295;l=a,a=o,o=(s<<30|s>>>2)&4294967295,s=i,i=f}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,t){if(e==null)return;t===void 0&&(t=e.length);let r=t-this.blockSize,i=0,s=this.buf_,o=this.inbuf_;for(;i<t;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<t;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<t;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=t}digest(){let e=[],t=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=t&255,t/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}};function Qw(n,e){let t=new yp(n,e);return t.subscribe.bind(t)}var yp=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");pk(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=pp),i.error===void 0&&(i.error=pp),i.complete===void 0&&(i.complete=pp);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function pk(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function pp(){}function Ao(n,e){return`${n} failed: ${e} argument `}var Zw=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);if(i>=55296&&i<=56319){let s=i-55296;r++,C(r<n.length,"Surrogate pair missing trail surrogate.");let o=n.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):i<65536?(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},Mo=function(n){let e=0;for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,t++):e+=3}return e};var X8=4*60*60*1e3;function Ve(n){return n&&n._delegate?n._delegate:n}var kt=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var ai="[DEFAULT]";var Sc=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new qn;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){let t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(gk(e))try{this.getOrInitializeService({instanceIdentifier:ai})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=ai){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return _(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=ai){return this.instances.has(e)}getOptions(e=ai){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,t){let r=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);let s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:mk(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ai){return this.component?this.component.multipleInstances?e:ai:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function mk(n){return n===ai?void 0:n}function gk(n){return n.instantiationMode==="EAGER"}var No=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new Sc(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var yk=[],fe=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(fe||{}),_k={debug:fe.DEBUG,verbose:fe.VERBOSE,info:fe.INFO,warn:fe.WARN,error:fe.ERROR,silent:fe.SILENT},vk=fe.INFO,Ek={[fe.DEBUG]:"log",[fe.VERBOSE]:"log",[fe.INFO]:"info",[fe.WARN]:"warn",[fe.ERROR]:"error"},wk=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=Ek[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},fr=class{constructor(e){this.name=e,this._logLevel=vk,this._logHandler=wk,this._userLogHandler=null,yk.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in fe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?_k[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,fe.DEBUG,...e),this._logHandler(this,fe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,fe.VERBOSE,...e),this._logHandler(this,fe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,fe.INFO,...e),this._logHandler(this,fe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,fe.WARN,...e),this._logHandler(this,fe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,fe.ERROR,...e),this._logHandler(this,fe.ERROR,...e)}};var bk=(n,e)=>e.some(t=>n instanceof t),Jw,Xw;function Ck(){return Jw||(Jw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Ik(){return Xw||(Xw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var eb=new WeakMap,Ip=new WeakMap,tb=new WeakMap,Cp=new WeakMap,Sp=new WeakMap;function Dk(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(gn(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&eb.set(t,n)}).catch(()=>{}),Sp.set(e,n),e}function Sk(n){if(Ip.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});Ip.set(n,e)}var Dp={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Ip.get(n);if(e==="objectStoreNames")return n.objectStoreNames||tb.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return gn(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function nb(n){Dp=n(Dp)}function Tk(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(Tc(this),e,...t);return tb.set(r,e.sort?e.sort():[e]),gn(r)}:Ik().includes(n)?function(...e){return n.apply(Tc(this),e),gn(eb.get(this))}:function(...e){return gn(n.apply(Tc(this),e))}}function xk(n){return typeof n=="function"?Tk(n):(n instanceof IDBTransaction&&Sk(n),bk(n,Ck())?new Proxy(n,Dp):n)}function gn(n){if(n instanceof IDBRequest)return Dk(n);if(Cp.has(n))return Cp.get(n);let e=xk(n);return e!==n&&(Cp.set(n,e),Sp.set(e,n)),e}var Tc=n=>Sp.get(n);function ib(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(n,e),a=gn(o);return r&&o.addEventListener("upgradeneeded",l=>{r(gn(o.result),l.oldVersion,l.newVersion,gn(o.transaction),l)}),t&&o.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}var Ak=["get","getKey","getAll","getAllKeys","count"],Mk=["put","add","delete","clear"],Tp=new Map;function rb(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Tp.get(e))return Tp.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=Mk.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Ak.includes(t)))return;let s=function(o,...a){return _(this,null,function*(){let l=this.transaction(o,i?"readwrite":"readonly"),c=l.store;return r&&(c=c.index(a.shift())),(yield Promise.all([c[t](...a),i&&l.done]))[0]})};return Tp.set(e,s),s}nb(n=>$(S({},n),{get:(e,t,r)=>rb(e,t)||n.get(e,t,r),has:(e,t)=>!!rb(e,t)||n.has(e,t)}));var Ap=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Nk(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function Nk(n){return n.getComponent()?.type==="VERSION"}var Mp="@firebase/app",sb="0.14.8";var Yn=new fr("@firebase/app"),Rk="@firebase/app-compat",kk="@firebase/analytics-compat",Pk="@firebase/analytics",Ok="@firebase/app-check-compat",Fk="@firebase/app-check",Lk="@firebase/auth",Vk="@firebase/auth-compat",jk="@firebase/database",Uk="@firebase/data-connect",Bk="@firebase/database-compat",Hk="@firebase/functions",$k="@firebase/functions-compat",zk="@firebase/installations",Wk="@firebase/installations-compat",Gk="@firebase/messaging",qk="@firebase/messaging-compat",Kk="@firebase/performance",Yk="@firebase/performance-compat",Qk="@firebase/remote-config",Zk="@firebase/remote-config-compat",Jk="@firebase/storage",Xk="@firebase/storage-compat",eP="@firebase/firestore",tP="@firebase/ai",nP="@firebase/firestore-compat",rP="firebase",iP="12.9.0";var Np="[DEFAULT]",sP={[Mp]:"fire-core",[Rk]:"fire-core-compat",[Pk]:"fire-analytics",[kk]:"fire-analytics-compat",[Fk]:"fire-app-check",[Ok]:"fire-app-check-compat",[Lk]:"fire-auth",[Vk]:"fire-auth-compat",[jk]:"fire-rtdb",[Uk]:"fire-data-connect",[Bk]:"fire-rtdb-compat",[Hk]:"fire-fn",[$k]:"fire-fn-compat",[zk]:"fire-iid",[Wk]:"fire-iid-compat",[Gk]:"fire-fcm",[qk]:"fire-fcm-compat",[Kk]:"fire-perf",[Yk]:"fire-perf-compat",[Qk]:"fire-rc",[Zk]:"fire-rc-compat",[Jk]:"fire-gcs",[Xk]:"fire-gcs-compat",[eP]:"fire-fst",[nP]:"fire-fst-compat",[tP]:"fire-vertex","fire-js":"fire-js",[rP]:"fire-js-all"};var Ro=new Map,oP=new Map,Rp=new Map;function ob(n,e){try{n.container.addComponent(e)}catch(t){Yn.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function pr(n){let e=n.name;if(Rp.has(e))return Yn.debug(`There were multiple attempts to register component ${e}.`),!1;Rp.set(e,n);for(let t of Ro.values())ob(t,n);for(let t of oP.values())ob(t,n);return!0}function Po(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Xe(n){return n==null?!1:n.settings!==void 0}var aP={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},hr=new Kn("app","Firebase",aP);var kp=class{constructor(e,t,r){this._isDeleted=!1,this._options=S({},e),this._config=S({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new kt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw hr.create("app-deleted",{appName:this._name})}};var mr=iP;function Oo(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=S({name:Np,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw hr.create("bad-app-name",{appName:String(i)});if(t||(t=wp()),!t)throw hr.create("no-options");let s=Ro.get(i);if(s){if(mn(t,s.options)&&mn(r,s.config))return s;throw hr.create("duplicate-app",{appName:i})}let o=new No(i);for(let l of Rp.values())o.addComponent(l);let a=new kp(t,r,o);return Ro.set(i,a),a}function gr(n=Np){let e=Ro.get(n);if(!e&&n===Np&&wp())return Oo();if(!e)throw hr.create("no-app",{appName:n});return e}function xc(){return Array.from(Ro.values())}function Kt(n,e,t){let r=sP[n]??n;t&&(r+=`-${t}`);let i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){let o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Yn.warn(o.join(" "));return}pr(new kt(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var lP="firebase-heartbeat-database",cP=1,ko="firebase-heartbeat-store",xp=null;function ub(){return xp||(xp=ib(lP,cP,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(ko)}catch(t){console.warn(t)}}}}).catch(n=>{throw hr.create("idb-open",{originalErrorMessage:n.message})})),xp}function uP(n){return _(this,null,function*(){try{let t=(yield ub()).transaction(ko),r=yield t.objectStore(ko).get(db(n));return yield t.done,r}catch(e){if(e instanceof Gt)Yn.warn(e.message);else{let t=hr.create("idb-get",{originalErrorMessage:e?.message});Yn.warn(t.message)}}})}function ab(n,e){return _(this,null,function*(){try{let r=(yield ub()).transaction(ko,"readwrite");yield r.objectStore(ko).put(e,db(n)),yield r.done}catch(t){if(t instanceof Gt)Yn.warn(t.message);else{let r=hr.create("idb-set",{originalErrorMessage:t?.message});Yn.warn(r.message)}}})}function db(n){return`${n.name}!${n.options.appId}`}var dP=1024,fP=30,Pp=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new Op(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return _(this,null,function*(){try{let t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=lb();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>fP){let i=pP(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Yn.warn(e)}})}getHeartbeatsHeader(){return _(this,null,function*(){try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";let e=lb(),{heartbeatsToSend:t,unsentEntries:r}=hP(this._heartbeatsCache.heartbeats),i=Do(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return Yn.warn(e),""}})}};function lb(){return new Date().toISOString().substring(0,10)}function hP(n,e=dP){let t=[],r=n.slice();for(let i of n){let s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),cb(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),cb(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var Op=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return _(this,null,function*(){return Ww()?Gw().then(()=>!0).catch(()=>!1):!1})}read(){return _(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield uP(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return _(this,null,function*(){if(yield this._canUseIndexedDBPromise){let r=yield this.read();return ab(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return _(this,null,function*(){if(yield this._canUseIndexedDBPromise){let r=yield this.read();return ab(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return})}};function cb(n){return Do(JSON.stringify({version:2,heartbeats:n})).length}function pP(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function mP(n){pr(new kt("platform-logger",e=>new Ap(e),"PRIVATE")),pr(new kt("heartbeat",e=>new Pp(e),"PRIVATE")),Kt(Mp,sb,n),Kt(Mp,sb,"esm2020"),Kt("fire-js","")}mP("");var gP="firebase",yP="12.9.0";Kt(gP,yP,"app");var fb="@firebase/database",hb="1.1.0";var Hm="";function _P(n){Hm=n}var $p=class{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){t==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),ke(t))}get(e){let t=this.domStorage_.getItem(this.prefixedName_(e));return t==null?null:Ji(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}};var zp=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){t==null?delete this.cache_[e]:this.cache_[e]=t}get(e){return qt(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}};var Wb=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){let e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new $p(e)}}catch{}return new zp},ci=Wb("localStorage"),Wp=Wb("sessionStorage");var rs=new fr("@firebase/database"),vP=function(){let n=1;return function(){return n++}}(),Gb=function(n){let e=Zw(n),t=new wc;t.update(e);let r=t.digest();return bc.encodeByteArray(r)},Xo=function(...n){let e="";for(let t=0;t<n.length;t++){let r=n[t];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=Xo.apply(null,r):typeof r=="object"?e+=ke(r):e+=r,e+=" "}return e},ui=null,pb=!0,EP=function(n,e){C(!e||n===!0||n===!1,"Can't turn on custom loggers persistently."),n===!0?(rs.logLevel=fe.VERBOSE,ui=rs.log.bind(rs),e&&Wp.set("logging_enabled",!0)):typeof n=="function"?ui=n:(ui=null,Wp.remove("logging_enabled"))},je=function(...n){if(pb===!0&&(pb=!1,ui===null&&Wp.get("logging_enabled")===!0&&EP(!0)),ui){let e=Xo.apply(null,n);ui(e)}},ea=function(n){return function(...e){je(n,...e)}},Gp=function(...n){let e="FIREBASE INTERNAL ERROR: "+Xo(...n);rs.error(e)},Qn=function(...n){let e=`FIREBASE FATAL ERROR: ${Xo(...n)}`;throw rs.error(e),new Error(e)},et=function(...n){let e="FIREBASE WARNING: "+Xo(...n);rs.warn(e)},wP=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&et("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},$m=function(n){return typeof n=="number"&&(n!==n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},bP=function(n){if(pn()||document.readyState==="complete")n();else{let e=!1,t=function(){if(!document.body){setTimeout(t,Math.floor(10));return}e||(e=!0,n())};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&t()}),window.attachEvent("onload",t))}},os="[MIN_NAME]",di="[MAX_NAME]",hi=function(n,e){if(n===e)return 0;if(n===os||e===di)return-1;if(e===os||n===di)return 1;{let t=mb(n),r=mb(e);return t!==null?r!==null?t-r===0?n.length-e.length:t-r:-1:r!==null?1:n<e?-1:1}},CP=function(n,e){return n===e?0:n<e?-1:1},Fo=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+ke(e))},zm=function(n){if(typeof n!="object"||n===null)return ke(n);let e=[];for(let r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)r!==0&&(t+=","),t+=ke(e[r]),t+=":",t+=zm(n[e[r]]);return t+="}",t},qb=function(n,e){let t=n.length;if(t<=e)return[n];let r=[];for(let i=0;i<t;i+=e)i+e>t?r.push(n.substring(i,t)):r.push(n.substring(i,i+e));return r};function Ue(n,e){for(let t in n)n.hasOwnProperty(t)&&e(t,n[t])}var Kb=function(n){C(!$m(n),"Invalid JSON number");let e=11,t=52,r=(1<<e-1)-1,i,s,o,a,l;n===0?(s=0,o=0,i=1/n===-1/0?1:0):(i=n<0,n=Math.abs(n),n>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(n)/Math.LN2),r),s=a+r,o=Math.round(n*Math.pow(2,t-a)-Math.pow(2,t))):(s=0,o=Math.round(n/Math.pow(2,1-r-t))));let c=[];for(l=t;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(l=e;l;l-=1)c.push(s%2?1:0),s=Math.floor(s/2);c.push(i?1:0),c.reverse();let u=c.join(""),d="";for(l=0;l<64;l+=8){let f=parseInt(u.substr(l,8),2).toString(16);f.length===1&&(f="0"+f),d=d+f}return d.toLowerCase()},IP=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},DP=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function SP(n,e){let t="Unknown Error";n==="too_big"?t="The data requested exceeds the maximum size that can be accessed with a single request.":n==="permission_denied"?t="Client doesn't have permission to access the desired data.":n==="unavailable"&&(t="The service is unavailable");let r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}var TP=new RegExp("^-?(0*)\\d{1,10}$"),xP=-2147483648,AP=2147483647,mb=function(n){if(TP.test(n)){let e=Number(n);if(e>=xP&&e<=AP)return e}return null},ps=function(n){try{n()}catch(e){setTimeout(()=>{let t=e.stack||"";throw et("Exception was thrown by user callback.",t),e},Math.floor(0))}},MP=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Bo=function(n,e){let t=setTimeout(n,e);return typeof t=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):typeof t=="object"&&t.unref&&t.unref(),t};var qp=class{constructor(e,t){this.appCheckProvider=t,this.appName=e.name,Xe(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.appCheckProvider?.get().then(t=>t.addTokenListener(e))}notifyForInvalidToken(){et(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}};var Kp=class{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&t.code==="auth/token-not-initialized"?(je("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',et(e)}},Ho=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}n.OWNER="owner";return n})(),Mc="5",Yb="v",Qb="s",Zb="r",Jb="f",Xb=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,eC="ls",tC="p",Yp="ac",nC="websocket",rC="long_polling";var Nc=class{constructor(e,t,r,i,s=!1,o="",a=!1,l=!1,c=null){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this.emulatorOptions=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ci.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&ci.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){let e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}};function NP(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams}function iC(n,e,t){C(typeof e=="string","typeof type must == string"),C(typeof t=="object","typeof params must == object");let r;if(e===nC)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else if(e===rC)r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);NP(n)&&(t.ns=n.namespace);let i=[];return Ue(t,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}var Qp=class{constructor(){this.counters_={}}incrementCounter(e,t=1){qt(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return Vw(this.counters_)}};var Fp={},Lp={};function Wm(n){let e=n.toString();return Fp[e]||(Fp[e]=new Qp),Fp[e]}function RP(n,e){let t=n.toString();return Lp[t]||(Lp[t]=e()),Lp[t]}var Zp=class{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){let r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&ps(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var gb="start",kP="close",PP="pLPCommand",OP="pRTLPCB",sC="id",oC="pw",aC="ser",FP="cb",LP="seg",VP="ts",jP="d",UP="dframe",lC=1870,cC=30,BP=lC-cC,HP=25e3,$P=3e4,Jp=class n{constructor(e,t,r,i,s,o,a){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=ea(e),this.stats_=Wm(t),this.urlFn=l=>(this.appCheckToken&&(l[Yp]=this.appCheckToken),iC(t,rC,l))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Zp(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor($P)),bP(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Xp((...s)=>{let[o,a,l,c,u]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===gb)this.id=a,this.password=l;else if(o===kP)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{let[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);let r={};r[gb]="t",r[aC]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[FP]=this.scriptTagHolder.uniqueCallbackIdentifier),r[Yb]=Mc,this.transportSessionId&&(r[Qb]=this.transportSessionId),this.lastSessionId&&(r[eC]=this.lastSessionId),this.applicationId&&(r[tC]=this.applicationId),this.appCheckToken&&(r[Yp]=this.appCheckToken),typeof location<"u"&&location.hostname&&Xb.test(location.hostname)&&(r[Zb]=Jb);let i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){n.forceAllow_=!0}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){return pn()?!1:n.forceAllow_?!0:!n.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!IP()&&!DP()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){let t=ke(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);let r=_p(t),i=qb(r,BP);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if(pn())return;this.myDisconnFrame=document.createElement("iframe");let r={};r[UP]="t",r[sC]=e,r[oC]=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let t=ke(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}},Xp=class n{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,pn())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=vP(),window[PP+this.uniqueCallbackIdentifier]=e,window[OP+this.uniqueCallbackIdentifier]=t,this.myIFrame=n.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');let o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){je("frame writing exception"),a.stack&&je(a.stack),je(a)}}}static createIFrame_(){let e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||je("No IE domain setting required")}catch{let r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let e={};e[sC]=this.myID,e[oC]=this.myPW,e[aC]=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+cC+r.length<=lC;){let o=this.pendingSegs.shift();r=r+"&"+LP+i+"="+o.seg+"&"+VP+i+"="+o.ts+"&"+jP+i+"="+o.d,i++}return t=t+r,this.addLongPollTag_(t,this.currentSerial),!0}else return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);let r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(HP)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,t){pn()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;let r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){let i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{je("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}};var zP=16384,WP=45e3,Rc=null;typeof MozWebSocket<"u"?Rc=MozWebSocket:typeof WebSocket<"u"&&(Rc=WebSocket);var Lo=(()=>{class n{constructor(t,r,i,s,o,a,l){this.connId=t,this.applicationId=i,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=ea(this.connId),this.stats_=Wm(r),this.connURL=n.connectionURL_(r,a,l,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,s,o){let a={};return a[Yb]=Mc,!pn()&&typeof location<"u"&&location.hostname&&Xb.test(location.hostname)&&(a[Zb]=Jb),r&&(a[Qb]=r),i&&(a[eC]=i),s&&(a[Yp]=s),o&&(a[tC]=o),iC(t,nC,a)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ci.set("previous_websocket_failure",!0);try{let i;if(pn()){let s=this.nodeAdmin?"AdminNode":"Node";i={headers:{"User-Agent":`Firebase/${Mc}/${Hm}/${process.platform}/${s}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);let o=process.env,a=this.connURL.indexOf("wss://")===0?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new Rc(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){let r=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(r);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&Rc!==null&&!n.forceDisallow_}static previouslyFailed(){return ci.isInMemoryStorage||ci.get("previous_websocket_failure")===!0}markConnectionHealthy(){ci.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){let r=this.frames.join("");this.frames=null;let i=Ji(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(C(this.frames===null,"We already have a frame buffer"),t.length<=6){let r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(this.mySock===null)return;let r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{let i=this.extractFrameCount_(r);i!==null&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();let r=ke(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);let i=qb(r,zP);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(WP))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4;return n})(),GP=(()=>{class n{static get ALL_TRANSPORTS(){return[Jp,Lo]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(t){this.initTransports_(t)}initTransports_(t){let r=Lo&&Lo.isAvailable(),i=r&&!Lo.previouslyFailed();if(t.webSocketOnly&&(r||et("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Lo];else{let s=this.transports_=[];for(let o of n.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}n.globalTransportInitialized_=!1;return n})(),qP=6e4,KP=5e3,YP=10*1024,QP=100*1024,Vp="t",yb="d",ZP="s",_b="r",JP="e",vb="o",Eb="a",wb="n",bb="p",XP="h",em=class{constructor(e,t,r,i,s,o,a,l,c,u){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=ea("c:"+this.id+":"),this.transportManager_=new GP(t),this.log_("Connection created"),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));let i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Bo(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>QP?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>YP?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){let t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Vp in e){let t=e[Vp];t===Eb?this.upgradeIfSecondaryHealthy_():t===_b?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===vb&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let t=Fo("t",e),r=Fo("d",e);if(t==="c")this.onSecondaryControl_(r);else if(t==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:bb,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Eb,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:wb,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let t=Fo("t",e),r=Fo("d",e);t==="c"?this.onControl_(r):t==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let t=Fo(Vp,e);if(yb in e){let r=e[yb];if(t===XP){let i=S({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(t===wb){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===ZP?this.onConnectionShutdown_(r):t===_b?this.onReset_(r):t===JP?Gp("Server Error: "+r):t===vb?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Gp("Unknown control packet command: "+t)}}onHandshake_(e){let t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),Mc!==r&&et("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),Bo(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(qP))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Bo(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(KP))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:bb,d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ci.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var kc=class{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}};var Pc=class{constructor(e){this.allowedEvents_=e,this.listeners_={},C(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){let r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});let i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);let i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===t&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){C(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}};var Oc=class n extends Pc{static getInstance(){return new n}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!So()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return C(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}};var Cb=32,Ib=768,ue=class{constructor(e,t){if(t===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)this.pieces_[t]!==""&&(e+="/"+this.pieces_[t]);return e||"/"}};function le(){return new ue("")}function J(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function vr(n){return n.pieces_.length-n.pieceNum_}function ge(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new ue(n.pieces_,e)}function Gm(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function eO(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)n.pieces_[t]!==""&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}function Go(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function uC(n){if(n.pieceNum_>=n.pieces_.length)return null;let e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new ue(e,0)}function Ie(n,e){let t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof ue)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{let r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new ue(t,0)}function te(n){return n.pieceNum_>=n.pieces_.length}function pt(n,e){let t=J(n),r=J(e);if(t===null)return e;if(t===r)return pt(ge(n),ge(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function tO(n,e){let t=Go(n,0),r=Go(e,0);for(let i=0;i<t.length&&i<r.length;i++){let s=hi(t[i],r[i]);if(s!==0)return s}return t.length===r.length?0:t.length<r.length?-1:1}function qm(n,e){if(vr(n)!==vr(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Pt(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(vr(n)>vr(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}var tm=class{constructor(e,t){this.errorPrefix_=t,this.parts_=Go(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Mo(this.parts_[r]);dC(this)}};function nO(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=Mo(e),dC(n)}function rO(n){let e=n.parts_.pop();n.byteLength_-=Mo(e),n.parts_.length>0&&(n.byteLength_-=1)}function dC(n){if(n.byteLength_>Ib)throw new Error(n.errorPrefix_+"has a key path longer than "+Ib+" bytes ("+n.byteLength_+").");if(n.parts_.length>Cb)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Cb+") or object contains a cycle "+li(n))}function li(n){return n.parts_.length===0?"":"in property '"+n.parts_.join(".")+"'"}var nm=class n extends Pc{static getInstance(){return new n}constructor(){super(["visible"]);let e,t;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{let r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}getInitialEvent(e){return C(e==="visible","Unknown event type: "+e),[this.visible_]}};var Vo=1e3,iO=60*5*1e3,Db=30*1e3,sO=1.3,oO=3e4,aO="server_kill",Sb=3,Km=(()=>{class n extends kc{constructor(t,r,i,s,o,a,l,c){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=l,this.authOverride_=c,this.id=n.nextPersistentConnectionId_++,this.log_=ea("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Vo,this.maxReconnectDelay_=iO,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c&&!pn())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");nm.getInstance().on("visible",this.onVisible_,this),t.host.indexOf("fblocal")===-1&&Oc.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){let s=++this.requestNumber_,o={r:s,a:t,b:r};this.log_(ke(o)),C(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[s]=i)}get(t){this.initConnection_();let r=new qn,s={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:a=>{let l=a.d;a.s==="ok"?r.resolve(l):r.reject(l)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;let o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),r.promise}listen(t,r,i,s){this.initConnection_();let o=t._queryIdentifier,a=t._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),C(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),C(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");let l={onComplete:s,hashFn:r,query:t,tag:i};this.listens.get(a).set(o,l),this.connected_&&this.sendListen_(l)}sendGet_(t){let r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){let r=t.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);let o={p:i},a="q";t.tag&&(o.q=r._queryObject,o.t=t.tag),o.h=t.hashFn(),this.sendRequest(a,o,l=>{let c=l.d,u=l.s;n.warnOnListenWarnings_(c,r),(this.listens.get(i)&&this.listens.get(i).get(s))===t&&(this.log_("listen response",l),u!=="ok"&&this.removeListen_(i,s),t.onComplete&&t.onComplete(u,c))})}static warnOnListenWarnings_(t,r){if(t&&typeof t=="object"&&qt(t,"w")){let i=si(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){let s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',o=r._path.toString();et(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&t.length===40||Yw(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Db)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let t=this.authToken_,r=Kw(t)?"auth":"gauth",i={cred:t};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{let o=s.s,a=s.d||"error";this.authToken_===t&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{let r=t.s,i=t.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){let i=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),C(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,t._queryObject,r)}sendUnlisten_(t,r,i,s){this.log_("Unlisten on "+t+" for "+r);let o={p:t},a="n";s&&(o.q=i,o.t=s),this.sendRequest(a,o)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,s){let o={p:r,d:i};this.log_("onDisconnect "+t,o),this.sendRequest(t,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(t,r,i,s){this.putInternal("p",t,r,i,s)}merge(t,r,i,s){this.putInternal("m",t,r,i,s)}putInternal(t,r,i,s,o){this.initConnection_();let a={p:r,d:i};o!==void 0&&(a.h=o),this.outstandingPuts_.push({action:t,request:a,onComplete:s}),this.outstandingPutCount_++;let l=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(l):this.log_("Buffering put: "+r)}sendPut_(t){let r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,o=>{this.log_(r+" response",o),delete this.outstandingPuts_[t],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(t){if(this.connected_){let r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{if(i.s!=="ok"){let o=i.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+ke(t));let r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),t==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):t==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):t==="c"?this.onListenRevoked_(r.p,r.q):t==="ac"?this.onAuthRevoked_(r.s,r.d):t==="apc"?this.onAppCheckRevoked_(r.s,r.d):t==="sd"?this.onSecurityDebugPacket_(r):Gp("Unrecognized action received from server: "+ke(t)+`
Are you using the latest client?`)}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){C(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Vo,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Vo,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>oO&&(this.reconnectDelay_=Vo),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let t=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_),r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*sO)}this.onConnectStatus_(!1)}establishConnection_(){return _(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let t=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+n.nextConnectionId_++,o=this.lastSessionId,a=!1,l=null,c=function(){l?l.close():(a=!0,i())},u=function(f){C(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(f)};this.realtime_={close:c,sendRequest:u};let d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[f,h]=yield Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);a?je("getToken() completed but was canceled"):(je("getToken() completed. Creating connection."),this.authToken_=f&&f.accessToken,this.appCheckToken_=h&&h.token,l=new em(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,r,i,y=>{et(y+" ("+this.repoInfo_.toString()+")"),this.interrupt(aO)},o))}catch(f){this.log_("Failed to get token: "+f),a||(this.repoInfo_.nodeAdmin&&et(f),c())}}})}interrupt(t){je("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){je("Resuming connection for reason: "+t),delete this.interruptReasons_[t],To(this.interruptReasons_)&&(this.reconnectDelay_=Vo,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){let r=t-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){let r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;r?i=r.map(o=>zm(o)).join("$"):i="default";let s=this.removeListen_(t,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,r){let i=new ue(t).toString(),s;if(this.listens.has(i)){let o=this.listens.get(i);s=o.get(r),o.delete(r),o.size===0&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(t,r){je("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(t==="invalid_token"||t==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Sb&&(this.reconnectDelay_=Db,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){je("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(t==="invalid_token"||t==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Sb&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let t of this.listens.values())for(let r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){let t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){let t={},r="js";pn()&&(this.repoInfo_.nodeAdmin?r="admin_node":r="node"),t["sdk."+r+"."+Hm.replace(/\./g,"-")]=1,So()?t["framework.cordova"]=1:Dc()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){let t=Oc.getInstance().currentlyOnline();return To(this.interruptReasons_)&&t}}n.nextPersistentConnectionId_=0,n.nextConnectionId_=0;return n})(),X=class n{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new n(e,t)}};var as=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){let r=new X(os,e),i=new X(os,t);return this.compare(r,i)!==0}minPost(){return X.MIN}};var Ac,Fc=class extends as{static get __EMPTY_NODE(){return Ac}static set __EMPTY_NODE(e){Ac=e}compare(e,t){return hi(e.name,t.name)}isDefinedOn(e){throw ii("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return X.MIN}maxPost(){return new X(di,Ac)}makePost(e,t){return C(typeof e=="string","KeyIndex indexValue must always be a string."),new X(e,Ac)}toString(){return".key"}},is=new Fc;var ns=class{constructor(e,t,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=t?r(e.key,t):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),t;if(this.resultGenerator_?t=this.resultGenerator_(e.key,e.value):t={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},Yt=(()=>{class n{constructor(t,r,i,s,o){this.key=t,this.value=r,this.color=i??n.RED,this.left=s??Ot.EMPTY_NODE,this.right=o??Ot.EMPTY_NODE}copy(t,r,i,s,o){return new n(t??this.key,r??this.value,i??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let s=this,o=i(t,s.key);return o<0?s=s.copy(null,null,null,s.left.insert(t,r,i),null):o===0?s=s.copy(null,r,null,null,null):s=s.copy(null,null,null,null,s.right.insert(t,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ot.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,s;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),r(t,i.key)===0){if(i.right.isEmpty())return Ot.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){let t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){let t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){let t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){let t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})(),rm=class{copy(e,t,r,i,s){return this}insert(e,t,r){return new Yt(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},Ot=class n{constructor(e,t=n.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new n(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Yt.BLACK,null,null))}remove(e){return new n(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Yt.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),t===0)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();)if(t=this.comparator_(e,r.key),t===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else t<0?r=r.left:t>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new ns(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new ns(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new ns(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new ns(this.root_,null,this.comparator_,!0,e)}};Ot.EMPTY_NODE=new rm;function lO(n,e){return hi(n.name,e.name)}function Ym(n,e){return hi(n,e)}var im;function cO(n){im=n}var fC=function(n){return typeof n=="number"?"number:"+Kb(n):"string:"+n},hC=function(n){if(n.isLeafNode()){let e=n.val();C(typeof e=="string"||typeof e=="number"||typeof e=="object"&&qt(e,".sv"),"Priority must be a string or number.")}else C(n===im||n.isEmpty(),"priority of unexpected type.");C(n===im||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var Tb,ls=(()=>{class n{static set __childrenNodeConstructor(t){Tb=t}static get __childrenNodeConstructor(){return Tb}constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,C(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),hC(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return t===".priority"?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return te(t)?this:J(t)===".priority"?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return t===".priority"?this.updatePriority(r):r.isEmpty()&&t!==".priority"?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){let i=J(t);return i===null?r:r.isEmpty()&&i!==".priority"?this:(C(i!==".priority"||vr(t)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(ge(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+fC(this.priorityNode_.val())+":");let r=typeof this.value_;t+=r+":",r==="number"?t+=Kb(this.value_):t+=this.value_,this.lazyHash_=Gb(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:(C(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){let r=typeof t.value_,i=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(r),o=n.VALUE_TYPE_ORDER.indexOf(i);return C(s>=0,"Unknown leaf type: "+r),C(o>=0,"Unknown leaf type: "+i),s===o?i==="object"?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){let r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}n.VALUE_TYPE_ORDER=["object","boolean","number","string"];return n})(),pC,mC;function uO(n){pC=n}function dO(n){mC=n}var sm=class extends as{compare(e,t){let r=e.node.getPriority(),i=t.node.getPriority(),s=r.compareTo(i);return s===0?hi(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return X.MIN}maxPost(){return new X(di,new ls("[PRIORITY-POST]",mC))}makePost(e,t){let r=pC(e);return new X(t,new ls("[PRIORITY-POST]",r))}toString(){return".priority"}},De=new sm;var fO=Math.log(2),om=class{constructor(e){let t=s=>parseInt(Math.log(s)/fO,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=t(e+1),this.current_=this.count-1;let i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}},Lc=function(n,e,t,r){n.sort(e);let i=function(l,c){let u=c-l,d,f;if(u===0)return null;if(u===1)return d=n[l],f=t?t(d):d,new Yt(f,d.node,Yt.BLACK,null,null);{let h=parseInt(u/2,10)+l,y=i(l,h),E=i(h+1,c);return d=n[h],f=t?t(d):d,new Yt(f,d.node,Yt.BLACK,y,E)}},s=function(l){let c=null,u=null,d=n.length,f=function(y,E){let b=d-y,D=d;d-=y;let O=i(b+1,D),H=n[b],de=t?t(H):H;h(new Yt(de,H.node,E,null,O))},h=function(y){c?(c.left=y,c=y):(u=y,c=y)};for(let y=0;y<l.count;++y){let E=l.nextBitIsOne(),b=Math.pow(2,l.count-(y+1));E?f(b,Yt.BLACK):(f(b,Yt.BLACK),f(b,Yt.RED))}return u},o=new om(n.length),a=s(o);return new Ot(r||e,a)};var jp,ts={},cs=class n{static get Default(){return C(ts&&De,"ChildrenNode.ts has not been loaded"),jp=jp||new n({".priority":ts},{".priority":De}),jp}constructor(e,t){this.indexes_=e,this.indexSet_=t}get(e){let t=si(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Ot?t:null}hasIndex(e){return qt(this.indexSet_,e.toString())}addIndex(e,t){C(e!==is,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let r=[],i=!1,s=t.getIterator(X.Wrap),o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let a;i?a=Lc(r,e.getCompare()):a=ts;let l=e.toString(),c=S({},this.indexSet_);c[l]=e;let u=S({},this.indexes_);return u[l]=a,new n(u,c)}addToIndexes(e,t){let r=xo(this.indexes_,(i,s)=>{let o=si(this.indexSet_,s);if(C(o,"Missing index implementation for "+s),i===ts)if(o.isDefinedOn(e.node)){let a=[],l=t.getIterator(X.Wrap),c=l.getNext();for(;c;)c.name!==e.name&&a.push(c),c=l.getNext();return a.push(e),Lc(a,o.getCompare())}else return ts;else{let a=t.get(e.name),l=i;return a&&(l=l.remove(new X(e.name,a))),l.insert(e,e.node)}});return new n(r,this.indexSet_)}removeFromIndexes(e,t){let r=xo(this.indexes_,i=>{if(i===ts)return i;{let s=t.get(e.name);return s?i.remove(new X(e.name,s)):i}});return new n(r,this.indexSet_)}};var jo,W=(()=>{class n{static get EMPTY_NODE(){return jo||(jo=new n(new Ot(Ym),null,cs.Default))}constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&hC(this.priorityNode_),this.children_.isEmpty()&&C(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||jo}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(t===".priority")return this.getPriority();{let r=this.children_.get(t);return r===null?jo:r}}getChild(t){let r=J(t);return r===null?this:this.getImmediateChild(r).getChild(ge(t))}hasChild(t){return this.children_.get(t)!==null}updateImmediateChild(t,r){if(C(r,"We should always be passing snapshot nodes"),t===".priority")return this.updatePriority(r);{let i=new X(t,r),s,o;r.isEmpty()?(s=this.children_.remove(t),o=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(t,r),o=this.indexMap_.addToIndexes(i,this.children_));let a=s.isEmpty()?jo:this.priorityNode_;return new n(s,a,o)}}updateChild(t,r){let i=J(t);if(i===null)return r;{C(J(t)!==".priority"||vr(t)===1,".priority must be the last token in a path");let s=this.getImmediateChild(i).updateChild(ge(t),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;let r={},i=0,s=0,o=!0;if(this.forEachChild(De,(a,l)=>{r[a]=l.val(t),i++,o&&n.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!t&&o&&s<2*i){let a=[];for(let l in r)a[l]=r[l];return a}else return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let t="";this.getPriority().isEmpty()||(t+="priority:"+fC(this.getPriority().val())+":"),this.forEachChild(De,(r,i)=>{let s=i.hash();s!==""&&(t+=":"+r+":"+s)}),this.lazyHash_=t===""?"":Gb(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){let s=this.resolveIndex_(i);if(s){let o=s.getPredecessorKey(new X(t,r));return o?o.name:null}else return this.children_.getPredecessorKey(t)}getFirstChildName(t){let r=this.resolveIndex_(t);if(r){let i=r.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(t){let r=this.getFirstChildName(t);return r?new X(r,this.children_.get(r)):null}getLastChildName(t){let r=this.resolveIndex_(t);if(r){let i=r.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(t){let r=this.getLastChildName(t);return r?new X(r,this.children_.get(r)):null}forEachChild(t,r){let i=this.resolveIndex_(t);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){let i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,s=>s);{let s=this.children_.getIteratorFrom(t.name,X.Wrap),o=s.peek();for(;o!=null&&r.compare(o,t)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){let i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,s=>s);{let s=this.children_.getReverseIteratorFrom(t.name,X.Wrap),o=s.peek();for(;o!=null&&r.compare(o,t)>0;)s.getNext(),o=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===ta?-1:0}withIndex(t){if(t===is||this.indexMap_.hasIndex(t))return this;{let r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===is||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{let r=t;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){let i=this.getIterator(De),s=r.getIterator(De),o=i.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=i.getNext(),a=s.getNext()}return o===null&&a===null}else return!1;else return!1}}resolveIndex_(t){return t===is?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})(),am=class extends W{constructor(){super(new Ot(Ym),W.EMPTY_NODE,cs.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return W.EMPTY_NODE}isEmpty(){return!1}},ta=new am;Object.defineProperties(X,{MIN:{value:new X(os,W.EMPTY_NODE)},MAX:{value:new X(di,ta)}});Fc.__EMPTY_NODE=W.EMPTY_NODE;ls.__childrenNodeConstructor=W;cO(ta);dO(ta);var hO=!0;function Le(n,e=null){if(n===null)return W.EMPTY_NODE;if(typeof n=="object"&&".priority"in n&&(e=n[".priority"]),C(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof n=="object"&&".value"in n&&n[".value"]!==null&&(n=n[".value"]),typeof n!="object"||".sv"in n){let t=n;return new ls(t,Le(e))}if(!(n instanceof Array)&&hO){let t=[],r=!1;if(Ue(n,(o,a)=>{if(o.substring(0,1)!=="."){let l=Le(a);l.isEmpty()||(r=r||!l.getPriority().isEmpty(),t.push(new X(o,l)))}}),t.length===0)return W.EMPTY_NODE;let s=Lc(t,lO,o=>o.name,Ym);if(r){let o=Lc(t,De.getCompare());return new W(s,Le(e),new cs({".priority":o},{".priority":De}))}else return new W(s,Le(e),cs.Default)}else{let t=W.EMPTY_NODE;return Ue(n,(r,i)=>{if(qt(n,r)&&r.substring(0,1)!=="."){let s=Le(i);(s.isLeafNode()||!s.isEmpty())&&(t=t.updateImmediateChild(r,s))}}),t.updatePriority(Le(e))}}uO(Le);var lm=class extends as{constructor(e){super(),this.indexPath_=e,C(!te(e)&&J(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){let r=this.extractChild(e.node),i=this.extractChild(t.node),s=r.compareTo(i);return s===0?hi(e.name,t.name):s}makePost(e,t){let r=Le(e),i=W.EMPTY_NODE.updateChild(this.indexPath_,r);return new X(t,i)}maxPost(){let e=W.EMPTY_NODE.updateChild(this.indexPath_,ta);return new X(di,e)}toString(){return Go(this.indexPath_,0).join("/")}};var cm=class extends as{compare(e,t){let r=e.node.compareTo(t.node);return r===0?hi(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return X.MIN}maxPost(){return X.MAX}makePost(e,t){let r=Le(e);return new X(t,r)}toString(){return".value"}},pO=new cm;function gC(n){return{type:"value",snapshotNode:n}}function us(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function qo(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function Ko(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}function mO(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}var Yo=class{constructor(e){this.index_=e}updateChild(e,t,r,i,s,o){C(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");let a=e.getImmediateChild(t);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(t)?o.trackChildChange(qo(t,a)):C(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(us(t,r)):o.trackChildChange(Ko(t,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return r!=null&&(e.isLeafNode()||e.forEachChild(De,(i,s)=>{t.hasChild(i)||r.trackChildChange(qo(i,s))}),t.isLeafNode()||t.forEachChild(De,(i,s)=>{if(e.hasChild(i)){let o=e.getImmediateChild(i);o.equals(s)||r.trackChildChange(Ko(i,s,o))}else r.trackChildChange(us(i,s))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?W.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}};var Vc=class n{constructor(e){this.indexedFilter_=new Yo(e.getIndex()),this.index_=e.getIndex(),this.startPost_=n.getStartPost_(e),this.endPost_=n.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){let t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&r}updateChild(e,t,r,i,s,o){return this.matches(new X(t,r))||(r=W.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,s,o)}updateFullNode(e,t,r){t.isLeafNode()&&(t=W.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(W.EMPTY_NODE);let s=this;return t.forEachChild(De,(o,a)=>{s.matches(new X(o,a))||(i=i.updateImmediateChild(o,W.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){let t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){let t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}else return e.getIndex().maxPost()}};var um=class{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{let r=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=t=>{let r=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new Vc(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,r,i,s,o){return this.rangedFilter_.matches(new X(t,r))||(r=W.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,s,o):this.fullLimitUpdateChild_(e,t,r,s,o)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=W.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<t.numChildren()&&t.isIndexed(this.index_)){i=W.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){let a=s.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))i=i.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{i=t.withIndex(this.index_),i=i.updatePriority(W.EMPTY_NODE);let s;this.reverse_?s=i.getReverseIterator(this.index_):s=i.getIterator(this.index_);let o=0;for(;s.hasNext();){let a=s.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:i=i.updateImmediateChild(a.name,W.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,s){let o;if(this.reverse_){let d=this.index_.getCompare();o=(f,h)=>d(h,f)}else o=this.index_.getCompare();let a=e;C(a.numChildren()===this.limit_,"");let l=new X(t,r),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(l);if(a.hasChild(t)){let d=a.getImmediateChild(t),f=i.getChildAfterChild(this.index_,c,this.reverse_);for(;f!=null&&(f.name===t||a.hasChild(f.name));)f=i.getChildAfterChild(this.index_,f,this.reverse_);let h=f==null?1:o(f,l);if(u&&!r.isEmpty()&&h>=0)return s?.trackChildChange(Ko(t,r,d)),a.updateImmediateChild(t,r);{s?.trackChildChange(qo(t,d));let E=a.updateImmediateChild(t,W.EMPTY_NODE);return f!=null&&this.rangedFilter_.matches(f)?(s?.trackChildChange(us(f.name,f.node)),E.updateImmediateChild(f.name,f.node)):E}}else return r.isEmpty()?e:u&&o(c,l)>=0?(s!=null&&(s.trackChildChange(qo(c.name,c.node)),s.trackChildChange(us(t,r))),a.updateImmediateChild(t,r).updateImmediateChild(c.name,W.EMPTY_NODE)):e}};var dm=class n{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=De}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return C(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return C(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:os}hasEnd(){return this.endSet_}getIndexEndValue(){return C(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return C(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:di}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return C(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===De}copy(){let e=new n;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}};function gO(n){return n.loadsAllData()?new Yo(n.getIndex()):n.hasLimit()?new um(n):new Vc(n)}function xb(n){let e={};if(n.isDefault())return e;let t;if(n.index_===De?t="$priority":n.index_===pO?t="$value":n.index_===is?t="$key":(C(n.index_ instanceof lm,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=ke(t),n.startSet_){let r=n.startAfterSet_?"startAfter":"startAt";e[r]=ke(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+ke(n.indexStartName_))}if(n.endSet_){let r=n.endBeforeSet_?"endBefore":"endAt";e[r]=ke(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+ke(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function Ab(n){let e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;t===""&&(n.isViewFromLeft()?t="l":t="r"),e.vf=t}return n.index_!==De&&(e.i=n.index_.toString()),e}var fm=class n extends kc{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return t!==void 0?"tag$"+t:(C(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=ea("p:rest:"),this.listens_={}}listen(e,t,r,i){let s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);let o=n.getListenId_(e,r),a={};this.listens_[o]=a;let l=xb(e._queryParams);this.restRequest_(s+".json",l,(c,u)=>{let d=u;if(c===404&&(d=null,c=null),c===null&&this.onDataUpdate_(s,d,!1,r),si(this.listens_,o)===a){let f;c?c===401?f="permission_denied":f="rest_error:"+c:f="ok",i(f,null)}})}unlisten(e,t){let r=n.getListenId_(e,t);delete this.listens_[r]}get(e){let t=xb(e._queryParams),r=e._path.toString(),i=new qn;return this.restRequest_(r+".json",t,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(t.auth=i.accessToken),s&&s.token&&(t.ac=s.token);let o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+oi(t);this.log_("Sending REST request for "+o);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=Ji(a.responseText)}catch{et("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,l)}else a.status!==401&&a.status!==404&&et("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}};var hm=class{constructor(){this.rootNode_=W.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}};function jc(){return{value:null,children:new Map}}function yC(n,e,t){if(te(e))n.value=t,n.children.clear();else if(n.value!==null)n.value=n.value.updateChild(e,t);else{let r=J(e);n.children.has(r)||n.children.set(r,jc());let i=n.children.get(r);e=ge(e),yC(i,e,t)}}function pm(n,e,t){n.value!==null?t(e,n.value):yO(n,(r,i)=>{let s=new ue(e.toString()+"/"+r);pm(i,s,t)})}function yO(n,e){n.children.forEach((t,r)=>{e(r,t)})}var mm=class{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),t=S({},e);return this.last_&&Ue(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}};var Mb=10*1e3,_O=30*1e3,vO=5*60*1e3,gm=class{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new mm(e);let r=Mb+(_O-Mb)*Math.random();Bo(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){let e=this.statsListener_.get(),t={},r=!1;Ue(e,(i,s)=>{s>0&&qt(this.statsToReport_,i)&&(t[i]=s,r=!0)}),r&&this.server_.reportStats(t),Bo(this.reportStats_.bind(this),Math.floor(Math.random()*2*vO))}};var yn=function(n){return n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",n}(yn||{});function Qm(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Zm(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Jm(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}var ym=class n{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=yn.ACK_USER_WRITE,this.source=Qm()}operationForChild(e){if(te(this.path)){if(this.affectedTree.value!=null)return C(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let t=this.affectedTree.subtree(new ue(e));return new n(le(),t,this.revert)}}else return C(J(this.path)===e,"operationForChild called for unrelated child."),new n(ge(this.path),this.affectedTree,this.revert)}};var Uc=class n{constructor(e,t){this.source=e,this.path=t,this.type=yn.LISTEN_COMPLETE}operationForChild(e){return te(this.path)?new n(this.source,le()):new n(this.source,ge(this.path))}};var ds=class n{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=yn.OVERWRITE}operationForChild(e){return te(this.path)?new n(this.source,le(),this.snap.getImmediateChild(e)):new n(this.source,ge(this.path),this.snap)}};var Qo=class n{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=yn.MERGE}operationForChild(e){if(te(this.path)){let t=this.children.subtree(new ue(e));return t.isEmpty()?null:t.value?new ds(this.source,le(),t.value):new n(this.source,le(),t)}else return C(J(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new n(this.source,ge(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var Zn=class{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(te(e))return this.isFullyInitialized()&&!this.filtered_;let t=J(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}};var _m=class{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}};function EO(n,e,t,r){let i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&n.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(mO(o.childName,o.snapshotNode))}),Uo(n,i,"child_removed",e,r,t),Uo(n,i,"child_added",e,r,t),Uo(n,i,"child_moved",s,r,t),Uo(n,i,"child_changed",e,r,t),Uo(n,i,"value",e,r,t),i}function Uo(n,e,t,r,i,s){let o=r.filter(a=>a.type===t);o.sort((a,l)=>bO(n,a,l)),o.forEach(a=>{let l=wO(n,a,s);i.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(l,n.query_))})})}function wO(n,e,t){return e.type==="value"||e.type==="child_removed"||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}function bO(n,e,t){if(e.childName==null||t.childName==null)throw ii("Should only compare child_ events.");let r=new X(e.childName,e.snapshotNode),i=new X(t.childName,t.snapshotNode);return n.index_.compare(r,i)}function Jc(n,e){return{eventCache:n,serverCache:e}}function $o(n,e,t,r){return Jc(new Zn(e,t,r),n.serverCache)}function _C(n,e,t,r){return Jc(n.eventCache,new Zn(e,t,r))}function vm(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function fi(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}var Up,CO=()=>(Up||(Up=new Ot(CP)),Up),tt=class n{static fromObject(e){let t=new n(null);return Ue(e,(r,i)=>{t=t.set(new ue(r),i)}),t}constructor(e,t=CO()){this.value=e,this.children=t}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(this.value!=null&&t(this.value))return{path:le(),value:this.value};if(te(e))return null;{let r=J(e),i=this.children.get(r);if(i!==null){let s=i.findRootMostMatchingPathAndValue(ge(e),t);return s!=null?{path:Ie(new ue(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(te(e))return this;{let t=J(e),r=this.children.get(t);return r!==null?r.subtree(ge(e)):new n(null)}}set(e,t){if(te(e))return new n(t,this.children);{let r=J(e),s=(this.children.get(r)||new n(null)).set(ge(e),t),o=this.children.insert(r,s);return new n(this.value,o)}}remove(e){if(te(e))return this.children.isEmpty()?new n(null):new n(null,this.children);{let t=J(e),r=this.children.get(t);if(r){let i=r.remove(ge(e)),s;return i.isEmpty()?s=this.children.remove(t):s=this.children.insert(t,i),this.value===null&&s.isEmpty()?new n(null):new n(this.value,s)}else return this}}get(e){if(te(e))return this.value;{let t=J(e),r=this.children.get(t);return r?r.get(ge(e)):null}}setTree(e,t){if(te(e))return t;{let r=J(e),s=(this.children.get(r)||new n(null)).setTree(ge(e),t),o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new n(this.value,o)}}fold(e){return this.fold_(le(),e)}fold_(e,t){let r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(Ie(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,le(),t)}findOnPath_(e,t,r){let i=this.value?r(t,this.value):!1;if(i)return i;if(te(e))return null;{let s=J(e),o=this.children.get(s);return o?o.findOnPath_(ge(e),Ie(t,s),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,le(),t)}foreachOnPath_(e,t,r){if(te(e))return this;{this.value&&r(t,this.value);let i=J(e),s=this.children.get(i);return s?s.foreachOnPath_(ge(e),Ie(t,i),r):new n(null)}}foreach(e){this.foreach_(le(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(Ie(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}};var Qt=class n{constructor(e){this.writeTree_=e}static empty(){return new n(new tt(null))}};function zo(n,e,t){if(te(e))return new Qt(new tt(t));{let r=n.writeTree_.findRootMostValueAndPath(e);if(r!=null){let i=r.path,s=r.value,o=pt(i,e);return s=s.updateChild(o,t),new Qt(n.writeTree_.set(i,s))}else{let i=new tt(t),s=n.writeTree_.setTree(e,i);return new Qt(s)}}}function Em(n,e,t){let r=n;return Ue(t,(i,s)=>{r=zo(r,Ie(e,i),s)}),r}function Nb(n,e){if(te(e))return Qt.empty();{let t=n.writeTree_.setTree(e,new tt(null));return new Qt(t)}}function wm(n,e){return pi(n,e)!=null}function pi(n,e){let t=n.writeTree_.findRootMostValueAndPath(e);return t!=null?n.writeTree_.get(t.path).getChild(pt(t.path,e)):null}function Rb(n){let e=[],t=n.writeTree_.value;return t!=null?t.isLeafNode()||t.forEachChild(De,(r,i)=>{e.push(new X(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new X(r,i.value))}),e}function _r(n,e){if(te(e))return n;{let t=pi(n,e);return t!=null?new Qt(new tt(t)):new Qt(n.writeTree_.subtree(e))}}function bm(n){return n.writeTree_.isEmpty()}function fs(n,e){return vC(le(),n.writeTree_,e)}function vC(n,e,t){if(e.value!=null)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(C(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):t=vC(Ie(n,i),s,t)}),!t.getChild(n).isEmpty()&&r!==null&&(t=t.updateChild(Ie(n,".priority"),r)),t}}function Xm(n,e){return CC(e,n)}function IO(n,e,t,r,i){C(r>n.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=zo(n.visibleWrites,e,t)),n.lastWriteId=r}function DO(n,e,t,r){C(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=Em(n.visibleWrites,e,t),n.lastWriteId=r}function SO(n,e){for(let t=0;t<n.allWrites.length;t++){let r=n.allWrites[t];if(r.writeId===e)return r}return null}function TO(n,e){let t=n.allWrites.findIndex(a=>a.writeId===e);C(t>=0,"removeWrite called with nonexistent writeId.");let r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,s=!1,o=n.allWrites.length-1;for(;i&&o>=0;){let a=n.allWrites[o];a.visible&&(o>=t&&xO(a,r.path)?i=!1:Pt(r.path,a.path)&&(s=!0)),o--}if(i){if(s)return AO(n),!0;if(r.snap)n.visibleWrites=Nb(n.visibleWrites,r.path);else{let a=r.children;Ue(a,l=>{n.visibleWrites=Nb(n.visibleWrites,Ie(r.path,l))})}return!0}else return!1}function xO(n,e){if(n.snap)return Pt(n.path,e);for(let t in n.children)if(n.children.hasOwnProperty(t)&&Pt(Ie(n.path,t),e))return!0;return!1}function AO(n){n.visibleWrites=EC(n.allWrites,MO,le()),n.allWrites.length>0?n.lastWriteId=n.allWrites[n.allWrites.length-1].writeId:n.lastWriteId=-1}function MO(n){return n.visible}function EC(n,e,t){let r=Qt.empty();for(let i=0;i<n.length;++i){let s=n[i];if(e(s)){let o=s.path,a;if(s.snap)Pt(t,o)?(a=pt(t,o),r=zo(r,a,s.snap)):Pt(o,t)&&(a=pt(o,t),r=zo(r,le(),s.snap.getChild(a)));else if(s.children){if(Pt(t,o))a=pt(t,o),r=Em(r,a,s.children);else if(Pt(o,t))if(a=pt(o,t),te(a))r=Em(r,le(),s.children);else{let l=si(s.children,J(a));if(l){let c=l.getChild(ge(a));r=zo(r,le(),c)}}}else throw ii("WriteRecord should have .snap or .children")}}return r}function wC(n,e,t,r,i){if(!r&&!i){let s=pi(n.visibleWrites,e);if(s!=null)return s;{let o=_r(n.visibleWrites,e);if(bm(o))return t;if(t==null&&!wm(o,le()))return null;{let a=t||W.EMPTY_NODE;return fs(o,a)}}}else{let s=_r(n.visibleWrites,e);if(!i&&bm(s))return t;if(!i&&t==null&&!wm(s,le()))return null;{let o=function(c){return(c.visible||i)&&(!r||!~r.indexOf(c.writeId))&&(Pt(c.path,e)||Pt(e,c.path))},a=EC(n.allWrites,o,e),l=t||W.EMPTY_NODE;return fs(a,l)}}}function NO(n,e,t){let r=W.EMPTY_NODE,i=pi(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(De,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(t){let s=_r(n.visibleWrites,e);return t.forEachChild(De,(o,a)=>{let l=fs(_r(s,new ue(o)),a);r=r.updateImmediateChild(o,l)}),Rb(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{let s=_r(n.visibleWrites,e);return Rb(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function RO(n,e,t,r,i){C(r||i,"Either existingEventSnap or existingServerSnap must exist");let s=Ie(e,t);if(wm(n.visibleWrites,s))return null;{let o=_r(n.visibleWrites,s);return bm(o)?i.getChild(t):fs(o,i.getChild(t))}}function kO(n,e,t,r){let i=Ie(e,t),s=pi(n.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(t)){let o=_r(n.visibleWrites,i);return fs(o,r.getNode().getImmediateChild(t))}else return null}function PO(n,e){return pi(n.visibleWrites,e)}function OO(n,e,t,r,i,s,o){let a,l=_r(n.visibleWrites,e),c=pi(l,le());if(c!=null)a=c;else if(t!=null)a=fs(l,t);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){let u=[],d=o.getCompare(),f=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o),h=f.getNext();for(;h&&u.length<i;)d(h,r)!==0&&u.push(h),h=f.getNext();return u}else return[]}function FO(){return{visibleWrites:Qt.empty(),allWrites:[],lastWriteId:-1}}function Bc(n,e,t,r){return wC(n.writeTree,n.treePath,e,t,r)}function eg(n,e){return NO(n.writeTree,n.treePath,e)}function kb(n,e,t,r){return RO(n.writeTree,n.treePath,e,t,r)}function Hc(n,e){return PO(n.writeTree,Ie(n.treePath,e))}function LO(n,e,t,r,i,s){return OO(n.writeTree,n.treePath,e,t,r,i,s)}function tg(n,e,t){return kO(n.writeTree,n.treePath,e,t)}function bC(n,e){return CC(Ie(n.treePath,e),n.writeTree)}function CC(n,e){return{treePath:n,writeTree:e}}var Cm=class{constructor(){this.changeMap=new Map}trackChildChange(e){let t=e.type,r=e.childName;C(t==="child_added"||t==="child_changed"||t==="child_removed","Only child changes supported for tracking"),C(r!==".priority","Only non-priority child changes can be tracked.");let i=this.changeMap.get(r);if(i){let s=i.type;if(t==="child_added"&&s==="child_removed")this.changeMap.set(r,Ko(r,e.snapshotNode,i.snapshotNode));else if(t==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(t==="child_removed"&&s==="child_changed")this.changeMap.set(r,qo(r,i.oldSnap));else if(t==="child_changed"&&s==="child_added")this.changeMap.set(r,us(r,e.snapshotNode));else if(t==="child_changed"&&s==="child_changed")this.changeMap.set(r,Ko(r,e.snapshotNode,i.oldSnap));else throw ii("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}};var Im=class{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}},IC=new Im,Zo=class{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){let t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{let r=this.optCompleteServerCache_!=null?new Zn(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return tg(this.writes_,e,r)}}getChildAfterChild(e,t,r){let i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:fi(this.viewCache_),s=LO(this.writes_,i,t,1,r,e);return s.length===0?null:s[0]}};function VO(n){return{filter:n}}function jO(n,e){C(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),C(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}function UO(n,e,t,r,i){let s=new Cm,o,a;if(t.type===yn.OVERWRITE){let c=t;c.source.fromUser?o=Dm(n,e,c.path,c.snap,r,i,s):(C(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!te(c.path),o=$c(n,e,c.path,c.snap,r,i,a,s))}else if(t.type===yn.MERGE){let c=t;c.source.fromUser?o=HO(n,e,c.path,c.children,r,i,s):(C(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),o=Sm(n,e,c.path,c.children,r,i,a,s))}else if(t.type===yn.ACK_USER_WRITE){let c=t;c.revert?o=WO(n,e,c.path,r,i,s):o=$O(n,e,c.path,c.affectedTree,r,i,s)}else if(t.type===yn.LISTEN_COMPLETE)o=zO(n,e,t.path,r,s);else throw ii("Unknown operation type: "+t.type);let l=s.getChanges();return BO(e,o,l),{viewCache:o,changes:l}}function BO(n,e,t){let r=e.eventCache;if(r.isFullyInitialized()){let i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=vm(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&t.push(gC(vm(e)))}}function DC(n,e,t,r,i,s){let o=e.eventCache;if(Hc(r,t)!=null)return e;{let a,l;if(te(t))if(C(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){let c=fi(e),u=c instanceof W?c:W.EMPTY_NODE,d=eg(r,u);a=n.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{let c=Bc(r,fi(e));a=n.filter.updateFullNode(e.eventCache.getNode(),c,s)}else{let c=J(t);if(c===".priority"){C(vr(t)===1,"Can't have a priority with additional path components");let u=o.getNode();l=e.serverCache.getNode();let d=kb(r,t,u,l);d!=null?a=n.filter.updatePriority(u,d):a=o.getNode()}else{let u=ge(t),d;if(o.isCompleteForChild(c)){l=e.serverCache.getNode();let f=kb(r,t,o.getNode(),l);f!=null?d=o.getNode().getImmediateChild(c).updateChild(u,f):d=o.getNode().getImmediateChild(c)}else d=tg(r,c,e.serverCache);d!=null?a=n.filter.updateChild(o.getNode(),c,d,u,i,s):a=o.getNode()}}return $o(e,a,o.isFullyInitialized()||te(t),n.filter.filtersNodes())}}function $c(n,e,t,r,i,s,o,a){let l=e.serverCache,c,u=o?n.filter:n.filter.getIndexedFilter();if(te(t))c=u.updateFullNode(l.getNode(),r,null);else if(u.filtersNodes()&&!l.isFiltered()){let h=l.getNode().updateChild(t,r);c=u.updateFullNode(l.getNode(),h,null)}else{let h=J(t);if(!l.isCompleteForPath(t)&&vr(t)>1)return e;let y=ge(t),b=l.getNode().getImmediateChild(h).updateChild(y,r);h===".priority"?c=u.updatePriority(l.getNode(),b):c=u.updateChild(l.getNode(),h,b,y,IC,null)}let d=_C(e,c,l.isFullyInitialized()||te(t),u.filtersNodes()),f=new Zo(i,d,s);return DC(n,d,t,i,f,a)}function Dm(n,e,t,r,i,s,o){let a=e.eventCache,l,c,u=new Zo(i,e,s);if(te(t))c=n.filter.updateFullNode(e.eventCache.getNode(),r,o),l=$o(e,c,!0,n.filter.filtersNodes());else{let d=J(t);if(d===".priority")c=n.filter.updatePriority(e.eventCache.getNode(),r),l=$o(e,c,a.isFullyInitialized(),a.isFiltered());else{let f=ge(t),h=a.getNode().getImmediateChild(d),y;if(te(f))y=r;else{let E=u.getCompleteChild(d);E!=null?Gm(f)===".priority"&&E.getChild(uC(f)).isEmpty()?y=E:y=E.updateChild(f,r):y=W.EMPTY_NODE}if(h.equals(y))l=e;else{let E=n.filter.updateChild(a.getNode(),d,y,f,u,o);l=$o(e,E,a.isFullyInitialized(),n.filter.filtersNodes())}}}return l}function Pb(n,e){return n.eventCache.isCompleteForChild(e)}function HO(n,e,t,r,i,s,o){let a=e;return r.foreach((l,c)=>{let u=Ie(t,l);Pb(e,J(u))&&(a=Dm(n,a,u,c,i,s,o))}),r.foreach((l,c)=>{let u=Ie(t,l);Pb(e,J(u))||(a=Dm(n,a,u,c,i,s,o))}),a}function Ob(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function Sm(n,e,t,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,c;te(t)?c=r:c=new tt(null).setTree(t,r);let u=e.serverCache.getNode();return c.children.inorderTraversal((d,f)=>{if(u.hasChild(d)){let h=e.serverCache.getNode().getImmediateChild(d),y=Ob(n,h,f);l=$c(n,l,new ue(d),y,i,s,o,a)}}),c.children.inorderTraversal((d,f)=>{let h=!e.serverCache.isCompleteForChild(d)&&f.value===null;if(!u.hasChild(d)&&!h){let y=e.serverCache.getNode().getImmediateChild(d),E=Ob(n,y,f);l=$c(n,l,new ue(d),E,i,s,o,a)}}),l}function $O(n,e,t,r,i,s,o){if(Hc(i,t)!=null)return e;let a=e.serverCache.isFiltered(),l=e.serverCache;if(r.value!=null){if(te(t)&&l.isFullyInitialized()||l.isCompleteForPath(t))return $c(n,e,t,l.getNode().getChild(t),i,s,a,o);if(te(t)){let c=new tt(null);return l.getNode().forEachChild(is,(u,d)=>{c=c.set(new ue(u),d)}),Sm(n,e,t,c,i,s,a,o)}else return e}else{let c=new tt(null);return r.foreach((u,d)=>{let f=Ie(t,u);l.isCompleteForPath(f)&&(c=c.set(u,l.getNode().getChild(f)))}),Sm(n,e,t,c,i,s,a,o)}}function zO(n,e,t,r,i){let s=e.serverCache,o=_C(e,s.getNode(),s.isFullyInitialized()||te(t),s.isFiltered());return DC(n,o,t,r,IC,i)}function WO(n,e,t,r,i,s){let o;if(Hc(r,t)!=null)return e;{let a=new Zo(r,e,i),l=e.eventCache.getNode(),c;if(te(t)||J(t)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=Bc(r,fi(e));else{let d=e.serverCache.getNode();C(d instanceof W,"serverChildren would be complete if leaf node"),u=eg(r,d)}u=u,c=n.filter.updateFullNode(l,u,s)}else{let u=J(t),d=tg(r,u,e.serverCache);d==null&&e.serverCache.isCompleteForChild(u)&&(d=l.getImmediateChild(u)),d!=null?c=n.filter.updateChild(l,u,d,ge(t),a,s):e.eventCache.getNode().hasChild(u)?c=n.filter.updateChild(l,u,W.EMPTY_NODE,ge(t),a,s):c=l,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=Bc(r,fi(e)),o.isLeafNode()&&(c=n.filter.updateFullNode(c,o,s)))}return o=e.serverCache.isFullyInitialized()||Hc(r,le())!=null,$o(e,c,o,n.filter.filtersNodes())}}var Tm=class{constructor(e,t){this.query_=e,this.eventRegistrations_=[];let r=this.query_._queryParams,i=new Yo(r.getIndex()),s=gO(r);this.processor_=VO(s);let o=t.serverCache,a=t.eventCache,l=i.updateFullNode(W.EMPTY_NODE,o.getNode(),null),c=s.updateFullNode(W.EMPTY_NODE,a.getNode(),null),u=new Zn(l,o.isFullyInitialized(),i.filtersNodes()),d=new Zn(c,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=Jc(d,u),this.eventGenerator_=new _m(this.query_)}get query(){return this.query_}};function GO(n){return n.viewCache_.serverCache.getNode()}function qO(n,e){let t=fi(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!te(e)&&!t.getImmediateChild(J(e)).isEmpty())?t.getChild(e):null}function Fb(n){return n.eventRegistrations_.length===0}function KO(n,e){n.eventRegistrations_.push(e)}function Lb(n,e,t){let r=[];if(t){C(e==null,"A cancel should cancel all event registrations.");let i=n.query._path;n.eventRegistrations_.forEach(s=>{let o=s.createCancelEvent(t,i);o&&r.push(o)})}if(e){let i=[];for(let s=0;s<n.eventRegistrations_.length;++s){let o=n.eventRegistrations_[s];if(!o.matches(e))i.push(o);else if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(s+1));break}}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function Vb(n,e,t,r){e.type===yn.MERGE&&e.source.queryId!==null&&(C(fi(n.viewCache_),"We should always have a full cache before handling merges"),C(vm(n.viewCache_),"Missing event cache, even though we have a server cache"));let i=n.viewCache_,s=UO(n.processor_,i,e,t,r);return jO(n.processor_,s.viewCache),C(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,SC(n,s.changes,s.viewCache.eventCache.getNode(),null)}function YO(n,e){let t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(De,(s,o)=>{r.push(us(s,o))}),t.isFullyInitialized()&&r.push(gC(t.getNode())),SC(n,r,t.getNode(),e)}function SC(n,e,t,r){let i=r?[r]:n.eventRegistrations_;return EO(n.eventGenerator_,e,t,i)}var zc,xm=class{constructor(){this.views=new Map}};function QO(n){C(!zc,"__referenceConstructor has already been defined"),zc=n}function ZO(){return C(zc,"Reference.ts has not been loaded"),zc}function JO(n){return n.views.size===0}function ng(n,e,t,r){let i=e.source.queryId;if(i!==null){let s=n.views.get(i);return C(s!=null,"SyncTree gave us an op for an invalid query."),Vb(s,e,t,r)}else{let s=[];for(let o of n.views.values())s=s.concat(Vb(o,e,t,r));return s}}function XO(n,e,t,r,i){let s=e._queryIdentifier,o=n.views.get(s);if(!o){let a=Bc(t,i?r:null),l=!1;a?l=!0:r instanceof W?(a=eg(t,r),l=!1):(a=W.EMPTY_NODE,l=!1);let c=Jc(new Zn(a,l,!1),new Zn(r,i,!1));return new Tm(e,c)}return o}function eF(n,e,t,r,i,s){let o=XO(n,e,r,i,s);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,o),KO(o,t),YO(o,t)}function tF(n,e,t,r){let i=e._queryIdentifier,s=[],o=[],a=Er(n);if(i==="default")for(let[l,c]of n.views.entries())o=o.concat(Lb(c,t,r)),Fb(c)&&(n.views.delete(l),c.query._queryParams.loadsAllData()||s.push(c.query));else{let l=n.views.get(i);l&&(o=o.concat(Lb(l,t,r)),Fb(l)&&(n.views.delete(i),l.query._queryParams.loadsAllData()||s.push(l.query)))}return a&&!Er(n)&&s.push(new(ZO())(e._repo,e._path)),{removed:s,events:o}}function TC(n){let e=[];for(let t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function ss(n,e){let t=null;for(let r of n.views.values())t=t||qO(r,e);return t}function xC(n,e){if(e._queryParams.loadsAllData())return Xc(n);{let r=e._queryIdentifier;return n.views.get(r)}}function AC(n,e){return xC(n,e)!=null}function Er(n){return Xc(n)!=null}function Xc(n){for(let e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}var Wc;function nF(n){C(!Wc,"__referenceConstructor has already been defined"),Wc=n}function rF(){return C(Wc,"Reference.ts has not been loaded"),Wc}var iF=1,Gc=class{constructor(e){this.listenProvider_=e,this.syncPointTree_=new tt(null),this.pendingWriteTree_=FO(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function MC(n,e,t,r,i){return IO(n.pendingWriteTree_,e,t,r,i),i?ms(n,new ds(Qm(),e,t)):[]}function sF(n,e,t,r){DO(n.pendingWriteTree_,e,t,r);let i=tt.fromObject(t);return ms(n,new Qo(Qm(),e,i))}function yr(n,e,t=!1){let r=SO(n.pendingWriteTree_,e);if(TO(n.pendingWriteTree_,e)){let s=new tt(null);return r.snap!=null?s=s.set(le(),!0):Ue(r.children,o=>{s=s.set(new ue(o),!0)}),ms(n,new ym(r.path,s,t))}else return[]}function eu(n,e,t){return ms(n,new ds(Zm(),e,t))}function oF(n,e,t){let r=tt.fromObject(t);return ms(n,new Qo(Zm(),e,r))}function aF(n,e){return ms(n,new Uc(Zm(),e))}function lF(n,e,t){let r=ig(n,t);if(r){let i=sg(r),s=i.path,o=i.queryId,a=pt(s,e),l=new Uc(Jm(o),a);return og(n,s,l)}else return[]}function Am(n,e,t,r,i=!1){let s=e._path,o=n.syncPointTree_.get(s),a=[];if(o&&(e._queryIdentifier==="default"||AC(o,e))){let l=tF(o,e,t,r);JO(o)&&(n.syncPointTree_=n.syncPointTree_.remove(s));let c=l.removed;if(a=l.events,!i){let u=c.findIndex(f=>f._queryParams.loadsAllData())!==-1,d=n.syncPointTree_.findOnPath(s,(f,h)=>Er(h));if(u&&!d){let f=n.syncPointTree_.subtree(s);if(!f.isEmpty()){let h=dF(f);for(let y=0;y<h.length;++y){let E=h[y],b=E.query,D=kC(n,E);n.listenProvider_.startListening(Wo(b),qc(n,b),D.hashFn,D.onComplete)}}}!d&&c.length>0&&!r&&(u?n.listenProvider_.stopListening(Wo(e),null):c.forEach(f=>{let h=n.queryToTagMap.get(tu(f));n.listenProvider_.stopListening(Wo(f),h)}))}fF(n,c)}return a}function cF(n,e,t,r){let i=ig(n,r);if(i!=null){let s=sg(i),o=s.path,a=s.queryId,l=pt(o,e),c=new ds(Jm(a),l,t);return og(n,o,c)}else return[]}function uF(n,e,t,r){let i=ig(n,r);if(i){let s=sg(i),o=s.path,a=s.queryId,l=pt(o,e),c=tt.fromObject(t),u=new Qo(Jm(a),l,c);return og(n,o,u)}else return[]}function jb(n,e,t,r=!1){let i=e._path,s=null,o=!1;n.syncPointTree_.foreachOnPath(i,(f,h)=>{let y=pt(f,i);s=s||ss(h,y),o=o||Er(h)});let a=n.syncPointTree_.get(i);a?(o=o||Er(a),s=s||ss(a,le())):(a=new xm,n.syncPointTree_=n.syncPointTree_.set(i,a));let l;s!=null?l=!0:(l=!1,s=W.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((h,y)=>{let E=ss(y,le());E&&(s=s.updateImmediateChild(h,E))}));let c=AC(a,e);if(!c&&!e._queryParams.loadsAllData()){let f=tu(e);C(!n.queryToTagMap.has(f),"View does not exist, but we have a tag");let h=hF();n.queryToTagMap.set(f,h),n.tagToQueryMap.set(h,f)}let u=Xm(n.pendingWriteTree_,i),d=eF(a,e,t,u,s,l);if(!c&&!o&&!r){let f=xC(a,e);d=d.concat(pF(n,e,f))}return d}function rg(n,e,t){let i=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(e,(o,a)=>{let l=pt(o,e),c=ss(a,l);if(c)return c});return wC(i,e,s,t,!0)}function ms(n,e){return NC(e,n.syncPointTree_,null,Xm(n.pendingWriteTree_,le()))}function NC(n,e,t,r){if(te(n.path))return RC(n,e,t,r);{let i=e.get(le());t==null&&i!=null&&(t=ss(i,le()));let s=[],o=J(n.path),a=n.operationForChild(o),l=e.children.get(o);if(l&&a){let c=t?t.getImmediateChild(o):null,u=bC(r,o);s=s.concat(NC(a,l,c,u))}return i&&(s=s.concat(ng(i,n,r,t))),s}}function RC(n,e,t,r){let i=e.get(le());t==null&&i!=null&&(t=ss(i,le()));let s=[];return e.children.inorderTraversal((o,a)=>{let l=t?t.getImmediateChild(o):null,c=bC(r,o),u=n.operationForChild(o);u&&(s=s.concat(RC(u,a,l,c)))}),i&&(s=s.concat(ng(i,n,r,t))),s}function kC(n,e){let t=e.query,r=qc(n,t);return{hashFn:()=>(GO(e)||W.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?lF(n,t._path,r):aF(n,t._path);{let s=SP(i,t);return Am(n,t,null,s)}}}}function qc(n,e){let t=tu(e);return n.queryToTagMap.get(t)}function tu(n){return n._path.toString()+"$"+n._queryIdentifier}function ig(n,e){return n.tagToQueryMap.get(e)}function sg(n){let e=n.indexOf("$");return C(e!==-1&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new ue(n.substr(0,e))}}function og(n,e,t){let r=n.syncPointTree_.get(e);C(r,"Missing sync point for query tag that we're tracking");let i=Xm(n.pendingWriteTree_,e);return ng(r,t,i,null)}function dF(n){return n.fold((e,t,r)=>{if(t&&Er(t))return[Xc(t)];{let i=[];return t&&(i=TC(t)),Ue(r,(s,o)=>{i=i.concat(o)}),i}})}function Wo(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(rF())(n._repo,n._path):n}function fF(n,e){for(let t=0;t<e.length;++t){let r=e[t];if(!r._queryParams.loadsAllData()){let i=tu(r),s=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(s)}}}function hF(){return iF++}function pF(n,e,t){let r=e._path,i=qc(n,e),s=kC(n,t),o=n.listenProvider_.startListening(Wo(e),i,s.hashFn,s.onComplete),a=n.syncPointTree_.subtree(r);if(i)C(!Er(a.value),"If we're adding a query, it shouldn't be shadowed");else{let l=a.fold((c,u,d)=>{if(!te(c)&&u&&Er(u))return[Xc(u).query];{let f=[];return u&&(f=f.concat(TC(u).map(h=>h.query))),Ue(d,(h,y)=>{f=f.concat(y)}),f}});for(let c=0;c<l.length;++c){let u=l[c];n.listenProvider_.stopListening(Wo(u),qc(n,u))}}return o}var Mm=class n{constructor(e){this.node_=e}getImmediateChild(e){let t=this.node_.getImmediateChild(e);return new n(t)}node(){return this.node_}},Nm=class n{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){let t=Ie(this.path_,e);return new n(this.syncTree_,t)}node(){return rg(this.syncTree_,this.path_)}},mF=function(n){return n=n||{},n.timestamp=n.timestamp||new Date().getTime(),n},Ub=function(n,e,t){if(!n||typeof n!="object")return n;if(C(".sv"in n,"Unexpected leaf node or priority contents"),typeof n[".sv"]=="string")return gF(n[".sv"],e,t);if(typeof n[".sv"]=="object")return yF(n[".sv"],e);C(!1,"Unexpected server value: "+JSON.stringify(n,null,2))},gF=function(n,e,t){switch(n){case"timestamp":return t.timestamp;default:C(!1,"Unexpected server value: "+n)}},yF=function(n,e,t){n.hasOwnProperty("increment")||C(!1,"Unexpected server value: "+JSON.stringify(n,null,2));let r=n.increment;typeof r!="number"&&C(!1,"Unexpected increment value: "+r);let i=e.node();if(C(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;let o=i.getValue();return typeof o!="number"?r:o+r},PC=function(n,e,t,r){return ag(e,new Nm(t,n),r)},OC=function(n,e,t){return ag(n,new Mm(e),t)};function ag(n,e,t){let r=n.getPriority().val(),i=Ub(r,e.getImmediateChild(".priority"),t),s;if(n.isLeafNode()){let o=n,a=Ub(o.getValue(),e,t);return a!==o.getValue()||i!==o.getPriority().val()?new ls(a,Le(i)):n}else{let o=n;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new ls(i))),o.forEachChild(De,(a,l)=>{let c=ag(l,e.getImmediateChild(a),t);c!==l&&(s=s.updateImmediateChild(a,c))}),s}}var Jo=class{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}};function lg(n,e){let t=e instanceof ue?e:new ue(e),r=n,i=J(t);for(;i!==null;){let s=si(r.node.children,i)||{children:{},childCount:0};r=new Jo(i,r,s),t=ge(t),i=J(t)}return r}function gs(n){return n.node.value}function FC(n,e){n.node.value=e,Rm(n)}function LC(n){return n.node.childCount>0}function _F(n){return gs(n)===void 0&&!LC(n)}function nu(n,e){Ue(n.node.children,(t,r)=>{e(new Jo(t,n,r))})}function VC(n,e,t,r){t&&!r&&e(n),nu(n,i=>{VC(i,e,!0,r)}),t&&r&&e(n)}function vF(n,e,t){let r=t?n:n.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function na(n){return new ue(n.parent===null?n.name:na(n.parent)+"/"+n.name)}function Rm(n){n.parent!==null&&EF(n.parent,n.name,n)}function EF(n,e,t){let r=_F(t),i=qt(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,Rm(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,Rm(n))}var wF=/[\[\].#$\/\u0000-\u001F\u007F]/,bF=/[\[\].#$\u0000-\u001F\u007F]/,Bp=10*1024*1024,cg=function(n){return typeof n=="string"&&n.length!==0&&!wF.test(n)},jC=function(n){return typeof n=="string"&&n.length!==0&&!bF.test(n)},CF=function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),jC(n)},IF=function(n){return n===null||typeof n=="string"||typeof n=="number"&&!$m(n)||n&&typeof n=="object"&&qt(n,".sv")},DF=function(n,e,t,r){r&&e===void 0||ru(Ao(n,"value"),e,t)},ru=function(n,e,t){let r=t instanceof ue?new tm(t,n):t;if(e===void 0)throw new Error(n+"contains undefined "+li(r));if(typeof e=="function")throw new Error(n+"contains a function "+li(r)+" with contents = "+e.toString());if($m(e))throw new Error(n+"contains "+e.toString()+" "+li(r));if(typeof e=="string"&&e.length>Bp/3&&Mo(e)>Bp)throw new Error(n+"contains a string greater than "+Bp+" utf8 bytes "+li(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(Ue(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!cg(o)))throw new Error(n+" contains an invalid key ("+o+") "+li(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);nO(r,o),ru(n,a,r),rO(r)}),i&&s)throw new Error(n+' contains ".value" child '+li(r)+" in addition to actual children.")}},SF=function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];let s=Go(r);for(let o=0;o<s.length;o++)if(!(s[o]===".priority"&&o===s.length-1)){if(!cg(s[o]))throw new Error(n+"contains an invalid key ("+s[o]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(tO);let i=null;for(t=0;t<e.length;t++){if(r=e[t],i!==null&&Pt(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}},TF=function(n,e,t,r){if(r&&e===void 0)return;let i=Ao(n,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");let s=[];Ue(e,(o,a)=>{let l=new ue(o);if(ru(i,a,Ie(t,l)),Gm(l)===".priority"&&!IF(a))throw new Error(i+"contains an invalid value for '"+l.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(l)}),SF(i,s)};var UC=function(n,e,t,r){if(!(r&&t===void 0)&&!jC(t))throw new Error(Ao(n,e)+'was an invalid path = "'+t+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},xF=function(n,e,t,r){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),UC(n,e,t,r)},AF=function(n,e){if(J(e)===".info")throw new Error(n+" failed = Can't modify data under /.info/")},MF=function(n,e){let t=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!cg(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||t.length!==0&&!CF(t))throw new Error(Ao(n,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var km=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function iu(n,e){let t=null;for(let r=0;r<e.length;r++){let i=e[r],s=i.getPath();t!==null&&!qm(s,t.path)&&(n.eventLists_.push(t),t=null),t===null&&(t={events:[],path:s}),t.events.push(i)}t&&n.eventLists_.push(t)}function BC(n,e,t){iu(n,t),HC(n,r=>qm(r,e))}function Zt(n,e,t){iu(n,t),HC(n,r=>Pt(r,e)||Pt(e,r))}function HC(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){let i=n.eventLists_[r];if(i){let s=i.path;e(s)?(NF(n.eventLists_[r]),n.eventLists_[r]=null):t=!1}}t&&(n.eventLists_=[]),n.recursionDepth_--}function NF(n){for(let e=0;e<n.events.length;e++){let t=n.events[e];if(t!==null){n.events[e]=null;let r=t.getEventRunner();ui&&je("event: "+t.toString()),ps(r)}}}var RF="repo_interrupt",kF=25,Pm=class{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new km,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=jc(),this.transactionQueueTree_=new Jo,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function PF(n,e,t){if(n.stats_=Wm(n.repoInfo_),n.forceRestClient_||MP())n.server_=new fm(n.repoInfo_,(r,i,s,o)=>{Bb(n,r,i,s,o)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>Hb(n,!0),0);else{if(typeof t<"u"&&t!==null){if(typeof t!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{ke(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Km(n.repoInfo_,e,(r,i,s,o)=>{Bb(n,r,i,s,o)},r=>{Hb(n,r)},r=>{FF(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=RP(n.repoInfo_,()=>new gm(n.stats_,n.server_)),n.infoData_=new hm,n.infoSyncTree_=new Gc({startListening:(r,i,s,o)=>{let a=[],l=n.infoData_.getNode(r._path);return l.isEmpty()||(a=eu(n.infoSyncTree_,r._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),ug(n,"connected",!1),n.serverSyncTree_=new Gc({startListening:(r,i,s,o)=>(n.server_.listen(r,s,i,(a,l)=>{let c=o(a,l);Zt(n.eventQueue_,r._path,c)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}function OF(n){let t=n.infoData_.getNode(new ue(".info/serverTimeOffset")).val()||0;return new Date().getTime()+t}function su(n){return mF({timestamp:OF(n)})}function Bb(n,e,t,r,i){n.dataUpdateCount++;let s=new ue(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let o=[];if(i)if(r){let l=xo(t,c=>Le(c));o=uF(n.serverSyncTree_,s,l,i)}else{let l=Le(t);o=cF(n.serverSyncTree_,s,l,i)}else if(r){let l=xo(t,c=>Le(c));o=oF(n.serverSyncTree_,s,l)}else{let l=Le(t);o=eu(n.serverSyncTree_,s,l)}let a=s;o.length>0&&(a=hs(n,s)),Zt(n.eventQueue_,a,o)}function Hb(n,e){ug(n,"connected",e),e===!1&&jF(n)}function FF(n,e){Ue(e,(t,r)=>{ug(n,t,r)})}function ug(n,e,t){let r=new ue("/.info/"+e),i=Le(t);n.infoData_.updateSnapshot(r,i);let s=eu(n.infoSyncTree_,r,i);Zt(n.eventQueue_,r,s)}function dg(n){return n.nextWriteId_++}function LF(n,e,t,r,i){ou(n,"set",{path:e.toString(),value:t,priority:r});let s=su(n),o=Le(t,r),a=rg(n.serverSyncTree_,e),l=OC(o,a,s),c=dg(n),u=MC(n.serverSyncTree_,e,l,c,!0);iu(n.eventQueue_,u),n.server_.put(e.toString(),o.val(!0),(f,h)=>{let y=f==="ok";y||et("set at "+e+" failed: "+f);let E=yr(n.serverSyncTree_,c,!y);Zt(n.eventQueue_,e,E),Om(n,i,f,h)});let d=hg(n,e);hs(n,d),Zt(n.eventQueue_,d,[])}function VF(n,e,t,r){ou(n,"update",{path:e.toString(),value:t});let i=!0,s=su(n),o={};if(Ue(t,(a,l)=>{i=!1,o[a]=PC(Ie(e,a),Le(l),n.serverSyncTree_,s)}),i)je("update() called with empty data.  Don't do anything."),Om(n,r,"ok",void 0);else{let a=dg(n),l=sF(n.serverSyncTree_,e,o,a);iu(n.eventQueue_,l),n.server_.merge(e.toString(),t,(c,u)=>{let d=c==="ok";d||et("update at "+e+" failed: "+c);let f=yr(n.serverSyncTree_,a,!d),h=f.length>0?hs(n,e):e;Zt(n.eventQueue_,h,f),Om(n,r,c,u)}),Ue(t,c=>{let u=hg(n,Ie(e,c));hs(n,u)}),Zt(n.eventQueue_,e,[])}}function jF(n){ou(n,"onDisconnectEvents");let e=su(n),t=jc();pm(n.onDisconnect_,le(),(i,s)=>{let o=PC(i,s,n.serverSyncTree_,e);yC(t,i,o)});let r=[];pm(t,le(),(i,s)=>{r=r.concat(eu(n.serverSyncTree_,i,s));let o=hg(n,i);hs(n,o)}),n.onDisconnect_=jc(),Zt(n.eventQueue_,le(),r)}function UF(n,e,t){let r;J(e._path)===".info"?r=jb(n.infoSyncTree_,e,t):r=jb(n.serverSyncTree_,e,t),BC(n.eventQueue_,e._path,r)}function $b(n,e,t){let r;J(e._path)===".info"?r=Am(n.infoSyncTree_,e,t):r=Am(n.serverSyncTree_,e,t),BC(n.eventQueue_,e._path,r)}function BF(n){n.persistentConnection_&&n.persistentConnection_.interrupt(RF)}function ou(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),je(t,...e)}function Om(n,e,t,r){e&&ps(()=>{if(t==="ok")e(null);else{let i=(t||"error").toUpperCase(),s=i;r&&(s+=": "+r);let o=new Error(s);o.code=i,e(o)}})}function $C(n,e,t){return rg(n.serverSyncTree_,e,t)||W.EMPTY_NODE}function fg(n,e=n.transactionQueueTree_){if(e||au(n,e),gs(e)){let t=WC(n,e);C(t.length>0,"Sending zero length transaction queue"),t.every(i=>i.status===0)&&HF(n,na(e),t)}else LC(e)&&nu(e,t=>{fg(n,t)})}function HF(n,e,t){let r=t.map(c=>c.currentWriteId),i=$C(n,e,r),s=i,o=i.hash();for(let c=0;c<t.length;c++){let u=t[c];C(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;let d=pt(e,u.path);s=s.updateChild(d,u.currentOutputSnapshotRaw)}let a=s.val(!0),l=e;n.server_.put(l.toString(),a,c=>{ou(n,"transaction put response",{path:l.toString(),status:c});let u=[];if(c==="ok"){let d=[];for(let f=0;f<t.length;f++)t[f].status=2,u=u.concat(yr(n.serverSyncTree_,t[f].currentWriteId)),t[f].onComplete&&d.push(()=>t[f].onComplete(null,!0,t[f].currentOutputSnapshotResolved)),t[f].unwatcher();au(n,lg(n.transactionQueueTree_,e)),fg(n,n.transactionQueueTree_),Zt(n.eventQueue_,e,u);for(let f=0;f<d.length;f++)ps(d[f])}else{if(c==="datastale")for(let d=0;d<t.length;d++)t[d].status===3?t[d].status=4:t[d].status=0;else{et("transaction at "+l.toString()+" failed: "+c);for(let d=0;d<t.length;d++)t[d].status=4,t[d].abortReason=c}hs(n,e)}},o)}function hs(n,e){let t=zC(n,e),r=na(t),i=WC(n,t);return $F(n,i,r),r}function $F(n,e,t){if(e.length===0)return;let r=[],i=[],o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){let l=e[a],c=pt(t,l.path),u=!1,d;if(C(c!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)u=!0,d=l.abortReason,i=i.concat(yr(n.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=kF)u=!0,d="maxretry",i=i.concat(yr(n.serverSyncTree_,l.currentWriteId,!0));else{let f=$C(n,l.path,o);l.currentInputSnapshot=f;let h=e[a].update(f.val());if(h!==void 0){ru("transaction failed: Data returned ",h,l.path);let y=Le(h);typeof h=="object"&&h!=null&&qt(h,".priority")||(y=y.updatePriority(f.getPriority()));let b=l.currentWriteId,D=su(n),O=OC(y,f,D);l.currentOutputSnapshotRaw=y,l.currentOutputSnapshotResolved=O,l.currentWriteId=dg(n),o.splice(o.indexOf(b),1),i=i.concat(MC(n.serverSyncTree_,l.path,O,l.currentWriteId,l.applyLocally)),i=i.concat(yr(n.serverSyncTree_,b,!0))}else u=!0,d="nodata",i=i.concat(yr(n.serverSyncTree_,l.currentWriteId,!0))}Zt(n.eventQueue_,t,i),i=[],u&&(e[a].status=2,function(f){setTimeout(f,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(d),!1,null))))}au(n,n.transactionQueueTree_);for(let a=0;a<r.length;a++)ps(r[a]);fg(n,n.transactionQueueTree_)}function zC(n,e){let t,r=n.transactionQueueTree_;for(t=J(e);t!==null&&gs(r)===void 0;)r=lg(r,t),e=ge(e),t=J(e);return r}function WC(n,e){let t=[];return GC(n,e,t),t.sort((r,i)=>r.order-i.order),t}function GC(n,e,t){let r=gs(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);nu(e,i=>{GC(n,i,t)})}function au(n,e){let t=gs(e);if(t){let r=0;for(let i=0;i<t.length;i++)t[i].status!==2&&(t[r]=t[i],r++);t.length=r,FC(e,t.length>0?t:void 0)}nu(e,r=>{au(n,r)})}function hg(n,e){let t=na(zC(n,e)),r=lg(n.transactionQueueTree_,e);return vF(r,i=>{Hp(n,i)}),Hp(n,r),VC(r,i=>{Hp(n,i)}),t}function Hp(n,e){let t=gs(e);if(t){let r=[],i=[],s=-1;for(let o=0;o<t.length;o++)t[o].status===3||(t[o].status===1?(C(s===o-1,"All SENT items should be at beginning of queue."),s=o,t[o].status=3,t[o].abortReason="set"):(C(t[o].status===0,"Unexpected transaction status in abort"),t[o].unwatcher(),i=i.concat(yr(n.serverSyncTree_,t[o].currentWriteId,!0)),t[o].onComplete&&r.push(t[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?FC(e,void 0):t.length=s+1,Zt(n.eventQueue_,na(e),i);for(let o=0;o<r.length;o++)ps(r[o])}}function zF(n){let e="",t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function WF(n){let e={};n.charAt(0)==="?"&&(n=n.substring(1));for(let t of n.split("&")){if(t.length===0)continue;let r=t.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):et(`Invalid query segment '${t}' in query '${n}'`)}return e}var zb=function(n,e){let t=GF(n),r=t.namespace;t.domain==="firebase.com"&&Qn(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&t.domain!=="localhost"&&Qn("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||wP();let i=t.scheme==="ws"||t.scheme==="wss";return{repoInfo:new Nc(t.host,t.secure,r,i,e,"",r!==t.subdomain),path:new ue(t.pathString)}},GF=function(n){let e="",t="",r="",i="",s="",o=!0,a="https",l=443;if(typeof n=="string"){let c=n.indexOf("//");c>=0&&(a=n.substring(0,c-1),n=n.substring(c+2));let u=n.indexOf("/");u===-1&&(u=n.length);let d=n.indexOf("?");d===-1&&(d=n.length),e=n.substring(0,Math.min(u,d)),u<d&&(i=zF(n.substring(u,d)));let f=WF(n.substring(Math.min(n.length,d)));c=e.indexOf(":"),c>=0?(o=a==="https"||a==="wss",l=parseInt(e.substring(c+1),10)):c=e.length;let h=e.slice(0,c);if(h.toLowerCase()==="localhost")t="localhost";else if(h.split(".").length<=2)t=h;else{let y=e.indexOf(".");r=e.substring(0,y).toLowerCase(),t=e.substring(y+1),s=r}"ns"in f&&(s=f.ns)}return{host:e,port:l,domain:t,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};var Kc=class{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){let e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+ke(this.snapshot.exportVal())}},Yc=class{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}};var Fm=class{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return C(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}};var Lm=class n{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return te(this._path)?null:Gm(this._path)}get ref(){return new Jn(this._repo,this._path)}get _queryIdentifier(){let e=Ab(this._queryParams),t=zm(e);return t==="{}"?"default":t}get _queryObject(){return Ab(this._queryParams)}isEqual(e){if(e=Ve(e),!(e instanceof n))return!1;let t=this._repo===e._repo,r=qm(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return t&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+eO(this._path)}};var Jn=class n extends Lm{constructor(e,t){super(e,t,new dm,!1)}get parent(){let e=uC(this._path);return e===null?null:new n(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}},Qc=class n{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){let t=new ue(e),r=Zc(this.ref,e);return new n(this._node.getChild(t),r,De)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>e(new n(i,Zc(this.ref,r),De)))}hasChild(e){let t=new ue(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}};function _n(n,e){return n=Ve(n),n._checkNotDeleted("ref"),e!==void 0?Zc(n._root,e):n._root}function Zc(n,e){return n=Ve(n),J(n._path)===null?xF("child","path",e,!1):UC("child","path",e,!1),new Jn(n._repo,Ie(n._path,e))}function pg(n,e){n=Ve(n),AF("set",n._path),DF("set",e,n._path,!1);let t=new qn;return LF(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function ra(n,e){TF("update",e,n._path,!1);let t=new qn;return VF(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}var Vm=class n{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,t){let r=t._queryParams.getIndex();return new Kc("value",this,new Qc(e.snapshotNode,new Jn(t._repo,t._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new Yc(this,e,t):null}matches(e){return e instanceof n?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}},jm=class n{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t=e==="children_added"?"child_added":e;return t=t==="children_removed"?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new Yc(this,e,t):null}createEvent(e,t){C(e.childName!=null,"Child events should have a childName.");let r=Zc(new Jn(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new Kc(e.type,this,new Qc(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof n?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}};function qF(n,e,t,r,i){let s;if(typeof r=="object"&&(s=void 0,i=r),typeof r=="function"&&(s=r),i&&i.onlyOnce){let l=t,c=(u,d)=>{$b(n._repo,n,a),l(u,d)};c.userCallback=t.userCallback,c.context=t.context,t=c}let o=new Fm(t,s||void 0),a=e==="value"?new Vm(o):new jm(e,o);return UF(n._repo,n,a),()=>$b(n._repo,n,a)}function lu(n,e,t,r){return qF(n,"value",e,t,r)}QO(Jn);nF(Jn);var KF="FIREBASE_DATABASE_EMULATOR_HOST",Um={},YF=!1;function QF(n,e,t,r){let i=e.lastIndexOf(":"),s=e.substring(0,i),o=dr(s);n.repoInfo_=new Nc(e,o,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0,t),r&&(n.authTokenProvider_=r)}function ZF(n,e,t,r,i){let s=r||n.options.databaseURL;s===void 0&&(n.options.projectId||Qn("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),je("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let o=zb(s,i),a=o.repoInfo,l,c;typeof process<"u"&&process.env&&(c=process.env[KF]),c?(l=!0,s=`http://${c}?ns=${a.namespace}`,o=zb(s,i),a=o.repoInfo):l=!o.repoInfo.secure;let u=i&&l?new Ho(Ho.OWNER):new Kp(n.name,n.options,e);MF("Invalid Firebase Database URL",o),te(o.path)||Qn("Database URL must point to the root of a Firebase Database (not including a child path).");let d=XF(a,n,u,new qp(n,t));return new Bm(d,n)}function JF(n,e){let t=Um[e];(!t||t[n.key]!==n)&&Qn(`Database ${e}(${n.repoInfo_}) has already been deleted.`),BF(n),delete t[n.key]}function XF(n,e,t,r){let i=Um[e.name];i||(i={},Um[e.name]=i);let s=i[n.toURLString()];return s&&Qn("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new Pm(n,YF,t,r),i[n.toURLString()]=s,s}var Bm=class{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(PF(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Jn(this._repo,le())),this._rootInternal}_delete(){return this._rootInternal!==null&&(JF(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Qn("Cannot call "+e+" on a deleted database.")}};function qC(n=gr(),e){let t=Po(n,"database").getImmediate({identifier:e});if(!t._instanceStarted){let r=Uw("database");r&&eL(t,...r)}return t}function eL(n,e,t,r={}){n=Ve(n),n._checkNotDeleted("useEmulator");let i=`${e}:${t}`,s=n._repoInternal;if(n._instanceStarted){if(i===n._repoInternal.repoInfo_.host&&mn(r,s.repoInfo_.emulatorOptions))return;Qn("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let o;if(s.repoInfo_.nodeAdmin)r.mockUserToken&&Qn('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new Ho(Ho.OWNER);else if(r.mockUserToken){let a=typeof r.mockUserToken=="string"?r.mockUserToken:Bw(r.mockUserToken,n.app.options.projectId);o=new Ho(a)}dr(e)&&(Cc(e),Ic("Database",!0)),QF(s,i,r,o)}function tL(n){_P(mr),pr(new kt("database",(e,{instanceIdentifier:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return ZF(r,i,s,t)},"PUBLIC").setMultipleInstances(!0)),Kt(fb,hb,n),Kt(fb,hb,"esm2020")}Km.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)};Km.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)};tL();var nL=[{eco:"35526",serial:"92719",sap:"4000026523",ops:["Carlos Eduardo Vazquez Calderon","Cristofer Ariel Rivera Cruz","Juan Gardu\xF1o Chaparro","Victor Hugo Moreno De la cruz"]},{eco:"37191",serial:"95159",sap:void 0,ops:["Miguel \xC1ngel Torres","Jos\xE9 Luis Hern\xE1ndez","Roberto S\xE1nchez","Alejandro Ruiz"]},{eco:"37192",serial:"95162",sap:void 0,ops:["Fernando Mart\xEDnez","Ricardo L\xF3pez","Daniel Garc\xEDa"]},{eco:"37193",serial:"95074",sap:void 0,ops:["Eduardo P\xE9rez","Jorge Ram\xEDrez","Luis Morales","Gabriel Flores"]},{eco:"37194",serial:"95056",sap:void 0,ops:["Oscar Gonz\xE1lez","Adri\xE1n Castillo","Manuel D\xEDaz","Rub\xE9n Romero"]},{eco:"37195",serial:"95049",sap:void 0,ops:["Javier Ortiz","Sergio Medina","Andr\xE9s Vargas","Ra\xFAl Castro"]},{eco:"40019",serial:"97520",sap:void 0,ops:["Hugo Herrera","Francisco Jim\xE9nez","Mart\xEDn Silva","Pedro Mendoza"]},{eco:"40020",serial:"97519",sap:void 0,ops:["Diego Rojas","Alberto Cruz","Mario Aguilar","C\xE9sar Guti\xE9rrez"]},{eco:"40021",serial:"97532",sap:void 0,ops:["Enrique \xC1lvarez","Gustavo M\xE9ndez","Felipe Ortega"]},{eco:"40060",serial:"97529",sap:void 0,ops:["Pablo Rios","H\xE9ctor Delgado","Salvador Pe\xF1a","Tom\xE1s Navarro"]},{eco:"40327",serial:"97560",sap:void 0,ops:["Ismael Guerrero","Rafael Soto","\xC1ngel Campos","Ram\xF3n Vega"]},{eco:"40328",serial:"97562",sap:void 0,ops:["Vicente Molina","Julio Cabrera","Esteban Miranda"]},{eco:"40338",serial:"66458",sap:void 0,ops:["Emilio Pacheco","F\xE9lix Cordero","Lorenzo Montes","Benjam\xEDn Sol\xEDs"]},{eco:"29439",serial:"66454",sap:"4000018761",ops:["Gerardo Lara","Mauricio Acosta"]},{eco:"29440",serial:"66541",sap:"4000018763",ops:["Samuel Valencia","Dario Espinoza"]},{eco:"35482",serial:"92714",sap:"4000026495",ops:["Alfredo Beltr\xE1n","Rogelio C\xE1rdenas","Sim\xF3n Orozco","Elias Villalobos"]},{eco:"35483",serial:"92730",sap:"4000026496",ops:["Lucas Maldonado","Mateo Ibarra","Nicol\xE1s Zavala","Joaqu\xEDn Trejo"]},{eco:"35494",serial:"92732",sap:"4000026522",ops:["Sebasti\xE1n Gallegos","Dami\xE1n Ponce","Juli\xE1n Esquivel","Leonardo Rocha"]}],rL="Sergio Guadarrama Gonzales",iL="Planta Cuautitl\xE1n - Cuautitl\xE1n Izcalli, Edo de Mex.",sL="Toyota 32-8FG30";function KC(n){return nL.map((e,t)=>{let r=Math.random(),i=0;r>.95?i=1:r>.85&&(i=2),e.eco==="35526"&&(i=1);let s=n[i],o=new Date;return i!==0&&o.setDate(o.getDate()-Math.floor(Math.random()*5)),{id:e.eco,brand:"Toyota",model:sL,serial:e.serial,sapCode:e.sap,acquisitionDate:"2020-06-15",fuelType:"GLP/Gasolina Dual",status:s,statusSince:o.toISOString(),location:iL,critical:t<5,cleanlinessStatus:"Pending",supervisor:rL,operatingHours:Math.floor(Math.random()*1301+1200),assignedOperators:e.ops.map((a,l)=>({name:a,role:"Operador",shift:`Turno ${l%4+1}`})),maintenanceTasks:[]}})}var vn={production:!1,firebase:{apiKey:"AIzaSyCQkT-TQy-rtKr_bmTWJS78HghTh97x3eE",authDomain:"asset-guard-demo.firebaseapp.com",databaseURL:"https://asset-guard-demo-default-rtdb.firebaseio.com",projectId:"asset-guard-demo",storageBucket:"asset-guard-demo.firebasestorage.app",messagingSenderId:"730419123254",appId:"1:730419123254:web:74de062f3e9e0851087497"},geminiApiKey:"AIzaSyDg8fHddzzerQlkBfNr49q51ZZoo1fvlM08"};var mt=(()=>{class n{constructor(){this.firebaseConfig=vn.firebase,this.connectionStatus=F("syncing"),this.lastUpdate=F(new Date),this.plantMode=F(!1),this.isKioskMode=F(!1),this.activeSlide=F(0),this.statuses=[{id:"1",name:"Operativo",color:"bg-emerald-100 text-emerald-800 border-emerald-200",hex:"#10b981"},{id:"2",name:"Taller",color:"bg-red-100 text-red-800 border-red-200",hex:"#ef4444"},{id:"3",name:"Preventivo",color:"bg-amber-100 text-amber-800 border-amber-200",hex:"#f59e0b"},{id:"4",name:"Baja",color:"bg-slate-100 text-slate-800 border-slate-200",hex:"#64748b"}],this.assetsSignal=F(this.loadRealFleet()),this.reportsSignal=F(this.generateRealReports()),this.forkliftFailures=F(this.generateRealLiveFailures()),this.assets=this.assetsSignal.asReadonly(),this.reports=this.reportsSignal.asReadonly(),this.kpiData=z(()=>{let t=this.assetsSignal().length,r=this.assetsSignal().filter(c=>c.status.name==="Operativo").length,i=this.reportsSignal().filter(c=>c.exitDate),s=0;i.forEach(c=>{let u=new Date(c.entryDate).getTime(),d=new Date(c.exitDate).getTime();s+=(d-u)/(1e3*60*60)});let o=i.length>0?s/i.length:0,a=new Date().getMonth(),l=this.reportsSignal().filter(c=>new Date(c.entryDate).getMonth()===a).reduce((c,u)=>c+u.estimatedCost,0);return{availability:t>0?r/t*100:0,mttr:Math.round(o*10)/10,totalCostMonth:l,budgetMonth:18e3}}),this.fleetAvailability=z(()=>{let t=this.assetsSignal();if(t.length===0)return{percentage:100,label:"Excelente",color:"#10b981"};let i=t.filter(s=>s.status.name==="Operativo").length/t.length*100;return{percentage:Math.round(i),label:i>=90?"Excelente":i>=80?"Regular":"Cr\xEDtico",color:i>=90?"#10b981":i>=80?"#f59e0b":"#ef4444"}}),this.topOperators=z(()=>{let t=this.forkliftFailures(),r={};return t.forEach(i=>{i.reporta&&(r[i.reporta]=(r[i.reporta]||0)+10)}),Object.entries(r).map(([i,s])=>({name:i,points:s})).sort((i,s)=>s.points-i.points).slice(0,3)}),this.safetyStats=F({daysWithoutAccident:142,record:180,announcement:"Uso obligatorio de EPP en Patio de Maniobras"}),this.crewLeaderboard=F([{rank:1,name:"Turno 1 (Matutino)",score:98,pallets:1450},{rank:2,name:"Turno 2 (Vespertino)",score:94,pallets:1320},{rank:3,name:"Turno 3 (Nocturno)",score:89,pallets:1105}]),this.initFirebase(),this.syncAssetsWithFailures(this.forkliftFailures()),ei(()=>{this.isKioskMode()?this.startKioskRotation():this.stopKioskRotation()}),window.addEventListener("online",()=>this.updateConnectionStatus()),window.addEventListener("offline",()=>this.updateConnectionStatus())}initFirebase(){try{if(!this.firebaseConfig.apiKey||!this.firebaseConfig.databaseURL||!this.firebaseConfig.projectId){console.warn("Firebase configuration incomplete. Running in offline mode."),this.connectionStatus.set("offline");return}this.app=xc().length>0?gr():Oo(this.firebaseConfig),this.db=qC(this.app);let t=_n(this.db,".info/connected");lu(t,r=>{r.val()===!0?this.connectionStatus.set("online"):this.connectionStatus.set("offline")}),this.setupListeners()}catch(t){console.error("Firebase init error:",t),this.connectionStatus.set("offline")}}updateConnectionStatus(){this.connectionStatus.set(navigator.onLine?"online":"offline")}setupListeners(){let t=_n(this.db,"failures");lu(t,i=>{let s=i.val();if(this.lastUpdate.set(new Date),s){let o=Object.values(s);o.sort((a,l)=>new Date(l.fechaIngreso).getTime()-new Date(a.fechaIngreso).getTime()),this.forkliftFailures.set(o),this.syncAssetsWithFailures(o)}else this.seedDatabase()},i=>{console.info("\u{1F4F4} Modo Offline activado - Usando datos locales de demostraci\xF3n."),this.connectionStatus.set("offline")});let r=_n(this.db,"settings/kioskMode");lu(r,i=>{let s=i.val();s!==null&&this.isKioskMode()!==s&&this.isKioskMode.set(s)})}seedDatabase(){let t={};this.forkliftFailures().forEach(i=>{t["failures/"+i.id]=i}),t["settings/kioskMode"]=!1,ra(_n(this.db),t).catch(()=>{})}toggleKioskMode(){let t=!this.isKioskMode();this.isKioskMode.set(t),this.connectionStatus()==="online"&&pg(_n(this.db,"settings/kioskMode"),t).catch(()=>{})}startKioskRotation(){this.kioskInterval&&clearInterval(this.kioskInterval),this.kioskInterval=setInterval(()=>{this.activeSlide.update(t=>(t+1)%3)},15e3)}stopKioskRotation(){this.kioskInterval&&clearInterval(this.kioskInterval),this.activeSlide.set(0)}togglePlantMode(){this.plantMode.update(t=>!t)}getAsset(t){return this.assetsSignal().find(r=>r.id===t)}getAssetHistory(t){return this.reportsSignal().filter(r=>r.assetId===t).sort((r,i)=>new Date(i.entryDate).getTime()-new Date(r.entryDate).getTime())}addLiveFailure(t){let r=$(S({},t),{id:"F-"+Date.now(),fechaIngreso:new Date().toISOString(),seguimiento:[]});this.connectionStatus.set("syncing"),this.forkliftFailures.update(i=>[r,...i]),this.syncAssetsWithFailures(this.forkliftFailures()),this.connectionStatus()!=="offline"&&pg(_n(this.db,"failures/"+r.id),r).then(()=>this.connectionStatus.set("online")).catch(()=>this.connectionStatus.set("offline"))}addFailureUpdate(t,r,i){let s=this.forkliftFailures().find(a=>a.id===t);if(!s)return;let o=$(S({},s),{estatus:"En Proceso",seguimiento:[...s.seguimiento,{usuario:i,mensaje:r,fecha:new Date().toISOString()}]});this.forkliftFailures.update(a=>a.map(l=>l.id===t?o:l)),this.connectionStatus()!=="offline"&&ra(_n(this.db,"failures/"+t),o).catch(console.error)}updateToyotaLogistics(t,r,i,s){let o={ordenCompra:r,estatusRefaccion:i,fechaPromesa:s,estatus:"En Proceso"};this.forkliftFailures.update(a=>a.map(l=>l.id===t?$(S(S({},l),o),{estatus:"En Proceso"}):l)),this.connectionStatus()!=="offline"&&ra(_n(this.db,"failures/"+t),o).catch(console.error)}closeLiveFailure(t){let r=this.forkliftFailures().find(s=>s.id===t);if(!r)return;let i=$(S({},r),{estatus:"Cerrada",fechaSalida:new Date().toISOString()});this.forkliftFailures.update(s=>s.map(o=>o.id===t?i:o)),this.syncAssetsWithFailures(this.forkliftFailures()),this.connectionStatus()!=="offline"&&ra(_n(this.db,"failures/"+t),i).catch(console.error)}reportFailure(t,r,i){this.addLiveFailure({economico:t,falla:r,prioridad:"Media",reporta:"Operador (App)",estatus:"Abierta"})}completeRepair(t,r,i,s){let o=this.forkliftFailures().find(a=>a.economico===t&&a.estatus!=="Cerrada");o&&this.closeLiveFailure(o.id)}updateAssetsFromExcel(t){}syncAssetsWithFailures(t){let r=t.filter(l=>l.estatus!=="Cerrada"),i=new Set(r.map(l=>l.economico)),s=new Map(r.map(l=>[l.economico,l])),o=this.statuses.find(l=>l.name==="Taller"),a=this.statuses.find(l=>l.name==="Operativo");this.assetsSignal.update(l=>l.map(c=>{if(i.has(c.id)){if(c.status.name!=="Taller")return $(S({},c),{status:o,statusSince:s.get(c.id)?.fechaIngreso||new Date().toISOString(),lastFailure:s.get(c.id)?.falla})}else if(c.status.name==="Taller"&&!i.has(c.id))return $(S({},c),{status:a,statusSince:new Date().toISOString(),lastFailure:void 0});return c}))}loadRealFleet(){let t=KC(this.statuses);return t.forEach((r,i)=>{r.maintenanceTasks=this.generateMockMaintenance(i)}),t}generateMockMaintenance(t){let r=[],i=Math.floor(Math.random()*45)-5,s=new Date;s.setDate(s.getDate()+i);let o=["Cambio de Aceite","Revisi\xF3n de Frenos","Ajuste de Cadenas","Servicio General","Inspecci\xF3n de Bater\xEDa"][t%5];return r.push({id:`T-${t}-1`,date:s.toISOString(),description:o,status:i<0?"Overdue":"Pending"}),r}generateRealReports(){return[]}generateRealLiveFailures(){return[{id:"FAIL-2026-0001",economico:"35526",falla:"Fuga de aceite hidr\xE1ulico en cilindro de elevaci\xF3n principal.",reporta:"Carlos Eduardo Vazquez Calderon",fechaIngreso:new Date().toISOString(),prioridad:"Alta",estatus:"Abierta",seguimiento:[]}]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var YC=["user","model","function","system"];var cu=function(n){return n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n}(cu||{});var qe=class extends Error{constructor(e){super(`[GoogleGenerativeAI Error]: ${e}`)}},wr=class extends qe{constructor(e,t){super(e),this.response=t}},du=class extends qe{constructor(e,t,r,i){super(e),this.status=t,this.statusText=r,this.errorDetails=i}},En=class extends qe{};var oL="https://generativelanguage.googleapis.com",aL="v1beta",lL="0.21.0",cL="genai-js",ys=function(n){return n.GENERATE_CONTENT="generateContent",n.STREAM_GENERATE_CONTENT="streamGenerateContent",n.COUNT_TOKENS="countTokens",n.EMBED_CONTENT="embedContent",n.BATCH_EMBED_CONTENTS="batchEmbedContents",n}(ys||{}),mg=class{constructor(e,t,r,i,s){this.model=e,this.task=t,this.apiKey=r,this.stream=i,this.requestOptions=s}toString(){var e,t;let r=((e=this.requestOptions)===null||e===void 0?void 0:e.apiVersion)||aL,s=`${((t=this.requestOptions)===null||t===void 0?void 0:t.baseUrl)||oL}/${r}/${this.model}:${this.task}`;return this.stream&&(s+="?alt=sse"),s}};function uL(n){let e=[];return n?.apiClient&&e.push(n.apiClient),e.push(`${cL}/${lL}`),e.join(" ")}function dL(n){return _(this,null,function*(){var e;let t=new Headers;t.append("Content-Type","application/json"),t.append("x-goog-api-client",uL(n.requestOptions)),t.append("x-goog-api-key",n.apiKey);let r=(e=n.requestOptions)===null||e===void 0?void 0:e.customHeaders;if(r){if(!(r instanceof Headers))try{r=new Headers(r)}catch(i){throw new En(`unable to convert customHeaders value ${JSON.stringify(r)} to Headers: ${i.message}`)}for(let[i,s]of r.entries()){if(i==="x-goog-api-key")throw new En(`Cannot set reserved header name ${i}`);if(i==="x-goog-api-client")throw new En(`Header name ${i} can only be set using the apiClient field`);t.append(i,s)}}return t})}function fL(n,e,t,r,i,s){return _(this,null,function*(){let o=new mg(n,e,t,r,s);return{url:o.toString(),fetchOptions:Object.assign(Object.assign({},gL(s)),{method:"POST",headers:yield dL(o),body:i})}})}function aa(a,l,c,u,d){return _(this,arguments,function*(n,e,t,r,i,s={},o=fetch){let{url:f,fetchOptions:h}=yield fL(n,e,t,r,i,s);return hL(f,h,o)})}function hL(r,i){return _(this,arguments,function*(n,e,t=fetch){let s;try{s=yield t(n,e)}catch(o){pL(o,n)}return s.ok||(yield mL(s,n)),s})}function pL(n,e){let t=n;throw n instanceof du||n instanceof En||(t=new qe(`Error fetching from ${e.toString()}: ${n.message}`),t.stack=n.stack),t}function mL(n,e){return _(this,null,function*(){let t="",r;try{let i=yield n.json();t=i.error.message,i.error.details&&(t+=` ${JSON.stringify(i.error.details)}`,r=i.error.details)}catch{}throw new du(`Error fetching from ${e.toString()}: [${n.status} ${n.statusText}] ${t}`,n.status,n.statusText,r)})}function gL(n){let e={};if(n?.signal!==void 0||n?.timeout>=0){let t=new AbortController;n?.timeout>=0&&setTimeout(()=>t.abort(),n.timeout),n?.signal&&n.signal.addEventListener("abort",()=>{t.abort()}),e.signal=t.signal}return e}function yg(n){return n.text=()=>{if(n.candidates&&n.candidates.length>0){if(n.candidates.length>1&&console.warn(`This response had ${n.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),uu(n.candidates[0]))throw new wr(`${br(n)}`,n);return yL(n)}else if(n.promptFeedback)throw new wr(`Text not available. ${br(n)}`,n);return""},n.functionCall=()=>{if(n.candidates&&n.candidates.length>0){if(n.candidates.length>1&&console.warn(`This response had ${n.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),uu(n.candidates[0]))throw new wr(`${br(n)}`,n);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),QC(n)[0]}else if(n.promptFeedback)throw new wr(`Function call not available. ${br(n)}`,n)},n.functionCalls=()=>{if(n.candidates&&n.candidates.length>0){if(n.candidates.length>1&&console.warn(`This response had ${n.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),uu(n.candidates[0]))throw new wr(`${br(n)}`,n);return QC(n)}else if(n.promptFeedback)throw new wr(`Function call not available. ${br(n)}`,n)},n}function yL(n){var e,t,r,i;let s=[];if(!((t=(e=n.candidates)===null||e===void 0?void 0:e[0].content)===null||t===void 0)&&t.parts)for(let o of(i=(r=n.candidates)===null||r===void 0?void 0:r[0].content)===null||i===void 0?void 0:i.parts)o.text&&s.push(o.text),o.executableCode&&s.push("\n```"+o.executableCode.language+`
`+o.executableCode.code+"\n```\n"),o.codeExecutionResult&&s.push("\n```\n"+o.codeExecutionResult.output+"\n```\n");return s.length>0?s.join(""):""}function QC(n){var e,t,r,i;let s=[];if(!((t=(e=n.candidates)===null||e===void 0?void 0:e[0].content)===null||t===void 0)&&t.parts)for(let o of(i=(r=n.candidates)===null||r===void 0?void 0:r[0].content)===null||i===void 0?void 0:i.parts)o.functionCall&&s.push(o.functionCall);if(s.length>0)return s}var _L=[cu.RECITATION,cu.SAFETY,cu.LANGUAGE];function uu(n){return!!n.finishReason&&_L.includes(n.finishReason)}function br(n){var e,t,r;let i="";if((!n.candidates||n.candidates.length===0)&&n.promptFeedback)i+="Response was blocked",!((e=n.promptFeedback)===null||e===void 0)&&e.blockReason&&(i+=` due to ${n.promptFeedback.blockReason}`),!((t=n.promptFeedback)===null||t===void 0)&&t.blockReasonMessage&&(i+=`: ${n.promptFeedback.blockReasonMessage}`);else if(!((r=n.candidates)===null||r===void 0)&&r[0]){let s=n.candidates[0];uu(s)&&(i+=`Candidate was blocked due to ${s.finishReason}`,s.finishMessage&&(i+=`: ${s.finishMessage}`))}return i}function ia(n){return this instanceof ia?(this.v=n,this):new ia(n)}function vL(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(f){r[f]&&(i[f]=function(h){return new Promise(function(y,E){s.push([f,h,y,E])>1||a(f,h)})})}function a(f,h){try{l(r[f](h))}catch(y){d(s[0][3],y)}}function l(f){f.value instanceof ia?Promise.resolve(f.value.v).then(c,u):d(s[0][2],f)}function c(f){a("next",f)}function u(f){a("throw",f)}function d(f,h){f(h),s.shift(),s.length&&a(s[0][0],s[0][1])}}var ZC=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function EL(n){let e=n.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),t=CL(e),[r,i]=t.tee();return{stream:bL(r),response:wL(i)}}function wL(n){return _(this,null,function*(){let e=[],t=n.getReader();for(;;){let{done:r,value:i}=yield t.read();if(r)return yg(IL(e));e.push(i)}})}function bL(n){return vL(this,arguments,function*(){let t=n.getReader();for(;;){let{value:r,done:i}=yield ia(t.read());if(i)break;yield yield ia(yg(r))}})}function CL(n){let e=n.getReader();return new ReadableStream({start(r){let i="";return s();function s(){return e.read().then(({value:o,done:a})=>{if(a){if(i.trim()){r.error(new qe("Failed to parse stream"));return}r.close();return}i+=o;let l=i.match(ZC),c;for(;l;){try{c=JSON.parse(l[1])}catch{r.error(new qe(`Error parsing JSON response: "${l[1]}"`));return}r.enqueue(c),i=i.substring(l[0].length),l=i.match(ZC)}return s()})}}})}function IL(n){let e=n[n.length-1],t={promptFeedback:e?.promptFeedback};for(let r of n){if(r.candidates)for(let i of r.candidates){let s=i.index;if(t.candidates||(t.candidates=[]),t.candidates[s]||(t.candidates[s]={index:i.index}),t.candidates[s].citationMetadata=i.citationMetadata,t.candidates[s].groundingMetadata=i.groundingMetadata,t.candidates[s].finishReason=i.finishReason,t.candidates[s].finishMessage=i.finishMessage,t.candidates[s].safetyRatings=i.safetyRatings,i.content&&i.content.parts){t.candidates[s].content||(t.candidates[s].content={role:i.content.role||"user",parts:[]});let o={};for(let a of i.content.parts)a.text&&(o.text=a.text),a.functionCall&&(o.functionCall=a.functionCall),a.executableCode&&(o.executableCode=a.executableCode),a.codeExecutionResult&&(o.codeExecutionResult=a.codeExecutionResult),Object.keys(o).length===0&&(o.text=""),t.candidates[s].content.parts.push(o)}}r.usageMetadata&&(t.usageMetadata=r.usageMetadata)}return t}function tI(n,e,t,r){return _(this,null,function*(){let i=yield aa(e,ys.STREAM_GENERATE_CONTENT,n,!0,JSON.stringify(t),r);return EL(i)})}function nI(n,e,t,r){return _(this,null,function*(){let s=yield(yield aa(e,ys.GENERATE_CONTENT,n,!1,JSON.stringify(t),r)).json();return{response:yg(s)}})}function rI(n){if(n!=null){if(typeof n=="string")return{role:"system",parts:[{text:n}]};if(n.text)return{role:"system",parts:[n]};if(n.parts)return n.role?n:{role:"system",parts:n.parts}}}function sa(n){let e=[];if(typeof n=="string")e=[{text:n}];else for(let t of n)typeof t=="string"?e.push({text:t}):e.push(t);return DL(e)}function DL(n){let e={role:"user",parts:[]},t={role:"function",parts:[]},r=!1,i=!1;for(let s of n)"functionResponse"in s?(t.parts.push(s),i=!0):(e.parts.push(s),r=!0);if(r&&i)throw new qe("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!r&&!i)throw new qe("No content is provided for sending chat message.");return r?e:t}function SL(n,e){var t;let r={model:e?.model,generationConfig:e?.generationConfig,safetySettings:e?.safetySettings,tools:e?.tools,toolConfig:e?.toolConfig,systemInstruction:e?.systemInstruction,cachedContent:(t=e?.cachedContent)===null||t===void 0?void 0:t.name,contents:[]},i=n.generateContentRequest!=null;if(n.contents){if(i)throw new En("CountTokensRequest must have one of contents or generateContentRequest, not both.");r.contents=n.contents}else if(i)r=Object.assign(Object.assign({},r),n.generateContentRequest);else{let s=sa(n);r.contents=[s]}return{generateContentRequest:r}}function JC(n){let e;return n.contents?e=n:e={contents:[sa(n)]},n.systemInstruction&&(e.systemInstruction=rI(n.systemInstruction)),e}function TL(n){return typeof n=="string"||Array.isArray(n)?{content:sa(n)}:n}var XC=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],xL={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function AL(n){let e=!1;for(let t of n){let{role:r,parts:i}=t;if(!e&&r!=="user")throw new qe(`First content should be with role 'user', got ${r}`);if(!YC.includes(r))throw new qe(`Each item should include role field. Got ${r} but valid roles are: ${JSON.stringify(YC)}`);if(!Array.isArray(i))throw new qe("Content should have 'parts' property with an array of Parts");if(i.length===0)throw new qe("Each Content should have at least one part");let s={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(let a of i)for(let l of XC)l in a&&(s[l]+=1);let o=xL[r];for(let a of XC)if(!o.includes(a)&&s[a]>0)throw new qe(`Content with role '${r}' can't contain '${a}' part`);e=!0}}var eI="SILENT_ERROR",gg=class{constructor(e,t,r,i={}){this.model=t,this.params=r,this._requestOptions=i,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,r?.history&&(AL(r.history),this._history=r.history)}getHistory(){return _(this,null,function*(){return yield this._sendPromise,this._history})}sendMessage(r){return _(this,arguments,function*(e,t={}){var i,s,o,a,l,c;yield this._sendPromise;let u=sa(e),d={safetySettings:(i=this.params)===null||i===void 0?void 0:i.safetySettings,generationConfig:(s=this.params)===null||s===void 0?void 0:s.generationConfig,tools:(o=this.params)===null||o===void 0?void 0:o.tools,toolConfig:(a=this.params)===null||a===void 0?void 0:a.toolConfig,systemInstruction:(l=this.params)===null||l===void 0?void 0:l.systemInstruction,cachedContent:(c=this.params)===null||c===void 0?void 0:c.cachedContent,contents:[...this._history,u]},f=Object.assign(Object.assign({},this._requestOptions),t),h;return this._sendPromise=this._sendPromise.then(()=>nI(this._apiKey,this.model,d,f)).then(y=>{var E;if(y.response.candidates&&y.response.candidates.length>0){this._history.push(u);let b=Object.assign({parts:[],role:"model"},(E=y.response.candidates)===null||E===void 0?void 0:E[0].content);this._history.push(b)}else{let b=br(y.response);b&&console.warn(`sendMessage() was unsuccessful. ${b}. Inspect response object for details.`)}h=y}),yield this._sendPromise,h})}sendMessageStream(r){return _(this,arguments,function*(e,t={}){var i,s,o,a,l,c;yield this._sendPromise;let u=sa(e),d={safetySettings:(i=this.params)===null||i===void 0?void 0:i.safetySettings,generationConfig:(s=this.params)===null||s===void 0?void 0:s.generationConfig,tools:(o=this.params)===null||o===void 0?void 0:o.tools,toolConfig:(a=this.params)===null||a===void 0?void 0:a.toolConfig,systemInstruction:(l=this.params)===null||l===void 0?void 0:l.systemInstruction,cachedContent:(c=this.params)===null||c===void 0?void 0:c.cachedContent,contents:[...this._history,u]},f=Object.assign(Object.assign({},this._requestOptions),t),h=tI(this._apiKey,this.model,d,f);return this._sendPromise=this._sendPromise.then(()=>h).catch(y=>{throw new Error(eI)}).then(y=>y.response).then(y=>{if(y.candidates&&y.candidates.length>0){this._history.push(u);let E=Object.assign({},y.candidates[0].content);E.role||(E.role="model"),this._history.push(E)}else{let E=br(y);E&&console.warn(`sendMessageStream() was unsuccessful. ${E}. Inspect response object for details.`)}}).catch(y=>{y.message!==eI&&console.error(y)}),h})}};function ML(n,e,t,r){return _(this,null,function*(){return(yield aa(e,ys.COUNT_TOKENS,n,!1,JSON.stringify(t),r)).json()})}function NL(n,e,t,r){return _(this,null,function*(){return(yield aa(e,ys.EMBED_CONTENT,n,!1,JSON.stringify(t),r)).json()})}function RL(n,e,t,r){return _(this,null,function*(){let i=t.requests.map(o=>Object.assign(Object.assign({},o),{model:e}));return(yield aa(e,ys.BATCH_EMBED_CONTENTS,n,!1,JSON.stringify({requests:i}),r)).json()})}var fu=class{constructor(e,t,r={}){this.apiKey=e,this._requestOptions=r,t.model.includes("/")?this.model=t.model:this.model=`models/${t.model}`,this.generationConfig=t.generationConfig||{},this.safetySettings=t.safetySettings||[],this.tools=t.tools,this.toolConfig=t.toolConfig,this.systemInstruction=rI(t.systemInstruction),this.cachedContent=t.cachedContent}generateContent(r){return _(this,arguments,function*(e,t={}){var i;let s=JC(e),o=Object.assign(Object.assign({},this._requestOptions),t);return nI(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(i=this.cachedContent)===null||i===void 0?void 0:i.name},s),o)})}generateContentStream(r){return _(this,arguments,function*(e,t={}){var i;let s=JC(e),o=Object.assign(Object.assign({},this._requestOptions),t);return tI(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(i=this.cachedContent)===null||i===void 0?void 0:i.name},s),o)})}startChat(e){var t;return new gg(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(t=this.cachedContent)===null||t===void 0?void 0:t.name},e),this._requestOptions)}countTokens(r){return _(this,arguments,function*(e,t={}){let i=SL(e,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),s=Object.assign(Object.assign({},this._requestOptions),t);return ML(this.apiKey,this.model,i,s)})}embedContent(r){return _(this,arguments,function*(e,t={}){let i=TL(e),s=Object.assign(Object.assign({},this._requestOptions),t);return NL(this.apiKey,this.model,i,s)})}batchEmbedContents(r){return _(this,arguments,function*(e,t={}){let i=Object.assign(Object.assign({},this._requestOptions),t);return RL(this.apiKey,this.model,e,i)})}};var oa=class{constructor(e){this.apiKey=e}getGenerativeModel(e,t){if(!e.model)throw new qe("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new fu(this.apiKey,e,t)}getGenerativeModelFromCachedContent(e,t,r){if(!e.name)throw new En("Cached content must contain a `name` field.");if(!e.model)throw new En("Cached content must contain a `model` field.");let i=["model","systemInstruction"];for(let o of i)if(t?.[o]&&e[o]&&t?.[o]!==e[o]){if(o==="model"){let a=t.model.startsWith("models/")?t.model.replace("models/",""):t.model,l=e.model.startsWith("models/")?e.model.replace("models/",""):e.model;if(a===l)continue}throw new En(`Different value for "${o}" specified in modelParams (${t[o]}) and cachedContent (${e[o]})`)}let s=Object.assign(Object.assign({},t),{model:e.model,tools:e.tools,toolConfig:e.toolConfig,systemInstruction:e.systemInstruction,cachedContent:e});return new fu(this.apiKey,s,r)}};var _s=(()=>{class n{constructor(){let t=vn.geminiApiKey;t&&t!==""?this.ai=new oa(t):(console.info("\u2139\uFE0F Modo Demo: Las funciones de IA est\xE1n deshabilitadas. Para activarlas, configure la API Key de Gemini en environment.ts"),this.ai=new oa(""))}analyzeMaintenanceHistory(t,r){return _(this,null,function*(){if(!vn.geminiApiKey)return'<p class="text-yellow-600">\u26A0\uFE0F API key no configurada. Por favor configura geminiApiKey en tu archivo environment.ts</p>';try{let i=`
        Act\xFAa como Analista de Mantenimiento Predictivo con especializaci\xF3n en Machine Learning aplicado a activos industriales.

        ENTRADA DE DATOS:
        Activo: ${t.brand} ${t.model} (ID: ${t.id})
        Historial de Fallas:
        ${JSON.stringify(r.map(l=>({fecha:l.entryDate,tipo:l.type,componente:l.failureDescription,severidad:l.estimatedCost>2e3?"Alta":"Media"})))}

        AN\xC1LISIS REQUERIDO:
        1. \u{1F52E} DETECCI\xD3N DE PATRONES: Identifica fallas recurrentes y calcula MTBF aproximado.
        2. \u{1F4C8} PREDICCI\xD3N: Estima qu\xE9 componente tiene mayor probabilidad de fallar pr\xF3ximamente.
        3. \u2699\uFE0F RECOMENDACIONES: Sugiere inspecciones o reemplazos preventivos.

        FORMATO DE SALIDA:
        HTML limpio (sin markdown \`\`\`html). Usa iconos y negritas.
        Estructura:
        <div class="space-y-4">
          <div><h4 class="font-bold text-red-400">\u{1F52E} Patrones Detectados</h4>...</div>
          <div><h4 class="font-bold text-orange-400">\u26A0\uFE0F Riesgo Inminente</h4>...</div>
          <div><h4 class="font-bold text-green-400">\u2705 Acci\xF3n Recomendada</h4>...</div>
        </div>
      `;return(yield(yield this.ai.getGenerativeModel({model:"gemini-2.0-flash-exp"}).generateContent(i)).response).text()||"<p>Datos insuficientes para predicci\xF3n.</p>"}catch(i){return console.error("Gemini Error:",i),'<p class="text-red-500">Error conectando con el servicio de IA.</p>'}})}generateExecutiveReport(t,r,i){return _(this,null,function*(){if(!vn.geminiApiKey)return'<p class="text-yellow-600">\u26A0\uFE0F API key no configurada. Por favor configura VITE_API_KEY en tu archivo .env.local</p>';try{let s=`
        Analiza el estado actual de AssetGuard CMMS y genera un resumen ejecutivo profesional para Gerencia de Operaciones.

        DATOS:
        - Disponibilidad: ${i.percentage}% (Meta: 95%)
        - MTTR Promedio: ${t.mttr} horas
        - Gasto Mes: $${t.totalCostMonth} USD
        - Equipos Detenidos (Top 3): ${JSON.stringify(r.slice(0,3).map(c=>`${c.economico} (${c.falla})`))}

        ESTRUCTURA DEL REPORTE (HTML simple para renderizar):

        <h3>\u{1F4CA} 1. KPIs DE DISPONIBILIDAD</h3>
        <p>Resumen de estado vs meta.</p>

        <h3>\u{1F534} 2. AN\xC1LISIS DE PARETO (Top Problemas)</h3>
        <p>Menciona los equipos cr\xEDticos detenidos actualmente.</p>

        <h3>\u{1F4A1} 3. RECOMENDACIONES ESTRAT\xC9GICAS</h3>
        <ul>
          <li>Acci\xF3n 1 para reducir downtime</li>
          <li>Acci\xF3n 2 para optimizar costos</li>
        </ul>

        <h3>\u26A0\uFE0F 4. ALERTAS CR\xCDTICAS</h3>
        <p>Si disponibilidad < 90%, resalta urgencia.</p>

        TONO: Profesional, directo, espa\xF1ol mexicano empresarial. Sin saludos.
      `;return(yield(yield this.ai.getGenerativeModel({model:"gemini-2.0-flash-exp"}).generateContent(s)).response).text()||"No se pudo generar el reporte ejecutivo."}catch(s){return console.error("Gemini Error:",s),"Error conectando con IA para el reporte."}})}generateLotoProcedure(t,r){return _(this,null,function*(){if(!vn.geminiApiKey)return'<p class="text-yellow-600">\u26A0\uFE0F API key no configurada. Por favor configura VITE_API_KEY en tu archivo .env.local</p>';try{let i=`
        Act\xFAa como Ingeniero de Seguridad Industrial certificado en LOTO (NOM-004-STPS-1999).
        Genera un procedimiento de bloqueo/etiquetado para:
        Equipo: ${t.brand} ${t.model} (${t.fuelType})
        Tarea: Reparaci\xF3n de ${r}

        ESTRUCTURA HTML (Lista de verificaci\xF3n):
        <div class="loto-card">
          <h3 class="text-red-600 font-bold mb-2">\u{1F6A8} IDENTIFICACI\xD3N DE PELIGROS</h3>
          [Lista de energ\xEDas peligrosas: El\xE9ctrica, Hidr\xE1ulica, etc.]

          <h3 class="text-blue-600 font-bold mt-4 mb-2">\u{1F512} SECUENCIA DE BLOQUEO</h3>
          <ol class="list-decimal pl-4 space-y-2">
            <li>Paso 1...</li>
            <li>Paso 2...</li>
          </ol>

          <h3 class="text-green-600 font-bold mt-4 mb-2">\u2705 VERIFICACI\xD3N ENERG\xCDA CERO</h3>
          [C\xF3mo verificar que es seguro trabajar]
        </div>

        Resalta ADVERTENCIAS DE SEGURIDAD en negritas.
      `;return(yield(yield this.ai.getGenerativeModel({model:"gemini-2.0-flash-exp"}).generateContent(i)).response).text()||"Error generando LOTO."}catch{return"<p>No disponible.</p>"}})}analyzeImageInspection(t){return _(this,null,function*(){if(!vn.geminiApiKey)return console.warn("VITE_API_KEY not configured. Image analysis unavailable."),null;try{let a=(yield(yield this.ai.getGenerativeModel({model:"gemini-2.0-flash-exp",generationConfig:{responseMimeType:"application/json"}}).generateContent([{inlineData:{mimeType:"image/jpeg",data:t}},`
        Analiza esta imagen capturada por un operador en planta industrial. Act\xFAa como Inspector de Mantenimiento Certificado.

        IDENTIFICA CON PRECISI\xD3N:
        1. Componente afectado
        2. Tipo de da\xF1o visible
        3. Nivel de severidad (BAJA, MEDIA, ALTA, CR\xCDTICA)
        4. Posible causa ra\xEDz
        5. Refacciones estimadas

        FORMATO DE RESPUESTA:
        Responde \xDANICAMENTE con un objeto JSON v\xE1lido siguiendo esta estructura exacta:
        {
          "inspection": {
            "timestamp": "ISO string",
            "asset": { "component_affected": "String", "visual_condition": "String" },
            "damage_analysis": { "damage_type": "String", "visible_signs": ["String"], "affected_area_percentage": "String" },
            "severity": { "level": "String", "risk_score": "String", "safety_impact": "String", "operational_impact": "String" },
            "root_cause_analysis": { "probable_cause": "String", "why_analysis": "String" },
            "immediate_actions": { "safety_measures": ["String"] },
            "repair_plan": {
              "estimated_parts": [{ "part_name": "String", "generic_code": "String", "quantity": "String" }],
              "estimated_mttr_hours": "String",
              "estimated_cost_usd": { "min": number, "max": number }
            }
          }
        }
      `])).response).text();return a?JSON.parse(a):null}catch(r){return console.error("Vision Error:",r),null}})}generateDailySummary(t,r,i){return _(this,null,function*(){return this.generateExecutiveReport({availability:t.percentage,mttr:4.5,totalCostMonth:12500,budgetMonth:15e3},r,t)})}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function vI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var EI=vI,wI=new Kn("auth","Firebase",vI());var _u=new fr("@firebase/auth");function kL(n,...e){_u.logLevel<=fe.WARN&&_u.warn(`Auth (${mr}): ${n}`,...e)}function pu(n,...e){_u.logLevel<=fe.ERROR&&_u.error(`Auth (${mr}): ${n}`,...e)}function Cn(n,...e){throw Hg(n,...e)}function mi(n,...e){return Hg(n,...e)}function bI(n,e,t){let r=$(S({},EI()),{[e]:t});return new Kn("auth","Firebase",r).create(e,{appName:n.name})}function wn(n){return bI(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Hg(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return wI.create(n,...e)}function P(n,e,...t){if(!n)throw Hg(e,...t)}function Xn(n){let e="INTERNAL ASSERTION FAILED: "+n;throw pu(e),new Error(e)}function Dr(n,e){n||Xn(e)}function wg(){return typeof self<"u"&&self.location?.href||""}function PL(){return iI()==="http:"||iI()==="https:"}function iI(){return typeof self<"u"&&self.location?.protocol||null}function OL(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(PL()||$w()||"connection"in navigator)?navigator.onLine:!0}function FL(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var gi=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Dr(t>e,"Short delay should be less than long delay!"),this.isMobile=So()||Dc()}get(){return OL()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function $g(n,e){Dr(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var vu=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Xn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Xn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Xn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var LL={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var VL=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],jL=new gi(3e4,6e4);function Tr(n,e){return n.tenantId&&!e.tenantId?$(S({},e),{tenantId:n.tenantId}):e}function tr(s,o,a,l){return _(this,arguments,function*(n,e,t,r,i={}){return CI(n,i,()=>_(null,null,function*(){let c={},u={};r&&(e==="GET"?u=r:c={body:JSON.stringify(r)});let d=oi(S({key:n.config.apiKey},u)).slice(1),f=yield n._getAdditionalHeaders();f["Content-Type"]="application/json",n.languageCode&&(f["X-Firebase-Locale"]=n.languageCode);let h=S({method:e,headers:f},c);return Hw()||(h.referrerPolicy="no-referrer"),n.emulatorConfig&&dr(n.emulatorConfig.host)&&(h.credentials="include"),vu.fetch()(yield II(n,n.config.apiHost,t,d),h)}))})}function CI(n,e,t){return _(this,null,function*(){n._canInitEmulator=!1;let r=S(S({},LL),e);try{let i=new bg(n),s=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw hu(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw hu(n,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw hu(n,"email-already-in-use",o);if(l==="USER_DISABLED")throw hu(n,"user-disabled",o);let u=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw bI(n,u,c);Cn(n,u)}}catch(i){if(i instanceof Gt)throw i;Cn(n,"network-request-failed",{message:String(i)})}})}function ma(s,o,a,l){return _(this,arguments,function*(n,e,t,r,i={}){let c=yield tr(n,e,t,r,i);return"mfaPendingCredential"in c&&Cn(n,"multi-factor-auth-required",{_serverResponse:c}),c})}function II(n,e,t,r){return _(this,null,function*(){let i=`${e}${t}?${r}`,s=n,o=s.config.emulator?$g(n.config,i):`${n.config.apiScheme}://${i}`;return VL.includes(t)&&(yield s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o})}function UL(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var bg=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(mi(this.auth,"network-request-failed")),jL.get())})}};function hu(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=mi(n,e,r);return i.customData._tokenResponse=t,i}function sI(n){return n!==void 0&&n.enterprise!==void 0}var Cg=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return UL(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}};function BL(n,e){return _(this,null,function*(){return tr(n,"GET","/v2/recaptchaConfig",Tr(n,e))})}function HL(n,e){return _(this,null,function*(){return tr(n,"POST","/v1/accounts:delete",e)})}function Eu(n,e){return _(this,null,function*(){return tr(n,"POST","/v1/accounts:lookup",e)})}function ca(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function DI(n,e=!1){return _(this,null,function*(){let t=Ve(n),r=yield t.getIdToken(e),i=zg(r);P(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:ca(_g(i.auth_time)),issuedAtTime:ca(_g(i.iat)),expirationTime:ca(_g(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function _g(n){return Number(n)*1e3}function zg(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return pu("JWT malformed, contained fewer than 3 sections"),null;try{let i=Zi(t);return i?JSON.parse(i):(pu("Failed to decode base64 JWT payload"),null)}catch(i){return pu("Caught error parsing JWT payload as JSON",i?.toString()),null}}function oI(n){let e=zg(n);return P(e,"internal-error"),P(typeof e.exp<"u","internal-error"),P(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function vs(n,e,t=!1){return _(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof Gt&&$L(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function $L({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var Ig=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){let t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;let r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>_(this,null,function*(){yield this.iteration()}),t)}iteration(){return _(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var da=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ca(this.lastLoginAt),this.creationTime=ca(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function wu(n){return _(this,null,function*(){let e=n.auth,t=yield n.getIdToken(),r=yield vs(n,Eu(e,{idToken:t}));P(r?.users.length,e,"internal-error");let i=r.users[0];n._notifyReloadListener(i);let s=i.providerUserInfo?.length?TI(i.providerUserInfo):[],o=zL(n.providerData,s),a=n.isAnonymous,l=!(n.email&&i.passwordHash)&&!o?.length,c=a?l:!1,u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new da(i.createdAt,i.lastLoginAt),isAnonymous:c};Object.assign(n,u)})}function SI(n){return _(this,null,function*(){let e=Ve(n);yield wu(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function zL(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function TI(n){return n.map(r=>{var i=r,{providerId:e}=i,t=Ii(i,["providerId"]);return{providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}})}function WL(n,e){return _(this,null,function*(){let t=yield CI(n,{},()=>_(null,null,function*(){let r=oi({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=yield II(n,i,"/v1/token",`key=${s}`),a=yield n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let l={method:"POST",headers:a,body:r};return n.emulatorConfig&&dr(n.emulatorConfig.host)&&(l.credentials="include"),vu.fetch()(o,l)}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function GL(n,e){return _(this,null,function*(){return tr(n,"POST","/v2/accounts:revokeToken",Tr(n,e))})}var ua=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){P(e.idToken,"internal-error"),P(typeof e.idToken<"u","internal-error"),P(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):oI(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){P(e.length!==0,"internal-error");let t=oI(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return _(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(P(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return _(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield WL(e,t);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new n;return r&&(P(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(P(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(P(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Xn("not implemented")}};function Cr(n,e){P(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Ir=class n{constructor(s){var o=s,{uid:e,auth:t,stsTokenManager:r}=o,i=Ii(o,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ig(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new da(i.createdAt||void 0,i.lastLoginAt||void 0)}getIdToken(e){return _(this,null,function*(){let t=yield vs(this,this.stsTokenManager.getToken(this.auth,e));return P(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return DI(this,e)}reload(){return SI(this)}_assign(e){this!==e&&(P(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>S({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n($(S({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){P(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return _(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield wu(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return _(this,null,function*(){if(Xe(this.auth.app))return Promise.reject(wn(this.auth));let e=yield this.getIdToken();return yield vs(this,HL(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return $(S({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>S({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){let r=t.displayName??void 0,i=t.email??void 0,s=t.phoneNumber??void 0,o=t.photoURL??void 0,a=t.tenantId??void 0,l=t._redirectEventId??void 0,c=t.createdAt??void 0,u=t.lastLoginAt??void 0,{uid:d,emailVerified:f,isAnonymous:h,providerData:y,stsTokenManager:E}=t;P(d&&E,e,"internal-error");let b=ua.fromJSON(this.name,E);P(typeof d=="string",e,"internal-error"),Cr(r,e.name),Cr(i,e.name),P(typeof f=="boolean",e,"internal-error"),P(typeof h=="boolean",e,"internal-error"),Cr(s,e.name),Cr(o,e.name),Cr(a,e.name),Cr(l,e.name),Cr(c,e.name),Cr(u,e.name);let D=new n({uid:d,auth:e,email:i,emailVerified:f,displayName:r,isAnonymous:h,photoURL:o,phoneNumber:s,tenantId:a,stsTokenManager:b,createdAt:c,lastLoginAt:u});return y&&Array.isArray(y)&&(D.providerData=y.map(O=>S({},O))),l&&(D._redirectEventId=l),D}static _fromIdTokenResponse(e,t,r=!1){return _(this,null,function*(){let i=new ua;i.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield wu(s),s})}static _fromGetAccountInfoResponse(e,t,r){return _(this,null,function*(){let i=t.users[0];P(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?TI(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new ua;a.updateFromIdToken(r);let l=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new da(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(l,c),l})}};var aI=new Map;function er(n){Dr(n instanceof Function,"Expected a class definition");let e=aI.get(n);return e?(Dr(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,aI.set(n,e),e)}var qL=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return _(this,null,function*(){return!0})}_set(t,r){return _(this,null,function*(){this.storage[t]=r})}_get(t){return _(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return _(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),Dg=qL;function mu(n,e,t){return`firebase:${n}:${e}:${t}`}var bu=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=mu(this.userKey,i.apiKey,s),this.fullPersistenceKey=mu("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return _(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=yield Eu(this.auth,{idToken:e}).catch(()=>{});return t?Ir._fromGetAccountInfoResponse(this.auth,t,e):null}return Ir._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return _(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return _(this,null,function*(){if(!t.length)return new n(er(Dg),e,r);let i=(yield Promise.all(t.map(c=>_(null,null,function*(){if(yield c._isAvailable())return c})))).filter(c=>c),s=i[0]||er(Dg),o=mu(r,e.config.apiKey,e.name),a=null;for(let c of t)try{let u=yield c._get(o);if(u){let d;if(typeof u=="string"){let f=yield Eu(e,{idToken:u}).catch(()=>{});if(!f)break;d=yield Ir._fromGetAccountInfoResponse(e,f,u)}else d=Ir._fromJSON(e,u);c!==s&&(a=d),s=c;break}}catch{}let l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new n(s,e,r):(s=l[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(t.map(c=>_(null,null,function*(){if(c!==s)try{yield c._remove(o)}catch{}}))),new n(s,e,r))})}};function lI(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(NI(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(xI(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(kI(e))return"Blackberry";if(PI(e))return"Webos";if(AI(e))return"Safari";if((e.includes("chrome/")||MI(e))&&!e.includes("edge/"))return"Chrome";if(RI(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function xI(n=Ge()){return/firefox\//i.test(n)}function AI(n=Ge()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function MI(n=Ge()){return/crios\//i.test(n)}function NI(n=Ge()){return/iemobile/i.test(n)}function RI(n=Ge()){return/android/i.test(n)}function kI(n=Ge()){return/blackberry/i.test(n)}function PI(n=Ge()){return/webos/i.test(n)}function Wg(n=Ge()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function KL(n=Ge()){return Wg(n)&&!!window.navigator?.standalone}function YL(){return zw()&&document.documentMode===10}function OI(n=Ge()){return Wg(n)||RI(n)||PI(n)||kI(n)||/windows phone/i.test(n)||NI(n)}function FI(n,e=[]){let t;switch(n){case"Browser":t=lI(Ge());break;case"Worker":t=`${lI(Ge())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${mr}/${r}`}var Sg=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=s=>new Promise((o,a)=>{try{let l=e(s);o(l)}catch(l){a(l)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return _(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function QL(t){return _(this,arguments,function*(n,e={}){return tr(n,"GET","/v2/passwordPolicy",Tr(n,e))})}var ZL=6,Tg=class{constructor(e){let t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??ZL,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){let t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var xg=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Cu(this),this.idTokenSubscription=new Cu(this),this.beforeStateQueue=new Sg(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=wI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=er(t)),this._initializationPromise=this.queue(()=>_(this,null,function*(){if(!this._deleted&&(this.persistenceManager=yield bu.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return _(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return _(this,null,function*(){try{let t=yield Eu(this,{idToken:e}),r=yield Ir._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return _(this,null,function*(){if(Xe(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(o,o))}):this.directlySetCurrentUser(null)}let t=yield this.assertedPersistence.getCurrentUser(),r=t,i=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=this.redirectUser?._redirectEventId,o=r?._redirectEventId,a=yield this.tryRedirectSignIn(e);(!s||s===o)&&a?.user&&(r=a.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{yield this.beforeStateQueue.runMiddleware(r)}catch(s){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return P(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)})}tryRedirectSignIn(e){return _(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return _(this,null,function*(){try{yield wu(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=FL()}_delete(){return _(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return _(this,null,function*(){if(Xe(this.app))return Promise.reject(wn(this));let t=e?Ve(e):null;return t&&P(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return _(this,null,function*(){if(!this._deleted)return e&&P(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>_(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return _(this,null,function*(){return Xe(this.app)?Promise.reject(wn(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Xe(this.app)?Promise.reject(wn(this)):this.queue(()=>_(this,null,function*(){yield this.assertedPersistence.setPersistence(er(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return _(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return _(this,null,function*(){let e=yield QL(this),t=new Tg(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Kn("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return _(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield GL(this,r)}})}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}_setRedirectUser(e,t){return _(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return _(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&er(e)||this._popupRedirectResolver;P(t,this,"argument-error"),this.redirectPersistenceManager=yield bu.create(this,[er(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return _(this,null,function*(){return this._isInitialized&&(yield this.queue(()=>_(this,null,function*(){}))),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null})}_persistUserIfCurrent(e){return _(this,null,function*(){if(e===this.currentUser)return this.queue(()=>_(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(P(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let l=e.addObserver(t,r,i);return()=>{o=!0,l()}}else{let l=e.addObserver(t);return()=>{o=!0,l()}}}directlySetCurrentUser(e){return _(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return P(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=FI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return _(this,null,function*(){let e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);let t=yield this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);let r=yield this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e})}_getAppCheckToken(){return _(this,null,function*(){if(Xe(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=yield this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&kL(`Error while retrieving App Check token: ${e.error}`),e?.token})}};function xr(n){return Ve(n)}var Cu=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=Qw(t=>this.observer=t)}get next(){return P(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Mu={loadJS(){return _(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function JL(n){Mu=n}function LI(n){return Mu.loadJS(n)}function XL(){return Mu.recaptchaEnterpriseScript}function e2(){return Mu.gapiScript}function VI(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var Ag=class{constructor(){this.enterprise=new Mg}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}},Mg=class{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}};var t2="recaptcha-enterprise",jI="NO_RECAPTCHA",Ng=class{constructor(e){this.type=t2,this.auth=xr(e)}verify(e="verify",t=!1){return _(this,null,function*(){function r(s){return _(this,null,function*(){if(!t){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise((o,a)=>_(null,null,function*(){BL(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let c=new Cg(l);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})}))})}function i(s,o,a){let l=window.grecaptcha;sI(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(c=>{o(c)}).catch(()=>{o(jI)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Ag().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{r(this.auth).then(a=>{if(!t&&sI(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=XL();l.length!==0&&(l+=a),LI(l).then(()=>{i(a,s,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})})}};function la(n,e,t,r=!1,i=!1){return _(this,null,function*(){let s=new Ng(n),o;if(i)o=jI;else try{o=yield s.verify(t)}catch{o=yield s.verify(t,!0)}let a=S({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){let l=a.phoneEnrollmentInfo.phoneNumber,c=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){let l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a})}function Rg(n,e,t,r,i){return _(this,null,function*(){if(i==="EMAIL_PASSWORD_PROVIDER")if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let s=yield la(n,e,t,t==="getOobCode");return r(n,s)}else return r(n,e).catch(s=>_(null,null,function*(){if(s.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let o=yield la(n,e,t,t==="getOobCode");return r(n,o)}else return Promise.reject(s)}));else if(i==="PHONE_PROVIDER")if(n._getRecaptchaConfig()?.isProviderEnabled("PHONE_PROVIDER")){let s=yield la(n,e,t);return r(n,s).catch(o=>_(null,null,function*(){if(n._getRecaptchaConfig()?.getProviderEnforcementState("PHONE_PROVIDER")==="AUDIT"&&(o.code==="auth/missing-recaptcha-token"||o.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);let a=yield la(n,e,t,!1,!0);return r(n,a)}return Promise.reject(o)}))}else{let s=yield la(n,e,t,!1,!0);return r(n,s)}else return Promise.reject(i+" provider is not supported.")})}function UI(n,e){let t=Po(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),s=t.getOptions();if(mn(s,e??{}))return i;Cn(i,"already-initialized")}return t.initialize({options:e})}function n2(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(er);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function BI(n,e,t){let r=xr(n);P(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,s=HI(e),{host:o,port:a}=r2(e),l=a===null?"":`:${a}`,c={url:`${s}//${o}${l}/`},u=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){P(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),P(mn(c,r.config.emulator)&&mn(u,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=c,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,dr(o)?(Cc(`${s}//${o}${l}`),Ic("Auth",!0)):i||i2()}function HI(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function r2(n){let e=HI(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:cI(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:cI(o)}}}function cI(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function i2(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var fa=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Xn("not implemented")}_getIdTokenResponse(e){return Xn("not implemented")}_linkToIdToken(e,t){return Xn("not implemented")}_getReauthenticationResolver(e){return Xn("not implemented")}};function s2(n,e){return _(this,null,function*(){return tr(n,"POST","/v1/accounts:signUp",e)})}function o2(n,e){return _(this,null,function*(){return ma(n,"POST","/v1/accounts:signInWithPassword",Tr(n,e))})}function a2(n,e){return _(this,null,function*(){return ma(n,"POST","/v1/accounts:signInWithEmailLink",Tr(n,e))})}function l2(n,e){return _(this,null,function*(){return ma(n,"POST","/v1/accounts:signInWithEmailLink",Tr(n,e))})}var ha=class n extends fa{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new n(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){return _(this,null,function*(){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Rg(e,t,"signInWithPassword",o2,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return a2(e,{email:this._email,oobCode:this._password});default:Cn(e,"internal-error")}})}_linkToIdToken(e,t){return _(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Rg(e,r,"signUpPassword",s2,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return l2(e,{idToken:t,email:this._email,oobCode:this._password});default:Cn(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function vg(n,e){return _(this,null,function*(){return ma(n,"POST","/v1/accounts:signInWithIdp",Tr(n,e))})}function c2(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function u2(n){let e=Xi(es(n)).link,t=e?Xi(es(e)).deep_link_id:null,r=Xi(es(n)).deep_link_id;return(r?Xi(es(r)).link:null)||r||t||e||n}var Iu=class n{constructor(e){let t=Xi(es(e)),r=t.apiKey??null,i=t.oobCode??null,s=c2(t.mode??null);P(r&&i&&s,"argument-error"),this.apiKey=r,this.operation=s,this.code=i,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){let t=u2(e);try{return new n(t)}catch{return null}}};var $I=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,r){return ha._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){let i=Iu.parseLink(r);return P(i,"argument-error"),ha._fromEmailAndCode(t,i.code,i.tenantId)}}n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return n})(),Du=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var kg=class extends Du{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function zI(n,e){return _(this,null,function*(){return ma(n,"POST","/v1/accounts:signUp",Tr(n,e))})}var Sr=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return _(this,null,function*(){let s=yield Ir._fromIdTokenResponse(e,r,i),o=uI(r);return new n({user:s,providerId:o,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return _(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=uI(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function uI(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}function Gg(n){return _(this,null,function*(){if(Xe(n.app))return Promise.reject(wn(n));let e=xr(n);if(yield e._initializationPromise,e.currentUser?.isAnonymous)return new Sr({user:e.currentUser,providerId:null,operationType:"signIn"});let t=yield zI(e,{returnSecureToken:!0}),r=yield Sr._fromIdTokenResponse(e,"signIn",t,!0);return yield e._updateCurrentUser(r.user),r})}var Pg=class n extends Gt{constructor(e,t,r,i){super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function WI(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Pg._fromErrorAndOperation(n,s,e,r):s})}function d2(n,e,t=!1){return _(this,null,function*(){let r=yield vs(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return Sr._forOperation(n,"link",r)})}function f2(n,e,t=!1){return _(this,null,function*(){let{auth:r}=n;if(Xe(r.app))return Promise.reject(wn(r));let i="reauthenticate";try{let s=yield vs(n,WI(r,i,e,n),t);P(s.idToken,r,"internal-error");let o=zg(s.idToken);P(o,r,"internal-error");let{sub:a}=o;return P(n.uid===a,r,"user-mismatch"),Sr._forOperation(n,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&Cn(r,"user-mismatch"),s}})}function GI(n,e,t=!1){return _(this,null,function*(){if(Xe(n.app))return Promise.reject(wn(n));let r="signIn",i=yield WI(n,r,e),s=yield Sr._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(s.user)),s})}function qI(n,e){return _(this,null,function*(){return GI(xr(n),e)})}function KI(n){return _(this,null,function*(){let e=xr(n);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function qg(n,e,t){return _(this,null,function*(){if(Xe(n.app))return Promise.reject(wn(n));let r=xr(n),o=yield Rg(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",zI,"EMAIL_PASSWORD_PROVIDER").catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&KI(n),l}),a=yield Sr._fromIdTokenResponse(r,"signIn",o);return yield r._updateCurrentUser(a.user),a})}function Kg(n,e,t){return Xe(n.app)?Promise.reject(wn(n)):qI(Ve(n),$I.credential(e,t)).catch(r=>_(null,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&KI(n),r}))}function h2(n,e){return _(this,null,function*(){return tr(n,"POST","/v1/accounts:update",e)})}function Yg(r,i){return _(this,arguments,function*(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;let s=Ve(n),a={idToken:yield s.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},l=yield vs(s,h2(s.auth,a));s.displayName=l.displayName||null,s.photoURL=l.photoUrl||null;let c=s.providerData.find(({providerId:u})=>u==="password");c&&(c.displayName=s.displayName,c.photoURL=s.photoURL),yield s._updateTokensIfNecessary(l)})}function YI(n,e,t,r){return Ve(n).onIdTokenChanged(e,t,r)}function QI(n,e,t){return Ve(n).beforeAuthStateChanged(e,t)}function Qg(n,e,t,r){return Ve(n).onAuthStateChanged(e,t,r)}function Zg(n){return Ve(n).signOut()}var Su="__sak";var Tu=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Su,"1"),this.storage.removeItem(Su),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var p2=1e3,m2=10,g2=(()=>{class n extends Tu{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=OI(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&t(r,s,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,l,c)=>{this.notifyListeners(a,c)});return}let i=t.key;r?this.detachListener():this.stopPolling();let s=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);YL()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,m2):s()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},p2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return _(this,null,function*(){yield Or(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return _(this,null,function*(){let r=yield Or(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return _(this,null,function*(){yield Or(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),ZI=g2;var y2=(()=>{class n extends Tu{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),Jg=y2;function _2(n){return Promise.all(n.map(e=>_(null,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var v2=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(s=>s.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return _(this,null,function*(){let r=t,{eventId:i,eventType:s,data:o}=r.data,a=this.handlersMap[s];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let l=Array.from(a).map(u=>_(this,null,function*(){return u(r.origin,o)})),c=yield _2(l);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:c})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function JI(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var Og=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return _(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{let c=JI("",20);i.port1.start();let u=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(d){let f=d;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(u),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(f.data.response);break;default:clearTimeout(u),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function bn(){return window}function E2(n){bn().location.href=n}function XI(){return typeof bn().WorkerGlobalScope<"u"&&typeof bn().importScripts=="function"}function w2(){return _(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function b2(){return navigator?.serviceWorker?.controller||null}function C2(){return XI()?self:null}var eD="firebaseLocalStorageDb",I2=1,xu="firebaseLocalStorage",tD="fbase_key",yi=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function Nu(n,e){return n.transaction([xu],e?"readwrite":"readonly").objectStore(xu)}function D2(){let n=indexedDB.deleteDatabase(eD);return new yi(n).toPromise()}function Fg(){let n=indexedDB.open(eD,I2);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(xu,{keyPath:tD})}catch(i){t(i)}}),n.addEventListener("success",()=>_(null,null,function*(){let r=n.result;r.objectStoreNames.contains(xu)?e(r):(r.close(),yield D2(),e(yield Fg()))}))})}function dI(n,e,t){return _(this,null,function*(){let r=Nu(n,!0).put({[tD]:e,value:t});return new yi(r).toPromise()})}function S2(n,e){return _(this,null,function*(){let t=Nu(n,!1).get(e),r=yield new yi(t).toPromise();return r===void 0?null:r.value})}function fI(n,e){let t=Nu(n,!0).delete(e);return new yi(t).toPromise()}var T2=800,x2=3,A2=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return _(this,null,function*(){return this.db?this.db:(this.db=yield Fg(),this.db)})}_withRetries(t){return _(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>x2)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return _(this,null,function*(){return XI()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return _(this,null,function*(){this.receiver=v2._getInstance(C2()),this.receiver._subscribe("keyChanged",(t,r)=>_(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>_(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return _(this,null,function*(){if(this.activeServiceWorker=yield w2(),!this.activeServiceWorker)return;this.sender=new Og(this.activeServiceWorker);let t=yield this.sender._send("ping",{},800);t&&t[0]?.fulfilled&&t[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return _(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||b2()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return _(this,null,function*(){try{if(!indexedDB)return!1;let t=yield Fg();return yield dI(t,Su,"1"),yield fI(t,Su),!0}catch{}return!1})}_withPendingWrite(t){return _(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return _(this,null,function*(){return this._withPendingWrite(()=>_(this,null,function*(){return yield this._withRetries(i=>dI(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return _(this,null,function*(){let r=yield this._withRetries(i=>S2(i,t));return this.localCache[t]=r,r})}_remove(t){return _(this,null,function*(){return this._withPendingWrite(()=>_(this,null,function*(){return yield this._withRetries(r=>fI(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return _(this,null,function*(){let t=yield this._withRetries(s=>{let o=Nu(s,!1).getAll();return new yi(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:s,value:o}of t)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>_(this,null,function*(){return this._poll()}),T2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),nD=A2;var X6=VI("rcb"),ez=new gi(3e4,6e4);function M2(n,e){return e?er(e):(P(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var pa=class extends fa{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return vg(e,this._buildIdpRequest())}_linkToIdToken(e,t){return vg(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return vg(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function N2(n){return GI(n.auth,new pa(n),n.bypassAuthState)}function R2(n){let{auth:e,user:t}=n;return P(t,e,"internal-error"),f2(t,new pa(n),n.bypassAuthState)}function k2(n){return _(this,null,function*(){let{auth:e,user:t}=n;return P(t,e,"internal-error"),d2(t,new pa(n),n.bypassAuthState)})}var Lg=class{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>_(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return _(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let l={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(l))}catch(c){this.reject(c)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return N2;case"linkViaPopup":case"linkViaRedirect":return k2;case"reauthViaPopup":case"reauthViaRedirect":return R2;default:Cn(this.auth,"internal-error")}}resolve(e){Dr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Dr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var tz=new gi(2e3,1e4);var P2="pendingRedirect",gu=new Map,Vg=class n extends Lg{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return _(this,null,function*(){let e=gu.get(this.auth._key());if(!e){try{let r=(yield O2(this.resolver,this.auth))?yield Or(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}gu.set(this.auth._key(),e)}return this.bypassAuthState||gu.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return _(this,null,function*(){if(e.type==="signInViaRedirect")return Or(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,Or(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return _(this,null,function*(){})}cleanUp(){}};function O2(n,e){return _(this,null,function*(){let t=V2(e),r=L2(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function F2(n,e){gu.set(n._key(),e)}function L2(n){return er(n._redirectPersistence)}function V2(n){return mu(P2,n.config.apiKey,n.name)}function j2(n,e,t=!1){return _(this,null,function*(){if(Xe(n.app))return Promise.reject(wn(n));let r=xr(n),i=M2(r,e),o=yield new Vg(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})}var U2=10*60*1e3,jg=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!B2(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!rD(e)){let r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(mi(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=U2&&this.cachedEventUids.clear(),this.cachedEventUids.has(hI(e))}saveEventToCache(e){this.cachedEventUids.add(hI(e)),this.lastProcessedEventTime=Date.now()}};function hI(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function rD({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function B2(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return rD(n);default:return!1}}function H2(t){return _(this,arguments,function*(n,e={}){return tr(n,"GET","/v1/projects",e)})}var $2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,z2=/^https?/;function W2(n){return _(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield H2(n);for(let t of e)try{if(G2(t))return}catch{}Cn(n,"unauthorized-domain")})}function G2(n){let e=wg(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!z2.test(t))return!1;if($2.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var q2=new gi(3e4,6e4);function pI(){let n=bn().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function K2(n){return new Promise((e,t)=>{function r(){pI(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{pI(),t(mi(n,"network-request-failed"))},timeout:q2.get()})}if(bn().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(bn().gapi?.load)r();else{let i=VI("iframefcb");return bn()[i]=()=>{gapi.load?r():t(mi(n,"network-request-failed"))},LI(`${e2()}?onload=${i}`).catch(s=>t(s))}}).catch(e=>{throw yu=null,e})}var yu=null;function Y2(n){return yu=yu||K2(n),yu}var Q2=new gi(5e3,15e3),Z2="__/auth/iframe",J2="emulator/auth/iframe",X2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},eV=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function tV(n){let e=n.config;P(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?$g(e,J2):`https://${n.config.authDomain}/${Z2}`,r={apiKey:e.apiKey,appName:n.name,v:mr},i=eV.get(n.config.apiHost);i&&(r.eid=i);let s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${oi(r).slice(1)}`}function nV(n){return _(this,null,function*(){let e=yield Y2(n),t=bn().gapi;return P(t,n,"internal-error"),e.open({where:document.body,url:tV(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:X2,dontclear:!0},r=>new Promise((i,s)=>_(null,null,function*(){yield r.restyle({setHideOnLeave:!1});let o=mi(n,"network-request-failed"),a=bn().setTimeout(()=>{s(o)},Q2.get());function l(){bn().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})})))})}var rV={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},iV=500,sV=600,oV="_blank",aV="http://localhost",Au=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function lV(n,e,t,r=iV,i=sV){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",l=$(S({},rV),{width:r.toString(),height:i.toString(),top:s,left:o}),c=Ge().toLowerCase();t&&(a=MI(c)?oV:t),xI(c)&&(e=e||aV,l.scrollbars="yes");let u=Object.entries(l).reduce((f,[h,y])=>`${f}${h}=${y},`,"");if(KL(c)&&a!=="_self")return cV(e||"",a),new Au(null);let d=window.open(e||"",a,u);P(d,n,"popup-blocked");try{d.focus()}catch{}return new Au(d)}function cV(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var uV="__/auth/handler",dV="emulator/auth/handler",fV=encodeURIComponent("fac");function mI(n,e,t,r,i,s){return _(this,null,function*(){P(n.config.authDomain,n,"auth-domain-config-required"),P(n.config.apiKey,n,"invalid-api-key");let o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:mr,eventId:i};if(e instanceof Du){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",To(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[u,d]of Object.entries(s||{}))o[u]=d}if(e instanceof kg){let u=e.getScopes().filter(d=>d!=="");u.length>0&&(o.scopes=u.join(","))}n.tenantId&&(o.tid=n.tenantId);let a=o;for(let u of Object.keys(a))a[u]===void 0&&delete a[u];let l=yield n._getAppCheckToken(),c=l?`#${fV}=${encodeURIComponent(l)}`:"";return`${hV(n)}?${oi(a).slice(1)}${c}`})}function hV({config:n}){return n.emulator?$g(n,dV):`https://${n.authDomain}/${uV}`}var Eg="webStorageSupport",Ug=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Jg,this._completeRedirectFn=j2,this._overrideRedirectResult=F2}_openPopup(e,t,r,i){return _(this,null,function*(){Dr(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");let s=yield mI(e,t,r,wg(),i);return lV(e,s,JI())})}_openRedirect(e,t,r,i){return _(this,null,function*(){yield this._originValidation(e);let s=yield mI(e,t,r,wg(),i);return E2(s),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(Dr(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return _(this,null,function*(){let t=yield nV(e),r=new jg(e);return t.register("authEvent",i=>(P(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Eg,{type:Eg},i=>{let s=i?.[0]?.[Eg];s!==void 0&&t(!!s),Cn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=W2(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return OI()||AI()||Wg()}},iD=Ug;var gI="@firebase/auth",yI="1.12.0";var Bg=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}getToken(e){return _(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){P(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function pV(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function mV(n){pr(new kt("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;P(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let l={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:FI(n)},c=new xg(r,i,s,l);return n2(c,t),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),pr(new kt("auth-internal",e=>{let t=xr(e.getProvider("auth").getImmediate());return(r=>new Bg(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Kt(gI,yI,pV(n)),Kt(gI,yI,"esm2020")}var gV=5*60,yV=bp("authIdTokenMaxAge")||gV,_I=null,_V=n=>e=>_(null,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>yV)return;let i=t?.token;_I!==i&&(_I=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function Xg(n=gr()){let e=Po(n,"auth");if(e.isInitialized())return e.getImmediate();let t=UI(n,{popupRedirectResolver:iD,persistence:[nD,ZI,Jg]}),r=bp("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=_V(s.toString());QI(t,o,()=>o(t.currentUser)),YI(t,a=>o(a))}}let i=Ep("auth");return i&&BI(t,`http://${i}`),t}function vV(){return document.getElementsByTagName("head")?.[0]??document}JL({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let s=mi("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",vV().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});mV("Browser");var Ru=(()=>{class n{constructor(){this.ngZone=T(Ce),this.app=xc().length>0?gr():Oo(vn.firebase),this.auth=Xg(this.app),this.currentUser=F(null),this.isLoading=F(!0),this.error=F(null),this.isAuthenticated=z(()=>this.currentUser()!==null),Qg(this.auth,t=>{this.ngZone.run(()=>{t?this.currentUser.set({uid:t.uid,email:t.email,displayName:t.displayName,photoURL:t.photoURL}):this.currentUser.set(null),this.isLoading.set(!1)})})}login(t,r){return _(this,null,function*(){this.error.set(null),this.isLoading.set(!0);try{let i=yield Kg(this.auth,t,r);return this.ngZone.run(()=>{this.currentUser.set({uid:i.user.uid,email:i.user.email,displayName:i.user.displayName,photoURL:i.user.photoURL}),this.isLoading.set(!1)}),!0}catch(i){return this.ngZone.run(()=>{this.handleAuthError(i),this.isLoading.set(!1)}),!1}})}register(t,r,i){return _(this,null,function*(){this.error.set(null),this.isLoading.set(!0);try{let s=yield qg(this.auth,t,r);return yield Yg(s.user,{displayName:i}),this.ngZone.run(()=>{this.currentUser.set({uid:s.user.uid,email:s.user.email,displayName:i,photoURL:s.user.photoURL}),this.isLoading.set(!1)}),!0}catch(s){return this.ngZone.run(()=>{this.handleAuthError(s),this.isLoading.set(!1)}),!1}})}logout(){return _(this,null,function*(){try{yield Zg(this.auth),this.ngZone.run(()=>{this.currentUser.set(null)})}catch(t){console.error("Error al cerrar sesi\xF3n:",t)}})}loginAsDemo(){return _(this,null,function*(){this.error.set(null),this.isLoading.set(!0);try{let t=yield Gg(this.auth);return this.currentUser.set({uid:t.user.uid,email:"demo@assetguard.com",displayName:"Usuario Demo",photoURL:null}),this.isLoading.set(!1),!0}catch(t){return console.error("Error en acceso demo:",t),this.currentUser.set({uid:"demo-user-local",email:"demo@assetguard.com",displayName:"Usuario Demo (Offline)",photoURL:null}),this.isLoading.set(!1),!0}})}handleAuthError(t){let r=t.code,i="Error desconocido. Intenta de nuevo.";switch(r){case"auth/invalid-email":i="El correo electr\xF3nico no es v\xE1lido.";break;case"auth/user-disabled":i="Esta cuenta ha sido deshabilitada.";break;case"auth/user-not-found":i="No existe una cuenta con este correo.";break;case"auth/wrong-password":i="Contrase\xF1a incorrecta.";break;case"auth/invalid-credential":i="Credenciales inv\xE1lidas. Verifica tu correo y contrase\xF1a.";break;case"auth/email-already-in-use":i="Ya existe una cuenta con este correo.";break;case"auth/weak-password":i="La contrase\xF1a debe tener al menos 6 caracteres.";break;case"auth/too-many-requests":i="Demasiados intentos. Espera un momento.";break}this.error.set(i)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var sD=(()=>{class n{constructor(){this.title="",this.subtitle="",this.value="",this.unit="",this.status="neutral",this.statusText="",this.footerLabel="",this.footerValue="",this.trendLabel="",this.containerClasses=z(()=>"bg-white dark:bg-slate-900/60 border-slate-200 dark:border-slate-700/60"),this.badgeClasses=z(()=>{let t="inline-flex items-center gap-1.5 rounded-full text-[10px] font-bold px-2.5 py-1 border backdrop-blur-sm ";switch(this.status){case"success":return t+"bg-emerald-50 text-emerald-700 border-emerald-200 dark:bg-emerald-500/10 dark:text-emerald-300 dark:border-emerald-500/40";case"warning":return t+"bg-amber-50 text-amber-700 border-amber-200 dark:bg-amber-500/10 dark:text-amber-300 dark:border-amber-500/40";case"danger":return t+"bg-red-50 text-red-700 border-red-200 dark:bg-red-500/10 dark:text-red-300 dark:border-red-500/40";case"info":return t+"bg-sky-50 text-sky-700 border-sky-200 dark:bg-sky-500/10 dark:text-sky-300 dark:border-sky-500/40";default:return t+"bg-slate-50 text-slate-600 border-slate-200 dark:bg-slate-800 dark:text-slate-400 dark:border-slate-700"}}),this.dotColor=z(()=>{switch(this.status){case"success":return"bg-emerald-500";case"warning":return"bg-amber-500";case"danger":return"bg-red-500";case"info":return"bg-sky-500";default:return"bg-slate-400"}}),this.trendClass=z(()=>this.trendLabel.includes("+")&&this.status==="success"?"text-emerald-600 dark:text-emerald-400 font-medium":this.trendLabel.includes("-")&&this.status==="danger"?"text-red-600 dark:text-red-400 font-medium":this.status==="warning"?"text-amber-600 dark:text-amber-400 font-medium":"text-emerald-600 dark:text-emerald-400 font-medium")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Oe({type:n,selectors:[["app-kpi-card"]],inputs:{title:"title",subtitle:"subtitle",value:"value",unit:"unit",status:"status",statusText:"statusText",footerLabel:"footerLabel",footerValue:"footerValue",trendLabel:"trendLabel"},decls:23,vars:15,consts:[[1,"h-full","rounded-2xl","border","shadow-lg","p-4","flex","flex-col","gap-3","transition-all","hover:shadow-xl","relative","overflow-hidden","group",3,"ngClass"],[1,"absolute","inset-0","bg-gradient-to-br","from-white/5","to-transparent","pointer-events-none"],[1,"flex","items-start","justify-between","relative","z-10"],[1,"text-sm","font-medium","text-slate-500","dark:text-slate-300"],[1,"text-xs","text-slate-400","mt-0.5"],[1,"flex","items-baseline","gap-2","mt-1","relative","z-10"],[1,"text-3xl","font-bold","tracking-tight","text-slate-800","dark:text-slate-50"],[1,"text-xs","font-bold","text-slate-400","uppercase","tracking-wide"],[1,"mt-auto","flex","items-center","justify-between","text-xs","text-slate-500","dark:text-slate-400","pt-3","border-t","border-slate-100","dark:border-slate-700/50","relative","z-10"],[1,"text-slate-700","dark:text-slate-200","font-medium"]],template:function(r,i){r&1&&(p(0,"article",0),w(1,"div",1),p(2,"header",2)(3,"div")(4,"h2",3),g(5),m(),p(6,"p",4),g(7),m()(),p(8,"span"),w(9,"span"),g(10),m()(),p(11,"div",5)(12,"span",6),g(13),m(),p(14,"span",7),g(15),m()(),p(16,"footer",8)(17,"span"),g(18),p(19,"span",9),g(20),m()(),p(21,"span"),g(22),m()()()),r&2&&(ce("ngClass",i.containerClasses()),v(5),Z(i.title),v(2),Z(i.subtitle),v(),ve(i.badgeClasses()),v(),ve("h-1.5 w-1.5 rounded-full "+i.dotColor()),v(),L(" ",i.statusText," "),v(3),Z(i.value),v(2),Z(i.unit),v(3),L("",i.footerLabel,": "),v(2),Z(i.footerValue),v(),ve(i.trendClass()),v(),Z(i.trendLabel))},dependencies:[Ae,fo],encapsulation:2})}}return n})();var EV=(n,e)=>e.id;function wV(n,e){if(n&1&&(p(0,"span",25),g(1),m()),n&2){let t=x();v(),io(" ",t.activeFailures().length," ",t.activeFailures().length===1?"unidad":"unidades"," en atenci\xF3n ")}}function bV(n,e){if(n&1){let t=Ee();p(0,"tr",34)(1,"td",29)(2,"div",60),w(3,"div"),p(4,"div")(5,"div",61),g(6),m(),p(7,"span"),g(8),m()()()(),p(9,"td",30)(10,"div",62),g(11),Nt(12,"date"),m(),p(13,"div",63),g(14),m()(),p(15,"td",30)(16,"span"),w(17,"span"),g(18),m()(),p(19,"td",31)(20,"div",64)(21,"span",65),g(22),m(),p(23,"span"),g(24),m()()(),p(25,"td",66)(26,"button",67),M("click",function(){let i=U(t).$implicit,s=x();return B(s.selectAsset(i.economico))}),g(27," Ver Detalle "),w(28,"i",68),m()()()}if(n&2){let t=e.$implicit,r=x();v(3),ve("w-1.5 h-10 rounded-full "+r.getPriorityColor(t.prioridad)),v(3),Z(t.economico),v(),ve("text-[10px] font-bold uppercase px-1.5 py-0.5 rounded border "+r.getPriorityBadgeClass(t.prioridad)),v(),L(" ",t.prioridad," "),v(3),L(" ",fn(12,18,t.fechaIngreso,"dd MMM, HH:mm")," "),v(2),ce("title",t.falla),v(),L(" ",t.falla," "),v(2),ve("inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-[10px] font-bold uppercase border "+r.getStatusBadgeClass(t)),v(),ve("w-1.5 h-1.5 rounded-full "+r.getStatusDotClass(t)),v(),L(" ",t.estatus==="Abierta"?"Diagn\xF3stico":"En Reparaci\xF3n"," "),v(4),L(" ",r.getTimeInShop(t.fechaIngreso).text," "),v(),ve("text-[10px] font-bold uppercase "+r.getTimeInShop(t.fechaIngreso).color),v(),L(" ",r.getTimeInShop(t.fechaIngreso).label," ")}}function CV(n,e){n&1&&(p(0,"tr")(1,"td",69)(2,"div",70)(3,"div",71),w(4,"i",72),m(),p(5,"h3",73),g(6,"Sin unidades en taller"),m(),p(7,"p",74),g(8,"La flota opera al 100% de capacidad."),m()()()())}function IV(n,e){if(n&1&&(p(0,"div",59)(1,"div",75),w(2,"i"),m(),p(3,"p",76),g(4),m(),p(5,"div",77)(6,"span",78),g(7),m(),p(8,"span",79),g(9),m()()()),n&2){let t=e.$implicit;v(),ce("ngClass",t.color),v(),ve("fas "+t.icon),v(2),Z(t.title),v(3),Z(t.time),v(2),Z(t.user)}}var oD=(()=>{class n{constructor(){this.dataService=T(mt),this.kpi=this.dataService.kpiData,this.safetyStats=this.dataService.safetyStats,this.fleetAvailability=this.dataService.fleetAvailability,this.activeFailures=z(()=>this.dataService.forkliftFailures().filter(t=>t.estatus!=="Cerrada")),this.operativeCount=z(()=>this.dataService.assets().filter(t=>t.status.name==="Operativo").length),this.totalAssets=z(()=>this.dataService.assets().length),this.lastUpdate=this.dataService.lastUpdate,this.availabilityStatus=z(()=>{let t=this.fleetAvailability().percentage;return t>=95?"success":t>=85?"warning":"danger"}),this.availabilityStatusText=z(()=>{let t=this.fleetAvailability().percentage;return t>=95?"Meta Cumplida":t>=85?"En Riesgo":"Cr\xEDtico"}),this.availabilityGap=z(()=>{let r=this.fleetAvailability().percentage-95;return`Brecha: ${r>0?"+":""}${r.toFixed(0)} pts`}),this.fleetCapacityLabel=z(()=>{let t=this.totalAssets();if(t===0)return"0% capacidad";let r=this.operativeCount();return`${Math.round(r/t*100)}% de capacidad operativa`}),this.formattedCost=z(()=>{let t=this.kpi().totalCostMonth;return t===0?"Sin gastos":"$"+t.toLocaleString("en-US")}),this.costUnit=z(()=>this.kpi().totalCostMonth===0?"registrados este mes":"USD"),this.budgetStatus=z(()=>{let t=this.kpi().totalCostMonth,r=this.kpi().budgetMonth;return t===0?"neutral":t>r?"danger":t>r*.9?"warning":"success"}),this.budgetStatusText=z(()=>{let t=this.kpi().totalCostMonth,r=this.kpi().budgetMonth;return t===0?"Presupuesto Intacto":t>r?"Excedido":"Bajo presupuesto"}),this.budgetVariance=z(()=>{let t=this.kpi().totalCostMonth,r=this.kpi().budgetMonth;if(t===0)return"Disponible: 100%";let i=(t-r)/r*100;return i>0?`+${i.toFixed(1)}% vs Presupuesto`:`${i.toFixed(1)}% vs Presupuesto`}),this.recentEvents=z(()=>[{title:"Unidad 35526 ingres\xF3 a Taller",time:"Hace 15 min",user:"Op. M\xF3vil",color:"bg-red-500",icon:"fa-exclamation-circle"},{title:'Refacci\xF3n "Kit Sellos" solicitada',time:"Hace 45 min",user:"Toyota Tech",color:"bg-blue-500",icon:"fa-box-open"},{title:"Turno Matutino inici\xF3 operaciones",time:"06:00 AM",user:"Sistema",color:"bg-emerald-500",icon:"fa-check"}])}selectAsset(t){window.dispatchEvent(new CustomEvent("asset-selected",{detail:t}))}filterByIssue(t){alert(`[DEMO] Filtrando activos con fallas en: ${t}`)}downloadReport(){window.print()}getTimeInShop(t){let r=new Date(t).getTime(),i=new Date().getTime(),s=Math.floor((i-r)/(1e3*60*60)),o="",a="",l="";return s<1?(o="< 1h",a="A tiempo",l="text-emerald-500"):s<24?(o=`${s}h`,a="En proceso",l="text-blue-500"):(o=`${Math.floor(s/24)}d ${s%24}h`,a="Demorado",l="text-amber-500"),s>48&&(a="Cr\xEDtico",l="text-red-500"),{text:o,label:a,color:l}}getStatusBadgeClass(t){return t.estatus==="Abierta"?"bg-amber-50 text-amber-700 border-amber-200 dark:bg-amber-500/10 dark:text-amber-400 dark:border-amber-500/20":"bg-blue-50 text-blue-700 border-blue-200 dark:bg-blue-500/10 dark:text-blue-400 dark:border-blue-500/20"}getStatusDotClass(t){return t.estatus==="Abierta"?"bg-amber-500":"bg-blue-500"}getPriorityColor(t){return t==="Alta"?"bg-red-500":t==="Media"?"bg-amber-400":"bg-blue-400"}getPriorityBadgeClass(t){return t==="Alta"?"bg-red-50 text-red-600 border-red-200 dark:bg-red-900/20 dark:text-red-300 dark:border-red-800":t==="Media"?"bg-amber-50 text-amber-600 border-amber-200 dark:bg-amber-900/20 dark:text-amber-300 dark:border-amber-800":"bg-blue-50 text-blue-600 border-blue-200 dark:bg-blue-900/20 dark:text-blue-300 dark:border-blue-800"}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Oe({type:n,selectors:[["app-dashboard"]],decls:100,vars:25,consts:[[1,"space-y-6","pb-10"],[1,"flex","flex-col","md:flex-row","md:items-center","justify-between","gap-4","mb-2"],[1,"text-2xl","font-black","text-slate-800","dark:text-white","tracking-tight"],[1,"text-sm","text-slate-500","dark:text-slate-400","flex","items-center","gap-2"],[1,"relative","flex","h-2.5","w-2.5"],[1,"animate-ping","absolute","inline-flex","h-full","w-full","rounded-full","bg-emerald-400","opacity-75"],[1,"relative","inline-flex","rounded-full","h-2.5","w-2.5","bg-emerald-500"],[1,"font-bold","text-slate-700","dark:text-slate-300"],[1,"mx-1","text-slate-300"],[1,"far","fa-clock","text-slate-400"],[1,"text-xs"],[1,"flex","gap-2"],[1,"bg-white","dark:bg-slate-800","border","border-slate-200","dark:border-slate-700","text-slate-600","dark:text-slate-300","px-4","py-2","rounded-lg","text-xs","font-bold","uppercase","hover:bg-slate-50","transition","shadow-sm",3,"click"],[1,"fas","fa-download","mr-2"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-4","gap-4"],["title","Seguridad","subtitle","D\xEDas sin incidentes","unit","d\xEDas","status","success","statusText","En buen nivel","footerLabel","Meta Hist\xF3rica",3,"value","footerValue","trendLabel"],["title","Disponibilidad","subtitle","Flota operativa efectiva","unit","%","footerLabel","Meta 95%","footerValue","",3,"value","status","statusText","trendLabel"],["title","Flota Activa","subtitle","Estado actual de montacargas","status","info","statusText","Vista general","footerLabel","En Taller",3,"value","unit","footerValue","trendLabel"],["title","Costo Mensual","subtitle","Mantenimiento y refacciones","footerLabel","Presupuesto",3,"value","unit","status","statusText","footerValue","trendLabel"],[1,"grid","grid-cols-1","lg:grid-cols-3","gap-6"],[1,"lg:col-span-2","bg-white","dark:bg-[#1e293b]","rounded-2xl","shadow-sm","border","border-slate-200","dark:border-slate-700/60","flex","flex-col","overflow-hidden","h-[500px]"],[1,"p-5","border-b","border-slate-100","dark:border-slate-700/50","flex","justify-between","items-center","bg-slate-50/50","dark:bg-slate-800/20"],[1,"font-bold","text-slate-800","dark:text-white","flex","items-center","gap-2"],[1,"fas","fa-wrench","text-slate-400"],[1,"text-xs","text-slate-500","mt-1"],[1,"text-xs","font-bold","text-red-600","bg-red-50","dark:bg-red-500/10","px-3","py-1","rounded-full","border","border-red-100","dark:border-red-500/20","animate-pulse"],[1,"flex-1","overflow-y-auto","custom-scroll","relative"],[1,"w-full","text-left","text-sm"],[1,"bg-slate-50","dark:bg-slate-800","text-slate-500","font-bold","text-xs","uppercase","sticky","top-0","z-10","shadow-sm"],[1,"p-4","pl-6"],[1,"p-4"],[1,"p-4","text-center"],[1,"p-4","text-right","pr-6"],[1,"divide-y","divide-slate-100","dark:divide-slate-700/50"],[1,"hover:bg-slate-50","dark:hover:bg-slate-800/50","transition-colors","group"],[1,"flex","flex-col","gap-6"],[1,"bg-white","dark:bg-[#1e293b]","rounded-2xl","shadow-sm","border","border-slate-200","dark:border-slate-700/60","p-5"],[1,"flex","justify-between","items-center","mb-4"],[1,"font-bold","text-slate-800","dark:text-white","text-sm"],[1,"text-[10px]","font-bold","text-slate-400","uppercase","bg-slate-100","dark:bg-slate-800","px-2","py-1","rounded"],[1,"space-y-3"],[1,"w-full","text-left","p-3","rounded-xl","bg-slate-50","dark:bg-slate-800/50","border","border-slate-100","dark:border-slate-700","group","hover:border-red-200","transition-colors","cursor-pointer","relative",3,"click"],[1,"flex","justify-between","items-start","mb-2"],[1,"text-xs","font-bold","text-slate-700","dark:text-slate-200","group-hover:text-[#ce1126]","transition-colors"],[1,"text-xs","font-black","text-red-500"],[1,"w-full","bg-slate-200","dark:bg-slate-700","h-1.5","rounded-full","overflow-hidden","mb-3"],[1,"bg-red-500","h-full","w-[45%]"],[1,"flex","justify-between","items-center"],[1,"text-[10px]","text-slate-400","font-medium"],[1,"text-[10px]","bg-white","dark:bg-slate-700","border","border-slate-200","dark:border-slate-600","px-3","py-1.5","rounded-lg","text-slate-600","group-hover:text-[#ce1126]","group-hover:border-red-100","font-bold","shadow-sm","transition-all","group-hover:shadow-md","flex","items-center","gap-1"],[1,"fas","fa-arrow-right","text-[9px]"],[1,"w-full","text-left","p-3","rounded-xl","bg-slate-50","dark:bg-slate-800/50","border","border-slate-100","dark:border-slate-700","group","hover:border-amber-200","transition-colors","cursor-pointer","relative",3,"click"],[1,"text-xs","font-bold","text-slate-700","dark:text-slate-200","group-hover:text-amber-600","transition-colors"],[1,"text-xs","font-black","text-amber-500"],[1,"bg-amber-500","h-full","w-[20%]"],[1,"text-[10px]","bg-white","dark:bg-slate-700","border","border-slate-200","dark:border-slate-600","px-3","py-1.5","rounded-lg","text-slate-600","group-hover:text-amber-600","group-hover:border-amber-100","font-bold","shadow-sm","transition-all","group-hover:shadow-md","flex","items-center","gap-1"],[1,"flex-1","bg-white","dark:bg-[#1e293b]","rounded-2xl","shadow-sm","border","border-slate-200","dark:border-slate-700/60","p-5","flex","flex-col"],[1,"text-[10px]","font-bold","text-[#ce1126]","hover:underline"],[1,"relative","pl-4","border-l","border-slate-200","dark:border-slate-700","space-y-6"],[1,"relative","group"],[1,"flex","items-center","gap-3"],[1,"font-black","text-slate-800","dark:text-white","text-base"],[1,"text-xs","text-slate-500","font-medium"],[1,"text-sm","font-bold","text-slate-700","dark:text-slate-300","max-w-[220px]","truncate","cursor-help",3,"title"],[1,"flex","flex-col","items-center"],[1,"font-mono","text-sm","font-bold","text-slate-700","dark:text-slate-200"],[1,"p-4","pr-6","text-right"],[1,"bg-white","dark:bg-slate-700","border","border-slate-200","dark:border-slate-600","text-slate-600","dark:text-slate-200","hover:text-[#ce1126]","hover:border-[#ce1126]","px-3","py-1.5","rounded-lg","text-xs","font-bold","transition","shadow-sm","group-hover:shadow-md",3,"click"],[1,"fas","fa-arrow-right","ml-1"],["colspan","5",1,"py-20","text-center"],[1,"flex","flex-col","items-center","justify-center","opacity-60"],[1,"w-16","h-16","bg-emerald-50","dark:bg-emerald-500/10","rounded-full","flex","items-center","justify-center","mb-4","border","border-emerald-100"],[1,"fas","fa-check","text-2xl","text-emerald-500"],[1,"text-slate-800","dark:text-white","font-bold","text-lg"],[1,"text-slate-500","text-sm","mt-1","mb-4"],[1,"absolute","-left-[25px]","top-0","h-7","w-7","rounded-full","border-2","border-white","dark:border-slate-900","flex","items-center","justify-center","text-[10px]","text-white","shadow-sm","transition-transform","group-hover:scale-110",3,"ngClass"],[1,"text-xs","font-bold","text-slate-700","dark:text-slate-300","leading-tight"],[1,"flex","items-center","gap-2","mt-1"],[1,"text-[10px]","text-slate-400","font-mono"],[1,"text-[10px]","bg-slate-100","dark:bg-slate-800","px-1.5","py-0.5","rounded","text-slate-500","font-bold","uppercase"]],template:function(r,i){r&1&&(p(0,"div",0)(1,"div",1)(2,"div")(3,"h1",2),g(4,"Centro de Monitoreo (NOC)"),m(),p(5,"p",3)(6,"span",4),w(7,"span",5)(8,"span",6),m(),p(9,"span",7),g(10,"Operaci\xF3n Estable"),m(),p(11,"span",8),g(12,"|"),m(),w(13,"i",9),p(14,"span",10),g(15),Nt(16,"date"),m()()(),p(17,"div",11)(18,"button",12),M("click",function(){return i.downloadReport()}),w(19,"i",13),g(20," Reporte PDF "),m()()(),p(21,"div",14),w(22,"app-kpi-card",15)(23,"app-kpi-card",16)(24,"app-kpi-card",17)(25,"app-kpi-card",18),Nt(26,"currency"),m(),p(27,"div",19)(28,"div",20)(29,"div",21)(30,"div")(31,"h3",22),w(32,"i",23),g(33," Taller en Vivo "),m(),p(34,"p",24),g(35,"\xD3rdenes activas y tiempos de respuesta"),m()(),ie(36,wV,2,2,"span",25),m(),p(37,"div",26)(38,"table",27)(39,"thead",28)(40,"tr")(41,"th",29),g(42,"Prioridad / Unidad"),m(),p(43,"th",30),g(44,"Falla Reportada"),m(),p(45,"th",30),g(46,"Estado"),m(),p(47,"th",31),g(48,"SLA (Tiempo)"),m(),p(49,"th",32),g(50,"Acci\xF3n"),m()()(),p(51,"tbody",33),Ze(52,bV,29,21,"tr",34,EV,!1,CV,9,0,"tr"),m()()()(),p(55,"div",35)(56,"div",36)(57,"div",37)(58,"h3",38),g(59,"Top 3 Problemas"),m(),p(60,"span",39),g(61,"\xDAltimos 30 d\xEDas"),m()(),p(62,"div",40)(63,"button",41),M("click",function(){return i.filterByIssue("Hidr\xE1ulico")}),p(64,"div",42)(65,"span",43),g(66,"Sistema Hidr\xE1ulico"),m(),p(67,"span",44),g(68,"45%"),m()(),p(69,"div",45),w(70,"div",46),m(),p(71,"div",47)(72,"span",48),g(73,"12 incidentes reportados"),m(),p(74,"span",49),g(75," Ver equipos "),w(76,"i",50),m()()(),p(77,"button",51),M("click",function(){return i.filterByIssue("Frenos")}),p(78,"div",42)(79,"span",52),g(80,"Frenos / Desgaste"),m(),p(81,"span",53),g(82,"20%"),m()(),p(83,"div",45),w(84,"div",54),m(),p(85,"div",47)(86,"span",48),g(87,"8 incidentes reportados"),m(),p(88,"span",55),g(89," Ver equipos "),w(90,"i",50),m()()()()(),p(91,"div",56)(92,"div",37)(93,"h3",38),g(94,"Eventos Recientes"),m(),p(95,"button",57),g(96,"Ver todo"),m()(),p(97,"div",58),Ze(98,IV,10,6,"div",59,Xl),m()()()()()),r&2&&(v(15),L("Actualizado: ",fn(16,20,i.lastUpdate(),"HH:mm:ss"),""),v(7),ce("value",i.safetyStats().daysWithoutAccident)("footerValue",i.safetyStats().record+" d\xEDas")("trendLabel","Faltan "+(i.safetyStats().record-i.safetyStats().daysWithoutAccident)+" para r\xE9cord"),v(),ce("value",i.fleetAvailability().percentage)("status",i.availabilityStatus())("statusText",i.availabilityStatusText())("trendLabel",i.availabilityGap()),v(),ce("value",i.operativeCount())("unit","de "+i.totalAssets())("footerValue",i.activeFailures().length+(i.activeFailures().length===1?" unidad":" unidades"))("trendLabel",i.fleetCapacityLabel()),v(),ce("value",i.formattedCost())("unit",i.costUnit())("status",i.budgetStatus())("statusText",i.budgetStatusText())("footerValue",tc(26,23,i.kpi().budgetMonth)||"$0")("trendLabel",i.budgetVariance()),v(11),se(i.activeFailures().length>0?36:-1),v(16),Je(i.activeFailures()),v(46),Je(i.recentEvents()))},dependencies:[Ae,fo,ho,Gn,sD],encapsulation:2})}}return n})();var DV=(n,e)=>e.id;function SV(n,e){n&1&&(p(0,"div",26),w(1,"i",37),g(2," > 48h "),m())}function TV(n,e){n&1&&w(0,"i",32)}function xV(n,e){if(n&1&&(p(0,"div",33),g(1),Nt(2,"date"),m()),n&2){let t=x().$implicit;v(),L(" Desde: ",fn(2,1,t.statusSince,"dd MMM HH:mm")," ")}}function AV(n,e){if(n&1){let t=Ee();p(0,"tr",24),M("click",function(){let i=U(t).$implicit,s=x();return B(s.selectAsset(i))}),p(1,"td",25),g(2),ie(3,SV,3,0,"div",26),m(),p(4,"td",20)(5,"div",12),g(6),m(),p(7,"div",27),g(8),m()(),p(9,"td",28),w(10,"i",29),g(11),m(),p(12,"td",20)(13,"div",30)(14,"span"),w(15,"span",31),g(16),m(),ie(17,TV,1,0,"i",32),m(),ie(18,xV,3,4,"div",33),m(),p(19,"td",34),g(20),m(),p(21,"td",21)(22,"button",35),w(23,"i",36),m()()()}if(n&2){let t=e.$implicit,r=x();_e("hover:bg-slate-50",!r.isCriticalMaintenance(t))("border-transparent",!r.isCriticalMaintenance(t))("border-red-500",r.isCriticalMaintenance(t))("bg-red-50",r.isCriticalMaintenance(t)),v(2),L(" ",t.id," "),v(),se(r.isCriticalMaintenance(t)?3:-1),v(3),io("",t.brand," ",t.model,""),v(2),L("SN: ",t.serial,""),v(3),L(" ",t.location," "),v(3),ve("inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-bold border "+t.status.color),v(2),L(" ",t.status.name," "),v(),se(r.isCriticalMaintenance(t)?17:-1),v(),se(t.status.name!=="Operativo"?18:-1),v(2),L(" ",t.supervisor||"N/A"," ")}}function MV(n,e){n&1&&(p(0,"tr")(1,"td",38),g(2,"No se encontraron activos."),m()())}var aD=(()=>{class n{constructor(){this.dataService=T(mt),this.filter=F(""),this.filteredAssets=z(()=>{let t=this.filter().toLowerCase();return this.dataService.assets().filter(r=>r.id.toLowerCase().includes(t)||r.brand.toLowerCase().includes(t)||r.serial.toLowerCase().includes(t))}),this.stats=z(()=>{let t=this.dataService.assets();return{total:t.length,operative:t.filter(r=>r.status.name==="Operativo").length,maintenance:t.filter(r=>r.status.name==="Taller").length,preventive:t.filter(r=>r.status.name==="Preventivo").length}})}selectAsset(t){window.dispatchEvent(new CustomEvent("asset-selected",{detail:t.id}))}isCriticalMaintenance(t){if(t.status.name!=="Taller"||!t.statusSince)return!1;let r=new Date(t.statusSince).getTime();return new Date().getTime()-r>1728e5}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Oe({type:n,selectors:[["app-asset-list"]],decls:49,vars:5,consts:[[1,"space-y-6"],[1,"grid","grid-cols-2","md:grid-cols-4","gap-4"],[1,"bg-white","p-4","rounded-xl","border","border-slate-200","shadow-sm"],[1,"text-xs","text-slate-500","uppercase","font-bold"],[1,"text-2xl","font-black","text-slate-800"],[1,"bg-white","p-4","rounded-xl","border-l-4","border-emerald-500","shadow-sm"],[1,"text-2xl","font-black","text-emerald-600"],[1,"bg-white","p-4","rounded-xl","border-l-4","border-red-500","shadow-sm"],[1,"text-2xl","font-black","text-red-600"],[1,"bg-white","p-4","rounded-xl","border-l-4","border-amber-500","shadow-sm"],[1,"text-2xl","font-black","text-amber-600"],[1,"flex","flex-col","md:flex-row","justify-between","items-center","gap-4","bg-white","p-4","rounded-xl","border","border-slate-200","shadow-sm"],[1,"font-bold","text-slate-700"],[1,"relative","w-full","md:w-64"],[1,"fas","fa-search","absolute","left-3","top-3","text-slate-400","text-xs"],["type","text","placeholder","Buscar por ID, Serie o Marca...",1,"w-full","pl-8","pr-4","py-2","bg-slate-50","border","border-slate-200","rounded-lg","text-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"input"],[1,"bg-white","rounded-xl","shadow-sm","border","border-slate-200","overflow-hidden"],[1,"overflow-x-auto"],[1,"w-full","text-sm","text-left"],[1,"bg-slate-50","text-slate-500","font-bold","text-xs","uppercase","border-b","border-slate-200"],[1,"p-4"],[1,"p-4","text-right"],[1,"divide-y","divide-slate-100"],[1,"transition-colors","group","cursor-pointer","border-l-4",3,"hover:bg-slate-50","border-transparent","border-red-500","bg-red-50"],[1,"transition-colors","group","cursor-pointer","border-l-4",3,"click"],[1,"p-4","font-black","text-slate-800"],[1,"mt-1","inline-flex","items-center","gap-1","text-[9px]","uppercase","font-bold","text-red-600","animate-pulse"],[1,"text-xs","text-slate-400","font-mono"],[1,"p-4","text-slate-600"],[1,"fas","fa-map-marker-alt","text-slate-300","mr-1"],[1,"flex","items-center","gap-2"],[1,"w-1.5","h-1.5","rounded-full","bg-current","mr-1.5"],["title","Atenci\xF3n requerida: Tiempo excedido",1,"fas","fa-exclamation-triangle","text-red-500","text-sm","animate-bounce"],[1,"text-[10px]","text-slate-400","mt-1","pl-1"],[1,"p-4","text-slate-600","text-xs"],[1,"text-slate-400","hover:text-blue-600","group-hover:translate-x-1","transition-transform"],[1,"fas","fa-arrow-right"],[1,"fas","fa-clock"],["colspan","6",1,"p-8","text-center","text-slate-400","italic"]],template:function(r,i){r&1&&(p(0,"div",0)(1,"div",1)(2,"div",2)(3,"p",3),g(4,"Total Flota"),m(),p(5,"p",4),g(6),m()(),p(7,"div",5)(8,"p",3),g(9,"Operativos"),m(),p(10,"p",6),g(11),m()(),p(12,"div",7)(13,"p",3),g(14,"En Taller"),m(),p(15,"p",8),g(16),m()(),p(17,"div",9)(18,"p",3),g(19,"Preventivo"),m(),p(20,"p",10),g(21),m()()(),p(22,"div",11)(23,"h2",12),g(24,"Inventario Detallado"),m(),p(25,"div",13),w(26,"i",14),p(27,"input",15),M("input",function(o){return i.filter.set(o.target.value)}),m()()(),p(28,"div",16)(29,"div",17)(30,"table",18)(31,"thead",19)(32,"tr")(33,"th",20),g(34,"ID Economico"),m(),p(35,"th",20),g(36,"Detalles"),m(),p(37,"th",20),g(38,"Ubicaci\xF3n"),m(),p(39,"th",20),g(40,"Estatus Actual"),m(),p(41,"th",20),g(42,"Supervisor"),m(),p(43,"th",21),g(44,"Acci\xF3n"),m()()(),p(45,"tbody",22),Ze(46,AV,24,20,"tr",23,DV,!1,MV,3,0,"tr"),m()()()()()),r&2&&(v(6),Z(i.stats().total),v(5),Z(i.stats().operative),v(5),Z(i.stats().maintenance),v(5),Z(i.stats().preventive),v(25),Je(i.filteredAssets()))},dependencies:[Ae,Gn],encapsulation:2})}}return n})();var yD=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(re(Xr),re(lr))};static \u0275dir=Fe({type:n})}return n})(),ry=(()=>{class n extends yD{static \u0275fac=(()=>{let t;return function(i){return(t||(t=Wi(n)))(i||n)}})();static \u0275dir=Fe({type:n,features:[xt]})}return n})(),Uu=new R("");var NV={provide:Uu,useExisting:ln(()=>Mr),multi:!0};function RV(){let n=zn()?zn().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var kV=new R(""),Mr=(()=>{class n extends yD{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!RV())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(re(Xr),re(lr),re(kV,8))};static \u0275dir=Fe({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&M("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},standalone:!1,features:[cr([NV]),xt]})}return n})();function PV(n){return n==null||_D(n)===0}function _D(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var Bu=new R(""),vD=new R("");function OV(n){return PV(n.value)?{required:!0}:null}function FV(n){return e=>{let t=e.value?.length??_D(e.value);return t===null||t===0?null:t<n?{minlength:{requiredLength:n,actualLength:t}}:null}}function lD(n){return null}function ED(n){return n!=null}function wD(n){return ro(n)?jr(n):n}function bD(n){let e={};return n.forEach(t=>{e=t!=null?S(S({},e),t):e}),Object.keys(e).length===0?null:e}function CD(n,e){return e.map(t=>t(n))}function LV(n){return!n.validate}function ID(n){return n.map(e=>LV(e)?e:t=>e.validate(t))}function VV(n){if(!n)return null;let e=n.filter(ED);return e.length==0?null:function(t){return bD(CD(t,e))}}function iy(n){return n!=null?VV(ID(n)):null}function jV(n){if(!n)return null;let e=n.filter(ED);return e.length==0?null:function(t){let r=CD(t,e).map(wD);return Pd(r).pipe(ot(bD))}}function sy(n){return n!=null?jV(ID(n)):null}function cD(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function UV(n){return n._rawValidators}function BV(n){return n._rawAsyncValidators}function ey(n){return n?Array.isArray(n)?n:[n]:[]}function Pu(n,e){return Array.isArray(n)?n.includes(e):n===e}function uD(n,e){let t=ey(e);return ey(n).forEach(i=>{Pu(t,i)||t.push(i)}),t}function dD(n,e){return ey(e).filter(t=>!Pu(n,t))}var Ou=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=iy(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=sy(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},bs=class extends Ou{name;get formDirective(){return null}get path(){return null}},wa=class extends Ou{_parent=null;name=null;valueAccessor=null},Fu=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},HV={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},oG=$(S({},HV),{"[class.ng-submitted]":"isSubmitted"}),Cs=(()=>{class n extends Fu{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(re(wa,2))};static \u0275dir=Fe({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&_e("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[xt]})}return n})(),DD=(()=>{class n extends Fu{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(re(bs,10))};static \u0275dir=Fe({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&_e("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[xt]})}return n})();var ga="VALID",ku="INVALID",Es="PENDING",ya="DISABLED",Ar=class{},Lu=class extends Ar{value;source;constructor(e,t){super(),this.value=e,this.source=t}},va=class extends Ar{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},Ea=class extends Ar{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},ws=class extends Ar{status;source;constructor(e,t){super(),this.status=e,this.source=t}},ty=class extends Ar{source;constructor(e){super(),this.source=e}},ny=class extends Ar{source;constructor(e){super(),this.source=e}};function SD(n){return(Hu(n)?n.validators:n)||null}function $V(n){return Array.isArray(n)?iy(n):n||null}function TD(n,e){return(Hu(e)?e.asyncValidators:n)||null}function zV(n){return Array.isArray(n)?sy(n):n||null}function Hu(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function WV(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new I(1e3,"");if(!r[t])throw new I(1001,"")}function GV(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new I(1002,"")})}var Vu=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return $n(this.statusReactive)}set status(e){$n(()=>this.statusReactive.set(e))}_status=z(()=>this.statusReactive());statusReactive=F(void 0);get valid(){return this.status===ga}get invalid(){return this.status===ku}get pending(){return this.status==Es}get disabled(){return this.status===ya}get enabled(){return this.status!==ya}errors;get pristine(){return $n(this.pristineReactive)}set pristine(e){$n(()=>this.pristineReactive.set(e))}_pristine=z(()=>this.pristineReactive());pristineReactive=F(!0);get dirty(){return!this.pristine}get touched(){return $n(this.touchedReactive)}set touched(e){$n(()=>this.touchedReactive.set(e))}_touched=z(()=>this.touchedReactive());touchedReactive=F(!1);get untouched(){return!this.touched}_events=new Tn;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(uD(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(uD(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(dD(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(dD(e,this._rawAsyncValidators))}hasValidator(e){return Pu(this._rawValidators,e)}hasAsyncValidator(e){return Pu(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched($(S({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Ea(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new Ea(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty($(S({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new va(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new va(!0,r))}markAsPending(e={}){this.status=Es;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new ws(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending($(S({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=ya,this.errors=null,this._forEachChild(i=>{i.disable($(S({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Lu(this.value,r)),this._events.next(new ws(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors($(S({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=ga,this._forEachChild(r=>{r.enable($(S({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors($(S({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===ga||this.status===Es)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Lu(this.value,t)),this._events.next(new ws(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity($(S({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ya:ga}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Es,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let r=wD(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new ws(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new vt,this.statusChanges=new vt}_calculateStatus(){return this._allControlsDisabled()?ya:this.errors?ku:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Es)?Es:this._anyControlsHaveStatus(ku)?ku:ga}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new va(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Ea(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Hu(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=$V(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=zV(this._rawAsyncValidators)}},ju=class extends Vu{constructor(e,t,r){super(SD(t),TD(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){GV(this,!0,e),Object.keys(e).forEach(r=>{WV(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var oy=new R("",{providedIn:"root",factory:()=>ay}),ay="always";function qV(n,e){return[...e.path,n]}function xD(n,e,t=ay){AD(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),YV(n,e),ZV(n,e),QV(n,e),KV(n,e)}function fD(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function KV(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function AD(n,e){let t=UV(n);e.validator!==null?n.setValidators(cD(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=BV(n);e.asyncValidator!==null?n.setAsyncValidators(cD(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();fD(e._rawValidators,i),fD(e._rawAsyncValidators,i)}function YV(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&MD(n,e)})}function QV(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&MD(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function MD(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function ZV(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function JV(n,e){n==null,AD(n,e)}function XV(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function ej(n){return Object.getPrototypeOf(n.constructor)===ry}function tj(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function nj(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(s=>{s.constructor===Mr?t=s:ej(s)?r=s:i=s}),i||r||t||null}var rj={provide:bs,useExisting:ln(()=>ly)},_a=Promise.resolve(),ly=(()=>{class n extends bs{callSetDisabledState;get submitted(){return $n(this.submittedReactive)}_submitted=z(()=>this.submittedReactive());submittedReactive=F(!1);_directives=new Set;form;ngSubmit=new vt;options;constructor(t,r,i){super(),this.callSetDisabledState=i,this.form=new ju({},iy(t),sy(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){_a.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),xD(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){_a.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){_a.then(()=>{let r=this._findContainer(t.path),i=new ju({});JV(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){_a.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){_a.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),tj(this.form,this._directives),this.ngSubmit.emit(t),this.form._events.next(new ty(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1),this.form._events.next(new ny(this.form))}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static \u0275fac=function(r){return new(r||n)(re(Bu,10),re(vD,10),re(oy,8))};static \u0275dir=Fe({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&M("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[cr([rj]),xt]})}return n})();function hD(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function pD(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var ij=class extends Vu{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(SD(t),TD(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Hu(t)&&(t.nonNullable||t.initialValueIsDefault)&&(pD(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){hD(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){hD(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){pD(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var sj={provide:wa,useExisting:ln(()=>_i)},mD=Promise.resolve(),_i=(()=>{class n extends wa{_changeDetectorRef;callSetDisabledState;control=new ij;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new vt;constructor(t,r,i,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=nj(this,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),XV(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){xD(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){mD.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&Kh(r);mD.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?qV(t,this._parent):[t]}static \u0275fac=function(r){return new(r||n)(re(bs,9),re(Bu,10),re(vD,10),re(Uu,10),re(qh,8),re(oy,8))};static \u0275dir=Fe({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[cr([sj]),xt,$l]})}return n})();var ND=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=Fe({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})();var oj={provide:Uu,useExisting:ln(()=>$u),multi:!0};function RD(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function aj(n){return n.split(":")[0]}var $u=(()=>{class n extends ry{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r=this._getOptionId(t),i=RD(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=aj(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Wi(n)))(i||n)}})();static \u0275dir=Fe({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&M("change",function(o){return i.onChange(o.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[cr([oj]),xt]})}return n})(),Is=(()=>{class n{_element;_renderer;_select;id;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(RD(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(re(lr),re(Xr),re($u,9))};static \u0275dir=Fe({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),lj={provide:Uu,useExisting:ln(()=>kD),multi:!0};function gD(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function cj(n){return n.split(":")[0]}var kD=(()=>{class n extends ry{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(s=>this._getOptionId(s));r=(s,o)=>{s._setSelected(i.indexOf(o.toString())>-1)}}else r=(i,s)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],s=r.selectedOptions;if(s!==void 0){let o=s;for(let a=0;a<o.length;a++){let l=o[a],c=this._getOptionValue(l.value);i.push(c)}}else{let o=r.options;for(let a=0;a<o.length;a++){let l=o[a];if(l.selected){let c=this._getOptionValue(l.value);i.push(c)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=cj(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Wi(n)))(i||n)}})();static \u0275dir=Fe({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&M("change",function(o){return i.onChange(o.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[cr([lj]),xt]})}return n})(),Ds=(()=>{class n{_element;_renderer;_select;id;_value;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(gD(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(gD(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(re(lr),re(Xr),re(kD,9))};static \u0275dir=Fe({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();function uj(n){return typeof n=="number"?n:parseInt(n,10)}var PD=(()=>{class n{_validator=lD;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):lD,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Fe({type:n,features:[$l]})}return n})();var dj={provide:Bu,useExisting:ln(()=>cy),multi:!0};var cy=(()=>{class n extends PD{required;inputName="required";normalizeInput=Kh;createValidator=t=>OV;enabled(t){return t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Wi(n)))(i||n)}})();static \u0275dir=Fe({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&Jl("required",i._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[cr([dj]),xt]})}return n})();var fj={provide:Bu,useExisting:ln(()=>uy),multi:!0},uy=(()=>{class n extends PD{minlength;inputName="minlength";normalizeInput=t=>uj(t);createValidator=t=>FV(t);static \u0275fac=(()=>{let t;return function(i){return(t||(t=Wi(n)))(i||n)}})();static \u0275dir=Fe({type:n,selectors:[["","minlength","","formControlName",""],["","minlength","","formControl",""],["","minlength","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&Jl("minlength",i._enabled?i.minlength:null)},inputs:{minlength:"minlength"},standalone:!1,features:[cr([fj]),xt]})}return n})();var hj=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Hn({type:n});static \u0275inj=Fn({})}return n})();var In=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:oy,useValue:t.callSetDisabledState??ay}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Hn({type:n});static \u0275inj=Fn({imports:[hj]})}return n})();var pj=(n,e)=>e.id,mj=(n,e)=>e.part_name;function gj(n,e){n&1&&(p(0,"div",6),w(1,"i",53),g(2," Prioridad Alta "),m())}function yj(n,e){n&1&&(p(0,"div",62),w(1,"i",74),g(2," Analizando da\xF1os... "),m())}function _j(n,e){if(n&1&&(p(0,"li"),g(1),m()),n&2){let t=e.$implicit;v(),ec(" ",t.quantity,"x ",t.part_name," (",t.generic_code,") ")}}function vj(n,e){if(n&1&&(p(0,"div",72)(1,"p")(2,"strong",75),g(3,"Severidad Detectada:"),m(),g(4),m(),p(5,"p")(6,"strong",75),g(7,"Refacciones Sugeridas:"),m()(),p(8,"ul",76),Ze(9,_j,2,3,"li",null,mj),m()()),n&2){let t,r,i=x(3);v(4),L(" ",(t=i.inspectionData())==null||t.inspection==null||t.inspection.severity==null?null:t.inspection.severity.level," "),v(5),Je((r=i.inspectionData())==null||r.inspection==null||r.inspection.repair_plan==null?null:r.inspection.repair_plan.estimated_parts)}}function Ej(n,e){if(n&1){let t=Ee();p(0,"div",32)(1,"h4",54),w(2,"i",55),g(3," Registrar Ingreso a Taller "),m(),p(4,"div",56)(5,"input",57),M("change",function(i){U(t);let s=x(2);return B(s.handleImageUpload(i))}),m(),p(6,"div",58),w(7,"i",59),p(8,"p",60),g(9,"Inspecci\xF3n Visual IA"),m(),p(10,"p",61),g(11," Sube una foto de la aver\xEDa para autocompletar "),m()(),ie(12,yj,3,0,"div",62),m(),p(13,"div",63)(14,"select",64,0)(16,"option",65),g(17,"Falla Mec\xE1nica"),m(),p(18,"option",66),g(19,"Falla El\xE9ctrica"),m(),p(20,"option",67),g(21,"Sistema Hidr\xE1ulico"),m(),p(22,"option",68),g(23,"Llantas / Rodaje"),m(),p(24,"option",69),g(25,"Estructural"),m(),p(26,"option",70),g(27,"Da\xF1o por Operaci\xF3n"),m()(),w(28,"textarea",71,1),ie(30,vj,11,1,"div",72),p(31,"button",73),M("click",function(){U(t);let i=dn(15),s=dn(29),o=x(2);return B(o.reportFailure(s.value,i.value))}),g(32," Confirmar Ingreso "),m()()()}if(n&2){let t,r,i=x(2);v(12),se(i.analyzingImage()?12:-1),v(2),ce("value",((t=i.inspectionData())==null||t.inspection==null||t.inspection.damage_analysis==null?null:t.inspection.damage_analysis.damage_type)||"Mec\xE1nico"),v(14),ce("value",i.inspectionData()?((r=i.inspectionData())==null||r.inspection==null||r.inspection.asset==null?null:r.inspection.asset.visual_condition)+" - Causa Probable: "+((r=i.inspectionData())==null||r.inspection==null||r.inspection.root_cause_analysis==null?null:r.inspection.root_cause_analysis.probable_cause):""),v(2),se(i.inspectionData()?30:-1)}}function wj(n,e){if(n&1){let t=Ee();p(0,"div",33)(1,"h4",77),w(2,"i",78),g(3," Finalizar y Liberar Equipo "),m(),p(4,"div",63),w(5,"textarea",79,2),p(7,"div",80),w(8,"input",81,3)(10,"input",82,4),m(),p(12,"button",83),M("click",function(){U(t);let i=dn(6),s=dn(9),o=dn(11),a=x(2);return B(a.finishRepair(i.value,s.value,o.value))}),g(13," Liberar Equipo a Operaci\xF3n "),m()()()}}function bj(n,e){n&1&&(p(0,"span",86),g(1," ABIERTO "),m())}function Cj(n,e){if(n&1&&(p(0,"span",94),g(1),m()),n&2){let t=e.$implicit;v(),L(" ",t," ")}}function Ij(n,e){if(n&1&&(p(0,"div",89),Ze(1,Cj,2,1,"span",94,Xl),m()),n&2){let t=x().$implicit;v(),Je(t.partsUsed)}}function Dj(n,e){n&1&&(p(0,"span",90),g(1,"N/A"),m())}function Sj(n,e){if(n&1&&(p(0,"tr",84)(1,"td",85),g(2),Nt(3,"date"),ie(4,bj,2,0,"span",86),m(),p(5,"td",87),g(6),m(),p(7,"td",88),g(8),m(),p(9,"td",88),ie(10,Ij,3,0,"div",89)(11,Dj,2,0,"span",90),m(),p(12,"td",91)(13,"span",92),g(14),m()(),p(15,"td",93),g(16),Nt(17,"currency"),m()()),n&2){let t=e.$implicit;_e("bg-red-50",!t.exitDate)("border-l-4",!t.exitDate)("border-[#ce1126]",!t.exitDate),v(2),L(" ",fn(3,13,t.entryDate,"shortDate")," "),v(2),se(t.exitDate?-1:4),v(2),L(" ",t.failureDescription," "),v(2),L(" ",t.diagnosis||"-"," "),v(2),se(t.partsUsed&&t.partsUsed.length>0?10:11),v(4),Z(t.type),v(2),L(" ",tc(17,16,t.estimatedCost)," ")}}function Tj(n,e){n&1&&(p(0,"div",51)(1,"div",95),w(2,"i",96)(3,"i",97),m(),p(4,"p",98),g(5," Analizando historial y sensores... "),m()())}function xj(n,e){if(n&1){let t=Ee();w(0,"div",99),p(1,"button",100),M("click",function(){U(t);let i=x(2);return B(i.runAnalysis())}),g(2," Regenerar An\xE1lisis "),m()}if(n&2){let t=x(2);ce("innerHTML",t.aiResult(),Jr)}}function Aj(n,e){if(n&1){let t=Ee();p(0,"div",101)(1,"p",102),w(2,"i",103),g(3," Esto enviar\xE1 los \xFAltimos 20 reportes a Gemini. "),m()(),p(4,"button",104),M("click",function(){U(t);let i=x(2);return B(i.runAnalysis())}),w(5,"i",105),g(6," Ejecutar Predicci\xF3n con IA "),m()}}function Mj(n,e){if(n&1){let t=Ee();p(0,"div",52)(1,"div",106)(2,"h3",107),w(3,"i",108),g(4," Procedimiento LOTO "),m(),p(5,"button",109),M("click",function(){U(t);let i=x(2);return B(i.lotoResult.set(null))}),w(6,"i",110),m()(),w(7,"div",111),p(8,"button",112),M("click",function(){U(t);let i=x(2);return B(i.printLoto())}),w(9,"i",113),g(10," Imprimir Etiqueta "),m()()}if(n&2){let t=x(2);v(7),ce("innerHTML",t.lotoResult(),Jr)}}function Nj(n,e){if(n&1){let t=Ee();p(0,"div",5),ie(1,gj,3,0,"div",6),p(2,"div",7)(3,"div")(4,"div",8)(5,"h2",9),g(6),m(),p(7,"span",10),g(8),m()(),p(9,"p",11),g(10),m(),p(11,"div",12)(12,"span"),w(13,"i",13),g(14),m(),w(15,"span",14),p(16,"span"),w(17,"i",15),g(18),m()()(),p(19,"div",16)(20,"button",17),M("click",function(){U(t);let i=x();return B(i.close())}),w(21,"i",18),m(),p(22,"button",19),M("click",function(){U(t);let i=x();return B(i.exportPdf())}),w(23,"i",20),g(24," PDF "),m(),p(25,"button",21),M("click",function(){U(t);let i=x();return B(i.generateLoto())}),w(26,"i",22),g(27," Generar LOTO "),m()()(),p(28,"div",23)(29,"div",24)(30,"div",25)(31,"div",26)(32,"div",27),g(33," Combustible "),m(),p(34,"div",28),g(35),m()(),p(36,"div",26)(37,"div",27),g(38," Adquisici\xF3n "),m(),p(39,"div",28),g(40),Nt(41,"date"),m()(),p(42,"div",26)(43,"div",27),g(44," Total Fallas "),m(),p(45,"div",28),g(46),m()()(),p(47,"div",29)(48,"h3",30),w(49,"i",31),g(50," Panel de Control Operativo "),m(),ie(51,Ej,33,4,"div",32)(52,wj,14,0,"div",33),m(),p(53,"div")(54,"div",34),w(55,"div",35),p(56,"h3",36),g(57,"Historial Cl\xEDnico"),m()(),p(58,"div",37)(59,"table",38)(60,"thead",39)(61,"tr")(62,"th",40),g(63,"Fecha"),m(),p(64,"th",41),g(65,"Falla"),m(),p(66,"th",41),g(67,"Diagn\xF3stico"),m(),p(68,"th",41),g(69,"Refacciones"),m(),p(70,"th",41),g(71,"Tipo"),m(),p(72,"th",42),g(73,"Costo"),m()()(),p(74,"tbody",43),Ze(75,Sj,18,18,"tr",44,pj),m()()()()(),p(77,"div",45)(78,"div",46)(79,"div",34)(80,"div",47),w(81,"i",48),m(),p(82,"h3",49),g(83,"Mantenimiento Predictivo"),m()(),p(84,"p",50),g(85," Gemini AI analiza patrones de desgaste, MTBF y condiciones de uso para predecir fallas futuras. "),m(),ie(86,Tj,6,0,"div",51)(87,xj,3,1)(88,Aj,7,0),m(),ie(89,Mj,11,1,"div",52),m()()()}if(n&2){let t=x();v(),se(t.asset().critical?1:-1),v(5),Z(t.asset().id),v(2),L(" ",t.asset().status.name," "),v(2),ec(" ",t.asset().brand," ",t.asset().model," | SN: ",t.asset().serial," "),v(4),Z(t.asset().location),v(4),Z(t.asset().fuelType),v(17),Z(t.asset().fuelType),v(5),L(" ",fn(41,14,t.asset().acquisitionDate,"MM/yyyy")," "),v(6),Z(t.history().length),v(5),se(t.asset().status.name==="Operativo"?51:t.asset().status.name==="Taller"?52:-1),v(24),Je(t.history()),v(11),se(t.aiLoading()?86:t.aiResult()?87:88),v(3),se(t.lotoResult()?89:-1)}}var OD=(()=>{class n{constructor(){this.assetId=y0(""),this.dataService=T(mt),this.geminiService=T(_s),this.sanitizer=T(ri),this.asset=z(()=>this.dataService.getAsset(this.assetId())),this.history=z(()=>this.assetId()?this.dataService.getAssetHistory(this.assetId()):[]),this.aiLoading=F(!1),this.aiResult=F(null),this.analyzingImage=F(!1),this.inspectionData=F(null),this.lotoResult=F(null),ei(()=>{this.assetId(),this.aiResult.set(null),this.inspectionData.set(null),this.lotoResult.set(null)},{allowSignalWrites:!0})}handleImageUpload(t){let r=t.target.files[0];if(!r)return;this.analyzingImage.set(!0);let i=new FileReader;i.onload=s=>_(this,null,function*(){let o=s.target.result.split(",")[1],a=yield this.geminiService.analyzeImageInspection(o);this.inspectionData.set(a),this.analyzingImage.set(!1)}),i.readAsDataURL(r)}generateLoto(){return _(this,null,function*(){let t=this.asset();if(!t)return;let r=t.lastFailure||"Mantenimiento General Preventivo";this.lotoResult.set('<p class="text-gray-500 animate-pulse">Generando procedimiento de seguridad...</p>');let i=yield this.geminiService.generateLotoProcedure(t,r);this.lotoResult.set(i)})}printLoto(){let t=window.open("","","height=600,width=800");t&&this.lotoResult()&&(t.document.write("<html><head><title>LOTO</title>"),t.document.write('<script src="https://cdn.tailwindcss.com"><\/script>'),t.document.write('</head><body class="p-8">'),t.document.write(this.lotoResult()),t.document.write("</body></html>"),t.document.close(),setTimeout(()=>t.print(),500))}reportFailure(t,r){if(!t)return alert("Por favor describe la falla.");this.dataService.reportFailure(this.assetId(),t,r)}finishRepair(t,r,i){if(!t)return alert("El diagn\xF3stico es requerido.");let s=parseFloat(r)||0,o=i.split(",").map(a=>a.trim()).filter(a=>a);this.dataService.completeRepair(this.assetId(),t,s,o)}runAnalysis(){return _(this,null,function*(){let t=this.asset();if(!t)return;this.aiLoading.set(!0);let r=yield this.geminiService.analyzeMaintenanceHistory(t,this.history());this.aiResult.set(r),this.aiLoading.set(!1)})}exportPdf(){return _(this,null,function*(){let t=yield import("./chunk-N7GLFJMD.js"),{jsPDF:r}=t.default??t,i=new r,s=this.asset();if(!s)return;i.setFontSize(20),i.setTextColor(206,17,38),i.text(`Historial Cl\xEDnico: ${s.id}`,14,20),i.setTextColor(0,0,0),i.setFontSize(10),i.text(`Marca: ${s.brand} | Modelo: ${s.model}`,14,28),i.text(`Serie: ${s.serial} | Estatus: ${s.status.name}`,14,33),i.text(`Generado: ${new Date().toLocaleDateString()}`,14,38);let o=this.history().map(l=>[new Date(l.entryDate).toLocaleDateString(),l.failureDescription,l.diagnosis||"-",(l.partsUsed||[]).join(", "),`$${l.estimatedCost}`]),a=50;i.text("Historial de Fallas:",14,a),a+=10,o.forEach((l,c)=>{i.text(`${c+1}. ${l[0]} - ${l[1]}`,14,a),a+=5,a>280&&(i.addPage(),a=20)}),i.save(`historial_${s.id}.pdf`)})}sendEmail(){let t=this.asset();if(!t)return;let r=encodeURIComponent(`Seguimiento de Activo ${t.id} - ${t.status.name}`),i=`
Hola,

Adjunto el seguimiento para el equipo:
ID: ${t.id}
Marca: ${t.brand}
Modelo: ${t.model}
Serie: ${t.serial}

Estatus Actual: ${t.status.name}
\xDAltima Falla Registrada: ${t.lastFailure||"N/A"}

Favor de revisar el historial en el sistema para m\xE1s detalles.

Saludos,
AssetGuard System
    `.trim(),s=encodeURIComponent(i);window.location.href=`mailto:?subject=${r}&body=${s}`}close(){window.dispatchEvent(new CustomEvent("asset-closed"))}printReport(){window.print()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Oe({type:n,selectors:[["app-asset-detail"]],inputs:{assetId:[1,"assetId"]},decls:1,vars:1,consts:[["failType",""],["failDesc",""],["diagnosis",""],["cost",""],["parts",""],[1,"bg-white","rounded-xl","shadow-lg","border","border-gray-200","overflow-hidden","animate-fade-in","relative"],[1,"absolute","top-0","right-0","bg-yellow-400","text-black","text-[10px]","uppercase","font-black","px-4","py-2","rounded-bl-lg","z-10","shadow-sm","tracking-wide"],[1,"bg-[#ce1126]","text-white","p-6","flex","flex-col","md:flex-row","justify-between","items-start","md:items-center","gap-4"],[1,"flex","items-center","gap-3"],[1,"text-3xl","font-black","tracking-tight"],[1,"px-3","py-0.5","rounded-full","text-xs","font-bold","uppercase","bg-white/20","border","border-white/30","backdrop-blur-sm"],[1,"text-red-100","font-medium","mt-1"],[1,"text-xs","text-red-200","mt-2","flex","gap-2","items-center"],[1,"fas","fa-map-marker-alt","mr-1"],[1,"w-1","h-1","rounded-full","bg-white","opacity-50"],[1,"fas","fa-gas-pump","mr-1"],[1,"flex","flex-wrap","gap-2"],["title","Volver",1,"px-4","py-2","rounded-lg","bg-white/10","hover:bg-white/20","text-white","text-sm","font-bold","transition","border","border-white/10",3,"click"],[1,"fas","fa-arrow-left"],[1,"px-4","py-2","rounded-lg","bg-white","text-[#ce1126]","hover:bg-gray-100","text-sm","font-bold","transition","shadow-md","flex","items-center",3,"click"],[1,"fas","fa-file-pdf","mr-2"],[1,"px-4","py-2","rounded-lg","bg-yellow-400","text-black","hover:bg-yellow-300","text-sm","font-bold","transition","shadow-md","flex","items-center",3,"click"],[1,"fas","fa-lock","mr-2"],[1,"p-6","grid","grid-cols-1","lg:grid-cols-3","gap-8"],[1,"lg:col-span-2","space-y-6"],[1,"grid","grid-cols-3","gap-4"],[1,"p-4","bg-gray-50","rounded-lg","border","border-gray-100","text-center"],[1,"text-[10px]","text-gray-500","uppercase","font-bold","tracking-wider"],[1,"font-bold","text-gray-800","text-lg"],[1,"bg-white","p-6","rounded-xl","border","border-gray-200","shadow-sm"],[1,"text-sm","font-bold","text-gray-400","uppercase","tracking-widest","mb-4","flex","items-center","gap-2"],[1,"fas","fa-cogs"],[1,"bg-red-50","p-5","rounded-lg","border","border-red-100","relative"],[1,"bg-green-50","p-5","rounded-lg","border","border-green-100"],[1,"flex","items-center","gap-3","mb-4"],[1,"h-6","w-1","bg-[#ce1126]"],[1,"text-lg","font-bold","text-gray-800"],[1,"overflow-x-auto","rounded-lg","border","border-gray-200"],[1,"w-full","text-sm","text-left","min-w-[800px]"],[1,"bg-gray-50","text-gray-500","font-bold","text-xs","uppercase","tracking-wider"],[1,"p-3","whitespace-nowrap"],[1,"p-3"],[1,"p-3","text-right"],[1,"divide-y","divide-gray-100"],[1,"hover:bg-gray-50","transition",3,"bg-red-50","border-l-4","border-[#ce1126]"],[1,"space-y-6"],[1,"bg-gradient-to-br","from-gray-900","to-black","p-6","rounded-xl","border","border-gray-800","text-white","shadow-xl"],[1,"p-2","bg-[#ce1126]","text-white","rounded","shadow-sm"],[1,"fas","fa-robot","text-lg"],[1,"text-lg","font-bold"],[1,"text-sm","text-gray-400","mb-6","leading-relaxed"],[1,"flex","flex-col","items-center","justify-center","py-6","text-center","space-y-3"],[1,"bg-yellow-50","p-6","rounded-xl","border","border-yellow-200","shadow-lg"],[1,"fas","fa-exclamation-triangle","mr-1"],[1,"text-[#ce1126]","font-bold","mb-3","flex","items-center","gap-2"],[1,"fas","fa-tools"],[1,"mb-4","p-4","border-2","border-dashed","border-red-200","rounded-lg","bg-white/50","text-center","relative","group","hover:border-red-400","transition-colors"],["type","file","accept","image/*",1,"absolute","inset-0","w-full","h-full","opacity-0","cursor-pointer","z-10",3,"change"],[1,"flex","flex-col","items-center","gap-2"],[1,"fas","fa-camera","text-2xl","text-red-300","group-hover:text-red-500"],[1,"text-xs","font-bold","text-red-800","uppercase"],[1,"text-[10px]","text-gray-500"],[1,"absolute","inset-0","bg-white/90","z-20","flex","items-center","justify-center","text-[#ce1126]","font-bold","text-xs","gap-2"],[1,"flex","flex-col","gap-3"],[1,"w-full","p-2.5","border","border-gray-300","rounded","text-sm","bg-white","focus:ring-2","focus:ring-red-500","outline-none",3,"value"],["value","Mec\xE1nico"],["value","El\xE9ctrico"],["value","Hidr\xE1ulico"],["value","Llantas"],["value","Estructural"],["value","Operador"],["rows","3","placeholder","Describe la falla detalladamente...",1,"w-full","p-2.5","border","border-gray-300","rounded","text-sm","bg-white","focus:ring-2","focus:ring-red-500","outline-none",3,"value"],[1,"bg-white","p-3","rounded","border","border-red-100","text-xs","text-gray-600","mb-2"],[1,"w-full","bg-[#ce1126]","hover:bg-[#a30d1d]","text-white","font-bold","py-2.5","rounded","transition","uppercase","tracking-wide","text-xs",3,"click"],[1,"fas","fa-spinner","fa-spin"],[1,"text-red-700"],[1,"list-disc","pl-4","mt-1"],[1,"text-green-800","font-bold","mb-3","flex","items-center","gap-2"],[1,"fas","fa-check-circle"],["rows","2","placeholder","Diagn\xF3stico final y soluci\xF3n...",1,"w-full","p-2.5","border","border-green-200","rounded","text-sm","bg-white","focus:ring-2","focus:ring-green-500","outline-none"],[1,"grid","grid-cols-2","gap-3"],["type","number","placeholder","Costo Refacciones ($)",1,"p-2.5","border","border-green-200","rounded","text-sm","bg-white"],["type","text","placeholder","Refacciones (separar por coma)",1,"p-2.5","border","border-green-200","rounded","text-sm","bg-white"],[1,"w-full","bg-green-600","hover:bg-green-700","text-white","font-bold","py-2.5","rounded","transition","uppercase","tracking-wide","text-xs",3,"click"],[1,"hover:bg-gray-50","transition"],[1,"p-3","text-gray-600","align-top","whitespace-nowrap","font-medium"],[1,"inline-block","px-2","py-0.5","rounded","bg-[#ce1126]","text-white","text-[10px]","font-bold","mt-1","ml-2"],[1,"p-3","text-gray-900","align-top","font-medium"],[1,"p-3","text-gray-600","text-xs","align-top","max-w-[200px]"],[1,"flex","flex-wrap","gap-1.5"],[1,"text-gray-400","italic","text-xs"],[1,"p-3","align-top"],[1,"px-2","py-1","bg-gray-100","text-gray-600","text-[10px]","font-bold","uppercase","rounded","whitespace-nowrap"],[1,"p-3","text-right","font-mono","text-gray-900","font-bold","align-top","whitespace-nowrap"],[1,"inline-flex","items-center","px-2","py-0.5","rounded","text-[10px]","font-bold","bg-gray-100","text-gray-600","border","border-gray-200"],[1,"relative"],[1,"fas","fa-circle-notch","fa-spin","text-3xl","text-[#ce1126]"],[1,"fas","fa-brain","absolute","top-1/2","left-1/2","-translate-x-1/2","-translate-y-1/2","text-[10px]","text-white"],[1,"text-xs","font-bold","text-gray-300","animate-pulse","uppercase","tracking-wide"],[1,"prose","prose-sm","prose-invert","bg-white/5","p-4","rounded-lg","border","border-white/10","max-h-96","overflow-y-auto","custom-scroll","text-sm",3,"innerHTML"],[1,"mt-4","w-full","py-2","text-xs","font-bold","text-gray-400","hover:text-white","uppercase","tracking-wide","border","border-gray-700","rounded","hover:bg-gray-800","transition",3,"click"],[1,"bg-white/5","rounded-lg","p-3","mb-4","border","border-white/10"],[1,"text-[10px]","text-gray-400","italic","mb-1"],[1,"fas","fa-info-circle","mr-1"],[1,"w-full","py-3","bg-[#ce1126]","hover:bg-[#a30d1d]","text-white","rounded-lg","font-bold","shadow-lg","shadow-red-900/20","transition","flex","items-center","justify-center","gap-2","uppercase","tracking-wide","text-xs",3,"click"],[1,"fas","fa-magic"],[1,"flex","justify-between","items-center","mb-4"],[1,"font-black","text-yellow-800","flex","items-center","gap-2"],[1,"fas","fa-lock"],[1,"text-yellow-600","hover:text-black",3,"click"],[1,"fas","fa-times"],[1,"prose","prose-sm","prose-yellow","max-h-64","overflow-y-auto","custom-scroll",3,"innerHTML"],[1,"w-full","mt-4","py-2","bg-yellow-400","hover:bg-yellow-500","text-black","font-bold","rounded","uppercase","text-xs",3,"click"],[1,"fas","fa-print","mr-1"]],template:function(r,i){r&1&&ie(0,Nj,90,17,"div",5),r&2&&se(i.asset()?0:-1)},dependencies:[Ae,ho,Gn,In,Is,Ds],styles:[".animate-fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}"]})}}return n})();function Rj(n,e){n&1&&(w(0,"i",55),g(1," Analizando Flota... "))}function kj(n,e){n&1&&(w(0,"i",56),g(1," Generar Reporte Diario "))}function Pj(n,e){if(n&1){let t=Ee();p(0,"button",54),M("click",function(){U(t);let i=x();return B(i.generateDailyReport())}),ie(1,Rj,2,0)(2,kj,2,0),m()}if(n&2){let t=x();ce("disabled",t.isAnalyzing()),v(),se(t.isAnalyzing()?1:2)}}function Oj(n,e){if(n&1){let t=Ee();p(0,"div",26),w(1,"div",57),p(2,"div",58)(3,"button",59),M("click",function(){U(t);let i=x();return B(i.aiReport.set(null))}),g(4," Cerrar "),m(),p(5,"button",60),M("click",function(){U(t);let i=x();return B(i.copyReport())}),w(6,"i",61),g(7," Copiar "),m()()()}if(n&2){let t=x();v(),ce("innerHTML",t.aiReport(),Jr)}}var FD=(()=>{class n{constructor(){this.dataService=T(mt),this.geminiService=T(_s),this.sanitizer=T(ri),this.failureForm={economico:"",falla:"",prioridad:"Media",reporta:""},this.isAnalyzing=F(!1),this.aiReport=F(null),this.isKioskMode=this.dataService.isKioskMode}toggleKiosk(){this.dataService.toggleKioskMode()}registerFailure(){if(!this.failureForm.economico||!this.failureForm.falla){alert("Por favor complete los datos de la unidad y la falla.");return}this.dataService.addLiveFailure({economico:this.failureForm.economico.toUpperCase(),falla:this.failureForm.falla,prioridad:this.failureForm.prioridad,reporta:this.failureForm.reporta||"NOC Admin",estatus:"Abierta"}),this.failureForm={economico:"",falla:"",prioridad:"Media",reporta:""}}generateDailyReport(){return _(this,null,function*(){this.isAnalyzing.set(!0);let t=this.dataService.fleetAvailability(),r=this.dataService.forkliftFailures().filter(o=>o.estatus!=="Cerrada"),i=this.dataService.forkliftFailures().slice(0,10),s=yield this.geminiService.generateDailySummary(t,r,i);this.aiReport.set(s),this.isAnalyzing.set(!1)})}copyReport(){if(this.aiReport()){let t=document.createElement("div");t.innerHTML=this.aiReport();let r=new Blob([t.innerText],{type:"text/plain"}),i=new ClipboardItem({"text/plain":r});navigator.clipboard.write([i]).then(()=>alert("Reporte copiado al portapapeles!"))}}handleFileInput(t){return _(this,null,function*(){let r=t.target.files[0];if(r)try{let i=new FileReader;i.onload=s=>_(this,null,function*(){try{let o=yield import("./chunk-SYWW764W.js"),a=o&&(o.default??o),l=new a.Workbook;yield l.xlsx.load(s.target.result);let c=l.worksheets[0],u=[];c.eachRow((d,f)=>{f>1&&u.push({Economico:d.getCell(1).value,Marca:d.getCell(2).value,Modelo:d.getCell(3).value,Estatus:d.getCell(4).value})}),this.dataService.updateAssetsFromExcel(u),alert(`Se procesaron ${u.length} registros exitosamente.`)}catch(o){alert("Error al procesar el archivo Excel."),console.error(o)}}),i.readAsArrayBuffer(r)}catch(i){console.error("Import error",i),alert("No se pudo iniciar la importaci\xF3n.")}})}exportData(){return _(this,null,function*(){let t=this.dataService.forkliftFailures().map(h=>({ID:h.id,Unidad:h.economico,Falla:h.falla,Prioridad:h.prioridad,Estatus:h.estatus,Reporto:h.reporta,FechaIngreso:h.fechaIngreso,FechaCierre:h.fechaSalida||"-"})),r=this.dataService.assets().map(h=>({Economico:h.id,Marca:h.brand,Modelo:h.model,Serie:h.serial,Estatus:h.status.name,Desde:h.statusSince})),i=yield import("./chunk-SYWW764W.js"),s=i&&(i.default??i),o=new s.Workbook,a=o.addWorksheet("Inventario");r.length>0&&(a.columns=Object.keys(r[0]).map(h=>({header:h,key:h})),r.forEach(h=>a.addRow(h)));let l=o.addWorksheet("Reporte de Fallas");t.length>0&&(l.columns=Object.keys(t[0]).map(h=>({header:h,key:h})),t.forEach(h=>l.addRow(h)));let c=yield o.xlsx.writeBuffer(),u=new Blob([c],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),d=window.URL.createObjectURL(u),f=document.createElement("a");f.href=d,f.download=`AssetGuard_Reporte_${new Date().toISOString().slice(0,10)}.xlsx`,f.click(),window.URL.revokeObjectURL(d)})}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Oe({type:n,selectors:[["app-admin"]],decls:90,vars:18,consts:[[1,"bg-white","rounded-xl","shadow-sm","border","border-gray-100","p-8","max-w-5xl","mx-auto"],[1,"mb-8","border-b","border-gray-100","pb-4"],[1,"text-3xl","font-black","text-gray-800","tracking-tight"],[1,"text-gray-500"],[1,"bg-indigo-50","p-6","rounded-xl","shadow-sm","border","border-indigo-100","mb-8","flex","flex-col","md:flex-row","items-center","justify-between","gap-4","animate-fade-in","relative","overflow-hidden"],[1,"absolute","-right-6","-top-6","text-indigo-100","opacity-50"],[1,"fas","fa-broadcast-tower","text-9xl"],[1,"relative","z-10"],[1,"text-xl","font-bold","text-indigo-900","flex","items-center","gap-2"],[1,"bg-indigo-600","text-white","p-1.5","rounded-lg","text-xs","shadow-md"],[1,"fas","fa-desktop"],[1,"text-sm","text-indigo-700","mt-1","max-w-lg"],[1,"flex","items-center","gap-4","relative","z-10","bg-white","px-6","py-3","rounded-2xl","shadow-sm","border","border-indigo-100"],[1,"text-right"],[1,"text-[10px]","font-bold","uppercase","tracking-wider","text-gray-500"],[1,"text-sm","font-black","transition-colors"],[1,"relative","inline-flex","h-8","w-14","items-center","rounded-full","transition-colors","focus:outline-none","focus:ring-2","focus:ring-indigo-500","focus:ring-offset-2","cursor-pointer",3,"click"],[1,"inline-block","h-6","w-6","transform","rounded-full","bg-white","transition-transform","shadow-md"],[1,"bg-gradient-to-r","from-gray-900","to-slate-800","rounded-xl","p-6","text-white","shadow-xl","mb-8","relative","overflow-hidden"],[1,"absolute","top-0","right-0","p-8","opacity-10"],[1,"fas","fa-brain","text-9xl","text-white"],[1,"text-xl","font-bold","flex","items-center","gap-2","mb-2"],[1,"bg-[#ce1126]","p-1.5","rounded","text-xs"],[1,"fas","fa-robot"],[1,"text-gray-400","text-sm","mb-6","max-w-2xl"],[1,"bg-white","text-gray-900","px-6","py-3","rounded-lg","font-bold","shadow","hover:bg-gray-100","transition","flex","items-center","gap-2","disabled:opacity-50",3,"disabled"],[1,"bg-white/10","rounded-lg","p-6","border","border-white/10","backdrop-blur-sm","animate-fade-in"],[1,"bg-white","p-6","rounded-xl","shadow-lg","mb-8","border-t-4","border-[#ce1126]","border","border-gray-100"],[1,"text-lg","font-bold","mb-4","flex","items-center","gap-2","text-gray-800"],[1,"text-[#ce1126]"],[1,"fas","fa-broadcast-tower"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-4","gap-4","mb-4"],[1,"block","text-xs","font-bold","text-gray-500","uppercase","tracking-wide","mb-1"],["type","text","placeholder","Ej: M-105",1,"w-full","p-2.5","border","border-gray-300","rounded","shadow-sm","focus:ring-2","focus:ring-[#ce1126]","focus:outline-none",3,"ngModelChange","ngModel"],[1,"lg:col-span-2"],["type","text","placeholder","Describe el problema...",1,"w-full","p-2.5","border","border-gray-300","rounded","shadow-sm","focus:ring-2","focus:ring-[#ce1126]","focus:outline-none",3,"ngModelChange","ngModel"],[1,"w-full","p-2.5","border","border-gray-300","rounded","shadow-sm","focus:ring-2","focus:ring-[#ce1126]","focus:outline-none","bg-white",3,"ngModelChange","ngModel"],["value","Baja"],["value","Media"],["value","Alta"],[1,"flex","justify-between","items-center"],[1,"w-1/3"],["type","text","placeholder","Nombre Supervisor",1,"w-full","p-2.5","border","border-gray-300","rounded","shadow-sm","focus:ring-2","focus:ring-[#ce1126]","focus:outline-none",3,"ngModelChange","ngModel"],[1,"bg-[#ce1126]","hover:bg-[#a30d1d]","text-white","px-8","py-3","rounded-lg","font-bold","shadow-md","transition","transform","hover:scale-105","flex","items-center","gap-2",3,"click"],[1,"fas","fa-paper-plane"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-8"],[1,"p-6","border","border-gray-200","rounded-xl","bg-gray-50"],[1,"font-bold","text-gray-700","mb-2"],[1,"fas","fa-file-excel","text-green-600","mr-2"],[1,"text-xs","text-gray-500","mb-4"],["type","file","accept",".xlsx, .xls",1,"block","w-full","text-sm","text-gray-500","file:mr-4","file:py-2","file:px-4","file:rounded-full","file:border-0","file:text-sm","file:font-semibold","file:bg-green-50","file:text-green-700","hover:file:bg-green-100","mb-2","cursor-pointer",3,"change"],[1,"text-[10px]","text-gray-400","italic"],[1,"fas","fa-download","text-blue-600","mr-2"],[1,"w-full","py-2","bg-white","border","border-gray-300","rounded","text-gray-700","font-bold","text-sm","hover:bg-gray-100","transition",3,"click"],[1,"bg-white","text-gray-900","px-6","py-3","rounded-lg","font-bold","shadow","hover:bg-gray-100","transition","flex","items-center","gap-2","disabled:opacity-50",3,"click","disabled"],[1,"fas","fa-circle-notch","fa-spin"],[1,"fas","fa-magic"],[1,"prose","prose-invert","prose-sm","max-w-none",3,"innerHTML"],[1,"mt-4","flex","gap-3"],[1,"text-gray-400","hover:text-white","text-xs","font-bold","underline",3,"click"],[1,"text-[#ce1126]","hover:text-red-400","text-xs","font-bold","uppercase",3,"click"],[1,"fas","fa-copy","mr-1"]],template:function(r,i){r&1&&(p(0,"div",0)(1,"div",1)(2,"h2",2),g(3,"Panel de Administraci\xF3n"),m(),p(4,"p",3),g(5,"Gesti\xF3n de fallas en vivo, control de pantallas y reportes IA."),m()(),p(6,"div",4)(7,"div",5),w(8,"i",6),m(),p(9,"div",7)(10,"h3",8)(11,"span",9),w(12,"i",10),m(),g(13," Control Maestro de Pantallas "),m(),p(14,"p",11),g(15," Activa remotamente el "),p(16,"strong"),g(17,"Modo Quiosco"),m(),g(18," en las Smart TVs de la planta. Esto iniciar\xE1 la rotaci\xF3n autom\xE1tica de KPIs, Mejores Tripulaciones y Seguridad. "),m()(),p(19,"div",12)(20,"div",13)(21,"p",14),g(22," Estatus Transmisi\xF3n "),m(),p(23,"p",15),g(24),m()(),p(25,"button",16),M("click",function(){return i.toggleKiosk()}),w(26,"span",17),m()()(),p(27,"div",18)(28,"div",19),w(29,"i",20),m(),p(30,"div",7)(31,"h3",21)(32,"span",22),w(33,"i",23),g(34," GEMINI 2.0"),m(),g(35," Centro de Inteligencia "),m(),p(36,"p",24),g(37," Genera un resumen ejecutivo instant\xE1neo analizando KPIs, fallas activas y tiempos de respuesta para la junta diaria. "),m(),ie(38,Pj,3,2,"button",25)(39,Oj,8,1,"div",26),m()(),p(40,"div",27)(41,"h3",28)(42,"span",29),w(43,"i",30),m(),g(44," Registro de Falla (Torre de Control) "),m(),p(45,"div",31)(46,"div")(47,"label",32),g(48,"Unidad (ID)"),m(),p(49,"input",33),Mt("ngModelChange",function(o){return zt(i.failureForm.economico,o)||(i.failureForm.economico=o),o}),m()(),p(50,"div",34)(51,"label",32),g(52,"Descripci\xF3n de Falla"),m(),p(53,"input",35),Mt("ngModelChange",function(o){return zt(i.failureForm.falla,o)||(i.failureForm.falla=o),o}),m()(),p(54,"div")(55,"label",32),g(56,"Prioridad"),m(),p(57,"select",36),Mt("ngModelChange",function(o){return zt(i.failureForm.prioridad,o)||(i.failureForm.prioridad=o),o}),p(58,"option",37),g(59,"Baja"),m(),p(60,"option",38),g(61,"Media"),m(),p(62,"option",39),g(63,"Alta (Cr\xEDtica)"),m()()()(),p(64,"div",40)(65,"div",41)(66,"label",32),g(67,"Reporta"),m(),p(68,"input",42),Mt("ngModelChange",function(o){return zt(i.failureForm.reporta,o)||(i.failureForm.reporta=o),o}),m()(),p(69,"button",43),M("click",function(){return i.registerFailure()}),w(70,"i",44),g(71," ENVIAR ALERTA "),m()()(),p(72,"div",45)(73,"div",46)(74,"h3",47),w(75,"i",48),g(76," Importaci\xF3n Masiva "),m(),p(77,"p",49),g(78," Carga tu inventario o estatus desde Excel (.xlsx) "),m(),p(79,"input",50),M("change",function(o){return i.handleFileInput(o)}),m(),p(80,"p",51),g(81," Columnas requeridas: Economico, Marca, Modelo, Estatus "),m()(),p(82,"div",46)(83,"h3",47),w(84,"i",52),g(85," Exportar Datos "),m(),p(86,"p",49),g(87,"Descarga el reporte completo de KPIs y Fallas."),m(),p(88,"button",53),M("click",function(){return i.exportData()}),g(89," Descargar Excel "),m()()()()),r&2&&(v(23),_e("text-green-500",i.isKioskMode())("text-gray-400",!i.isKioskMode()),v(),L(" ",i.isKioskMode()?"EN VIVO (ON AIR)":"OFFLINE"," "),v(),_e("bg-indigo-600",i.isKioskMode())("bg-gray-300",!i.isKioskMode()),v(),_e("translate-x-7",i.isKioskMode())("translate-x-1",!i.isKioskMode()),v(12),se(i.aiReport()?39:38),v(11),At("ngModel",i.failureForm.economico),v(4),At("ngModel",i.failureForm.falla),v(4),At("ngModel",i.failureForm.prioridad),v(11),At("ngModel",i.failureForm.reporta))},dependencies:[Ae,In,Is,Ds,Mr,$u,Cs,_i],styles:[".animate-fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .5s ease-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}"]})}}return n})();var Fj=(n,e)=>e.id,Lj=(n,e)=>e.fecha;function Vj(n,e){if(n&1&&(p(0,"div",32)(1,"span",51),g(2),m(),g(3),m()),n&2){let t=e.$implicit;v(2),L("",t.usuario,":"),v(),L(" ",t.mensaje," ")}}function jj(n,e){if(n&1){let t=Ee();p(0,"div",17)(1,"div",19)(2,"div",20)(3,"div",21),g(4),m(),p(5,"div")(6,"h4",22),g(7),m(),p(8,"p",23),g(9),Nt(10,"date"),m()()(),p(11,"div",24)(12,"span"),g(13),m(),p(14,"span",25),g(15),m()()(),p(16,"div",26)(17,"div",27)(18,"p",28),g(19,"Diagn\xF3stico Reportado"),m(),p(20,"div",29),g(21),m(),p(22,"div",30)(23,"p",28),g(24,"Historial T\xE9cnico"),m(),p(25,"div",31),Ze(26,Vj,4,2,"div",32,Lj),m()()(),p(28,"div",33)(29,"h5",34),w(30,"i",35),g(31," Log\xEDstica de Refacciones "),m(),p(32,"div",36)(33,"div")(34,"label",37),g(35,"Orden de Compra (PO)"),m(),w(36,"input",38,0),m(),p(38,"div")(39,"label",37),g(40,"Estatus Refacci\xF3n"),m(),p(41,"select",39,1)(43,"option",40),g(44,"N/A (Solo Mano de Obra)"),m(),p(45,"option",41),g(46,"En Stock"),m(),p(47,"option",42),g(48,"Pedida a Planta"),m(),p(49,"option",43),g(50,"En Tr\xE1nsito"),m()()()(),p(51,"div",44),w(52,"input",45,2),p(54,"button",46),M("click",function(){let i=U(t).$implicit,s=dn(53);return x().addNote(i.id,s.value),B(s.value="")}),w(55,"i",47),m()(),p(56,"div",48)(57,"button",49),M("click",function(){let i=U(t).$implicit,s=dn(37),o=dn(42),a=x();return B(a.saveLogistics(i.id,s.value,o.value))}),g(58," Guardar Cambios "),m(),p(59,"button",50),M("click",function(){let i=U(t).$implicit,s=x();return B(s.closeTicket(i.id))}),g(60," Liberar "),m()()()()()}if(n&2){let t=e.$implicit;v(4),L(" ",t.economico.slice(-3)," "),v(3),Z(t.economico),v(2),Z(fn(10,10,t.fechaIngreso,"medium")),v(3),ve("px-3 py-1 rounded text-xs font-bold uppercase "+(t.prioridad==="Alta"?"bg-red-100 text-red-700":"bg-slate-100 text-slate-600")),v(),L(" ",t.prioridad," "),v(2),L(" ",t.estatus," "),v(6),L(" ",t.falla," "),v(5),Je(t.seguimiento),v(10),ce("value",t.ordenCompra||""),v(5),ce("value",t.estatusRefaccion||"N/A")}}function Uj(n,e){n&1&&(p(0,"div",18)(1,"div",52),w(2,"i",53),m(),p(3,"h3",54),g(4,"Todo limpio"),m(),p(5,"p",55),g(6,"No hay unidades pendientes en taller."),m()())}var LD=(()=>{class n{constructor(){this.dataService=T(mt),this.openFailures=this.dataService.forkliftFailures,this.pendingParts=z(()=>this.dataService.forkliftFailures().filter(t=>t.estatusRefaccion==="Pedida").length),this.criticalCount=z(()=>this.dataService.forkliftFailures().filter(t=>t.prioridad==="Alta"&&t.estatus!=="Cerrada").length)}saveLogistics(t,r,i){this.dataService.updateToyotaLogistics(t,r,i)}addNote(t,r){r&&this.dataService.addFailureUpdate(t,r,"Toyota Tech")}closeTicket(t){confirm("\xBFConfirmar liberaci\xF3n de equipo?")&&this.dataService.closeLiveFailure(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Oe({type:n,selectors:[["app-service-panel"]],decls:26,vars:4,consts:[["po",""],["status",""],["note",""],[1,"space-y-6"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4"],[1,"bg-orange-600","text-white","p-6","rounded-xl","shadow-lg","relative","overflow-hidden"],[1,"fas","fa-wrench","absolute","-right-4","-bottom-4","text-8xl","text-orange-700","opacity-50"],[1,"text-xs","uppercase","font-bold","text-orange-100"],[1,"text-4xl","font-black","mt-2"],[1,"bg-white","p-6","rounded-xl","border","border-slate-200","shadow-sm","flex","flex-col","justify-center"],[1,"text-xs","uppercase","font-bold","text-slate-400"],[1,"text-3xl","font-black","text-slate-700","mt-1"],[1,"text-3xl","font-black","text-red-500","mt-1"],[1,"bg-white","rounded-xl","shadow-sm","border","border-slate-200","overflow-hidden","min-h-[500px]"],[1,"p-4","border-b","border-slate-100","bg-slate-50","flex","justify-between","items-center"],[1,"font-bold","text-slate-700","uppercase","tracking-wide","text-sm"],[1,"divide-y","divide-slate-100"],[1,"p-6","hover:bg-slate-50","transition-colors"],[1,"py-20","text-center"],[1,"flex","flex-col","md:flex-row","justify-between","items-start","md:items-center","mb-4","gap-4"],[1,"flex","items-center","gap-4"],[1,"w-12","h-12","rounded-lg","bg-slate-900","text-white","flex","items-center","justify-center","font-black","text-lg"],[1,"font-black","text-xl","text-slate-800"],[1,"text-xs","text-slate-500"],[1,"flex","gap-2"],[1,"px-3","py-1","rounded","text-xs","font-bold","uppercase","bg-blue-100","text-blue-700"],[1,"grid","grid-cols-1","lg:grid-cols-3","gap-8"],[1,"lg:col-span-1"],[1,"text-xs","font-bold","text-slate-400","uppercase","mb-2"],[1,"bg-slate-50","p-3","rounded-lg","border","border-slate-200","text-sm","text-slate-700","font-medium"],[1,"mt-4"],[1,"space-y-2","max-h-32","overflow-y-auto","custom-scroll","text-xs"],[1,"p-2","rounded","bg-slate-50","border","border-slate-100"],[1,"lg:col-span-2","bg-slate-50","rounded-xl","p-5","border","border-slate-200"],[1,"font-bold","text-slate-700","mb-4","flex","items-center","gap-2"],[1,"fas","fa-box-open"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4","mb-4"],[1,"text-xs","font-bold","text-slate-400","uppercase"],["type","text",1,"w-full","mt-1","p-2","rounded","border","border-slate-300","text-sm","focus:ring-2","focus:ring-orange-500",3,"value"],[1,"w-full","mt-1","p-2","rounded","border","border-slate-300","text-sm","bg-white",3,"value"],["value","N/A"],["value","En Stock"],["value","Pedida"],["value","Por Recibir"],[1,"flex","gap-2","mt-4"],["type","text","placeholder","Agregar nota t\xE9cnica...",1,"flex-1","p-2","rounded","border","border-slate-300","text-sm"],[1,"px-4","py-2","bg-slate-200","text-slate-700","font-bold","rounded","text-xs","hover:bg-slate-300","transition",3,"click"],[1,"fas","fa-comment"],[1,"flex","gap-3","mt-4","pt-4","border-t","border-slate-200"],[1,"flex-1","py-2","bg-slate-800","text-white","rounded","font-bold","text-xs","uppercase","hover:bg-slate-900","transition",3,"click"],[1,"px-6","py-2","bg-green-600","text-white","rounded","font-bold","text-xs","uppercase","hover:bg-green-700","transition",3,"click"],[1,"font-bold","text-orange-600"],[1,"inline-flex","items-center","justify-center","w-20","h-20","rounded-full","bg-slate-100","text-slate-300","mb-4"],[1,"fas","fa-check","text-4xl"],[1,"font-bold","text-slate-600"],[1,"text-slate-400","text-sm"]],template:function(r,i){r&1&&(p(0,"div",3)(1,"div",4)(2,"div",5),w(3,"i",6),p(4,"p",7),g(5,"Unidades en Taller"),m(),p(6,"p",8),g(7),m()(),p(8,"div",9)(9,"p",10),g(10,"Refacciones Pendientes"),m(),p(11,"p",11),g(12),m()(),p(13,"div",9)(14,"p",10),g(15,"Prioridad Alta"),m(),p(16,"p",12),g(17),m()()(),p(18,"div",13)(19,"div",14)(20,"h3",15),g(21,"\xD3rdenes de Trabajo Activas"),m()(),p(22,"div",16),Ze(23,jj,61,13,"div",17,Fj,!1,Uj,7,0,"div",18),m()()()),r&2&&(v(7),Z(i.openFailures().length),v(5),Z(i.pendingParts()),v(5),Z(i.criticalCount()),v(6),Je(i.openFailures()))},dependencies:[Ae,Gn,In,Is,Ds],encapsulation:2})}}return n})();var Bj=(n,e)=>e.id,Hj=(n,e)=>e.name;function $j(n,e){n&1&&(p(0,"span",19),w(1,"span",27)(2,"span",28),m())}function zj(n,e){n&1&&w(0,"span",20)}function Wj(n,e){n&1&&(p(0,"div",26)(1,"div",29),w(2,"i",30),m(),p(3,"span",31),g(4,"En Reparaci\xF3n"),m()())}function Gj(n,e){if(n&1){let t=Ee();p(0,"button",17),M("click",function(){let i=U(t).$implicit,s=x(2);return B(s.selectAsset(i.id))}),p(1,"div",18),ie(2,$j,3,0,"span",19)(3,zj,1,0,"span",20),m(),p(4,"div",21),w(5,"i",22),m(),p(6,"div",23)(7,"span",24),g(8),m(),p(9,"span",25),g(10),m()(),ie(11,Wj,5,0,"div",26),m()}if(n&2){let t=e.$implicit;v(2),se(t.status.name==="Taller"?2:3),v(6),Z(t.id),v(2),Z(t.model),v(),se(t.status.name!=="Operativo"?11:-1)}}function qj(n,e){if(n&1&&(p(0,"div",12)(1,"h3",14),g(2,"1. Selecciona la unidad a reportar"),m(),p(3,"div",15),Ze(4,Gj,12,4,"button",16,Bj),m()()),n&2){let t=x();v(4),Je(t.assets())}}function Kj(n,e){if(n&1){let t=Ee();p(0,"button",50),M("click",function(){let i=U(t).$implicit,s=x(2);return B(s.category.set(i.name))}),w(1,"i"),p(2,"span",51),g(3),m()()}if(n&2){let t=e.$implicit,r=x(2);ve(r.getCategoryClass(t.name)),v(),ve("fas "+t.icon+" text-2xl mb-1"),v(2),Z(t.name)}}function Yj(n,e){if(n&1){let t=Ee();p(0,"div",13)(1,"div",32)(2,"div",33),w(3,"i",34),m(),p(4,"h3",35),g(5),m(),p(6,"span",36),g(7," Reportando Falla "),m(),p(8,"div",37)(9,"button",38),M("click",function(){U(t);let i=x();return B(i.step.set(1))}),w(10,"i",39),g(11," Cambiar Unidad "),m()()(),p(12,"div",40)(13,"div",41)(14,"label",42)(15,"span",43),g(16,"1"),m(),g(17," Selecciona el Sistema Afectado "),m(),p(18,"div",44),Ze(19,Kj,4,5,"button",45,Hj),m()(),p(21,"div",46)(22,"label",42)(23,"span",43),g(24,"2"),m(),g(25," Detalles Adicionales (Opcional) "),m(),p(26,"textarea",47),Mt("ngModelChange",function(i){U(t);let s=x();return zt(s.notes,i)||(s.notes=i),B(i)}),m()(),p(27,"button",48),M("click",function(){U(t);let i=x();return B(i.submitReport())}),p(28,"span"),g(29,"ENVIAR REPORTE"),m(),w(30,"i",49),m()()()}if(n&2){let t=x();v(5),Z(t.selectedId()),v(14),Je(t.categories),v(7),At("ngModel",t.notes),v(),ce("disabled",!t.category())}}var VD=(()=>{class n{constructor(){this.dataService=T(mt),this.assets=this.dataService.assets,this.step=F(1),this.selectedId=F(""),this.category=F(""),this.notes="",this.categories=[{name:"Llantas",icon:"fa-truck-monster"},{name:"Frenos",icon:"fa-ban"},{name:"Motor",icon:"fa-cogs"},{name:"Hidr\xE1ulico",icon:"fa-oil-can"},{name:"El\xE9ctrico",icon:"fa-bolt"},{name:"Da\xF1o F\xEDsico",icon:"fa-car-crash"}]}selectAsset(t){this.dataService.getAsset(t)?.status.name!=="Taller"&&(this.selectedId.set(t),this.step.set(2))}submitReport(){if(!this.category())return;let t=`[${this.category()}] ${this.notes||"Sin detalles adicionales."}`;this.dataService.addLiveFailure({economico:this.selectedId(),falla:t,prioridad:this.category()==="Frenos"?"Alta":"Media",reporta:"Operador M\xF3vil",estatus:"Abierta"}),alert("Reporte enviado exitosamente. Toyota ha sido notificado."),this.step.set(1),this.category.set(""),this.notes="",this.selectedId.set("")}getCategoryClass(t){return this.category()===t?"bg-gradient-to-br from-[#ce1126] to-[#a30d1d] border-transparent text-white shadow-lg shadow-red-900/30 scale-105 z-10":"bg-white border-slate-200 text-slate-500 hover:border-red-200 hover:bg-red-50 hover:text-red-600"}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Oe({type:n,selectors:[["app-solicitor-panel"]],decls:19,vars:7,consts:[[1,"w-full","h-full","bg-slate-50","flex","flex-col","overflow-hidden"],[1,"bg-[#ce1126]","text-white","px-6","py-3","shadow-md","flex","justify-between","items-center","shrink-0","z-20"],[1,"flex","items-center","gap-3"],[1,"w-8","h-8","bg-white/20","rounded-lg","flex","items-center","justify-center"],[1,"fas","fa-mobile-alt","text-sm"],[1,"text-base","font-black","uppercase","tracking-widest","leading-none"],[1,"text-[10px]","text-red-100","opacity-90"],[1,"flex","items-center","gap-3","bg-black/10","px-3","py-1","rounded-full"],[1,"text-[10px]","font-bold","opacity-80","uppercase","tracking-wide"],[1,"flex","gap-1.5"],[1,"w-2","h-2","rounded-full","transition-colors","duration-300"],[1,"flex-1","overflow-hidden","relative"],[1,"h-full","overflow-y-auto","custom-scroll","p-4","md:p-6","bg-slate-100/50"],[1,"h-full","flex","flex-col","md:flex-row","animate-fade-in","divide-y","md:divide-y-0","md:divide-x","divide-slate-200"],[1,"text-sm","font-bold","text-slate-500","uppercase","tracking-wide","mb-4","pl-1"],[1,"grid","grid-cols-2","md:grid-cols-3","lg:grid-cols-4","xl:grid-cols-5","gap-4"],[1,"group","relative","bg-white","rounded-xl","shadow-sm","border-2","border-transparent","hover:border-red-500","focus:border-red-500","transition-all","p-4","flex","flex-col","items-center","justify-between","h-36","md:h-40","hover:shadow-md"],[1,"group","relative","bg-white","rounded-xl","shadow-sm","border-2","border-transparent","hover:border-red-500","focus:border-red-500","transition-all","p-4","flex","flex-col","items-center","justify-between","h-36","md:h-40","hover:shadow-md",3,"click"],[1,"absolute","top-3","right-3","flex","gap-1"],[1,"flex","h-2.5","w-2.5"],["title","Operativo",1,"w-2.5","h-2.5","rounded-full","bg-emerald-500","shadow-sm"],[1,"mt-2","text-slate-200","group-hover:text-red-50","transition-colors","duration-300"],[1,"fas","fa-truck-loading","text-5xl"],[1,"text-center","z-10","w-full"],[1,"block","text-xl","md:text-2xl","font-black","text-slate-800","tracking-tighter","group-hover:scale-110","transition-transform"],[1,"block","text-[10px]","text-slate-500","font-mono","mt-1","border-t","border-slate-100","pt-1","mx-4"],[1,"absolute","inset-0","bg-slate-50/90","backdrop-blur-[1px]","rounded-[10px]","flex","flex-col","items-center","justify-center","z-20","cursor-not-allowed","border-2","border-slate-100"],[1,"animate-ping","absolute","inline-flex","h-full","w-full","rounded-full","bg-red-400","opacity-75"],[1,"relative","inline-flex","rounded-full","h-2.5","w-2.5","bg-red-500"],[1,"bg-white","p-2","rounded-full","shadow-sm","mb-2"],[1,"fas","fa-lock","text-slate-400","text-lg"],[1,"text-[10px]","font-bold","text-slate-500","uppercase","tracking-wide"],[1,"md:w-1/3","lg:w-1/4","bg-white","p-6","flex","flex-col","justify-center","items-center","text-center","shrink-0","shadow-[4px_0_24px_rgba(0,0,0,0.02)]","z-10"],[1,"w-24","h-24","rounded-full","bg-slate-50","border","border-slate-100","shadow-inner","flex","items-center","justify-center","mb-6"],[1,"fas","fa-truck-moving","text-4xl","text-slate-700"],[1,"text-4xl","font-black","text-slate-800","tracking-tight"],[1,"inline-block","mt-2","px-3","py-1","rounded-full","bg-red-50","text-red-600","text-[10px]","font-bold","uppercase","tracking-widest","border","border-red-100"],[1,"mt-auto","w-full","pt-8"],[1,"w-full","px-6","py-3","rounded-xl","border","border-slate-200","text-slate-500","text-xs","font-bold","hover:bg-slate-50","hover:text-slate-800","transition","flex","items-center","justify-center","gap-2","group",3,"click"],[1,"fas","fa-arrow-left","group-hover:-translate-x-1","transition-transform"],[1,"flex-1","bg-[#f8fafc]","p-6","md:p-8","overflow-y-auto","custom-scroll","flex","flex-col","h-full"],[1,"mb-6","shrink-0"],[1,"flex","items-center","gap-2","text-xs","font-bold","text-slate-400","uppercase","mb-3","px-1"],[1,"w-5","h-5","rounded-full","bg-slate-200","text-slate-500","flex","items-center","justify-center","text-[10px]"],[1,"grid","grid-cols-2","sm:grid-cols-3","lg:grid-cols-6","gap-3"],[1,"p-2","rounded-xl","border","transition-all","duration-200","flex","flex-col","items-center","justify-center","gap-2","h-24","hover:shadow-lg",3,"class"],[1,"mb-6","flex-1","min-h-[120px]","flex","flex-col"],["placeholder","Ej: Ruidos extra\xF1os al elevar la carga...",1,"w-full","flex-1","p-4","bg-white","border","border-slate-200","rounded-xl","focus:ring-2","focus:ring-[#ce1126]/20","focus:border-[#ce1126]","outline-none","resize-none","text-sm","transition-shadow","shadow-sm","placeholder:text-slate-300",3,"ngModelChange","ngModel"],[1,"w-full","py-4","bg-gradient-to-r","from-[#ce1126]","to-[#a30d1d]","hover:from-[#a30d1d]","hover:to-[#8a0b18]","disabled:from-slate-300","disabled:to-slate-300","disabled:text-slate-500","text-white","rounded-xl","font-bold","text-lg","shadow-xl","shadow-red-900/20","hover:shadow-red-900/40","transition-all","flex","items-center","justify-center","gap-3","transform","hover:-translate-y-0.5","active:translate-y-0","disabled:transform-none",3,"click","disabled"],[1,"fas","fa-paper-plane"],[1,"p-2","rounded-xl","border","transition-all","duration-200","flex","flex-col","items-center","justify-center","gap-2","h-24","hover:shadow-lg",3,"click"],[1,"text-[10px]","font-bold","uppercase","leading-tight","text-center"]],template:function(r,i){r&1&&(p(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),w(4,"i",4),m(),p(5,"div")(6,"h2",5),g(7,"Reporte R\xE1pido"),m(),p(8,"p",6),g(9,"Terminal Operador"),m()()(),p(10,"div",7)(11,"span",8),g(12),m(),p(13,"div",9),w(14,"div",10)(15,"div",10),m()()(),p(16,"div",11),ie(17,qj,6,0,"div",12)(18,Yj,31,3,"div",13),m()()),r&2&&(v(12),L("Paso ",i.step()," de 2"),v(2),ve(i.step()>=1?"bg-white":"bg-white/30"),v(),ve(i.step()>=2?"bg-white":"bg-white/30"),v(2),se(i.step()===1?17:-1),v(),se(i.step()===2?18:-1))},dependencies:[Ae,In,Mr,Cs,_i],styles:[".animate-fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .4s cubic-bezier(.16,1,.3,1)}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(5px)}to{opacity:1;transform:translateY(0)}}"]})}}return n})();function Qj(n,e){if(n&1&&(p(0,"div",11),w(1,"i",26),g(2),m()),n&2){let t=x();v(2),L(" ",t.authService.error()," ")}}function Zj(n,e){if(n&1){let t=Ee();p(0,"div")(1,"label",13),g(2,"Nombre Completo"),m(),p(3,"div",14),w(4,"i",27),p(5,"input",28),Mt("ngModelChange",function(i){U(t);let s=x();return zt(s.displayName,i)||(s.displayName=i),B(i)}),m()()()}if(n&2){let t=x();v(5),At("ngModel",t.displayName)}}function Jj(n,e){n&1&&(w(0,"i",29),g(1," Procesando... "))}function Xj(n,e){if(n&1&&(w(0,"i"),g(1)),n&2){let t=x();ve(t.isLoginMode()?"fas fa-sign-in-alt":"fas fa-user-plus"),v(),L(" ",t.isLoginMode()?"Iniciar Sesi\xF3n":"Crear Cuenta"," ")}}var jD=(()=>{class n{constructor(){this.authService=T(Ru),this.email="",this.password="",this.displayName="",this.isLoginMode=F(!0),this.showPassword=F(!1),this.isSubmitting=F(!1)}onSubmit(){return _(this,null,function*(){if(!(!this.email||!this.password)){if(this.isSubmitting.set(!0),this.isLoginMode())yield this.authService.login(this.email,this.password);else{if(!this.displayName){this.isSubmitting.set(!1);return}yield this.authService.register(this.email,this.password,this.displayName)}this.isSubmitting.set(!1)}})}loginDemo(){return _(this,null,function*(){this.isSubmitting.set(!0),yield this.authService.loginAsDemo(),this.isSubmitting.set(!1)})}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Oe({type:n,selectors:[["app-login"]],decls:44,vars:14,consts:[[1,"min-h-screen","bg-gradient-to-br","from-slate-900","via-slate-800","to-red-900","flex","items-center","justify-center","p-4"],[1,"absolute","inset-0","opacity-10","bg-[radial-gradient(circle_at_1px_1px,rgba(255,255,255,0.15)_1px,transparent_0)]","bg-[size:40px_40px]"],[1,"relative","w-full","max-w-md"],[1,"text-center","mb-8"],[1,"inline-flex","items-center","justify-center","w-20","h-20","bg-red-600","rounded-2xl","mb-4","shadow-2xl","shadow-red-600/30"],[1,"fas","fa-shield-alt","text-4xl","text-white"],[1,"text-3xl","font-black","text-white","tracking-tight"],[1,"text-slate-400","mt-1"],[1,"bg-white/10","backdrop-blur-xl","rounded-3xl","p-8","shadow-2xl","border","border-white/20"],[1,"flex","gap-2","mb-6"],[3,"click"],[1,"mb-4","p-3","bg-red-500/20","border","border-red-500/50","rounded-xl","flex","items-center","gap-2","text-red-300","text-sm"],[1,"space-y-4",3,"ngSubmit"],[1,"block","text-sm","font-medium","text-slate-300","mb-1.5"],[1,"relative"],[1,"fas","fa-envelope","absolute","left-4","top-1/2","-translate-y-1/2","text-slate-400"],["type","email","name","email","placeholder","tu@email.com","required","","autocomplete","email",1,"w-full","pl-11","pr-4","py-3","bg-white/10","border","border-white/20","rounded-xl","text-white","placeholder-slate-500","focus:outline-none","focus:ring-2","focus:ring-red-500","focus:border-transparent","transition-all",3,"ngModelChange","ngModel"],[1,"fas","fa-lock","absolute","left-4","top-1/2","-translate-y-1/2","text-slate-400"],["name","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022","required","","minlength","6","autocomplete","current-password",1,"w-full","pl-11","pr-12","py-3","bg-white/10","border","border-white/20","rounded-xl","text-white","placeholder-slate-500","focus:outline-none","focus:ring-2","focus:ring-red-500","focus:border-transparent","transition-all",3,"ngModelChange","type","ngModel"],["type","button",1,"absolute","right-4","top-1/2","-translate-y-1/2","text-slate-400","hover:text-white","transition-colors",3,"click"],["type","submit",1,"w-full","py-3.5","bg-gradient-to-r","from-red-600","to-red-500","hover:from-red-500","hover:to-red-400","text-white","font-bold","rounded-xl","shadow-lg","shadow-red-600/30","transition-all","duration-300","disabled:opacity-50","disabled:cursor-not-allowed","flex","items-center","justify-center","gap-2",3,"disabled"],[1,"mt-6","pt-6","border-t","border-white/10"],[1,"text-center","text-slate-400","text-sm","mb-3"],[1,"w-full","py-2.5","bg-slate-700/50","hover:bg-slate-700","text-slate-300","hover:text-white","font-medium","rounded-xl","transition-all","flex","items-center","justify-center","gap-2",3,"click","disabled"],[1,"fas","fa-play-circle"],[1,"text-center","text-slate-500","text-xs","mt-6"],[1,"fas","fa-exclamation-circle"],[1,"fas","fa-user","absolute","left-4","top-1/2","-translate-y-1/2","text-slate-400"],["type","text","name","displayName","placeholder","Tu nombre",1,"w-full","pl-11","pr-4","py-3","bg-white/10","border","border-white/20","rounded-xl","text-white","placeholder-slate-500","focus:outline-none","focus:ring-2","focus:ring-red-500","focus:border-transparent","transition-all",3,"ngModelChange","ngModel"],[1,"fas","fa-circle-notch","fa-spin"]],template:function(r,i){r&1&&(p(0,"div",0),w(1,"div",1),p(2,"div",2)(3,"div",3)(4,"div",4),w(5,"i",5),m(),p(6,"h1",6),g(7,"ASSET GUARD"),m(),p(8,"p",7),g(9,"Sistema de Gesti\xF3n de Activos"),m()(),p(10,"div",8)(11,"div",9)(12,"button",10),M("click",function(){return i.isLoginMode.set(!0)}),g(13," Iniciar Sesi\xF3n "),m(),p(14,"button",10),M("click",function(){return i.isLoginMode.set(!1)}),g(15," Registrarse "),m()(),ie(16,Qj,3,1,"div",11),p(17,"form",12),M("ngSubmit",function(){return i.onSubmit()}),ie(18,Zj,6,1,"div"),p(19,"div")(20,"label",13),g(21,"Correo Electr\xF3nico"),m(),p(22,"div",14),w(23,"i",15),p(24,"input",16),Mt("ngModelChange",function(o){return zt(i.email,o)||(i.email=o),o}),m()()(),p(25,"div")(26,"label",13),g(27,"Contrase\xF1a"),m(),p(28,"div",14),w(29,"i",17),p(30,"input",18),Mt("ngModelChange",function(o){return zt(i.password,o)||(i.password=o),o}),m(),p(31,"button",19),M("click",function(){return i.showPassword.set(!i.showPassword())}),w(32,"i"),m()()(),p(33,"button",20),ie(34,Jj,2,0)(35,Xj,2,3),m()(),p(36,"div",21)(37,"p",22),g(38,"\xBFSolo quieres probar?"),m(),p(39,"button",23),M("click",function(){return i.loginDemo()}),w(40,"i",24),g(41," Acceso Demo "),m()()(),p(42,"p",25),g(43," \xA9 2024 Asset Guard Corporate Edition. Todos los derechos reservados. "),m()()()),r&2&&(v(12),ve(i.isLoginMode()?"flex-1 py-2.5 rounded-xl font-semibold text-white bg-red-600 shadow-lg":"flex-1 py-2.5 rounded-xl font-semibold text-slate-400 hover:text-white transition-colors"),v(2),ve(i.isLoginMode()?"flex-1 py-2.5 rounded-xl font-semibold text-slate-400 hover:text-white transition-colors":"flex-1 py-2.5 rounded-xl font-semibold text-white bg-red-600 shadow-lg"),v(2),se(i.authService.error()?16:-1),v(2),se(i.isLoginMode()?-1:18),v(6),At("ngModel",i.email),v(6),ce("type",i.showPassword()?"text":"password"),At("ngModel",i.password),v(2),ve(i.showPassword()?"fas fa-eye-slash":"fas fa-eye"),v(),ce("disabled",i.isSubmitting()),v(),se(i.isSubmitting()?34:35),v(5),ce("disabled",i.isSubmitting()))},dependencies:[Ae,In,ND,Mr,Cs,DD,cy,uy,_i,ly],encapsulation:2})}}return n})();function e3(n,e){n&1&&(p(0,"div",0)(1,"div",2)(2,"div",3),w(3,"i",4),m(),p(4,"h1",5),g(5,"ASSET GUARD"),m(),p(6,"div",6),w(7,"i",7),p(8,"span",8),g(9,"Iniciando sistema..."),m()()()())}function t3(n,e){n&1&&w(0,"app-login")}function n3(n,e){n&1&&(p(0,"span",50),w(1,"span",82)(2,"span",83),m())}function r3(n,e){n&1&&w(0,"app-dashboard")}function i3(n,e){n&1&&w(0,"app-service-panel")}function s3(n,e){n&1&&w(0,"app-asset-list")}function o3(n,e){n&1&&w(0,"app-solicitor-panel")}function a3(n,e){n&1&&w(0,"app-admin")}function l3(n,e){n&1&&(p(0,"div",63)(1,"div",84),w(2,"i",85)(3,"i",86),m(),p(4,"p",87),g(5,"Analizando flota en tiempo real..."),m()())}function c3(n,e){if(n&1&&w(0,"div",64),n&2){let t=x(2);ce("innerHTML",t.aiInsights(),Jr)}}function u3(n,e){n&1&&(p(0,"div",65)(1,"div",88),w(2,"i",89),m(),p(3,"div")(4,"h4",90),g(5,"\xBFC\xF3mo puedo ayudarte?"),m(),p(6,"p",91),g(7," Utilizo los datos actuales de fallas, costos y disponibilidad para generarte reportes al instante. "),m()()())}function d3(n,e){if(n&1&&(p(0,"div",81)(1,"div",92),w(2,"app-asset-detail",93),m()()),n&2){let t=x(2);v(2),ce("assetId",t.selectedAssetId())}}function f3(n,e){if(n&1){let t=Ee();p(0,"div",9)(1,"aside",10)(2,"div")(3,"div",11),w(4,"i",12),p(5,"span",13),g(6,"ASSET GUARD"),m()(),p(7,"nav",14)(8,"button",15),M("click",function(){U(t);let i=x();return B(i.setView("dashboard"))}),w(9,"i",16),p(10,"span",17),g(11,"Resumen Ejecutivo"),m(),p(12,"div",18),g(13,"Resumen"),m()(),p(14,"button",15),M("click",function(){U(t);let i=x();return B(i.setView("service"))}),w(15,"i",19),p(16,"span",17),g(17,"Taller & Fallas"),m(),p(18,"div",18),g(19,"Taller"),m()(),p(20,"button",15),M("click",function(){U(t);let i=x();return B(i.setView("assets"))}),w(21,"i",20),p(22,"span",17),g(23,"Inventario Flota"),m(),p(24,"div",18),g(25,"Flota"),m()(),p(26,"button",15),M("click",function(){U(t);let i=x();return B(i.setView("solicitor"))}),w(27,"i",21),p(28,"span",17),g(29,"App Operador"),m()()()(),p(30,"div",22)(31,"button",23),M("click",function(){U(t);let i=x();return B(i.setView("settings"))}),w(32,"i",24),p(33,"span",25),g(34,"Configuraci\xF3n"),m()(),p(35,"div",26)(36,"p",27),g(37,"Planta Cuautitl\xE1n"),m(),p(38,"div",28),g(39,"v2.1.0 Enterprise"),m()()()(),p(40,"div",29)(41,"header",30)(42,"div",31)(43,"div",32)(44,"h2",33),g(45),m(),p(46,"div",34)(47,"div",35),w(48,"span",36)(49,"span",37),m(),p(50,"span",38),g(51),m(),p(52,"div",39),g(53," Estado de conexi\xF3n con Firebase Realtime DB "),m()()()(),p(54,"div",40)(55,"div",41)(56,"div")(57,"p",42),g(58,"Ing. Sergio Guadarrama"),m(),p(59,"span",43),g(60,"Supervisor Operaciones"),m()(),p(61,"div",44),w(62,"i",45),m()(),w(63,"div",46),p(64,"button",47),M("click",function(){U(t);let i=x();return B(i.toggleAiPanel())}),w(65,"i",48),p(66,"span",49),g(67,"Asistente"),m(),ie(68,n3,3,0,"span",50),m()()(),p(69,"main",51)(70,"div",52),ie(71,r3,1,0,"app-dashboard")(72,i3,1,0,"app-service-panel")(73,s3,1,0,"app-asset-list")(74,o3,1,0,"app-solicitor-panel")(75,a3,1,0,"app-admin"),m()(),p(76,"div",53)(77,"div",54)(78,"div",55)(79,"div",56),w(80,"i",57),m(),p(81,"div")(82,"h3",58),g(83,"Gemini Assistant"),m(),p(84,"p",59),g(85,"AssetGuard Intelligence"),m()()(),p(86,"button",60),M("click",function(){U(t);let i=x();return B(i.toggleAiPanel())}),w(87,"i",61),m()(),p(88,"div",62),ie(89,l3,6,0,"div",63)(90,c3,1,1,"div",64)(91,u3,8,0,"div",65),m(),p(92,"div",66)(93,"p",67),g(94,"Acciones Sugeridas"),m(),p(95,"button",68),M("click",function(){U(t);let i=x();return B(i.generateExecutiveSummary())}),p(96,"div",69),w(97,"i",70),m(),p(98,"div")(99,"span",71),g(100,"Resumen Ejecutivo del D\xEDa"),m(),p(101,"span",72),g(102,"Estado general y cumplimiento"),m()()(),p(103,"button",73),M("click",function(){U(t);let i=x();return B(i.generateExecutiveSummary())}),p(104,"div",74),w(105,"i",75),m(),p(106,"div")(107,"span",71),g(108,"Explicar Riesgos Operativos"),m(),p(109,"span",76),g(110,"Causas de baja disponibilidad"),m()()(),p(111,"button",77),M("click",function(){U(t);let i=x();return B(i.generateExecutiveSummary())}),p(112,"div",78),w(113,"i",79),m(),p(114,"div")(115,"span",71),g(116,"Sugerir Acciones de Mejora"),m(),p(117,"span",80),g(118,"Optimizaci\xF3n de flota"),m()()()()(),ie(119,d3,3,1,"div",81),m()()}if(n&2){let t,r=x();_e("dark",r.plantMode()),v(8),_e("border-[#ce1126]",r.currentView()==="dashboard")("bg-slate-800",r.currentView()==="dashboard")("text-white",r.currentView()==="dashboard")("border-transparent",r.currentView()!=="dashboard")("hover:bg-slate-800",r.currentView()!=="dashboard"),v(),_e("text-[#ce1126]",r.currentView()==="dashboard"),v(5),_e("border-orange-500",r.currentView()==="service")("bg-slate-800",r.currentView()==="service")("text-white",r.currentView()==="service")("border-transparent",r.currentView()!=="service")("hover:bg-slate-800",r.currentView()!=="service"),v(),_e("text-orange-500",r.currentView()==="service"),v(5),_e("border-blue-500",r.currentView()==="assets")("bg-slate-800",r.currentView()==="assets")("text-white",r.currentView()==="assets")("border-transparent",r.currentView()!=="assets")("hover:bg-slate-800",r.currentView()!=="assets"),v(),_e("text-blue-500",r.currentView()==="assets"),v(5),_e("border-slate-500",r.currentView()==="solicitor")("bg-slate-800",r.currentView()==="solicitor")("text-white",r.currentView()==="solicitor")("border-transparent",r.currentView()!=="solicitor")("hover:bg-slate-800",r.currentView()!=="solicitor"),v(),_e("text-slate-400",r.currentView()==="solicitor"),v(18),Z(r.viewTitle),v(3),_e("bg-green-500",r.connectionStatus()==="online")("bg-amber-500",r.connectionStatus()==="syncing")("bg-red-500",r.connectionStatus()==="offline"),v(),_e("bg-green-500",r.connectionStatus()==="online")("bg-amber-500",r.connectionStatus()==="syncing")("bg-red-500",r.connectionStatus()==="offline"),v(2),L(" ",r.syncText()," "),v(17),se(r.aiLoading()?68:-1),v(3),se((t=r.currentView())==="dashboard"?71:t==="service"?72:t==="assets"?73:t==="solicitor"?74:t==="settings"?75:-1),v(5),_e("translate-x-full",!r.showAiPanel())("translate-x-0",r.showAiPanel()),v(13),se(r.aiLoading()?89:r.aiInsights()?90:91),v(30),se(r.selectedAssetId()?119:-1)}}var UD=(()=>{class n{constructor(){this.dataService=T(mt),this.geminiService=T(_s),this.authService=T(Ru),this.sanitizer=T(ri),this.isAuthenticated=this.authService.isAuthenticated,this.isAuthLoading=this.authService.isLoading,this.currentUser=this.authService.currentUser,this.currentView=F("dashboard"),this.selectedAssetId=F(null),this.showAiPanel=F(!1),this.connectionStatus=this.dataService.connectionStatus,this.lastUpdate=this.dataService.lastUpdate,this.plantMode=this.dataService.plantMode,this.failures=this.dataService.forkliftFailures,this.aiInsights=F(null),this.aiLoading=F(!1),this.previousFailureCount=0,this.syncText=z(()=>this.connectionStatus()==="online"?"Conectado (Firebase RTDB)":this.connectionStatus()==="syncing"?"Sincronizando...":"Modo Offline (Solo Lectura)"),ei(()=>{let t=this.failures();if(t.length>this.previousFailureCount){let r=t[0];r.estatus==="Abierta"&&this.previousFailureCount>0&&this.playAlert(r.prioridad==="Alta")}this.previousFailureCount=t.length}),window.addEventListener("asset-selected",t=>this.selectedAssetId.set(t.detail)),window.addEventListener("asset-closed",()=>this.selectedAssetId.set(null))}setView(t){this.currentView.set(t),this.selectedAssetId.set(null),t==="dashboard"&&!this.plantMode()&&this.dataService.togglePlantMode(),t!=="dashboard"&&this.plantMode()&&this.dataService.togglePlantMode()}toggleAiPanel(){this.showAiPanel.update(t=>!t),this.showAiPanel()&&this.aiInsights()}generateExecutiveSummary(){return _(this,null,function*(){this.aiLoading.set(!0);let t=this.dataService.kpiData(),r=this.dataService.fleetAvailability(),i=this.failures().filter(o=>o.estatus!=="Cerrada"),s=yield this.geminiService.generateExecutiveReport(t,i,r);this.aiInsights.set(this.sanitizer.bypassSecurityTrustHtml(s)),this.aiLoading.set(!1)})}playAlert(t){new Audio(t?"https://assets.mixkit.co/active_storage/sfx/2869/2869-preview.mp3":"https://assets.mixkit.co/active_storage/sfx/2345/2345-preview.mp3").play().catch(()=>{})}logout(){return _(this,null,function*(){yield this.authService.logout()})}get viewTitle(){switch(this.currentView()){case"dashboard":return"Centro de Monitoreo (NOC)";case"assets":return"Inventario de Flota";case"service":return"Gesti\xF3n T\xE9cnica Toyota";case"solicitor":return"App Operador";case"settings":return"Configuraci\xF3n";default:return"AssetGuard"}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Oe({type:n,selectors:[["app-root"]],decls:3,vars:1,consts:[[1,"min-h-screen","bg-gradient-to-br","from-slate-900","via-slate-800","to-red-900","flex","items-center","justify-center"],[1,"flex","h-screen","bg-slate-50","dark:bg-[#0f172a]","font-sans","overflow-hidden","transition-colors","duration-500",3,"dark"],[1,"text-center"],[1,"inline-flex","items-center","justify-center","w-24","h-24","bg-red-600","rounded-2xl","mb-6","shadow-2xl","shadow-red-600/30"],[1,"fas","fa-shield-alt","text-5xl","text-white"],[1,"text-4xl","font-black","text-white","tracking-tight","mb-2"],[1,"flex","items-center","justify-center","gap-2","text-slate-400"],[1,"fas","fa-circle-notch","fa-spin"],[1,"text-sm"],[1,"flex","h-screen","bg-slate-50","dark:bg-[#0f172a]","font-sans","overflow-hidden","transition-colors","duration-500"],[1,"w-20","lg:w-64","bg-slate-900","text-slate-300","flex","flex-col","justify-between","shrink-0","z-30","transition-all","duration-300","shadow-xl"],[1,"h-16","flex","items-center","justify-center","lg:justify-start","lg:px-6","border-b","border-slate-800","bg-slate-950"],[1,"fas","fa-network-wired","text-[#ce1126]","text-xl","shadow-lg","shadow-red-900/50","rounded-full"],[1,"ml-3","font-black","text-white","italic","text-lg","hidden","lg:block","tracking-tighter"],[1,"p-2","lg:p-4","space-y-1","mt-2"],[1,"w-full","flex","items-center","p-3","rounded-lg","transition-all","group","relative","border-l-4",3,"click"],[1,"fas","fa-chart-pie","w-6","text-center"],[1,"ml-3","text-sm","font-bold","hidden","lg:block"],[1,"lg:hidden","absolute","left-14","bg-slate-900","text-white","text-xs","px-2","py-1","rounded","shadow-lg","opacity-0","group-hover:opacity-100","transition-opacity","z-50","whitespace-nowrap","border","border-slate-700"],[1,"fas","fa-wrench","w-6","text-center"],[1,"fas","fa-truck-moving","w-6","text-center"],[1,"fas","fa-mobile-alt","w-6","text-center"],[1,"p-2","lg:p-4","border-t","border-slate-800","bg-slate-950"],[1,"w-full","flex","items-center","p-3","rounded-xl","hover:bg-slate-800","transition-colors","text-slate-400","hover:text-white",3,"click"],[1,"fas","fa-cog","w-6","text-center"],[1,"ml-3","text-xs","font-bold","uppercase","hidden","lg:block"],[1,"mt-4","text-center","lg:text-left","lg:px-3"],[1,"text-[10px]","text-slate-500","uppercase","font-bold","tracking-widest","hidden","lg:block"],[1,"text-[10px]","text-slate-600","truncate","mt-1"],[1,"flex-1","flex","flex-col","h-full","overflow-hidden","relative"],[1,"h-16","bg-white","dark:bg-[#1e293b]","border-b","border-slate-200","dark:border-slate-700","flex","items-center","justify-between","px-6","shrink-0","z-20","transition-colors","shadow-sm"],[1,"flex","items-center","gap-4"],[1,"flex","flex-col"],[1,"text-sm","font-bold","text-slate-800","dark:text-white","leading-tight"],[1,"flex","items-center","gap-2","mt-0.5","group","cursor-help"],[1,"relative","flex","h-2","w-2"],[1,"animate-ping","absolute","inline-flex","h-full","w-full","rounded-full","opacity-75"],[1,"relative","inline-flex","rounded-full","h-2","w-2"],[1,"text-[10px]","font-bold","text-slate-400","uppercase","tracking-wide","group-hover:text-slate-600","transition-colors"],[1,"hidden","group-hover:block","absolute","top-10","bg-slate-800","text-white","text-[10px]","p-2","rounded","shadow-lg","whitespace-nowrap","z-50"],[1,"flex","items-center","gap-6"],[1,"flex","items-center","gap-3","text-right","hidden","sm:flex"],[1,"text-xs","font-bold","text-slate-700","dark:text-white"],[1,"inline-block","bg-slate-100","dark:bg-slate-700","text-slate-500","dark:text-slate-300","px-1.5","py-0.5","rounded","text-[9px]","font-bold","uppercase","tracking-wider"],[1,"w-8","h-8","rounded-full","bg-slate-200","dark:bg-slate-600","flex","items-center","justify-center","text-slate-500","dark:text-slate-300","border","border-slate-300","dark:border-slate-500"],[1,"fas","fa-user","text-xs"],[1,"h-8","w-px","bg-slate-200","dark:bg-slate-700"],["title","Asistente IA",1,"group","relative","flex","items-center","gap-2","px-3","py-1.5","text-slate-500","hover:text-[#ce1126]","transition-colors","rounded-lg","hover:bg-red-50","dark:hover:bg-slate-800",3,"click"],[1,"fas","fa-sparkles","text-lg","group-hover:rotate-12","transition-transform"],[1,"text-xs","font-bold","hidden","md:inline"],[1,"absolute","top-1","right-1","flex","h-2","w-2"],[1,"flex-1","overflow-y-auto","custom-scroll","p-6","relative","bg-[#f8fafc]","dark:bg-[#0f172a]"],[1,"fade-enter","max-w-7xl","mx-auto","h-full","pb-20"],[1,"fixed","inset-y-0","right-0","w-[400px]","bg-white","dark:bg-[#1e293b]","shadow-2xl","transform","transition-transform","duration-300","z-50","border-l","border-slate-200","dark:border-slate-700","flex","flex-col"],[1,"p-6","border-b","border-slate-100","dark:border-slate-700","flex","justify-between","items-center","bg-gradient-to-r","from-slate-900","to-slate-800","text-white"],[1,"flex","items-center","gap-3"],[1,"w-10","h-10","rounded-full","bg-gradient-to-br","from-[#ce1126]","to-red-600","flex","items-center","justify-center","shadow-lg","shadow-red-900/50"],[1,"fas","fa-robot","text-lg"],[1,"font-bold","text-lg","leading-tight"],[1,"text-[10px]","text-slate-300","opacity-80","uppercase","tracking-widest"],[1,"text-white/60","hover:text-white","transition",3,"click"],[1,"fas","fa-times","text-xl"],[1,"flex-1","overflow-y-auto","p-6","custom-scroll","bg-slate-50","dark:bg-slate-900/50"],[1,"flex","flex-col","items-center","justify-center","py-10","space-y-4","text-slate-400","h-full"],[1,"prose","prose-sm","prose-slate","dark:prose-invert","max-w-none","bg-white","dark:bg-slate-800","p-5","rounded-xl","shadow-sm","border","border-slate-200","dark:border-slate-700",3,"innerHTML"],[1,"flex","flex-col","items-center","justify-center","h-full","text-center","py-10","opacity-60","space-y-6"],[1,"p-4","border-t","border-slate-100","dark:border-slate-700","bg-white","dark:bg-slate-800","space-y-2.5","shadow-[0_-5px_15px_rgba(0,0,0,0.05)]"],[1,"text-[10px]","font-bold","text-slate-400","uppercase","tracking-wider","mb-2"],[1,"w-full","flex","items-center","p-3","bg-slate-50","dark:bg-slate-700","hover:bg-[#ce1126]","hover:text-white","dark:hover:bg-[#ce1126]","rounded-lg","border","border-slate-200","dark:border-slate-600","hover:border-transparent","transition-all","group","text-left",3,"click"],[1,"w-8","h-8","rounded","bg-white","dark:bg-slate-600","text-slate-600","dark:text-slate-300","flex","items-center","justify-center","mr-3","group-hover:text-[#ce1126]","shadow-sm"],[1,"fas","fa-file-alt"],[1,"block","text-xs","font-bold","text-slate-700","dark:text-white","group-hover:text-white"],[1,"block","text-[10px]","text-slate-400","group-hover:text-red-100"],[1,"w-full","flex","items-center","p-3","bg-slate-50","dark:bg-slate-700","hover:bg-amber-500","hover:text-white","rounded-lg","border","border-slate-200","dark:border-slate-600","hover:border-transparent","transition-all","group","text-left",3,"click"],[1,"w-8","h-8","rounded","bg-white","dark:bg-slate-600","text-slate-600","dark:text-slate-300","flex","items-center","justify-center","mr-3","group-hover:text-amber-500","shadow-sm"],[1,"fas","fa-exclamation-triangle"],[1,"block","text-[10px]","text-slate-400","group-hover:text-amber-100"],[1,"w-full","flex","items-center","p-3","bg-slate-50","dark:bg-slate-700","hover:bg-emerald-600","hover:text-white","rounded-lg","border","border-slate-200","dark:border-slate-600","hover:border-transparent","transition-all","group","text-left",3,"click"],[1,"w-8","h-8","rounded","bg-white","dark:bg-slate-600","text-slate-600","dark:text-slate-300","flex","items-center","justify-center","mr-3","group-hover:text-emerald-600","shadow-sm"],[1,"fas","fa-check-double"],[1,"block","text-[10px]","text-slate-400","group-hover:text-emerald-100"],[1,"fixed","inset-0","z-[60]","bg-slate-900/60","backdrop-blur-sm","flex","items-center","justify-center","p-4","fade-enter"],[1,"animate-ping","absolute","inline-flex","h-full","w-full","rounded-full","bg-red-400","opacity-75"],[1,"relative","inline-flex","rounded-full","h-2","w-2","bg-red-500"],[1,"relative"],[1,"fas","fa-circle-notch","fa-spin","text-4xl","text-[#ce1126]"],[1,"fas","fa-brain","absolute","top-1/2","left-1/2","-translate-x-1/2","-translate-y-1/2","text-xs","text-[#ce1126]"],[1,"text-xs","uppercase","font-bold","tracking-widest","animate-pulse","text-center"],[1,"w-20","h-20","bg-slate-100","dark:bg-slate-800","rounded-full","flex","items-center","justify-center"],[1,"fas","fa-lightbulb","text-4xl","text-slate-400","dark:text-slate-500"],[1,"font-bold","text-slate-700","dark:text-slate-300","text-lg"],[1,"text-xs","text-slate-500","mt-2","max-w-[240px]","mx-auto","leading-relaxed"],[1,"w-full","max-w-5xl","max-h-[90vh]","overflow-y-auto","rounded-2xl","shadow-2xl","border","border-white/10"],[3,"assetId"]],template:function(r,i){r&1&&ie(0,e3,10,0,"div",0)(1,t3,1,0,"app-login")(2,f3,120,72,"div",1),r&2&&se(i.isAuthLoading()?0:i.isAuthenticated()?2:1)},dependencies:[Ae,oD,aD,OD,FD,LD,VD,jD],styles:[".fade-enter[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease-out forwards}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(5px)}to{opacity:1;transform:translateY(0)}}"]})}}return n})();var Y=function(n){return n[n.State=0]="State",n[n.Transition=1]="Transition",n[n.Sequence=2]="Sequence",n[n.Group=3]="Group",n[n.Animate=4]="Animate",n[n.Keyframes=5]="Keyframes",n[n.Style=6]="Style",n[n.Trigger=7]="Trigger",n[n.Reference=8]="Reference",n[n.AnimateChild=9]="AnimateChild",n[n.AnimateRef=10]="AnimateRef",n[n.Query=11]="Query",n[n.Stagger=12]="Stagger",n}(Y||{}),Jt="*";function BD(n,e=null){return{type:Y.Sequence,steps:n,options:e}}function dy(n){return{type:Y.Style,styles:n,offset:null}}var nr=class{_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_originalOnDoneFns=[];_originalOnStartFns=[];_started=!1;_destroyed=!1;_finished=!1;_position=0;parentPlayer=null;totalTime;constructor(e=0,t=0){this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}},Ss=class{_onDoneFns=[];_onStartFns=[];_finished=!1;_started=!1;_destroyed=!1;_onDestroyFns=[];parentPlayer=null;totalTime=0;players;constructor(e){this.players=e;let t=0,r=0,i=0,s=this.players.length;s==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++t==s&&this._onFinish()}),o.onDestroy(()=>{++r==s&&this._onDestroy()}),o.onStart(()=>{++i==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){let t=e*this.totalTime;this.players.forEach(r=>{let i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){let e=this.players.reduce((t,r)=>t===null||r.totalTime>t.totalTime?r:t,null);return e!=null?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}},Ca="!";function HD(n){return new I(3e3,!1)}function h3(){return new I(3100,!1)}function p3(){return new I(3101,!1)}function m3(n){return new I(3001,!1)}function g3(n){return new I(3003,!1)}function y3(n){return new I(3004,!1)}function zD(n,e){return new I(3005,!1)}function WD(){return new I(3006,!1)}function GD(){return new I(3007,!1)}function qD(n,e){return new I(3008,!1)}function KD(n){return new I(3002,!1)}function YD(n,e,t,r,i){return new I(3010,!1)}function QD(){return new I(3011,!1)}function ZD(){return new I(3012,!1)}function JD(){return new I(3200,!1)}function XD(){return new I(3202,!1)}function eS(){return new I(3013,!1)}function tS(n){return new I(3014,!1)}function nS(n){return new I(3015,!1)}function rS(n){return new I(3016,!1)}function iS(n,e){return new I(3404,!1)}function _3(n){return new I(3502,!1)}function sS(n){return new I(3503,!1)}function oS(){return new I(3300,!1)}function aS(n){return new I(3504,!1)}function lS(n){return new I(3301,!1)}function cS(n,e){return new I(3302,!1)}function uS(n){return new I(3303,!1)}function dS(n,e){return new I(3400,!1)}function fS(n){return new I(3401,!1)}function hS(n){return new I(3402,!1)}function pS(n,e){return new I(3505,!1)}function rr(n){switch(n.length){case 0:return new nr;case 1:return n[0];default:return new Ss(n)}}function my(n,e,t=new Map,r=new Map){let i=[],s=[],o=-1,a=null;if(e.forEach(l=>{let c=l.get("offset"),u=c==o,d=u&&a||new Map;l.forEach((f,h)=>{let y=h,E=f;if(h!=="offset")switch(y=n.normalizePropertyName(y,i),E){case Ca:E=t.get(h);break;case Jt:E=r.get(h);break;default:E=n.normalizeStyleValue(h,y,E,i);break}d.set(y,E)}),u||s.push(d),a=d,o=c}),i.length)throw _3(i);return s}function zu(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&fy(t,"start",n)));break;case"done":n.onDone(()=>r(t&&fy(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&fy(t,"destroy",n)));break}}function fy(n,e,t){let r=t.totalTime,i=!!t.disabled,s=Wu(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,r??n.totalTime,i),o=n._data;return o!=null&&(s._data=o),s}function Wu(n,e,t,r,i="",s=0,o){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:s,disabled:!!o}}function gt(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function gy(n){let e=n.indexOf(":"),t=n.substring(1,e),r=n.slice(e+1);return[t,r]}var v3=typeof document>"u"?null:document.documentElement;function Gu(n){let e=n.parentNode||n.host||null;return e===v3?null:e}function E3(n){return n.substring(1,6)=="ebkit"}var vi=null,$D=!1;function mS(n){vi||(vi=w3()||{},$D=vi.style?"WebkitAppearance"in vi.style:!1);let e=!0;return vi.style&&!E3(n)&&(e=n in vi.style,!e&&$D&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in vi.style)),e}function w3(){return typeof document<"u"?document.body:null}function yy(n,e){for(;e;){if(e===n)return!0;e=Gu(e)}return!1}function _y(n,e,t){if(t)return Array.from(n.querySelectorAll(e));let r=n.querySelector(e);return r?[r]:[]}var b3=1e3,vy="{{",C3="}}",Ey="ng-enter",qu="ng-leave",Ia="ng-trigger",Da=".ng-trigger",wy="ng-animating",Ku=".ng-animating";function Dn(n){if(typeof n=="number")return n;let e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:hy(parseFloat(e[1]),e[2])}function hy(n,e){switch(e){case"s":return n*b3;default:return n}}function Sa(n,e,t){return n.hasOwnProperty("duration")?n:I3(n,e,t)}function I3(n,e,t){let r=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i,i,s=0,o="";if(typeof n=="string"){let a=n.match(r);if(a===null)return e.push(HD(n)),{duration:0,delay:0,easing:""};i=hy(parseFloat(a[1]),a[2]);let l=a[3];l!=null&&(s=hy(parseFloat(l),a[4]));let c=a[5];c&&(o=c)}else i=n;if(!t){let a=!1,l=e.length;i<0&&(e.push(h3()),a=!0),s<0&&(e.push(p3()),a=!0),a&&e.splice(l,0,HD(n))}return{duration:i,delay:s,easing:o}}function gS(n){return n.length?n[0]instanceof Map?n:n.map(e=>new Map(Object.entries(e))):[]}function Xt(n,e,t){e.forEach((r,i)=>{let s=Yu(i);t&&!t.has(i)&&t.set(i,n.style[s]),n.style[s]=r})}function Nr(n,e){e.forEach((t,r)=>{let i=Yu(r);n.style[i]=""})}function Ts(n){return Array.isArray(n)?n.length==1?n[0]:BD(n):n}function yS(n,e,t){let r=e.params||{},i=by(n);i.length&&i.forEach(s=>{r.hasOwnProperty(s)||t.push(m3(s))})}var py=new RegExp(`${vy}\\s*(.+?)\\s*${C3}`,"g");function by(n){let e=[];if(typeof n=="string"){let t;for(;t=py.exec(n);)e.push(t[1]);py.lastIndex=0}return e}function xs(n,e,t){let r=`${n}`,i=r.replace(py,(s,o)=>{let a=e[o];return a==null&&(t.push(g3(o)),a=""),a.toString()});return i==r?n:i}var D3=/-+([a-z0-9])/g;function Yu(n){return n.replace(D3,(...e)=>e[1].toUpperCase())}function _S(n,e){return n===0||e===0}function vS(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((s,o)=>{r.has(o)||i.push(o),r.set(o,s)}),i.length)for(let s=1;s<e.length;s++){let o=e[s];i.forEach(a=>o.set(a,Qu(n,a)))}}return e}function yt(n,e,t){switch(e.type){case Y.Trigger:return n.visitTrigger(e,t);case Y.State:return n.visitState(e,t);case Y.Transition:return n.visitTransition(e,t);case Y.Sequence:return n.visitSequence(e,t);case Y.Group:return n.visitGroup(e,t);case Y.Animate:return n.visitAnimate(e,t);case Y.Keyframes:return n.visitKeyframes(e,t);case Y.Style:return n.visitStyle(e,t);case Y.Reference:return n.visitReference(e,t);case Y.AnimateChild:return n.visitAnimateChild(e,t);case Y.AnimateRef:return n.visitAnimateRef(e,t);case Y.Query:return n.visitQuery(e,t);case Y.Stagger:return n.visitStagger(e,t);default:throw y3(e.type)}}function Qu(n,e){return window.getComputedStyle(n)[e]}var jy=(()=>{class n{validateStyleProperty(t){return mS(t)}containsElement(t,r){return yy(t,r)}getParentElement(t){return Gu(t)}query(t,r,i){return _y(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,s,o,a=[],l){return new nr(i,s)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac})}return n})(),wi=class{static NOOP=new jy},bi=class{};var S3=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),td=class extends bi{normalizePropertyName(e,t){return Yu(e)}normalizeStyleValue(e,t,r,i){let s="",o=r.toString().trim();if(S3.has(t)&&r!==0&&r!=="0")if(typeof r=="number")s="px";else{let a=r.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&a[1].length==0&&i.push(zD(e,r))}return o+s}};var nd="*";function T3(n,e){let t=[];return typeof n=="string"?n.split(/\s*,\s*/).forEach(r=>x3(r,t,e)):t.push(n),t}function x3(n,e,t){if(n[0]==":"){let l=A3(n,t);if(typeof l=="function"){e.push(l);return}n=l}let r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(r==null||r.length<4)return t.push(nS(n)),e;let i=r[1],s=r[2],o=r[3];e.push(ES(i,o));let a=i==nd&&o==nd;s[0]=="<"&&!a&&e.push(ES(o,i))}function A3(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(rS(n)),"* => *"}}var Zu=new Set(["true","1"]),Ju=new Set(["false","0"]);function ES(n,e){let t=Zu.has(n)||Ju.has(n),r=Zu.has(e)||Ju.has(e);return(i,s)=>{let o=n==nd||n==i,a=e==nd||e==s;return!o&&t&&typeof i=="boolean"&&(o=i?Zu.has(n):Ju.has(n)),!a&&r&&typeof s=="boolean"&&(a=s?Zu.has(e):Ju.has(e)),o&&a}}var MS=":self",M3=new RegExp(`s*${MS}s*,?`,"g");function NS(n,e,t,r){return new xy(n).build(e,t,r)}var wS="",xy=class{_driver;constructor(e){this._driver=e}build(e,t,r){let i=new Ay(t);return this._resetContextStyleTimingState(i),yt(this,Ts(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector=wS,e.collectedStyles=new Map,e.collectedStyles.set(wS,new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0,s=[],o=[];return e.name.charAt(0)=="@"&&t.errors.push(WD()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),a.type==Y.State){let l=a,c=l.name;c.toString().split(/\s*,\s*/).forEach(u=>{l.name=u,s.push(this.visitState(l,t))}),l.name=c}else if(a.type==Y.Transition){let l=this.visitTransition(a,t);r+=l.queryCount,i+=l.depCount,o.push(l)}else t.errors.push(GD())}),{type:Y.Trigger,name:e.name,states:s,transitions:o,queryCount:r,depCount:i,options:null}}visitState(e,t){let r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){let s=new Set,o=i||{};r.styles.forEach(a=>{a instanceof Map&&a.forEach(l=>{by(l).forEach(c=>{o.hasOwnProperty(c)||s.add(c)})})}),s.size&&t.errors.push(qD(e.name,[...s.values()]))}return{type:Y.State,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;let r=yt(this,Ts(e.animation),t),i=T3(e.expr,t.errors);return{type:Y.Transition,matchers:i,animation:r,queryCount:t.queryCount,depCount:t.depCount,options:Ei(e.options)}}visitSequence(e,t){return{type:Y.Sequence,steps:e.steps.map(r=>yt(this,r,t)),options:Ei(e.options)}}visitGroup(e,t){let r=t.currentTime,i=0,s=e.steps.map(o=>{t.currentTime=r;let a=yt(this,o,t);return i=Math.max(i,t.currentTime),a});return t.currentTime=i,{type:Y.Group,steps:s,options:Ei(e.options)}}visitAnimate(e,t){let r=P3(e.timings,t.errors);t.currentAnimateTimings=r;let i,s=e.styles?e.styles:dy({});if(s.type==Y.Keyframes)i=this.visitKeyframes(s,t);else{let o=e.styles,a=!1;if(!o){a=!0;let c={};r.easing&&(c.easing=r.easing),o=dy(c)}t.currentTime+=r.duration+r.delay;let l=this.visitStyle(o,t);l.isEmptyStep=a,i=l}return t.currentAnimateTimings=null,{type:Y.Animate,timings:r,style:i,options:null}}visitStyle(e,t){let r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){let r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of i)typeof a=="string"?a===Jt?r.push(a):t.errors.push(KD(a)):r.push(new Map(Object.entries(a)));let s=!1,o=null;return r.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(o=a.get("easing"),a.delete("easing")),!s)){for(let l of a.values())if(l.toString().indexOf(vy)>=0){s=!0;break}}}),{type:Y.Style,styles:r,easing:o,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){let r=t.currentAnimateTimings,i=t.currentTime,s=t.currentTime;r&&s>0&&(s-=r.duration+r.delay),e.styles.forEach(o=>{typeof o!="string"&&o.forEach((a,l)=>{let c=t.collectedStyles.get(t.currentQuerySelector),u=c.get(l),d=!0;u&&(s!=i&&s>=u.startTime&&i<=u.endTime&&(t.errors.push(YD(l,u.startTime,u.endTime,s,i)),d=!1),s=u.startTime),d&&c.set(l,{startTime:s,endTime:i}),t.options&&yS(a,t.options,t.errors)})})}visitKeyframes(e,t){let r={type:Y.Keyframes,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(QD()),r;let i=1,s=0,o=[],a=!1,l=!1,c=0,u=e.steps.map(D=>{let O=this._makeStyleAst(D,t),H=O.offset!=null?O.offset:k3(O.styles),de=0;return H!=null&&(s++,de=O.offset=H),l=l||de<0||de>1,a=a||de<c,c=de,o.push(de),O});l&&t.errors.push(ZD()),a&&t.errors.push(JD());let d=e.steps.length,f=0;s>0&&s<d?t.errors.push(XD()):s==0&&(f=i/(d-1));let h=d-1,y=t.currentTime,E=t.currentAnimateTimings,b=E.duration;return u.forEach((D,O)=>{let H=f>0?O==h?1:f*O:o[O],de=H*b;t.currentTime=y+E.delay+de,E.duration=de,this._validateStyleAst(D,t),D.offset=H,r.styles.push(D)}),r}visitReference(e,t){return{type:Y.Reference,animation:yt(this,Ts(e.animation),t),options:Ei(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:Y.AnimateChild,options:Ei(e.options)}}visitAnimateRef(e,t){return{type:Y.AnimateRef,animation:this.visitReference(e.animation,t),options:Ei(e.options)}}visitQuery(e,t){let r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;let[s,o]=N3(e.selector);t.currentQuerySelector=r.length?r+" "+s:s,gt(t.collectedStyles,t.currentQuerySelector,new Map);let a=yt(this,Ts(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:Y.Query,selector:s,limit:i.limit||0,optional:!!i.optional,includeSelf:o,animation:a,originalSelector:e.selector,options:Ei(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(eS());let r=e.timings==="full"?{duration:0,delay:0,easing:"full"}:Sa(e.timings,t.errors,!0);return{type:Y.Stagger,animation:yt(this,Ts(e.animation),t),timings:r,options:null}}};function N3(n){let e=!!n.split(/\s*,\s*/).find(t=>t==MS);return e&&(n=n.replace(M3,"")),n=n.replace(/@\*/g,Da).replace(/@\w+/g,t=>Da+"-"+t.slice(1)).replace(/:animating/g,Ku),[n,e]}function R3(n){return n?S({},n):null}var Ay=class{errors;queryCount=0;depCount=0;currentTransition=null;currentQuery=null;currentQuerySelector=null;currentAnimateTimings=null;currentTime=0;collectedStyles=new Map;options=null;unsupportedCSSPropertiesFound=new Set;constructor(e){this.errors=e}};function k3(n){if(typeof n=="string")return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){let r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){let t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}function P3(n,e){if(n.hasOwnProperty("duration"))return n;if(typeof n=="number"){let s=Sa(n,e).duration;return Cy(s,0,"")}let t=n;if(t.split(/\s+/).some(s=>s.charAt(0)=="{"&&s.charAt(1)=="{")){let s=Cy(0,0,"");return s.dynamic=!0,s.strValue=t,s}let i=Sa(t,e);return Cy(i.duration,i.delay,i.easing)}function Ei(n){return n?(n=S({},n),n.params&&(n.params=R3(n.params))):n={},n}function Cy(n,e,t){return{duration:n,delay:e,easing:t}}function Uy(n,e,t,r,i,s,o=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:o,subTimeline:a}}var xa=class{_map=new Map;get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}},O3=1,F3=":enter",L3=new RegExp(F3,"g"),V3=":leave",j3=new RegExp(V3,"g");function RS(n,e,t,r,i,s=new Map,o=new Map,a,l,c=[]){return new My().buildKeyframes(n,e,t,r,i,s,o,a,l,c)}var My=class{buildKeyframes(e,t,r,i,s,o,a,l,c,u=[]){c=c||new xa;let d=new Ny(e,t,c,i,s,u,[]);d.options=l;let f=l.delay?Dn(l.delay):0;d.currentTimeline.delayNextStep(f),d.currentTimeline.setStyles([o],null,d.errors,l),yt(this,r,d);let h=d.timelines.filter(y=>y.containsAnimation());if(h.length&&a.size){let y;for(let E=h.length-1;E>=0;E--){let b=h[E];if(b.element===t){y=b;break}}y&&!y.allowOnlyTimelineStyles()&&y.setStyles([a],null,d.errors,l)}return h.length?h.map(y=>y.buildKeyframes()):[Uy(t,[],[],[],0,f,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){let r=t.subInstructions.get(t.element);if(r){let i=t.createSubContext(e.options),s=t.currentTimeline.currentTime,o=this._visitSubInstructions(r,i,i.options);s!=o&&t.transformIntoNewTimeline(o)}t.previousNode=e}visitAnimateRef(e,t){let r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,r),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,r){for(let i of e){let s=i?.delay;if(s){let o=typeof s=="number"?s:Dn(xs(s,i?.params??{},t.errors));r.delayNextStep(o)}}}_visitSubInstructions(e,t,r){let s=t.currentTimeline.currentTime,o=r.duration!=null?Dn(r.duration):null,a=r.delay!=null?Dn(r.delay):null;return o!==0&&e.forEach(l=>{let c=t.appendInstructionToTimeline(l,o,a);s=Math.max(s,c.duration+c.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),yt(this,e.animation,t),t.previousNode=e}visitSequence(e,t){let r=t.subContextCount,i=t,s=e.options;if(s&&(s.params||s.delay)&&(i=t.createSubContext(s),i.transformIntoNewTimeline(),s.delay!=null)){i.previousNode.type==Y.Style&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=rd);let o=Dn(s.delay);i.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>yt(this,o,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){let r=[],i=t.currentTimeline.currentTime,s=e.options&&e.options.delay?Dn(e.options.delay):0;e.steps.forEach(o=>{let a=t.createSubContext(e.options);s&&a.delayNextStep(s),yt(this,o,a),i=Math.max(i,a.currentTimeline.currentTime),r.push(a.currentTimeline)}),r.forEach(o=>t.currentTimeline.mergeTimelineCollectedStyles(o)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){let r=e.strValue,i=t.params?xs(r,t.params,t.errors):r;return Sa(i,t.errors)}else return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){let r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());let s=e.style;s.type==Y.Keyframes?this.visitKeyframes(s,t):(t.incrementTime(r.duration),this.visitStyle(s,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){let r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();let s=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(s):r.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){let r=t.currentAnimateTimings,i=t.currentTimeline.duration,s=r.duration,a=t.createSubContext().currentTimeline;a.easing=r.easing,e.styles.forEach(l=>{let c=l.offset||0;a.forwardTime(c*s),a.setStyles(l.styles,l.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(i+s),t.previousNode=e}visitQuery(e,t){let r=t.currentTimeline.currentTime,i=e.options||{},s=i.delay?Dn(i.delay):0;s&&(t.previousNode.type===Y.Style||r==0&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=rd);let o=r,a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=a.length;let l=null;a.forEach((c,u)=>{t.currentQueryIndex=u;let d=t.createSubContext(e.options,c);s&&d.delayNextStep(s),c===t.element&&(l=d.currentTimeline),yt(this,e.animation,d),d.currentTimeline.applyStylesToKeyframe();let f=d.currentTimeline.currentTime;o=Math.max(o,f)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),l&&(t.currentTimeline.mergeTimelineCollectedStyles(l),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){let r=t.parentContext,i=t.currentTimeline,s=e.timings,o=Math.abs(s.duration),a=o*(t.currentQueryTotal-1),l=o*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":l=a-l;break;case"full":l=r.currentStaggerTime;break}let u=t.currentTimeline;l&&u.delayNextStep(l);let d=u.currentTime;yt(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-d+(i.startTime-r.currentTimeline.startTime)}},rd={},Ny=class n{_driver;element;subInstructions;_enterClassName;_leaveClassName;errors;timelines;parentContext=null;currentTimeline;currentAnimateTimings=null;previousNode=rd;subContextCount=0;options={};currentQueryIndex=0;currentQueryTotal=0;currentStaggerTime=0;constructor(e,t,r,i,s,o,a,l){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=s,this.errors=o,this.timelines=a,this.currentTimeline=l||new id(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;let r=e,i=this.options;r.duration!=null&&(i.duration=Dn(r.duration)),r.delay!=null&&(i.delay=Dn(r.delay));let s=r.params;if(s){let o=i.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!t||!o.hasOwnProperty(a))&&(o[a]=xs(s[a],o,this.errors))})}}_copyOptions(){let e={};if(this.options){let t=this.options.params;if(t){let r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){let i=t||this.element,s=new n(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=rd,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){let i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},s=new Ry(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(s),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,s,o){let a=[];if(i&&a.push(this.element),e.length>0){e=e.replace(L3,"."+this._enterClassName),e=e.replace(j3,"."+this._leaveClassName);let l=r!=1,c=this._driver.query(this.element,e,l);r!==0&&(c=r<0?c.slice(c.length+r,c.length):c.slice(0,r)),a.push(...c)}return!s&&a.length==0&&o.push(tS(t)),a}},id=class n{_driver;element;startTime;_elementTimelineStylesLookup;duration=0;easing=null;_previousKeyframe=new Map;_currentKeyframe=new Map;_keyframes=new Map;_styleSummary=new Map;_localTimelineStyles=new Map;_globalTimelineStyles;_pendingStyles=new Map;_backFill=new Map;_currentEmptyStepKeyframe=null;constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){let t=this._keyframes.size===1&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new n(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=O3,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||Jt),this._currentKeyframe.set(t,Jt);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);let s=i&&i.params||{},o=U3(e,this._globalTimelineStyles);for(let[a,l]of o){let c=xs(l,s,r);this._pendingStyles.set(a,c),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??Jt),this._updateStyle(a,c)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{let i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();let e=new Set,t=new Set,r=this._keyframes.size===1&&this.duration===0,i=[];this._keyframes.forEach((a,l)=>{let c=new Map([...this._backFill,...a]);c.forEach((u,d)=>{u===Ca?e.add(d):u===Jt&&t.add(d)}),r||c.set("offset",l/this.duration),i.push(c)});let s=[...e.values()],o=[...t.values()];if(r){let a=i[0],l=new Map(a);a.set("offset",0),l.set("offset",1),i=[a,l]}return Uy(this.element,i,s,o,this.duration,this.startTime,this.easing,!1)}},Ry=class extends id{keyframes;preStyleProps;postStyleProps;_stretchStartingKeyframe;timings;constructor(e,t,r,i,s,o,a=!1){super(e,t,o.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){let s=[],o=r+t,a=t/o,l=new Map(e[0]);l.set("offset",0),s.push(l);let c=new Map(e[0]);c.set("offset",bS(a)),s.push(c);let u=e.length-1;for(let d=1;d<=u;d++){let f=new Map(e[d]),h=f.get("offset"),y=t+h*r;f.set("offset",bS(y/o)),s.push(f)}r=o,t=0,i="",e=s}return Uy(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}};function bS(n,e=3){let t=Math.pow(10,e-1);return Math.round(n*t)/t}function U3(n,e){let t=new Map,r;return n.forEach(i=>{if(i==="*"){r??=e.keys();for(let s of r)t.set(s,Jt)}else for(let[s,o]of i)t.set(s,o)}),t}function CS(n,e,t,r,i,s,o,a,l,c,u,d,f){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:s,toState:r,toStyles:o,timelines:a,queriedElements:l,preStyleProps:c,postStyleProps:u,totalTime:d,errors:f}}var Iy={},sd=class{_triggerName;ast;_stateStyles;constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return B3(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return e!==void 0&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,s,o,a,l,c,u){let d=[],f=this.ast.options&&this.ast.options.params||Iy,h=a&&a.params||Iy,y=this.buildStyles(r,h,d),E=l&&l.params||Iy,b=this.buildStyles(i,E,d),D=new Set,O=new Map,H=new Map,de=i==="void",Lt={params:kS(E,f),delay:this.ast.options?.delay},Et=u?[]:RS(e,t,this.ast.animation,s,o,y,b,Lt,c,d),Ke=0;return Et.forEach(nt=>{Ke=Math.max(nt.duration+nt.delay,Ke)}),d.length?CS(t,this._triggerName,r,i,de,y,b,[],[],O,H,Ke,d):(Et.forEach(nt=>{let Rr=nt.element,Ci=gt(O,Rr,new Set);nt.preStyleProps.forEach(kr=>Ci.add(kr));let By=gt(H,Rr,new Set);nt.postStyleProps.forEach(kr=>By.add(kr)),Rr!==t&&D.add(Rr)}),CS(t,this._triggerName,r,i,de,y,b,Et,[...D.values()],O,H,Ke))}};function B3(n,e,t,r,i){return n.some(s=>s(e,t,r,i))}function kS(n,e){let t=S({},e);return Object.entries(n).forEach(([r,i])=>{i!=null&&(t[r]=i)}),t}var ky=class{styles;defaultParams;normalizer;constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){let r=new Map,i=kS(e,this.defaultParams);return this.styles.styles.forEach(s=>{typeof s!="string"&&s.forEach((o,a)=>{o&&(o=xs(o,i,t));let l=this.normalizer.normalizePropertyName(a,t);o=this.normalizer.normalizeStyleValue(a,l,o,t),r.set(a,o)})}),r}};function H3(n,e,t){return new Py(n,e,t)}var Py=class{name;ast;_normalizer;transitionFactories=[];fallbackTransition;states=new Map;constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,t.states.forEach(i=>{let s=i.options&&i.options.params||{};this.states.set(i.name,new ky(i.style,s,r))}),IS(this.states,"true","1"),IS(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new sd(e,i,this.states))}),this.fallbackTransition=$3(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(o=>o.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}};function $3(n,e,t){let r=[(o,a)=>!0],i={type:Y.Sequence,steps:[],options:null},s={type:Y.Transition,animation:i,matchers:r,options:null,queryCount:0,depCount:0};return new sd(n,s,e)}function IS(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}var z3=new xa,Oy=class{bodyNode;_driver;_normalizer;_animations=new Map;_playersById=new Map;players=[];constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r}register(e,t){let r=[],i=[],s=NS(this._driver,t,r,i);if(r.length)throw sS(r);this._animations.set(e,s)}_buildPlayer(e,t,r){let i=e.element,s=my(this._normalizer,e.keyframes,t,r);return this._driver.animate(i,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){let i=[],s=this._animations.get(e),o,a=new Map;if(s?(o=RS(this._driver,t,s,Ey,qu,new Map,new Map,r,z3,i),o.forEach(u=>{let d=gt(a,u.element,new Map);u.postStyleProps.forEach(f=>d.set(f,null))})):(i.push(oS()),o=[]),i.length)throw aS(i);a.forEach((u,d)=>{u.forEach((f,h)=>{u.set(h,this._driver.computeStyle(d,h,Jt))})});let l=o.map(u=>{let d=a.get(u.element);return this._buildPlayer(u,new Map,d)}),c=rr(l);return this._playersById.set(e,c),c.onDestroy(()=>this.destroy(e)),this.players.push(c),c}destroy(e){let t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);let r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){let t=this._playersById.get(e);if(!t)throw lS(e);return t}listen(e,t,r,i){let s=Wu(t,"","","");return zu(this._getPlayer(e),r,s,i),()=>{}}command(e,t,r,i){if(r=="register"){this.register(e,i[0]);return}if(r=="create"){let o=i[0]||{};this.create(e,t,o);return}let s=this._getPlayer(e);switch(r){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e);break}}},DS="ng-animate-queued",W3=".ng-animate-queued",Dy="ng-animate-disabled",G3=".ng-animate-disabled",q3="ng-star-inserted",K3=".ng-star-inserted",Y3=[],PS={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Q3={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},en="__ng_removed",Aa=class{namespaceId;value;options;get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;let r=e&&e.hasOwnProperty("value"),i=r?e.value:e;if(this.value=J3(i),r){let s=e,{value:o}=s,a=Ii(s,["value"]);this.options=a}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){let t=e.params;if(t){let r=this.options.params;Object.keys(t).forEach(i=>{r[i]==null&&(r[i]=t[i])})}}},Ta="void",Sy=new Aa(Ta),Fy=class{id;hostElement;_engine;players=[];_triggers=new Map;_queue=[];_elementListeners=new Map;_hostClassName;constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this._hostClassName="ng-tns-"+e,Ft(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw cS(r,t);if(r==null||r.length==0)throw uS(t);if(!X3(r))throw dS(r,t);let s=gt(this._elementListeners,e,[]),o={name:t,phase:r,callback:i};s.push(o);let a=gt(this._engine.statesByElement,e,new Map);return a.has(t)||(Ft(e,Ia),Ft(e,Ia+"-"+t),a.set(t,Sy)),()=>{this._engine.afterFlush(()=>{let l=s.indexOf(o);l>=0&&s.splice(l,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return this._triggers.has(e)?!1:(this._triggers.set(e,t),!0)}_getTrigger(e){let t=this._triggers.get(e);if(!t)throw fS(e);return t}trigger(e,t,r,i=!0){let s=this._getTrigger(t),o=new Ma(this.id,t,e),a=this._engine.statesByElement.get(e);a||(Ft(e,Ia),Ft(e,Ia+"-"+t),this._engine.statesByElement.set(e,a=new Map));let l=a.get(t),c=new Aa(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&l&&c.absorbOptions(l.options),a.set(t,c),l||(l=Sy),!(c.value===Ta)&&l.value===c.value){if(!nU(l.params,c.params)){let E=[],b=s.matchStyles(l.value,l.params,E),D=s.matchStyles(c.value,c.params,E);E.length?this._engine.reportError(E):this._engine.afterFlush(()=>{Nr(e,b),Xt(e,D)})}return}let f=gt(this._engine.playersByElement,e,[]);f.forEach(E=>{E.namespaceId==this.id&&E.triggerName==t&&E.queued&&E.destroy()});let h=s.matchTransition(l.value,c.value,e,c.params),y=!1;if(!h){if(!i)return;h=s.fallbackTransition,y=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:h,fromState:l,toState:c,player:o,isFallbackTransition:y}),y||(Ft(e,DS),o.onStart(()=>{As(e,DS)})),o.onDone(()=>{let E=this.players.indexOf(o);E>=0&&this.players.splice(E,1);let b=this._engine.playersByElement.get(e);if(b){let D=b.indexOf(o);D>=0&&b.splice(D,1)}}),this.players.push(o),f.push(o),o}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);let t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){let r=this._engine.driver.query(e,Da,!0);r.forEach(i=>{if(i[en])return;let s=this._engine.fetchNamespacesByElement(i);s.size?s.forEach(o=>o.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){let s=this._engine.statesByElement.get(e),o=new Map;if(s){let a=[];if(s.forEach((l,c)=>{if(o.set(c,l.value),this._triggers.has(c)){let u=this.trigger(e,c,Ta,i);u&&a.push(u)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,o),r&&rr(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){let t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){let i=new Set;t.forEach(s=>{let o=s.name;if(i.has(o))return;i.add(o);let l=this._triggers.get(o).fallbackTransition,c=r.get(o)||Sy,u=new Aa(Ta),d=new Ma(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:l,fromState:c,toState:u,player:d,isFallbackTransition:!0})})}}removeNode(e,t){let r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){let s=r.players.length?r.playersByQueriedElement.get(e):[];if(s&&s.length)i=!0;else{let o=e;for(;o=o.parentNode;)if(r.statesByElement.get(o)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{let s=e[en];(!s||s===PS)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){Ft(e,this._hostClassName)}drainQueuedTransitions(e){let t=[];return this._queue.forEach(r=>{let i=r.player;if(i.destroyed)return;let s=r.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==r.triggerName){let l=Wu(s,r.triggerName,r.fromState.value,r.toState.value);l._data=e,zu(r.player,a.phase,l,a.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{let s=r.transition.ast.depCount,o=i.transition.ast.depCount;return s==0||o==0?s-o:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}},Ly=class{bodyNode;driver;_normalizer;players=[];newHostElements=new Map;playersByElement=new Map;playersByQueriedElement=new Map;statesByElement=new Map;disabledNodes=new Set;totalAnimations=0;totalQueuedPlayers=0;_namespaceLookup={};_namespaceList=[];_flushFns=[];_whenQuietFns=[];namespacesByHostElement=new Map;collectedEnterElements=[];collectedLeaveElements=[];onRemovalComplete=(e,t)=>{};_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r}get queuedPlayers(){let e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){let r=new Fy(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){let r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let o=!1,a=this.driver.getParentElement(t);for(;a;){let l=i.get(a);if(l){let c=r.indexOf(l);r.splice(c+1,0,e),o=!0;break}a=this.driver.getParentElement(a)}o||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let r=this._fetchNamespace(e);this.namespacesByHostElement.delete(r.hostElement);let i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1),r.destroy(t),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){let t=new Set,r=this.statesByElement.get(e);if(r){for(let i of r.values())if(i.namespaceId){let s=this._fetchNamespace(i.namespaceId);s&&t.add(s)}}return t}trigger(e,t,r,i){if(Xu(t)){let s=this._fetchNamespace(e);if(s)return s.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!Xu(t))return;let s=t[en];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;let o=this.collectedLeaveElements.indexOf(t);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){let o=this._fetchNamespace(e);o&&o.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Ft(e,Dy)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),As(e,Dy))}removeNode(e,t,r){if(Xu(t)){let i=e?this._fetchNamespace(e):null;i?i.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r);let s=this.namespacesByHostElement.get(t);s&&s.id!==e&&s.removeNode(t,r)}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,r,i,s){this.collectedLeaveElements.push(t),t[en]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,r,i,s){return Xu(t)?this._fetchNamespace(e).listen(t,r,i,s):()=>{}}_buildInstruction(e,t,r,i,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,Da,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),this.playersByQueriedElement.size!=0&&(t=this.driver.query(e,Ku,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){let t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){let t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return rr(this.players).onDone(()=>e());e()})}processLeaveNode(e){let t=e[en];if(t&&t.setForRemoval){if(e[en]=PS,t.namespaceId){this.destroyInnerAnimations(e);let r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(Dy)&&this.markElementAsDisabled(e,!1),this.driver.query(e,G3,!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++){let i=this.collectedEnterElements[r];Ft(i,q3)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++){let i=this.collectedLeaveElements[r];this.processLeaveNode(i)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){let r=this._whenQuietFns;this._whenQuietFns=[],t.length?rr(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw hS(e)}_flushAnimations(e,t){let r=new xa,i=[],s=new Map,o=[],a=new Map,l=new Map,c=new Map,u=new Set;this.disabledNodes.forEach(A=>{u.add(A);let N=this.driver.query(A,W3,!0);for(let k=0;k<N.length;k++)u.add(N[k])});let d=this.bodyNode,f=Array.from(this.statesByElement.keys()),h=xS(f,this.collectedEnterElements),y=new Map,E=0;h.forEach((A,N)=>{let k=Ey+E++;y.set(N,k),A.forEach(oe=>Ft(oe,k))});let b=[],D=new Set,O=new Set;for(let A=0;A<this.collectedLeaveElements.length;A++){let N=this.collectedLeaveElements[A],k=N[en];k&&k.setForRemoval&&(b.push(N),D.add(N),k.hasAnimation?this.driver.query(N,K3,!0).forEach(oe=>D.add(oe)):O.add(N))}let H=new Map,de=xS(f,Array.from(D));de.forEach((A,N)=>{let k=qu+E++;H.set(N,k),A.forEach(oe=>Ft(oe,k))}),e.push(()=>{h.forEach((A,N)=>{let k=y.get(N);A.forEach(oe=>As(oe,k))}),de.forEach((A,N)=>{let k=H.get(N);A.forEach(oe=>As(oe,k))}),b.forEach(A=>{this.processLeaveNode(A)})});let Lt=[],Et=[];for(let A=this._namespaceList.length-1;A>=0;A--)this._namespaceList[A].drainQueuedTransitions(t).forEach(k=>{let oe=k.player,Pe=k.element;if(Lt.push(oe),this.collectedEnterElements.length){let Be=Pe[en];if(Be&&Be.setForMove){if(Be.previousTriggersValues&&Be.previousTriggersValues.has(k.triggerName)){let Pr=Be.previousTriggersValues.get(k.triggerName),wt=this.statesByElement.get(k.element);if(wt&&wt.has(k.triggerName)){let Na=wt.get(k.triggerName);Na.value=Pr,wt.set(k.triggerName,Na)}}oe.destroy();return}}let tn=!d||!this.driver.containsElement(d,Pe),_t=H.get(Pe),ir=y.get(Pe),we=this._buildInstruction(k,r,ir,_t,tn);if(we.errors&&we.errors.length){Et.push(we);return}if(tn){oe.onStart(()=>Nr(Pe,we.fromStyles)),oe.onDestroy(()=>Xt(Pe,we.toStyles)),i.push(oe);return}if(k.isFallbackTransition){oe.onStart(()=>Nr(Pe,we.fromStyles)),oe.onDestroy(()=>Xt(Pe,we.toStyles)),i.push(oe);return}let zy=[];we.timelines.forEach(Be=>{Be.stretchStartingKeyframe=!0,this.disabledNodes.has(Be.element)||zy.push(Be)}),we.timelines=zy,r.append(Pe,we.timelines);let jS={instruction:we,player:oe,element:Pe};o.push(jS),we.queriedElements.forEach(Be=>gt(a,Be,[]).push(oe)),we.preStyleProps.forEach((Be,Pr)=>{if(Be.size){let wt=l.get(Pr);wt||l.set(Pr,wt=new Set),Be.forEach((Na,dd)=>wt.add(dd))}}),we.postStyleProps.forEach((Be,Pr)=>{let wt=c.get(Pr);wt||c.set(Pr,wt=new Set),Be.forEach((Na,dd)=>wt.add(dd))})});if(Et.length){let A=[];Et.forEach(N=>{A.push(pS(N.triggerName,N.errors))}),Lt.forEach(N=>N.destroy()),this.reportError(A)}let Ke=new Map,nt=new Map;o.forEach(A=>{let N=A.element;r.has(N)&&(nt.set(N,N),this._beforeAnimationBuild(A.player.namespaceId,A.instruction,Ke))}),i.forEach(A=>{let N=A.element;this._getPreviousPlayers(N,!1,A.namespaceId,A.triggerName,null).forEach(oe=>{gt(Ke,N,[]).push(oe),oe.destroy()})});let Rr=b.filter(A=>AS(A,l,c)),Ci=new Map;TS(Ci,this.driver,O,c,Jt).forEach(A=>{AS(A,l,c)&&Rr.push(A)});let kr=new Map;h.forEach((A,N)=>{TS(kr,this.driver,new Set(A),l,Ca)}),Rr.forEach(A=>{let N=Ci.get(A),k=kr.get(A);Ci.set(A,new Map([...N?.entries()??[],...k?.entries()??[]]))});let ud=[],Hy=[],$y={};o.forEach(A=>{let{element:N,player:k,instruction:oe}=A;if(r.has(N)){if(u.has(N)){k.onDestroy(()=>Xt(N,oe.toStyles)),k.disabled=!0,k.overrideTotalTime(oe.totalTime),i.push(k);return}let Pe=$y;if(nt.size>1){let _t=N,ir=[];for(;_t=_t.parentNode;){let we=nt.get(_t);if(we){Pe=we;break}ir.push(_t)}ir.forEach(we=>nt.set(we,Pe))}let tn=this._buildAnimation(k.namespaceId,oe,Ke,s,kr,Ci);if(k.setRealPlayer(tn),Pe===$y)ud.push(k);else{let _t=this.playersByElement.get(Pe);_t&&_t.length&&(k.parentPlayer=rr(_t)),i.push(k)}}else Nr(N,oe.fromStyles),k.onDestroy(()=>Xt(N,oe.toStyles)),Hy.push(k),u.has(N)&&i.push(k)}),Hy.forEach(A=>{let N=s.get(A.element);if(N&&N.length){let k=rr(N);A.setRealPlayer(k)}}),i.forEach(A=>{A.parentPlayer?A.syncPlayerEvents(A.parentPlayer):A.destroy()});for(let A=0;A<b.length;A++){let N=b[A],k=N[en];if(As(N,qu),k&&k.hasAnimation)continue;let oe=[];if(a.size){let tn=a.get(N);tn&&tn.length&&oe.push(...tn);let _t=this.driver.query(N,Ku,!0);for(let ir=0;ir<_t.length;ir++){let we=a.get(_t[ir]);we&&we.length&&oe.push(...we)}}let Pe=oe.filter(tn=>!tn.destroyed);Pe.length?eU(this,N,Pe):this.processLeaveNode(N)}return b.length=0,ud.forEach(A=>{this.players.push(A),A.onDone(()=>{A.destroy();let N=this.players.indexOf(A);this.players.splice(N,1)}),A.play()}),ud}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,s){let o=[];if(t){let a=this.playersByQueriedElement.get(e);a&&(o=a)}else{let a=this.playersByElement.get(e);if(a){let l=!s||s==Ta;a.forEach(c=>{c.queued||!l&&c.triggerName!=i||o.push(c)})}}return(r||i)&&(o=o.filter(a=>!(r&&r!=a.namespaceId||i&&i!=a.triggerName))),o}_beforeAnimationBuild(e,t,r){let i=t.triggerName,s=t.element,o=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:i;for(let l of t.timelines){let c=l.element,u=c!==s,d=gt(r,c,[]);this._getPreviousPlayers(c,u,o,a,t.toState).forEach(h=>{let y=h.getRealPlayer();y.beforeDestroy&&y.beforeDestroy(),h.destroy(),d.push(h)})}Nr(s,t.fromStyles)}_buildAnimation(e,t,r,i,s,o){let a=t.triggerName,l=t.element,c=[],u=new Set,d=new Set,f=t.timelines.map(y=>{let E=y.element;u.add(E);let b=E[en];if(b&&b.removedBeforeQueried)return new nr(y.duration,y.delay);let D=E!==l,O=tU((r.get(E)||Y3).map(Ke=>Ke.getRealPlayer())).filter(Ke=>{let nt=Ke;return nt.element?nt.element===E:!1}),H=s.get(E),de=o.get(E),Lt=my(this._normalizer,y.keyframes,H,de),Et=this._buildPlayer(y,Lt,O);if(y.subTimeline&&i&&d.add(E),D){let Ke=new Ma(e,a,E);Ke.setRealPlayer(Et),c.push(Ke)}return Et});c.forEach(y=>{gt(this.playersByQueriedElement,y.element,[]).push(y),y.onDone(()=>Z3(this.playersByQueriedElement,y.element,y))}),u.forEach(y=>Ft(y,wy));let h=rr(f);return h.onDestroy(()=>{u.forEach(y=>As(y,wy)),Xt(l,t.toStyles)}),d.forEach(y=>{gt(i,y,[]).push(h)}),h}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new nr(e.duration,e.delay)}},Ma=class{namespaceId;triggerName;element;_player=new nr;_containsRealPlayer=!1;_queuedCallbacks=new Map;destroyed=!1;parentPlayer=null;markedForDestroy=!1;disabled=!1;queued=!0;totalTime=0;constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>zu(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){let t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){gt(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){let t=this._player;t.triggerCallback&&t.triggerCallback(e)}};function Z3(n,e,t){let r=n.get(e);if(r){if(r.length){let i=r.indexOf(t);r.splice(i,1)}r.length==0&&n.delete(e)}return r}function J3(n){return n??null}function Xu(n){return n&&n.nodeType===1}function X3(n){return n=="start"||n=="done"}function SS(n,e){let t=n.style.display;return n.style.display=e??"none",t}function TS(n,e,t,r,i){let s=[];t.forEach(l=>s.push(SS(l)));let o=[];r.forEach((l,c)=>{let u=new Map;l.forEach(d=>{let f=e.computeStyle(c,d,i);u.set(d,f),(!f||f.length==0)&&(c[en]=Q3,o.push(c))}),n.set(c,u)});let a=0;return t.forEach(l=>SS(l,s[a++])),o}function xS(n,e){let t=new Map;if(n.forEach(a=>t.set(a,[])),e.length==0)return t;let r=1,i=new Set(e),s=new Map;function o(a){if(!a)return r;let l=s.get(a);if(l)return l;let c=a.parentNode;return t.has(c)?l=c:i.has(c)?l=r:l=o(c),s.set(a,l),l}return e.forEach(a=>{let l=o(a);l!==r&&t.get(l).push(a)}),t}function Ft(n,e){n.classList?.add(e)}function As(n,e){n.classList?.remove(e)}function eU(n,e,t){rr(t).onDone(()=>n.processLeaveNode(e))}function tU(n){let e=[];return OS(n,e),e}function OS(n,e){for(let t=0;t<n.length;t++){let r=n[t];r instanceof Ss?OS(r.players,e):e.push(r)}}function nU(n,e){let t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){let s=t[i];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}function AS(n,e,t){let r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(s=>i.add(s)):e.set(n,r),t.delete(n),!0}var Ms=class{_driver;_normalizer;_transitionEngine;_timelineEngine;_triggerCache={};onRemovalComplete=(e,t)=>{};constructor(e,t,r){this._driver=t,this._normalizer=r,this._transitionEngine=new Ly(e.body,t,r),this._timelineEngine=new Oy(e.body,t,r),this._transitionEngine.onRemovalComplete=(i,s)=>this.onRemovalComplete(i,s)}registerTrigger(e,t,r,i,s){let o=e+"-"+i,a=this._triggerCache[o];if(!a){let l=[],c=[],u=NS(this._driver,s,l,c);if(l.length)throw iS(i,l);a=H3(i,u,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(t,i,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r){this._transitionEngine.removeNode(e,t,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if(r.charAt(0)=="@"){let[s,o]=gy(r),a=i;this._timelineEngine.command(s,t,o,a)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,s){if(r.charAt(0)=="@"){let[o,a]=gy(r);return this._timelineEngine.listen(o,t,a,s)}return this._transitionEngine.listen(e,t,r,i,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}};function rU(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=Ty(e[0]),e.length>1&&(r=Ty(e[e.length-1]))):e instanceof Map&&(t=Ty(e)),t||r?new iU(n,t,r):null}var iU=(()=>{class n{_element;_startStyles;_endStyles;static initialStylesByElement=new WeakMap;_state=0;_initialStyles;constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i;let s=n.initialStylesByElement.get(t);s||n.initialStylesByElement.set(t,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&Xt(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Xt(this._element,this._initialStyles),this._endStyles&&(Xt(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Nr(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Nr(this._element,this._endStyles),this._endStyles=null),Xt(this._element,this._initialStyles),this._state=3)}}return n})();function Ty(n){let e=null;return n.forEach((t,r)=>{sU(r)&&(e=e||new Map,e.set(r,t))}),e}function sU(n){return n==="display"||n==="position"}var od=class{element;keyframes;options;_specialStyles;_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_duration;_delay;_initialized=!1;_finished=!1;_started=!1;_destroyed=!1;_finalKeyframe;_originalOnDoneFns=[];_originalOnStartFns=[];domPlayer;time=0;parentPlayer=null;currentSnapshot=new Map;constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;let e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map;let t=()=>this._onFinish();this.domPlayer.addEventListener("finish",t),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",t)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){let t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){return e.animate(this._convertKeyframesToObject(t),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){this.domPlayer===void 0&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){let e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{i!=="offset"&&e.set(i,this._finished?r:Qu(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){let t=e==="start"?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}},ad=class{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}containsElement(e,t){return yy(e,t)}getParentElement(e){return Gu(e)}query(e,t,r){return _y(e,t,r)}computeStyle(e,t,r){return Qu(e,t)}animate(e,t,r,i,s,o=[]){let a=i==0?"both":"forwards",l={duration:r,delay:i,fill:a};s&&(l.easing=s);let c=new Map,u=o.filter(h=>h instanceof od);_S(r,i)&&u.forEach(h=>{h.currentSnapshot.forEach((y,E)=>c.set(E,y))});let d=gS(t).map(h=>new Map(h));d=vS(e,d,c);let f=rU(e,d);return new od(e,d,l,f)}};var ed="@",FS="@.disabled",ld=class{namespaceId;delegate;engine;_onDestroy;\u0275type=0;constructor(e,t,r,i){this.namespaceId=e,this.delegate=t,this.engine=r,this._onDestroy=i}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.parentNode(t)&&this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){t.charAt(0)==ed&&t==FS?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r,i){return this.delegate.listen(e,t,r,i)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}},Vy=class extends ld{factory;constructor(e,t,r,i,s){super(t,r,i,s),this.factory=e,this.namespaceId=t}setProperty(e,t,r){t.charAt(0)==ed?t.charAt(1)=="."&&t==FS?(r=r===void 0?!0:!!r,this.disableAnimations(e,r)):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r,i){if(t.charAt(0)==ed){let s=oU(e),o=t.slice(1),a="";return o.charAt(0)!=ed&&([o,a]=aU(o)),this.engine.listen(this.namespaceId,s,o,a,l=>{let c=l._data||-1;this.factory.scheduleListenerCallback(c,r,l)})}return this.delegate.listen(e,t,r,i)}};function oU(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}function aU(n){let e=n.indexOf("."),t=n.substring(0,e),r=n.slice(e+1);return[t,r]}var cd=class{delegate;engine;_zone;_currentId=0;_microtaskId=1;_animationCallbacksBuffer=[];_rendererCache=new Map;_cdRecurDepth=0;constructor(e,t,r){this.delegate=e,this.engine=t,this._zone=r,t.onRemovalComplete=(i,s)=>{s?.removeChild(null,i)}}createRenderer(e,t){let r="",i=this.delegate.createRenderer(e,t);if(!e||!t?.data?.animation){let c=this._rendererCache,u=c.get(i);if(!u){let d=()=>c.delete(i);u=new ld(r,i,this.engine,d),c.set(i,u)}return u}let s=t.id,o=t.id+"-"+this._currentId;this._currentId++,this.engine.register(o,e);let a=c=>{Array.isArray(c)?c.forEach(a):this.engine.registerTrigger(s,o,e,c.name,c)};return t.data.animation.forEach(a),new Vy(this,o,i,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(e,t,r){if(e>=0&&e<this._microtaskId){this._zone.run(()=>t(r));return}let i=this._animationCallbacksBuffer;i.length==0&&queueMicrotask(()=>{this._zone.run(()=>{i.forEach(s=>{let[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),i.push([t,r])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}componentReplaced(e){this.engine.flush(),this.delegate.componentReplaced?.(e)}};var cU=(()=>{class n extends Ms{constructor(t,r,i){super(t,r,i)}ngOnDestroy(){this.flush()}static \u0275fac=function(r){return new(r||n)(j(ze),j(wi),j(bi))};static \u0275prov=q({token:n,factory:n.\u0275fac})}return n})();function uU(){return new td}function dU(n,e,t){return new cd(n,e,t)}var LS=[{provide:bi,useFactory:uU},{provide:Ms,useClass:cU},{provide:ar,useFactory:dU,deps:[vo,Ms,Ce]}],Mq=[{provide:wi,useClass:jy},{provide:wh,useValue:"NoopAnimations"},...LS],fU=[{provide:wi,useFactory:()=>new ad},{provide:wh,useFactory:()=>"BrowserAnimations"},...LS];function VS(){return qi("NgEagerAnimations"),[...fU]}up(UD,{providers:[jE(),hp(),VS()]}).catch(n=>console.error(n));
