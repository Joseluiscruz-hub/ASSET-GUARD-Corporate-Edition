import{a as D,b as H,d as bi}from"./chunk-HZ6M6AS2.js";function hd(n,e){return Object.is(n,e)}var Ae=null,Ma=!1,pd=1,wt=Symbol("SIGNAL");function W(n){let e=Ae;return Ae=n,e}function md(){return Ae}var Ci={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Ms(n){if(Ma)throw new Error("");if(Ae===null)return;Ae.consumerOnSignalRead(n);let e=Ae.nextProducerIndex++;if(Oa(Ae),e<Ae.producerNode.length&&Ae.producerNode[e]!==n&&As(Ae)){let t=Ae.producerNode[e];Pa(t,Ae.producerIndexOfThis[e])}Ae.producerNode[e]!==n&&(Ae.producerNode[e]=n,Ae.producerIndexOfThis[e]=As(Ae)?zy(n,Ae,e):0),Ae.producerLastReadVersion[e]=n.version}function $y(){pd++}function gd(n){if(!(As(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===pd)){if(!n.producerMustRecompute(n)&&!ka(n)){fd(n);return}n.producerRecomputeValue(n),fd(n)}}function yd(n){if(n.liveConsumerNode===void 0)return;let e=Ma;Ma=!0;try{for(let t of n.liveConsumerNode)t.dirty||VS(t)}finally{Ma=e}}function _d(){return Ae?.consumerAllowSignalWrites!==!1}function VS(n){n.dirty=!0,yd(n),n.consumerMarkedDirty?.(n)}function fd(n){n.dirty=!1,n.lastCleanEpoch=pd}function Ns(n){return n&&(n.nextProducerIndex=0),W(n)}function Ra(n,e){if(W(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(As(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Pa(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function ka(n){Oa(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(gd(t),r!==t.version))return!0}return!1}function Rs(n){if(Oa(n),As(n))for(let e=0;e<n.producerNode.length;e++)Pa(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function zy(n,e,t){if(Wy(n),n.liveConsumerNode.length===0&&Gy(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=zy(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function Pa(n,e){if(Wy(n),n.liveConsumerNode.length===1&&Gy(n))for(let r=0;r<n.producerNode.length;r++)Pa(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];Oa(i),i.producerIndexOfThis[r]=e}}function As(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Oa(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function Wy(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function Gy(n){return n.producerNode!==void 0}function vd(n,e){let t=Object.create(jS);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(gd(t),Ms(t),t.value===Na)throw t.error;return t.value};return r[wt]=t,r}var ud=Symbol("UNSET"),dd=Symbol("COMPUTING"),Na=Symbol("ERRORED"),jS=H(D({},Ci),{value:ud,dirty:!0,error:null,equal:hd,kind:"computed",producerMustRecompute(n){return n.value===ud||n.value===dd},producerRecomputeValue(n){if(n.value===dd)throw new Error("Detected cycle in computations.");let e=n.value;n.value=dd;let t=Ns(n),r,i=!1;try{r=n.computation(),W(null),i=e!==ud&&e!==Na&&r!==Na&&n.equal(e,r)}catch(s){r=Na,n.error=s}finally{Ra(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function US(){throw new Error}var qy=US;function Ky(n){qy(n)}function Ed(n){qy=n}var BS=null;function wd(n,e){let t=Object.create(Fa);t.value=n,e!==void 0&&(t.equal=e);let r=()=>(Ms(t),t.value);return r[wt]=t,r}function ks(n,e){_d()||Ky(n),n.equal(n.value,e)||(n.value=e,HS(n))}function bd(n,e){_d()||Ky(n),ks(n,e(n.value))}var Fa=H(D({},Ci),{equal:hd,value:void 0,kind:"signal"});function HS(n){n.version++,$y(),yd(n),BS?.()}function Cd(n){let e=W(null);try{return n()}finally{W(e)}}var Id;function Ps(){return Id}function Dn(n){let e=Id;return Id=n,e}var La=Symbol("NotFound");function te(n){return typeof n=="function"}function Va(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var ja=Va(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Os(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Ke=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let s of t)s.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(te(r))try{r()}catch(s){e=s instanceof ja?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{Yy(s)}catch(o){e=e??[],o instanceof ja?e=[...e,...o.errors]:e.push(o)}}if(e)throw new ja(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Yy(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Os(t,e)}remove(e){let{_finalizers:t}=this;t&&Os(t,e),e instanceof n&&e._removeParent(this)}};Ke.EMPTY=(()=>{let n=new Ke;return n.closed=!0,n})();var Dd=Ke.EMPTY;function Ua(n){return n instanceof Ke||n&&"closed"in n&&te(n.remove)&&te(n.add)&&te(n.unsubscribe)}function Yy(n){te(n)?n():n.unsubscribe()}var Lt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Ii={setTimeout(n,e,...t){let{delegate:r}=Ii;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Ii;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Ba(n){Ii.setTimeout(()=>{let{onUnhandledError:e}=Lt;if(e)e(n);else throw n})}function Sd(){}var Qy=Td("C",void 0,void 0);function Zy(n){return Td("E",void 0,n)}function Jy(n){return Td("N",n,void 0)}function Td(n,e,t){return{kind:n,value:e,error:t}}var Pr=null;function Di(n){if(Lt.useDeprecatedSynchronousErrorHandling){let e=!Pr;if(e&&(Pr={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=Pr;if(Pr=null,t)throw r}}else n()}function Xy(n){Lt.useDeprecatedSynchronousErrorHandling&&Pr&&(Pr.errorThrown=!0,Pr.error=n)}var Or=class extends Ke{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Ua(e)&&e.add(this)):this.destination=KS}static create(e,t,r){return new Si(e,t,r)}next(e){this.isStopped?Ad(Jy(e),this):this._next(e)}error(e){this.isStopped?Ad(Zy(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Ad(Qy,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},GS=Function.prototype.bind;function xd(n,e){return GS.call(n,e)}var Md=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Ha(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Ha(r)}else Ha(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Ha(t)}}},Si=class extends Or{constructor(e,t,r){super();let i;if(te(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&Lt.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&xd(e.next,s),error:e.error&&xd(e.error,s),complete:e.complete&&xd(e.complete,s)}):i=e}this.destination=new Md(i)}};function Ha(n){Lt.useDeprecatedSynchronousErrorHandling?Xy(n):Ba(n)}function qS(n){throw n}function Ad(n,e){let{onStoppedNotification:t}=Lt;t&&Ii.setTimeout(()=>t(n,e))}var KS={closed:!0,next:Sd,error:qS,complete:Sd};var Ti=typeof Symbol=="function"&&Symbol.observable||"@@observable";function e_(n){return n}function t_(n){return n.length===0?e_:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var De=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let s=QS(t)?t:new Si(t,r,i);return Di(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=n_(r),new r((i,s)=>{let o=new Si({next:a=>{try{t(a)}catch(l){s(l),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Ti](){return this}pipe(...t){return t_(t)(this)}toPromise(t){return t=n_(t),new t((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function n_(n){var e;return(e=n??Lt.Promise)!==null&&e!==void 0?e:Promise}function YS(n){return n&&te(n.next)&&te(n.error)&&te(n.complete)}function QS(n){return n&&n instanceof Or||YS(n)&&Ua(n)}function ZS(n){return te(n?.lift)}function nt(n){return e=>{if(ZS(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function rt(n,e,t,r,i){return new Nd(n,e,t,r,i)}var Nd=class extends Or{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(l){e.error(l)}}:super._next,this._error=i?function(a){try{i(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};var r_=Va(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Sn=(()=>{class n extends De{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new $a(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new r_}next(t){Di(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Di(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Di(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:s}=this;return r||i?Dd:(this.currentObservers=null,s.push(t),new Ke(()=>{this.currentObservers=null,Os(s,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){let t=new De;return t.source=this,t}}return n.create=(e,t)=>new $a(e,t),n})(),$a=class extends Sn{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Dd}};var Fs=class extends Sn{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};function i_(n){return n&&te(n.schedule)}function s_(n){return n[n.length-1]}function o_(n){return te(s_(n))?n.pop():void 0}function a_(n){return i_(s_(n))?n.pop():void 0}function c_(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})}function l_(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Fr(n){return this instanceof Fr?(this.v=n,this):new Fr(n)}function u_(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(h){return function(y){return Promise.resolve(y).then(h,d)}}function a(h,y){r[h]&&(i[h]=function(v){return new Promise(function(w,I){s.push([h,v,w,I])>1||l(h,v)})},y&&(i[h]=y(i[h])))}function l(h,y){try{c(r[h](y))}catch(v){f(s[0][3],v)}}function c(h){h.value instanceof Fr?Promise.resolve(h.value.v).then(u,d):f(s[0][2],h)}function u(h){l("next",h)}function d(h){l("throw",h)}function f(h,y){h(y),s.shift(),s.length&&l(s[0][0],s[0][1])}}function d_(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof l_=="function"?l_(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(o){return new Promise(function(a,l){o=n[s](o),i(a,l,o.done,o.value)})}}function i(s,o,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},o)}}var za=n=>n&&typeof n.length=="number"&&typeof n!="function";function Wa(n){return te(n?.then)}function Ga(n){return te(n[Ti])}function qa(n){return Symbol.asyncIterator&&te(n?.[Symbol.asyncIterator])}function Ka(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function JS(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Ya=JS();function Qa(n){return te(n?.[Ya])}function Za(n){return u_(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield Fr(t.read());if(i)return yield Fr(void 0);yield yield Fr(r)}}finally{t.releaseLock()}})}function Ja(n){return te(n?.getReader)}function it(n){if(n instanceof De)return n;if(n!=null){if(Ga(n))return XS(n);if(za(n))return eT(n);if(Wa(n))return tT(n);if(qa(n))return f_(n);if(Qa(n))return nT(n);if(Ja(n))return rT(n)}throw Ka(n)}function XS(n){return new De(e=>{let t=n[Ti]();if(te(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function eT(n){return new De(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function tT(n){return new De(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Ba)})}function nT(n){return new De(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function f_(n){return new De(e=>{iT(n,e).catch(t=>e.error(t))})}function rT(n){return f_(Za(n))}function iT(n,e){var t,r,i,s;return c_(this,void 0,void 0,function*(){try{for(t=d_(n);r=yield t.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})}function bt(n,e,t,r=0,i=!1){let s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function Xa(n,e=0){return nt((t,r)=>{t.subscribe(rt(r,i=>bt(r,n,()=>r.next(i),e),()=>bt(r,n,()=>r.complete(),e),i=>bt(r,n,()=>r.error(i),e)))})}function el(n,e=0){return nt((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function h_(n,e){return it(n).pipe(el(e),Xa(e))}function p_(n,e){return it(n).pipe(el(e),Xa(e))}function m_(n,e){return new De(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function g_(n,e){return new De(t=>{let r;return bt(t,e,()=>{r=n[Ya](),bt(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){t.error(o);return}s?t.complete():t.next(i)},0,!0)}),()=>te(r?.return)&&r.return()})}function tl(n,e){if(!n)throw new Error("Iterable cannot be null");return new De(t=>{bt(t,e,()=>{let r=n[Symbol.asyncIterator]();bt(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function y_(n,e){return tl(Za(n),e)}function __(n,e){if(n!=null){if(Ga(n))return h_(n,e);if(za(n))return m_(n,e);if(Wa(n))return p_(n,e);if(qa(n))return tl(n,e);if(Qa(n))return g_(n,e);if(Ja(n))return y_(n,e)}throw Ka(n)}function Lr(n,e){return e?__(n,e):it(n)}function nl(...n){let e=a_(n);return Lr(n,e)}function st(n,e){return nt((t,r)=>{let i=0;t.subscribe(rt(r,s=>{r.next(n.call(e,s,i++))}))})}var{isArray:sT}=Array;function oT(n,e){return sT(e)?n(...e):n(e)}function v_(n){return st(e=>oT(n,e))}var{isArray:aT}=Array,{getPrototypeOf:lT,prototype:cT,keys:uT}=Object;function E_(n){if(n.length===1){let e=n[0];if(aT(e))return{args:e,keys:null};if(dT(e)){let t=uT(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function dT(n){return n&&typeof n=="object"&&lT(n)===cT}function w_(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function b_(n,e,t,r,i,s,o,a){let l=[],c=0,u=0,d=!1,f=()=>{d&&!l.length&&!c&&e.complete()},h=v=>c<r?y(v):l.push(v),y=v=>{s&&e.next(v),c++;let w=!1;it(t(v,u++)).subscribe(rt(e,I=>{i?.(I),s?h(I):e.next(I)},()=>{w=!0},void 0,()=>{if(w)try{for(c--;l.length&&c<r;){let I=l.shift();o?bt(e,o,()=>y(I)):y(I)}f()}catch(I){e.error(I)}}))};return n.subscribe(rt(e,h,()=>{d=!0,f()})),()=>{a?.()}}function rl(n,e,t=1/0){return te(e)?rl((r,i)=>st((s,o)=>e(r,s,i,o))(it(n(r,i))),t):(typeof e=="number"&&(t=e),nt((r,i)=>b_(r,i,n,t)))}function Rd(...n){let e=o_(n),{args:t,keys:r}=E_(n),i=new De(s=>{let{length:o}=t;if(!o){s.complete();return}let a=new Array(o),l=o,c=o;for(let u=0;u<o;u++){let d=!1;it(t[u]).subscribe(rt(s,f=>{d||(d=!0,c--),a[u]=f},()=>l--,void 0,()=>{(!l||!d)&&(c||s.next(r?w_(r,a):a),s.complete())}))}});return e?i.pipe(v_(e)):i}function kd(n,e){return nt((t,r)=>{let i=0;t.subscribe(rt(r,s=>n.call(e,s,i++)&&r.next(s)))})}function Pd(n,e){return te(e)?rl(n,e,1):rl(n,1)}function Od(n){return nt((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Fd(n,e){return nt((t,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();t.subscribe(rt(r,l=>{i?.unsubscribe();let c=0,u=s++;it(n(l,u)).subscribe(i=rt(r,d=>r.next(e?e(l,d,u,c++):d),()=>{i=null,a()}))},()=>{o=!0,a()}))})}var cv="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",C=class extends Error{code;constructor(e,t){super(uv(e,t)),this.code=e}};function fT(n){return`NG0${Math.abs(n)}`}function uv(n,e){return`${fT(n)}${e?": "+e:""}`}var dv=Symbol("InputSignalNode#UNSET"),hT=H(D({},Fa),{transformFn:void 0,applyValueToInputSignal(n,e){ks(n,e)}});function fv(n,e){let t=Object.create(hT);t.value=n,t.transformFn=e?.transform;function r(){if(Ms(t),t.value===dv){let i=null;throw new C(-950,i)}return t.value}return r[wt]=t,r}function Ol(n){return{toString:n}.toString()}var tn=globalThis;function ge(n){for(let e in n)if(n[e]===ge)return e;throw Error("Could not find renamed property on target object.")}function pT(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Ct(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(Ct).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function Jd(n,e){return n?e?`${n} ${e}`:n:e||""}var mT=ge({__forward_ref__:ge});function an(n){return n.__forward_ref__=an,n.toString=function(){return Ct(this())},n}function Ye(n){return hv(n)?n():n}function hv(n){return typeof n=="function"&&n.hasOwnProperty(mT)&&n.__forward_ref__===an}function G(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function On(n){return{providers:n.providers||[],imports:n.imports||[]}}function Jf(n){return C_(n,pv)||C_(n,mv)}function C_(n,e){return n.hasOwnProperty(e)?n[e]:null}function gT(n){let e=n&&(n[pv]||n[mv]);return e||null}function I_(n){return n&&(n.hasOwnProperty(D_)||n.hasOwnProperty(yT))?n[D_]:null}var pv=ge({\u0275prov:ge}),D_=ge({\u0275inj:ge}),mv=ge({ngInjectableDef:ge}),yT=ge({ngInjectorDef:ge}),N=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=G({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function gv(n){return n&&!!n.\u0275providers}var _T=ge({\u0275cmp:ge}),vT=ge({\u0275dir:ge}),ET=ge({\u0275pipe:ge});var hl=ge({\u0275fac:ge}),Us=ge({__NG_ELEMENT_ID__:ge}),S_=ge({__NG_ENV_ID__:ge});function Tn(n){return typeof n=="string"?n:n==null?"":String(n)}function wT(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Tn(n)}function yv(n,e){throw new C(-200,n)}function Xf(n,e){throw new C(-201,!1)}var Y=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(Y||{}),Xd;function _v(){return Xd}function ot(n){let e=Xd;return Xd=n,e}function vv(n,e,t){let r=Jf(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&Y.Optional)return null;if(e!==void 0)return e;Xf(n,"Injector")}var bT={},jr=bT,CT="__NG_DI_FLAG__",pl=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=t;return this.injector.get(e,r.optional?La:jr,r)}},ml="ngTempTokenPath",IT="ngTokenPath",DT=/\n/gm,ST="\u0275",T_="__source";function TT(n,e=Y.Default){if(Ps()===void 0)throw new C(-203,!1);if(Ps()===null)return vv(n,void 0,e);{let t=Ps(),r;return t instanceof pl?r=t.injector:r=t,r.get(n,e&Y.Optional?null:void 0,e)}}function V(n,e=Y.Default){return(_v()||TT)(Ye(n),e)}function S(n,e=Y.Default){return V(n,Fl(e))}function Fl(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function ef(n){let e=[];for(let t=0;t<n.length;t++){let r=Ye(n[t]);if(Array.isArray(r)){if(r.length===0)throw new C(900,!1);let i,s=Y.Default;for(let o=0;o<r.length;o++){let a=r[o],l=xT(a);typeof l=="number"?l===-1?i=a.token:s|=l:i=a}e.push(V(i,s))}else e.push(V(r))}return e}function xT(n){return n[CT]}function AT(n,e,t,r){let i=n[ml];throw e[T_]&&i.unshift(e[T_]),n.message=MT(`
`+n.message,i,t,r),n[IT]=i,n[ml]=null,n}function MT(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==ST?n.slice(2):n;let i=Ct(e);if(Array.isArray(e))i=e.map(Ct).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):Ct(a)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(DT,`
  `)}`}function Ur(n,e){let t=n.hasOwnProperty(hl);return t?n[hl]:null}function eh(n,e){n.forEach(t=>Array.isArray(t)?eh(t,e):e(t))}function NT(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Ev(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function RT(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let s=i-2;n[i]=n[s],i--}n[e]=t,n[e+1]=r}}function th(n,e,t){let r=Ys(n,e);return r>=0?n[r|1]=t:(r=~r,RT(n,r,e,t)),r}function Ld(n,e){let t=Ys(n,e);if(t>=0)return n[t|1]}function Ys(n,e){return kT(n,e,1)}function kT(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}var Br={},at=[],Bs=new N(""),wv=new N("",-1),bv=new N(""),gl=class{get(e,t=jr){if(t===jr){let r=new Error(`NullInjectorError: No provider for ${Ct(e)}!`);throw r.name="NullInjectorError",r}return t}};function nh(n){return n[_T]||null}function PT(n){return n[vT]||null}function OT(n){return n[ET]||null}function Ll(n){return{\u0275providers:n}}function FT(...n){return{\u0275providers:Cv(!0,n),\u0275fromNgModule:!0}}function Cv(n,...e){let t=[],r=new Set,i,s=o=>{t.push(o)};return eh(e,o=>{let a=o;tf(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&Iv(i,s),t}function Iv(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];rh(i,s=>{e(s,r)})}}function tf(n,e,t,r){if(n=Ye(n),!n)return!1;let i=null,s=I_(n),o=!s&&nh(n);if(!s&&!o){let l=n.ngModule;if(s=I_(l),s)i=l;else return!1}else{if(o&&!o.standalone)return!1;i=n}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let l=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let c of l)tf(c,e,t,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let c;try{eh(s.imports,u=>{tf(u,e,t,r)&&(c||=[],c.push(u))})}finally{}c!==void 0&&Iv(c,e)}if(!a){let c=Ur(i)||(()=>new i);e({provide:i,useFactory:c,deps:at},i),e({provide:bv,useValue:i,multi:!0},i),e({provide:Bs,useValue:()=>V(i),multi:!0},i)}let l=s.providers;if(l!=null&&!a){let c=n;rh(l,u=>{e(u,c)})}}else return!1;return i!==n&&n.providers!==void 0}function rh(n,e){for(let t of n)gv(t)&&(t=t.\u0275providers),Array.isArray(t)?rh(t,e):e(t)}var LT=ge({provide:String,useValue:ge});function Dv(n){return n!==null&&typeof n=="object"&&LT in n}function VT(n){return!!(n&&n.useExisting)}function jT(n){return!!(n&&n.useFactory)}function Ri(n){return typeof n=="function"}function UT(n){return!!n.useClass}var Vl=new N(""),ll={},x_={},Vd;function ih(){return Vd===void 0&&(Vd=new gl),Vd}var xn=class{},Hs=class extends xn{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,rf(e,o=>this.processProvider(o)),this.records.set(wv,xi(void 0,this)),i.has("environment")&&this.records.set(xn,xi(void 0,this));let s=this.records.get(Vl);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(bv,at,Y.Self))}retrieve(e,t){let r=t;return this.get(e,r.optional?La:jr,r)}destroy(){Vs(this),this._destroyed=!0;let e=W(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),W(e)}}onDestroy(e){return Vs(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Vs(this);let t=Dn(this),r=ot(void 0),i;try{return e()}finally{Dn(t),ot(r)}}get(e,t=jr,r=Y.Default){if(Vs(this),e.hasOwnProperty(S_))return e[S_](this);r=Fl(r);let i,s=Dn(this),o=ot(void 0);try{if(!(r&Y.SkipSelf)){let l=this.records.get(e);if(l===void 0){let c=WT(e)&&Jf(e);c&&this.injectableDefInScope(c)?l=xi(nf(e),ll):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l,r)}let a=r&Y.Self?ih():this.parent;return t=r&Y.Optional&&t===jr?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[ml]=a[ml]||[]).unshift(Ct(e)),s)throw a;return AT(a,e,"R3InjectorError",this.source)}else throw a}finally{ot(o),Dn(s)}}resolveInjectorInitializers(){let e=W(null),t=Dn(this),r=ot(void 0),i;try{let s=this.get(Bs,at,Y.Self);for(let o of s)o()}finally{Dn(t),ot(r),W(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Ct(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=Ye(e);let t=Ri(e)?e:Ye(e&&e.provide),r=HT(e);if(!Ri(e)&&e.multi===!0){let i=this.records.get(t);i||(i=xi(void 0,ll,!0),i.factory=()=>ef(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let i=W(null);try{return t.value===x_?yv(Ct(e)):t.value===ll&&(t.value=x_,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&zT(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{W(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Ye(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function nf(n){let e=Jf(n),t=e!==null?e.factory:Ur(n);if(t!==null)return t;if(n instanceof N)throw new C(204,!1);if(n instanceof Function)return BT(n);throw new C(204,!1)}function BT(n){if(n.length>0)throw new C(204,!1);let t=gT(n);return t!==null?()=>t.factory(n):()=>new n}function HT(n){if(Dv(n))return xi(void 0,n.useValue);{let e=Sv(n);return xi(e,ll)}}function Sv(n,e,t){let r;if(Ri(n)){let i=Ye(n);return Ur(i)||nf(i)}else if(Dv(n))r=()=>Ye(n.useValue);else if(jT(n))r=()=>n.useFactory(...ef(n.deps||[]));else if(VT(n))r=(i,s)=>V(Ye(n.useExisting),s!==void 0&&s&Y.Optional?Y.Optional:void 0);else{let i=Ye(n&&(n.useClass||n.provide));if($T(n))r=()=>new i(...ef(n.deps));else return Ur(i)||nf(i)}return r}function Vs(n){if(n.destroyed)throw new C(205,!1)}function xi(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function $T(n){return!!n.deps}function zT(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function WT(n){return typeof n=="function"||typeof n=="object"&&n instanceof N}function rf(n,e){for(let t of n)Array.isArray(t)?rf(t,e):t&&gv(t)?rf(t.\u0275providers,e):e(t)}function jl(n,e){let t;n instanceof Hs?(Vs(n),t=n):t=new pl(n);let r,i=Dn(t),s=ot(void 0);try{return e()}finally{Dn(i),ot(s)}}function Tv(){return _v()!==void 0||Ps()!=null}function GT(n){if(!Tv())throw new C(-203,!1)}var Fn=0,X=1,L=2,Dt=3,Ut=4,ln=5,$s=6,yl=7,Me=8,ki=9,An=10,Ne=11,zs=12,A_=13,ji=14,Bt=15,Pi=16,Ai=17,Oi=18,Ul=19,xv=20,ir=21,jd=22,Hr=23,It=24,Ud=25,Be=26,Av=1;var Ws=7,qT=8,_l=9,lt=10;function sr(n){return Array.isArray(n)&&typeof n[Av]=="object"}function Kr(n){return Array.isArray(n)&&n[Av]===!0}function Mv(n){return(n.flags&4)!==0}function Ui(n){return n.componentOffset>-1}function sh(n){return(n.flags&1)===1}function rn(n){return!!n.template}function vl(n){return(n[L]&512)!==0}function Bi(n){return(n[L]&256)===256}var sf=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function Nv(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var Bl=(()=>{let n=()=>Rv;return n.ngInherit=!0,n})();function Rv(n){return n.type.prototype.ngOnChanges&&(n.setInput=YT),KT}function KT(){let n=Pv(this),e=n?.current;if(e){let t=n.previous;if(t===Br)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function YT(n,e,t,r,i){let s=this.declaredInputs[r],o=Pv(n)||QT(n,{previous:Br,current:null}),a=o.current||(o.current={}),l=o.previous,c=l[s];a[s]=new sf(c&&c.currentValue,t,l===Br),Nv(n,e,i,t)}var kv="__ngSimpleChanges__";function Pv(n){return n[kv]||null}function QT(n,e){return n[kv]=e}var M_=null;var he=function(n,e=null,t){M_?.(n,e,t)},ZT="svg",JT="math";function Mn(n){for(;Array.isArray(n);)n=n[Fn];return n}function Ov(n,e){return Mn(e[n])}function Ln(n,e){return Mn(e[n.index])}function oh(n,e){return n.data[e]}function ah(n,e){return n[e]}function XT(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function sn(n,e){let t=e[n];return sr(t)?t:t[Fn]}function lh(n){return(n[L]&128)===128}function Fi(n,e){return e==null?null:n[e]}function Fv(n){n[Ai]=0}function Lv(n){n[L]&1024||(n[L]|=1024,lh(n)&&Qs(n))}function ex(n,e){for(;n>0;)e=e[ji],n--;return e}function Hl(n){return!!(n[L]&9216||n[It]?.dirty)}function of(n){n[An].changeDetectionScheduler?.notify(8),n[L]&64&&(n[L]|=1024),Hl(n)&&Qs(n)}function Qs(n){n[An].changeDetectionScheduler?.notify(0);let e=$r(n);for(;e!==null&&!(e[L]&8192||(e[L]|=8192,!lh(e)));)e=$r(e)}function Vv(n,e){if(Bi(n))throw new C(911,!1);n[ir]===null&&(n[ir]=[]),n[ir].push(e)}function tx(n,e){if(n[ir]===null)return;let t=n[ir].indexOf(e);t!==-1&&n[ir].splice(t,1)}function $r(n){let e=n[Dt];return Kr(e)?e[Dt]:e}function jv(n){return n[yl]??=[]}function Uv(n){return n.cleanup??=[]}var q={lFrame:Qv(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var af=!1;function nx(){return q.lFrame.elementDepthCount}function rx(){q.lFrame.elementDepthCount++}function ix(){q.lFrame.elementDepthCount--}function Bv(){return q.bindingsEnabled}function sx(){return q.skipHydrationRootTNode!==null}function ox(n){return q.skipHydrationRootTNode===n}function ax(){q.skipHydrationRootTNode=null}function oe(){return q.lFrame.lView}function He(){return q.lFrame.tView}function j(n){return q.lFrame.contextLView=n,n[Me]}function U(n){return q.lFrame.contextLView=null,n}function Ht(){let n=Hv();for(;n!==null&&n.type===64;)n=n.parent;return n}function Hv(){return q.lFrame.currentTNode}function lx(){let n=q.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Zs(n,e){let t=q.lFrame;t.currentTNode=n,t.isParent=e}function $v(){return q.lFrame.isParent}function cx(){q.lFrame.isParent=!1}function ux(){return q.lFrame.contextLView}function zv(){return af}function El(n){let e=af;return af=n,e}function Wv(){let n=q.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function Gv(){return q.lFrame.bindingIndex}function dx(n){return q.lFrame.bindingIndex=n}function Hi(){return q.lFrame.bindingIndex++}function $l(n){let e=q.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function fx(){return q.lFrame.inI18n}function hx(n,e){let t=q.lFrame;t.bindingIndex=t.bindingRootIndex=n,lf(e)}function px(){return q.lFrame.currentDirectiveIndex}function lf(n){q.lFrame.currentDirectiveIndex=n}function mx(n){let e=q.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function qv(n){q.lFrame.currentQueryIndex=n}function gx(n){let e=n[X];return e.type===2?e.declTNode:e.type===1?n[ln]:null}function Kv(n,e,t){if(t&Y.SkipSelf){let i=e,s=n;for(;i=i.parent,i===null&&!(t&Y.Host);)if(i=gx(s),i===null||(s=s[ji],i.type&10))break;if(i===null)return!1;e=i,n=s}let r=q.lFrame=Yv();return r.currentTNode=e,r.lView=n,!0}function ch(n){let e=Yv(),t=n[X];q.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function Yv(){let n=q.lFrame,e=n===null?null:n.child;return e===null?Qv(n):e}function Qv(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function Zv(){let n=q.lFrame;return q.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var Jv=Zv;function uh(){let n=Zv();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function yx(n){return(q.lFrame.contextLView=ex(n,q.lFrame.contextLView))[Me]}function cn(){return q.lFrame.selectedIndex}function zr(n){q.lFrame.selectedIndex=n}function dh(){let n=q.lFrame;return oh(n.tView,n.selectedIndex)}function _x(){return q.lFrame.currentNamespace}var Xv=!0;function fh(){return Xv}function hh(n){Xv=n}function vx(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=Rv(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}function e0(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),l&&(n.viewHooks??=[]).push(-t,l),c&&((n.viewHooks??=[]).push(t,c),(n.viewCheckHooks??=[]).push(t,c)),u!=null&&(n.destroyHooks??=[]).push(t,u)}}function cl(n,e,t){t0(n,e,3,t)}function ul(n,e,t,r){(n[L]&3)===t&&t0(n,e,t,r)}function Bd(n,e){let t=n[L];(t&3)===e&&(t&=16383,t+=1,n[L]=t)}function t0(n,e,t,r){let i=r!==void 0?n[Ai]&65535:0,s=r??-1,o=e.length-1,a=0;for(let l=i;l<o;l++)if(typeof e[l+1]=="number"){if(a=e[l],r!=null&&a>=r)break}else e[l]<0&&(n[Ai]+=65536),(a<s||s==-1)&&(Ex(n,t,e,l),n[Ai]=(n[Ai]&4294901760)+l+2),l++}function N_(n,e){he(4,n,e);let t=W(null);try{e.call(n)}finally{W(t),he(5,n,e)}}function Ex(n,e,t,r){let i=t[r]<0,s=t[r+1],o=i?-t[r]:t[r],a=n[o];i?n[L]>>14<n[Ai]>>16&&(n[L]&3)===e&&(n[L]+=16384,N_(a,s)):N_(a,s)}var Ni=-1,Wr=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r){this.factory=e,this.canSeeViewProviders=t,this.injectImpl=r}};function wx(n){return(n.flags&8)!==0}function bx(n){return(n.flags&16)!==0}function Cx(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{let s=i,o=t[++r];Dx(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function Ix(n){return n===3||n===4||n===6}function Dx(n){return n.charCodeAt(0)===64}function Gs(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?R_(n,t,i,null,e[++r]):R_(n,t,i,null,null))}}return n}function R_(n,e,t,r,i){let s=0,o=n.length;if(e===-1)o=-1;else for(;s<n.length;){let a=n[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<n.length;){let a=n[s];if(typeof a=="number")break;if(a===t){i!==null&&(n[s+1]=i);return}s++,i!==null&&s++}o!==-1&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),i!==null&&n.splice(s++,0,i)}function Sx(n){return n!==Ni}function cf(n){return n&32767}function Tx(n){return n>>16}function uf(n,e){let t=Tx(n),r=e;for(;t>0;)r=r[ji],t--;return r}var df=!0;function wl(n){let e=df;return df=n,e}var xx=256,n0=xx-1,r0=5,Ax=0,nn={};function Mx(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(Us)&&(r=t[Us]),r==null&&(r=t[Us]=Ax++);let i=r&n0,s=1<<i;e.data[n+(i>>r0)]|=s}function bl(n,e){let t=i0(n,e);if(t!==-1)return t;let r=e[X];r.firstCreatePass&&(n.injectorIndex=e.length,Hd(r.data,n),Hd(e,null),Hd(r.blueprint,null));let i=s0(n,e),s=n.injectorIndex;if(Sx(i)){let o=cf(i),a=uf(i,e),l=a[X].data;for(let c=0;c<8;c++)e[s+c]=a[o+c]|l[o+c]}return e[s+8]=i,s}function Hd(n,e){n.push(0,0,0,0,0,0,0,0,e)}function i0(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function s0(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=u0(i),r===null)return Ni;if(t++,i=i[ji],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return Ni}function ff(n,e,t){Mx(n,e,t)}function o0(n,e,t){if(t&Y.Optional||n!==void 0)return n;Xf(e,"NodeInjector")}function a0(n,e,t,r){if(t&Y.Optional&&r===void 0&&(r=null),(t&(Y.Self|Y.Host))===0){let i=n[ki],s=ot(void 0);try{return i?i.get(e,r,t&Y.Optional):vv(e,r,t&Y.Optional)}finally{ot(s)}}return o0(r,e,t)}function l0(n,e,t,r=Y.Default,i){if(n!==null){if(e[L]&2048&&!(r&Y.Self)){let o=Ox(n,e,t,r,nn);if(o!==nn)return o}let s=c0(n,e,t,r,nn);if(s!==nn)return s}return a0(e,t,r,i)}function c0(n,e,t,r,i){let s=kx(t);if(typeof s=="function"){if(!Kv(e,n,r))return r&Y.Host?o0(i,t,r):a0(e,t,r,i);try{let o;if(o=s(r),o==null&&!(r&Y.Optional))Xf(t);else return o}finally{Jv()}}else if(typeof s=="number"){let o=null,a=i0(n,e),l=Ni,c=r&Y.Host?e[Bt][ln]:null;for((a===-1||r&Y.SkipSelf)&&(l=a===-1?s0(n,e):e[a+8],l===Ni||!P_(r,!1)?a=-1:(o=e[X],a=cf(l),e=uf(l,e)));a!==-1;){let u=e[X];if(k_(s,a,u.data)){let d=Nx(a,e,t,o,r,c);if(d!==nn)return d}l=e[a+8],l!==Ni&&P_(r,e[X].data[a+8]===c)&&k_(s,a,e)?(o=u,a=cf(l),e=uf(l,e)):a=-1}}return i}function Nx(n,e,t,r,i,s){let o=e[X],a=o.data[n+8],l=r==null?Ui(a)&&df:r!=o&&(a.type&3)!==0,c=i&Y.Host&&s===a,u=Rx(a,o,t,l,c);return u!==null?Cl(e,o,u,a,i):nn}function Rx(n,e,t,r,i){let s=n.providerIndexes,o=e.data,a=s&1048575,l=n.directiveStart,c=n.directiveEnd,u=s>>20,d=r?a:a+u,f=i?a+u:c;for(let h=d;h<f;h++){let y=o[h];if(h<l&&t===y||h>=l&&y.type===t)return h}if(i){let h=o[l];if(h&&rn(h)&&h.type===t)return l}return null}function Cl(n,e,t,r,i){let s=n[t],o=e.data;if(s instanceof Wr){let a=s;a.resolving&&yv(wT(o[t]));let l=wl(a.canSeeViewProviders);a.resolving=!0;let c,u=a.injectImpl?ot(a.injectImpl):null,d=Kv(n,r,Y.Default);try{s=n[t]=a.factory(void 0,i,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&vx(t,o[t],e)}finally{u!==null&&ot(u),wl(l),a.resolving=!1,Jv()}}return s}function kx(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Us)?n[Us]:void 0;return typeof e=="number"?e>=0?e&n0:Px:e}function k_(n,e,t){let r=1<<n;return!!(t[e+(n>>r0)]&r)}function P_(n,e){return!(n&Y.Self)&&!(n&Y.Host&&e)}var Il=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return l0(this._tNode,this._lView,e,Fl(r),t)}};function Px(){return new Il(Ht(),oe())}function $i(n){return Ol(()=>{let e=n.prototype.constructor,t=e[hl]||hf(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let s=i[hl]||hf(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function hf(n){return hv(n)?()=>{let e=hf(Ye(n));return e&&e()}:Ur(n)}function Ox(n,e,t,r,i){let s=n,o=e;for(;s!==null&&o!==null&&o[L]&2048&&!vl(o);){let a=c0(s,o,t,r|Y.Self,nn);if(a!==nn)return a;let l=s.parent;if(!l){let c=o[xv];if(c){let u=c.get(t,nn,r);if(u!==nn)return u}l=u0(o),o=o[ji]}s=l}return i}function u0(n){let e=n[X],t=e.type;return t===2?e.declTNode:t===1?n[ln]:null}function O_(n,e=null,t=null,r){let i=Fx(n,e,t,r);return i.resolveInjectorInitializers(),i}function Fx(n,e=null,t=null,r,i=new Set){let s=[t||at,FT(n)];return r=r||(typeof n=="object"?void 0:Ct(n)),new Hs(s,e||ih(),r||null,i)}var Nn=class n{static THROW_IF_NOT_FOUND=jr;static NULL=new gl;static create(e,t){if(Array.isArray(e))return O_({name:""},t,e,"");{let r=e.name??"";return O_({name:r},e.parent,e.providers,r)}}static \u0275prov=G({token:n,providedIn:"any",factory:()=>V(wv)});static __NG_ELEMENT_ID__=-1};var Lx=new N("");Lx.__NG_ELEMENT_ID__=n=>{let e=Ht();if(e===null)throw new C(204,!1);if(e.type&2)return e.value;if(n&Y.Optional)return null;throw new C(204,!1)};var d0=!1,zl=(()=>{class n{static __NG_ELEMENT_ID__=Vx;static __NG_ENV_ID__=t=>t}return n})(),Dl=class extends zl{_lView;constructor(e){super(),this._lView=e}onDestroy(e){let t=this._lView;return Bi(t)?(e(),()=>{}):(Vv(t,e),()=>tx(t,e))}};function Vx(){return new Dl(oe())}var Gr=class{},Wl=new N("",{providedIn:"root",factory:()=>!1});var f0=new N(""),ph=new N(""),zi=(()=>{class n{taskId=0;pendingTasks=new Set;get _hasPendingTasks(){return this.hasPendingTasks.value}hasPendingTasks=new Fs(!1);add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static \u0275prov=G({token:n,providedIn:"root",factory:()=>new n})}return n})();var pf=class extends Sn{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,Tv()&&(this.destroyRef=S(zl,{optional:!0})??void 0,this.pendingTasks=S(zi,{optional:!0})??void 0)}emit(e){let t=W(null);try{super.next(e)}finally{W(t)}}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&typeof e=="object"){let l=e;i=l.next?.bind(l),s=l.error?.bind(l),o=l.complete?.bind(l)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof Ke&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},_t=pf;function qs(...n){}function h0(n){let e,t;function r(){n=qs;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function F_(n){return queueMicrotask(()=>n()),()=>{n=qs}}var mh="isAngularZone",Sl=mh+"_ID",jx=0,be=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new _t(!1);onMicrotaskEmpty=new _t(!1);onStable=new _t(!1);onError=new _t(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=d0}=e;if(typeof Zone>"u")throw new C(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&r,o.shouldCoalesceRunChangeDetection=i,o.callbackScheduled=!1,o.scheduleInRootZone=s,Hx(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(mh)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new C(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new C(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,Ux,qs,qs);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},Ux={};function gh(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Bx(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){h0(()=>{n.callbackScheduled=!1,mf(n),n.isCheckStableRunning=!0,gh(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),mf(n)}function Hx(n){let e=()=>{Bx(n)},t=jx++;n._inner=n._inner.fork({name:"angular",properties:{[mh]:!0,[Sl]:t,[Sl+t]:!0},onInvokeTask:(r,i,s,o,a,l)=>{if($x(l))return r.invokeTask(s,o,a,l);try{return L_(n),r.invokeTask(s,o,a,l)}finally{(n.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),V_(n)}},onInvoke:(r,i,s,o,a,l,c)=>{try{return L_(n),r.invoke(s,o,a,l,c)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!zx(l)&&e(),V_(n)}},onHasTask:(r,i,s,o)=>{r.hasTask(s,o),i===s&&(o.change=="microTask"?(n._hasPendingMicrotasks=o.microTask,mf(n),gh(n)):o.change=="macroTask"&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,s,o)=>(r.handleError(s,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}function mf(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function L_(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function V_(n){n._nesting--,gh(n)}var Tl=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new _t;onMicrotaskEmpty=new _t;onStable=new _t;onError=new _t;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function $x(n){return p0(n,"__ignore_ng_zone__")}function zx(n){return p0(n,"__scheduler_tick__")}function p0(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var Rn=class{_console=console;handleError(e){this._console.error("ERROR",e)}},Wx=new N("",{providedIn:"root",factory:()=>{let n=S(be),e=S(Rn);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function j_(n,e){return fv(n,e)}function Gx(n){return fv(dv,n)}var m0=(j_.required=Gx,j_);function qx(){return g0(Ht(),oe())}function g0(n,e){return new ar(Ln(n,e))}var ar=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=qx}return n})();function Kx(n){return typeof n=="function"&&n[wt]!==void 0}function O(n,e){let t=wd(n,e?.equal),r=t[wt];return t.set=i=>ks(r,i),t.update=i=>bd(r,i),t.asReadonly=Yx.bind(t),t}function Yx(){let n=this[wt];if(n.readonlyFn===void 0){let e=()=>this();e[wt]=n,n.readonlyFn=e}return n.readonlyFn}function y0(n){return Kx(n)&&typeof n.set=="function"}function _0(n){return(n.flags&128)===128}var v0=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(v0||{}),E0=new Map,Qx=0;function Zx(){return Qx++}function Jx(n){E0.set(n[Ul],n)}function gf(n){E0.delete(n[Ul])}var U_="__ngContext__";function Js(n,e){sr(e)?(n[U_]=e[Ul],Jx(e)):n[U_]=e}function w0(n){return C0(n[zs])}function b0(n){return C0(n[Ut])}function C0(n){for(;n!==null&&!Kr(n);)n=n[Ut];return n}var yf;function I0(n){yf=n}function D0(){if(yf!==void 0)return yf;if(typeof document<"u")return document;throw new C(210,!1)}var yh=new N("",{providedIn:"root",factory:()=>Xx}),Xx="ng",_h=new N(""),Xs=new N("",{providedIn:"platform",factory:()=>"unknown"});var vh=new N(""),Eh=new N("",{providedIn:"root",factory:()=>D0().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var eA="h",tA="b";var S0=!1,nA=new N("",{providedIn:"root",factory:()=>S0});var T0=function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n}(T0||{}),Gl=new N(""),B_=new Set;function Wi(n){B_.has(n)||(B_.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var x0=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=rA}return n})();function rA(){return new x0(oe(),Ht())}var iA=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=G({token:n,providedIn:"root",factory:()=>new n})}return n})();var sA=(n,e,t,r)=>{};function oA(n,e,t,r){sA(n,e,t,r)}var aA=()=>null;function A0(n,e,t=!1){return aA(n,e,t)}function M0(n,e){let t=n.contentQueries;if(t!==null){let r=W(null);try{for(let i=0;i<t.length;i+=2){let s=t[i],o=t[i+1];if(o!==-1){let a=n.data[o];qv(s),a.contentQueries(2,e[o],o)}}}finally{W(r)}}}function _f(n,e,t){qv(0);let r=W(null);try{e(n,t)}finally{W(r)}}function N0(n,e,t){if(Mv(e)){let r=W(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=n.data[o];if(a.contentQueries){let l=t[o];a.contentQueries(1,l,o)}}}finally{W(r)}}}var on=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(on||{});var il;function lA(){if(il===void 0&&(il=null,tn.trustedTypes))try{il=tn.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return il}function ql(n){return lA()?.createHTML(n)||n}var sl;function cA(){if(sl===void 0&&(sl=null,tn.trustedTypes))try{sl=tn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return sl}function H_(n){return cA()?.createHTML(n)||n}var kn=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${cv})`}},vf=class extends kn{getTypeName(){return"HTML"}},Ef=class extends kn{getTypeName(){return"Style"}},wf=class extends kn{getTypeName(){return"Script"}},bf=class extends kn{getTypeName(){return"URL"}},Cf=class extends kn{getTypeName(){return"ResourceURL"}};function Vn(n){return n instanceof kn?n.changingThisBreaksApplicationSecurity:n}function Yr(n,e){let t=uA(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${cv})`)}return t===e}function uA(n){return n instanceof kn&&n.getTypeName()||null}function R0(n){return new vf(n)}function k0(n){return new Ef(n)}function P0(n){return new wf(n)}function O0(n){return new bf(n)}function F0(n){return new Cf(n)}function dA(n){let e=new Df(n);return fA()?new If(e):e}var If=class{inertDocumentHelper;constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{let t=new window.DOMParser().parseFromString(ql(e),"text/html").body;return t===null?this.inertDocumentHelper.getInertBodyElement(e):(t.firstChild?.remove(),t)}catch{return null}}},Df=class{defaultDoc;inertDocument;constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){let t=this.inertDocument.createElement("template");return t.innerHTML=ql(e),t}};function fA(){try{return!!new window.DOMParser().parseFromString(ql(""),"text/html")}catch{return!1}}var hA=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function wh(n){return n=String(n),n.match(hA)?n:"unsafe:"+n}function jn(n){let e={};for(let t of n.split(","))e[t]=!0;return e}function eo(...n){let e={};for(let t of n)for(let r in t)t.hasOwnProperty(r)&&(e[r]=!0);return e}var L0=jn("area,br,col,hr,img,wbr"),V0=jn("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),j0=jn("rp,rt"),pA=eo(j0,V0),mA=eo(V0,jn("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),gA=eo(j0,jn("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),$_=eo(L0,mA,gA,pA),U0=jn("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),yA=jn("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),_A=jn("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),vA=eo(U0,yA,_A),EA=jn("script,style,template"),Sf=class{sanitizedSomething=!1;buf=[];sanitizeChildren(e){let t=e.firstChild,r=!0,i=[];for(;t;){if(t.nodeType===Node.ELEMENT_NODE?r=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,r&&t.firstChild){i.push(t),t=CA(t);continue}for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let s=bA(t);if(s){t=s;break}t=i.pop()}}return this.buf.join("")}startElement(e){let t=z_(e).toLowerCase();if(!$_.hasOwnProperty(t))return this.sanitizedSomething=!0,!EA.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);let r=e.attributes;for(let i=0;i<r.length;i++){let s=r.item(i),o=s.name,a=o.toLowerCase();if(!vA.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let l=s.value;U0[a]&&(l=wh(l)),this.buf.push(" ",o,'="',W_(l),'"')}return this.buf.push(">"),!0}endElement(e){let t=z_(e).toLowerCase();$_.hasOwnProperty(t)&&!L0.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(W_(e))}};function wA(n,e){return(n.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function bA(n){let e=n.nextSibling;if(e&&n!==e.previousSibling)throw B0(e);return e}function CA(n){let e=n.firstChild;if(e&&wA(n,e))throw B0(e);return e}function z_(n){let e=n.nodeName;return typeof e=="string"?e:"FORM"}function B0(n){return new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`)}var IA=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,DA=/([^\#-~ |!])/g;function W_(n){return n.replace(/&/g,"&amp;").replace(IA,function(e){let t=e.charCodeAt(0),r=e.charCodeAt(1);return"&#"+((t-55296)*1024+(r-56320)+65536)+";"}).replace(DA,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var ol;function bh(n,e){let t=null;try{ol=ol||dA(n);let r=e?String(e):"";t=ol.getInertBodyElement(r);let i=5,s=r;do{if(i===0)throw new Error("Failed to sanitize html because the input is unstable");i--,r=s,s=t.innerHTML,t=ol.getInertBodyElement(r)}while(r!==s);let a=new Sf().sanitizeChildren(G_(t)||t);return ql(a)}finally{if(t){let r=G_(t)||t;for(;r.firstChild;)r.firstChild.remove()}}}function G_(n){return"content"in n&&SA(n)?n.content:null}function SA(n){return n.nodeType===Node.ELEMENT_NODE&&n.nodeName==="TEMPLATE"}function TA(n,e){return n.createText(e)}function xA(n,e,t){n.setValue(e,t)}function H0(n,e,t){return n.createElement(e,t)}function Tf(n,e,t,r,i){n.insertBefore(e,t,r,i)}function $0(n,e,t){n.appendChild(e,t)}function q_(n,e,t,r,i){r!==null?Tf(n,e,t,r,i):$0(n,e,t)}function AA(n,e,t){n.removeChild(null,e,t)}function MA(n,e,t){n.setAttribute(e,"style",t)}function NA(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function z0(n,e,t){let{mergedAttrs:r,classes:i,styles:s}=t;r!==null&&Cx(n,e,r),i!==null&&NA(n,e,i),s!==null&&MA(n,e,s)}var Un=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(Un||{});function Qr(n){let e=RA();return e?H_(e.sanitize(Un.HTML,n)||""):Yr(n,"HTML")?H_(Vn(n)):bh(D0(),Tn(n))}function RA(){let n=oe();return n&&n[An].sanitizer}function kA(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}var W0="ng-template";function PA(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&kA(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(Ch(n))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===t)return!0}return!1}function Ch(n){return n.type===4&&n.value!==W0}function OA(n,e,t){let r=n.type===4&&!t?W0:n.value;return e===r}function FA(n,e,t){let r=4,i=n.attrs,s=i!==null?jA(i):0,o=!1;for(let a=0;a<e.length;a++){let l=e[a];if(typeof l=="number"){if(!o&&!Vt(r)&&!Vt(l))return!1;if(o&&Vt(l))continue;o=!1,r=l|r&1;continue}if(!o)if(r&4){if(r=2|r&1,l!==""&&!OA(n,l,t)||l===""&&e.length===1){if(Vt(r))return!1;o=!0}}else if(r&8){if(i===null||!PA(n,i,l,t)){if(Vt(r))return!1;o=!0}}else{let c=e[++a],u=LA(l,i,Ch(n),t);if(u===-1){if(Vt(r))return!1;o=!0;continue}if(c!==""){let d;if(u>s?d="":d=i[u+1].toLowerCase(),r&2&&c!==d){if(Vt(r))return!1;o=!0}}}}return Vt(r)||o}function Vt(n){return(n&1)===0}function LA(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){let o=e[i];if(o===n)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return UA(e,n)}function VA(n,e,t=!1){for(let r=0;r<e.length;r++)if(FA(n,e[r],t))return!0;return!1}function jA(n){for(let e=0;e<n.length;e++){let t=n[e];if(Ix(t))return e}return n.length}function UA(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function K_(n,e){return n?":not("+e.trim()+")":e}function BA(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if(typeof o=="string")if(r&2){let a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!Vt(o)&&(e+=K_(s,i),i=""),r=o,s=s||!Vt(r);t++}return i!==""&&(e+=K_(s,i)),e}function HA(n){return n.map(BA).join(",")}function $A(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let s=n[r];if(typeof s=="string")i===2?s!==""&&e.push(s,n[++r]):i===8&&t.push(s);else{if(!Vt(i))break;i=s}r++}return t.length&&e.push(1,...t),e}var ct={};function Ih(n,e,t,r,i,s,o,a,l,c,u){let d=Be+r,f=d+i,h=zA(d,f),y=typeof c=="function"?c():c;return h[X]={type:n,blueprint:h,template:t,queries:null,viewQuery:a,declTNode:e,data:h.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:l,consts:y,incompleteFirstPass:!1,ssrId:u}}function zA(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:ct);return t}function WA(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=Ih(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Dh(n,e,t,r,i,s,o,a,l,c,u){let d=e.blueprint.slice();return d[Fn]=i,d[L]=r|4|128|8|64|1024,(c!==null||n&&n[L]&2048)&&(d[L]|=2048),Fv(d),d[Dt]=d[ji]=n,d[Me]=t,d[An]=o||n&&n[An],d[Ne]=a||n&&n[Ne],d[ki]=l||n&&n[ki]||null,d[ln]=s,d[Ul]=Zx(),d[$s]=u,d[xv]=c,d[Bt]=e.type==2?n[Bt]:d,d}function GA(n,e,t){let r=Ln(e,n),i=WA(t),s=n[An].rendererFactory,o=K0(n,Dh(n,i,null,G0(t),r,e,null,s.createRenderer(r,t),null,null,null));return n[e.index]=o}function G0(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function q0(n,e,t,r){if(t===0)return-1;let i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function K0(n,e){return n[zs]?n[A_][Ut]=e:n[zs]=e,n[A_]=e,e}function _(n=1){Y0(He(),oe(),cn()+n,!1)}function Y0(n,e,t,r){if(!r)if((e[L]&3)===3){let s=n.preOrderCheckHooks;s!==null&&cl(e,s,t)}else{let s=n.preOrderHooks;s!==null&&ul(e,s,0,t)}zr(t)}var Kl=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(Kl||{});function xf(n,e,t,r){let i=W(null);try{let[s,o,a]=n.inputs[t],l=null;(o&Kl.SignalBased)!==0&&(l=e[s][wt]),l!==null&&l.transformFn!==void 0?r=l.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,l,r,t,s):Nv(e,l,s,r)}finally{W(i)}}function Q0(n,e,t,r,i){let s=cn(),o=r&2;try{zr(-1),o&&e.length>Be&&Y0(n,e,Be,!1),he(o?2:0,i),t(r,i)}finally{zr(s),he(o?3:1,i)}}function Sh(n,e,t){JA(n,e,t),(t.flags&64)===64&&XA(n,e,t)}function Z0(n,e,t=Ln){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?t(e,n):n[o];n[i++]=a}}}function qA(n,e,t,r){let s=r.get(nA,S0)||t===on.ShadowDom,o=n.selectRootElement(e,s);return KA(o),o}function KA(n){YA(n)}var YA=()=>null;function QA(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function J0(n,e,t,r,i,s,o,a){if(!a&&Th(e,n,t,r,i)){Ui(e)&&ZA(t,e.index);return}if(e.type&3){let l=Ln(e,t);r=QA(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(l,r,i)}else e.type&12}function ZA(n,e){let t=sn(e,n);t[L]&16||(t[L]|=64)}function JA(n,e,t){let r=t.directiveStart,i=t.directiveEnd;Ui(t)&&GA(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||bl(t,e);let s=t.initialInputs;for(let o=r;o<i;o++){let a=n.data[o],l=Cl(e,n,o,t);if(Js(l,e),s!==null&&rM(e,o-r,l,a,t,s),rn(a)){let c=sn(t.index,e);c[Me]=Cl(e,n,o,t)}}}function XA(n,e,t){let r=t.directiveStart,i=t.directiveEnd,s=t.index,o=px();try{zr(s);for(let a=r;a<i;a++){let l=n.data[a],c=e[a];lf(a),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&eM(l,c)}}finally{zr(-1),lf(o)}}function eM(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function X0(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let s=t[i];VA(e,s.selectors,!1)&&(r??=[],rn(s)?r.unshift(s):r.push(s))}return r}function tM(n,e,t,r,i,s){let o=Ln(n,e);nM(e[Ne],o,s,n.value,t,r,i)}function nM(n,e,t,r,i,s,o){if(s==null)n.removeAttribute(e,i,t);else{let a=o==null?Tn(s):o(s,r||"",i);n.setAttribute(e,i,a,t)}}function rM(n,e,t,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;a+=2){let l=o[a],c=o[a+1];xf(r,t,l,c)}}function iM(n,e){let t=n[ki],r=t?t.get(Rn,null):null;r&&r.handleError(e)}function Th(n,e,t,r,i){let s=n.inputs?.[r],o=n.hostDirectiveInputs?.[r],a=!1;if(o)for(let l=0;l<o.length;l+=2){let c=o[l],u=o[l+1],d=e.data[c];xf(d,t[c],u,i),a=!0}if(s)for(let l of s){let c=t[l],u=e.data[l];xf(u,c,r,i),a=!0}return a}function sM(n,e){let t=sn(e,n),r=t[X];oM(r,t);let i=t[Fn];i!==null&&t[$s]===null&&(t[$s]=A0(i,t[ki])),he(18),xh(r,t,t[Me]),he(19,t[Me])}function oM(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function xh(n,e,t){ch(e);try{let r=n.viewQuery;r!==null&&_f(1,r,t);let i=n.template;i!==null&&Q0(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Oi]?.finishViewCreation(n),n.staticContentQueries&&M0(n,e),n.staticViewQueries&&_f(2,n.viewQuery,t);let s=n.components;s!==null&&aM(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[L]&=-5,uh()}}function aM(n,e){for(let t=0;t<e.length;t++)sM(n,e[t])}function Ah(n,e,t,r){let i=W(null);try{let s=e.tView,a=n[L]&4096?4096:16,l=Dh(n,s,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),c=n[e.index];l[Pi]=c;let u=n[Oi];return u!==null&&(l[Oi]=u.createEmbeddedView(s)),xh(s,l,t),l}finally{W(i)}}function Mh(n,e){return!e||e.firstChild===null||_0(n)}var lM;function Nh(n,e){return lM(n,e)}var Pn=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Pn||{});function eE(n){return(n.flags&32)===32}function Mi(n,e,t,r,i){if(r!=null){let s,o=!1;Kr(r)?s=r:sr(r)&&(o=!0,r=r[Fn]);let a=Mn(r);n===0&&t!==null?i==null?$0(e,t,a):Tf(e,t,a,i||null,!0):n===1&&t!==null?Tf(e,t,a,i||null,!0):n===2?AA(e,a,o):n===3&&e.destroyNode(a),s!=null&&EM(e,n,s,t,i)}}function cM(n,e){tE(n,e),e[Fn]=null,e[ln]=null}function uM(n,e,t,r,i,s){r[Fn]=i,r[ln]=e,Yl(n,r,t,1,i,s)}function tE(n,e){e[An].changeDetectionScheduler?.notify(9),Yl(n,e,e[Ne],2,null,null)}function dM(n){let e=n[zs];if(!e)return $d(n[X],n);for(;e;){let t=null;if(sr(e))t=e[zs];else{let r=e[lt];r&&(t=r)}if(!t){for(;e&&!e[Ut]&&e!==n;)sr(e)&&$d(e[X],e),e=e[Dt];e===null&&(e=n),sr(e)&&$d(e[X],e),t=e&&e[Ut]}e=t}}function Rh(n,e){let t=n[_l],r=t.indexOf(e);t.splice(r,1)}function kh(n,e){if(Bi(e))return;let t=e[Ne];t.destroyNode&&Yl(n,e,t,3,null,null),dM(e)}function $d(n,e){if(Bi(e))return;let t=W(null);try{e[L]&=-129,e[L]|=256,e[It]&&Rs(e[It]),hM(n,e),fM(n,e),e[X].type===1&&e[Ne].destroy();let r=e[Pi];if(r!==null&&Kr(e[Dt])){r!==e[Dt]&&Rh(r,e);let i=e[Oi];i!==null&&i.detachView(n)}gf(e)}finally{W(t)}}function fM(n,e){let t=n.cleanup,r=e[yl];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let a=t[o+3];a>=0?r[a]():r[-a].unsubscribe(),o+=2}else{let a=r[t[o+1]];t[o].call(a)}r!==null&&(e[yl]=null);let i=e[ir];if(i!==null){e[ir]=null;for(let o=0;o<i.length;o++){let a=i[o];a()}}let s=e[Hr];if(s!==null){e[Hr]=null;for(let o of s)o.destroy()}}function hM(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof Wr)){let s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],l=s[o+1];he(4,a,l);try{l.call(a)}finally{he(5,a,l)}}else{he(4,i,s);try{s.call(i)}finally{he(5,i,s)}}}}}function pM(n,e,t){return mM(n,e.parent,t)}function mM(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[Fn];if(Ui(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===on.None||i===on.Emulated)return null}return Ln(r,t)}function gM(n,e,t){return _M(n,e,t)}function yM(n,e,t){return n.type&40?Ln(n,t):null}var _M=yM,Y_;function Ph(n,e,t,r){let i=pM(n,r,e),s=e[Ne],o=r.parent||e[ln],a=gM(o,r,e);if(i!=null)if(Array.isArray(t))for(let l=0;l<t.length;l++)q_(s,i,t[l],a,!1);else q_(s,i,t,a,!1);Y_!==void 0&&Y_(s,r,e,t,i)}function js(n,e){if(e!==null){let t=e.type;if(t&3)return Ln(e,n);if(t&4)return Af(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return js(n,r);{let i=n[e.index];return Kr(i)?Af(-1,i):Mn(i)}}else{if(t&128)return js(n,e.next);if(t&32)return Nh(e,n)()||Mn(n[e.index]);{let r=nE(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=$r(n[Bt]);return js(i,r)}else return js(n,e.next)}}}return null}function nE(n,e){if(e!==null){let r=n[Bt][ln],i=e.projection;return r.projection[i]}return null}function Af(n,e){let t=lt+n+1;if(t<e.length){let r=e[t],i=r[X].firstChild;if(i!==null)return js(r,i)}return e[Ws]}function Oh(n,e,t,r,i,s,o){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],l=t.type;if(o&&e===0&&(a&&Js(Mn(a),r),t.flags|=2),!eE(t))if(l&8)Oh(n,e,t.child,r,i,s,!1),Mi(e,n,i,a,s);else if(l&32){let c=Nh(t,r),u;for(;u=c();)Mi(e,n,i,u,s);Mi(e,n,i,a,s)}else l&16?vM(n,e,r,t,i,s):Mi(e,n,i,a,s);t=o?t.projectionNext:t.next}}function Yl(n,e,t,r,i,s){Oh(t,r,n.firstChild,e,i,s,!1)}function vM(n,e,t,r,i,s){let o=t[Bt],l=o[ln].projection[r.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++){let u=l[c];Mi(e,n,i,u,s)}else{let c=l,u=o[Dt];_0(r)&&(c.flags|=128),Oh(n,e,c,u,i,s,!0)}}function EM(n,e,t,r,i){let s=t[Ws],o=Mn(t);s!==o&&Mi(e,n,r,s,i);for(let a=lt;a<t.length;a++){let l=t[a];Yl(l[X],l,n,e,r,s)}}function wM(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=r.indexOf("-")===-1?void 0:Pn.DashCase;i==null?n.removeStyle(t,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Pn.Important),n.setStyle(t,r,i,s))}}function xl(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let s=e[t.index];s!==null&&r.push(Mn(s)),Kr(s)&&bM(s,r);let o=t.type;if(o&8)xl(n,e,t.child,r);else if(o&32){let a=Nh(t,e),l;for(;l=a();)r.push(l)}else if(o&16){let a=nE(e,t);if(Array.isArray(a))r.push(...a);else{let l=$r(e[Bt]);xl(l[X],l,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function bM(n,e){for(let t=lt;t<n.length;t++){let r=n[t],i=r[X].firstChild;i!==null&&xl(r[X],r,i,e)}n[Ws]!==n[Fn]&&e.push(n[Ws])}function rE(n){if(n[Ud]!==null){for(let e of n[Ud])e.impl.addSequence(e);n[Ud].length=0}}var iE=[];function CM(n){return n[It]??IM(n)}function IM(n){let e=iE.pop()??Object.create(SM);return e.lView=n,e}function DM(n){n.lView[It]!==n&&(n.lView=null,iE.push(n))}var SM=H(D({},Ci),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{Qs(n.lView)},consumerOnSignalRead(){this.lView[It]=this}});function TM(n){let e=n[It]??Object.create(xM);return e.lView=n,e}var xM=H(D({},Ci),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=$r(n.lView);for(;e&&!sE(e[X]);)e=$r(e);e&&Lv(e)},consumerOnSignalRead(){this.lView[It]=this}});function sE(n){return n.type!==2}function oE(n){if(n[Hr]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[Hr])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[L]&8192)}}var AM=100;function aE(n,e=!0,t=0){let i=n[An].rendererFactory,s=!1;s||i.begin?.();try{MM(n,t)}catch(o){throw e&&iM(n,o),o}finally{s||i.end?.()}}function MM(n,e){let t=zv();try{El(!0),Mf(n,e);let r=0;for(;Hl(n);){if(r===AM)throw new C(103,!1);r++,Mf(n,1)}}finally{El(t)}}function NM(n,e,t,r){if(Bi(e))return;let i=e[L],s=!1,o=!1;ch(e);let a=!0,l=null,c=null;s||(sE(n)?(c=CM(e),l=Ns(c)):md()===null?(a=!1,c=TM(e),l=Ns(c)):e[It]&&(Rs(e[It]),e[It]=null));try{Fv(e),dx(n.bindingStartIndex),t!==null&&Q0(n,e,t,2,r);let u=(i&3)===3;if(!s)if(u){let h=n.preOrderCheckHooks;h!==null&&cl(e,h,null)}else{let h=n.preOrderHooks;h!==null&&ul(e,h,0,null),Bd(e,0)}if(o||RM(e),oE(e),lE(e,0),n.contentQueries!==null&&M0(n,e),!s)if(u){let h=n.contentCheckHooks;h!==null&&cl(e,h)}else{let h=n.contentHooks;h!==null&&ul(e,h,1),Bd(e,1)}PM(n,e);let d=n.components;d!==null&&uE(e,d,0);let f=n.viewQuery;if(f!==null&&_f(2,f,r),!s)if(u){let h=n.viewCheckHooks;h!==null&&cl(e,h)}else{let h=n.viewHooks;h!==null&&ul(e,h,2),Bd(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[jd]){for(let h of e[jd])h();e[jd]=null}s||(rE(e),e[L]&=-73)}catch(u){throw s||Qs(e),u}finally{c!==null&&(Ra(c,l),a&&DM(c)),uh()}}function lE(n,e){for(let t=w0(n);t!==null;t=b0(t))for(let r=lt;r<t.length;r++){let i=t[r];cE(i,e)}}function RM(n){for(let e=w0(n);e!==null;e=b0(e)){if(!(e[L]&2))continue;let t=e[_l];for(let r=0;r<t.length;r++){let i=t[r];Lv(i)}}}function kM(n,e,t){he(18);let r=sn(e,n);cE(r,t),he(19,r[Me])}function cE(n,e){lh(n)&&Mf(n,e)}function Mf(n,e){let r=n[X],i=n[L],s=n[It],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&ka(s)),o||=!1,s&&(s.dirty=!1),n[L]&=-9217,o)NM(r,n,r.template,n[Me]);else if(i&8192){oE(n),lE(n,1);let a=r.components;a!==null&&uE(n,a,1),rE(n)}}function uE(n,e,t){for(let r=0;r<e.length;r++)kM(n,e[r],t)}function PM(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)zr(~i);else{let s=i,o=t[++r],a=t[++r];hx(o,s);let l=e[s];he(24,l),a(2,l),he(25,l)}}}finally{zr(-1)}}function Fh(n,e){let t=zv()?64:1088;for(n[An].changeDetectionScheduler?.notify(e);n;){n[L]|=t;let r=$r(n);if(vl(n)&&!r)return n;n=r}return null}function OM(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function dE(n,e){let t=lt+e;if(t<n.length)return n[t]}function Lh(n,e,t,r=!0){let i=e[X];if(FM(i,e,n,t),r){let o=Af(t,n),a=e[Ne],l=a.parentNode(n[Ws]);l!==null&&uM(i,n[ln],a,e,l,o)}let s=e[$s];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function fE(n,e){let t=Vh(n,e);return t!==void 0&&kh(t[X],t),t}function Vh(n,e){if(n.length<=lt)return;let t=lt+e,r=n[t];if(r){let i=r[Pi];i!==null&&i!==n&&Rh(i,r),e>0&&(n[t-1][Ut]=r[Ut]);let s=Ev(n,lt+e);cM(r[X],r);let o=s[Oi];o!==null&&o.detachView(s[X]),r[Dt]=null,r[Ut]=null,r[L]&=-129}return r}function FM(n,e,t,r){let i=lt+r,s=t.length;r>0&&(t[i-1][Ut]=e),r<s-lt?(e[Ut]=t[i],NT(t,lt+r,e)):(t.push(e),e[Ut]=null),e[Dt]=t;let o=e[Pi];o!==null&&t!==o&&hE(o,e);let a=e[Oi];a!==null&&a.insertView(n),of(e),e[L]|=128}function hE(n,e){let t=n[_l],r=e[Dt];if(sr(r))n[L]|=2;else{let i=r[Dt][Bt];e[Bt]!==i&&(n[L]|=2)}t===null?n[_l]=[e]:t.push(e)}var Nf=class{_lView;_cdRefInjectingView;notifyErrorHandler;_appRef=null;_attachedToViewContainer=!1;get rootNodes(){let e=this._lView,t=e[X];return xl(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r}get context(){return this._lView[Me]}set context(e){this._lView[Me]=e}get destroyed(){return Bi(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Dt];if(Kr(e)){let t=e[qT],r=t?t.indexOf(this):-1;r>-1&&(Vh(e,r),Ev(t,r))}this._attachedToViewContainer=!1}kh(this._lView[X],this._lView)}onDestroy(e){Vv(this._lView,e)}markForCheck(){Fh(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[L]&=-129}reattach(){of(this._lView),this._lView[L]|=128}detectChanges(){this._lView[L]|=1024,aE(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new C(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=vl(this._lView),t=this._lView[Pi];t!==null&&!e&&Rh(t,this._lView),tE(this._lView[X],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new C(902,!1);this._appRef=e;let t=vl(this._lView),r=this._lView[Pi];r!==null&&!t&&hE(r,this._lView),of(this._lView)}};function jh(n,e,t,r,i){let s=n.data[e];if(s===null)s=LM(n,e,t,r,i),fx()&&(s.flags|=32);else if(s.type&64){s.type=t,s.value=r,s.attrs=i;let o=lx();s.injectorIndex=o===null?-1:o.injectorIndex}return Zs(s,!0),s}function LM(n,e,t,r,i){let s=Hv(),o=$v(),a=o?s:s&&s.parent,l=n.data[e]=jM(n,a,t,e,r,i);return VM(n,l,s,o),l}function VM(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function jM(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,a=0;return sx()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var n5=new RegExp(`^(\\d+)*(${tA}|${eA})*(.*)`);var UM=()=>null;function Uh(n,e){return UM(n,e)}var BM=class{},pE=class{},Rf=class{resolveComponentFactory(e){throw Error(`No component factory found for ${Ct(e)}.`)}},Bh=class{static NULL=new Rf},or=class{},Zr=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>HM()}return n})();function HM(){let n=oe(),e=Ht(),t=sn(e.index,n);return(sr(t)?t:n)[Ne]}var $M=(()=>{class n{static \u0275prov=G({token:n,providedIn:"root",factory:()=>null})}return n})();var zd={},kf=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=Fl(r);let i=this.injector.get(e,zd,r);return i!==zd||t===zd?i:this.parentInjector.get(e,t,r)}};function Q_(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=Jd(i,a);else if(s==2){let l=a,c=e[++o];r=Jd(r,l+": "+c+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function ne(n,e=Y.Default){let t=oe();if(t===null)return V(n,e);let r=Ht();return l0(r,t,Ye(n),e)}function mE(n,e,t,r,i){let s=r===null?null:{"":-1},o=i(n,t);if(o!==null){let a,l=null,c=null,u=WM(o);u===null?a=o:[a,l,c]=u,KM(n,e,t,a,s,l,c)}s!==null&&r!==null&&zM(t,r,s)}function zM(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let s=t[e[i+1]];if(s==null)throw new C(-301,!1);r.push(e[i],s)}}function WM(n){let e=null,t=!1;for(let o=0;o<n.length;o++){let a=n[o];if(o===0&&rn(a)&&(e=a),a.findHostDirectiveDefs!==null){t=!0;break}}if(!t)return null;let r=null,i=null,s=null;for(let o of n)o.findHostDirectiveDefs!==null&&(r??=[],i??=new Map,s??=new Map,GM(o,r,s,i)),o===e&&(r??=[],r.push(o));return r!==null?(r.push(...e===null?n:n.slice(1)),[r,i,s]):null}function GM(n,e,t,r){let i=e.length;n.findHostDirectiveDefs(n,e,r),t.set(n,[i,e.length-1])}function qM(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function KM(n,e,t,r,i,s,o){let a=r.length,l=!1;for(let f=0;f<a;f++){let h=r[f];!l&&rn(h)&&(l=!0,qM(n,t,f)),ff(bl(t,e),n,h.type)}e1(t,n.data.length,a);for(let f=0;f<a;f++){let h=r[f];h.providersResolver&&h.providersResolver(h)}let c=!1,u=!1,d=q0(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let f=0;f<a;f++){let h=r[f];if(t.mergedAttrs=Gs(t.mergedAttrs,h.hostAttrs),QM(n,t,e,d,h),XM(d,h,i),o!==null&&o.has(h)){let[v,w]=o.get(h);t.directiveToIndex.set(h.type,[d,v+t.directiveStart,w+t.directiveStart])}else(s===null||!s.has(h))&&t.directiveToIndex.set(h.type,d);h.contentQueries!==null&&(t.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(t.flags|=64);let y=h.type.prototype;!c&&(y.ngOnChanges||y.ngOnInit||y.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),c=!0),!u&&(y.ngOnChanges||y.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),u=!0),d++}YM(n,t,s)}function YM(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))Z_(0,e,i,r),Z_(1,e,i,r),X_(e,r,!1);else{let s=t.get(i);J_(0,e,s,r),J_(1,e,s,r),X_(e,r,!0)}}}function Z_(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let s in i)if(i.hasOwnProperty(s)){let o;n===0?o=e.inputs??={}:o=e.outputs??={},o[s]??=[],o[s].push(r),gE(e,s)}}function J_(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let s in i)if(i.hasOwnProperty(s)){let o=i[s],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[o]??=[],a[o].push(r,s),gE(e,o)}}function gE(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function X_(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:s}=n;if(r===null||!t&&i===null||t&&s===null||Ch(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let o=null,a=0;for(;a<r.length;){let l=r[a];if(l===0){a+=4;continue}else if(l===5){a+=2;continue}else if(typeof l=="number")break;if(!t&&i.hasOwnProperty(l)){let c=i[l];for(let u of c)if(u===e){o??=[],o.push(l,r[a+1]);break}}else if(t&&s.hasOwnProperty(l)){let c=s[l];for(let u=0;u<c.length;u+=2)if(c[u]===e){o??=[],o.push(c[u+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(o)}function QM(n,e,t,r,i){n.data[r]=i;let s=i.factory||(i.factory=Ur(i.type,!0)),o=new Wr(s,rn(i),ne);n.blueprint[r]=o,t[r]=o,ZM(n,e,r,q0(n,t,i.hostVars,ct),i)}function ZM(n,e,t,r,i){let s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;o===null&&(o=n.hostBindingOpCodes=[]);let a=~e.index;JM(o)!=a&&o.push(a),o.push(t,r,s)}}function JM(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function XM(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;rn(e)&&(t[""]=n)}}function e1(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function yE(n,e,t,r,i,s,o,a){let l=e.consts,c=Fi(l,o),u=jh(e,n,2,r,c);return s&&mE(e,t,u,Fi(l,a),i),u.mergedAttrs=Gs(u.mergedAttrs,u.attrs),u.attrs!==null&&Q_(u,u.attrs,!1),u.mergedAttrs!==null&&Q_(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function _E(n,e){e0(n,e),Mv(e)&&n.queries.elementEnd(e)}var Pf=class extends Bh{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=nh(e);return new Of(t,this.ngModule)}};function t1(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],s={propName:t,templateName:e,isSignal:(r&Kl.SignalBased)!==0};return i&&(s.transform=i),s})}function n1(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function r1(n,e,t){let r=e instanceof xn?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new kf(t,r):t}function i1(n){let e=n.get(or,null);if(e===null)throw new C(407,!1);let t=n.get($M,null),r=n.get(Gr,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r}}function s1(n,e){let t=(n.selectors[0][0]||"div").toLowerCase();return H0(e,t,t==="svg"?ZT:t==="math"?JT:null)}var Of=class extends pE{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=t1(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=n1(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=HA(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i){he(22);let s=W(null);try{let o=this.componentDef,a=r?["ng-version","19.2.18"]:$A(this.componentDef.selectors[0]),l=Ih(0,null,null,1,0,null,null,null,null,[a],null),c=r1(o,i||this.ngModule,e),u=i1(c),d=u.rendererFactory.createRenderer(null,o),f=r?qA(d,r,o.encapsulation,c):s1(o,d),h=Dh(null,l,null,512|G0(o),null,null,u,d,c,null,A0(f,c,!0));h[Be]=f,ch(h);let y=null;try{let v=yE(Be,l,h,"#host",()=>[this.componentDef],!0,0);f&&(z0(d,f,v),Js(f,h)),Sh(l,h,v),N0(l,v,h),_E(l,v),t!==void 0&&o1(v,this.ngContentSelectors,t),y=sn(v.index,h),h[Me]=y[Me],xh(l,h,null)}catch(v){throw y!==null&&gf(y),gf(h),v}finally{he(23),uh()}return new Ff(this.componentType,h)}finally{W(s)}}},Ff=class extends BM{_rootLView;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t){super(),this._rootLView=t,this._tNode=oh(t[X],Be),this.location=g0(this._tNode,t),this.instance=sn(this._tNode.index,t)[Me],this.hostView=this.changeDetectorRef=new Nf(t,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,s=Th(r,i[X],i,e,t);this.previousInputValues.set(e,t);let o=sn(r.index,i);Fh(o,1)}get injector(){return new Il(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function o1(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let s=t[i];r.push(s!=null&&s.length?Array.from(s):null)}}var a1=()=>!1;function l1(n,e,t){return a1(n,e,t)}var Al=class{};var Ml=class extends Al{injector;componentFactoryResolver=new Pf(this);instance=null;constructor(e){super();let t=new Hs([...e.providers,{provide:Al,useValue:this},{provide:Bh,useValue:this.componentFactoryResolver}],e.parent||ih(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function c1(n,e,t=null){return new Ml({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var u1=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=Cv(!1,t.type),i=r.length>0?c1([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=G({token:n,providedIn:"environment",factory:()=>new n(V(xn))})}return n})();function Pe(n){return Ol(()=>{let e=vE(n),t=H(D({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===v0.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(u1).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||on.Emulated,styles:n.styles||at,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&Wi("NgStandalone"),EE(t);let r=n.dependencies;return t.directiveDefs=ev(r,!1),t.pipeDefs=ev(r,!0),t.id=m1(t),t})}function d1(n){return nh(n)||PT(n)}function f1(n){return n!==null}function Bn(n){return Ol(()=>({type:n.type,bootstrap:n.bootstrap||at,declarations:n.declarations||at,imports:n.imports||at,exports:n.exports||at,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function h1(n,e){if(n==null)return Br;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],s,o,a,l;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s,l=i[3]||null):(s=i,o=i,a=Kl.None,l=null),t[s]=[r,a,l],e[s]=o}return t}function p1(n){if(n==null)return Br;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function Oe(n){return Ol(()=>{let e=vE(n);return EE(e),e})}function Hh(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function vE(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||Br,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||at,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:h1(n.inputs,e),outputs:p1(n.outputs),debugInfo:null}}function EE(n){n.features?.forEach(e=>e(n))}function ev(n,e){if(!n)return null;let t=e?OT:d1;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(f1)}function m1(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let s of r.join("|"))e=Math.imul(31,e)+s.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function g1(n){return Object.getPrototypeOf(n.prototype).constructor}function Tt(n){let e=g1(n.type),t=!0,r=[n];for(;e;){let i;if(rn(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new C(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let o=n;o.inputs=Wd(n.inputs),o.declaredInputs=Wd(n.declaredInputs),o.outputs=Wd(n.outputs);let a=i.hostBindings;a&&w1(n,a);let l=i.viewQuery,c=i.contentQueries;if(l&&v1(n,l),c&&E1(n,c),y1(n,i),pT(n.outputs,i.outputs),rn(i)&&i.data.animation){let u=n.data;u.animation=(u.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(n),a===Tt&&(t=!1)}}e=Object.getPrototypeOf(e)}_1(r)}function y1(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function _1(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Gs(i.hostAttrs,t=Gs(t,i.hostAttrs))}}function Wd(n){return n===Br?{}:n===at?[]:n}function v1(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function E1(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,s)=>{e(r,i,s),t(r,i,s)}:n.contentQueries=e}function w1(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function wE(n,e,t){return n[e]=t}function St(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function $h(n,e,t,r){let i=St(n,e,t);return St(n,e+1,r)||i}function b1(n,e,t,r,i){let s=$h(n,e,t,r);return St(n,e+2,i)||s}function C1(n,e,t,r,i,s,o,a,l){let c=e.consts,u=jh(e,n,4,o||null,a||null);Bv()&&mE(e,t,u,Fi(c,l),X0),u.mergedAttrs=Gs(u.mergedAttrs,u.attrs),e0(e,u);let d=u.tView=Ih(2,u,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c,null);return e.queries!==null&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}function Lf(n,e,t,r,i,s,o,a,l,c){let u=t+Be,d=e.firstCreatePass?C1(u,e,n,r,i,s,o,a,l):e.data[u];Zs(d,!1);let f=I1(e,n,d,t);fh()&&Ph(e,n,f,d),Js(f,n);let h=OM(f,n,f,d);return n[u]=h,K0(n,h),l1(h,d,n),sh(d)&&Sh(e,n,d),l!=null&&Z0(n,d,c),d}function re(n,e,t,r,i,s,o,a){let l=oe(),c=He(),u=Fi(c.consts,s);return Lf(l,c,n,e,t,r,i,u,o,a),re}var I1=D1;function D1(n,e,t,r){return hh(!0),e[Ne].createComment("")}var bE=new N("");var CE=(()=>{class n{static \u0275prov=G({token:n,providedIn:"root",factory:()=>new Vf})}return n})(),Vf=class{queuedEffectCount=0;queues=new Map;schedule(e){this.enqueue(e)}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),this.queuedEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||(this.queuedEffectCount++,r.add(e))}flush(){for(;this.queuedEffectCount>0;)for(let[e,t]of this.queues)e===null?this.flushQueue(t):e.run(()=>this.flushQueue(t))}flushQueue(e){for(let t of e)e.delete(t),this.queuedEffectCount--,t.run()}};function to(n){return!!n&&typeof n.then=="function"}function IE(n){return!!n&&typeof n.subscribe=="function"}var S1=new N("");var DE=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=S(S1,{optional:!0})??[];injector=S(Nn);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let s=jl(this.injector,i);if(to(s))t.push(s);else if(IE(s)){let o=new Promise((a,l)=>{s.subscribe({complete:a,error:l})});t.push(o)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),T1=new N("");function x1(){Ed(()=>{throw new C(600,!1)})}function A1(n){return n.isBoundToModule}var M1=10;var Li=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=S(Wx);afterRenderManager=S(iA);zonelessEnabled=S(Wl);rootEffectScheduler=S(CE);dirtyFlags=0;tracingSnapshot=null;externalTestViews=new Set;afterTick=new Sn;get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];isStable=S(zi).hasPendingTasks.pipe(st(t=>!t));constructor(){S(Gl,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=S(xn);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=Nn.NULL){he(10);let s=t instanceof pE;if(!this._injector.get(DE).done){let h="";throw new C(405,h)}let a;s?a=t:a=this._injector.get(Bh).resolveComponentFactory(t),this.componentTypes.push(a.componentType);let l=A1(a)?void 0:this._injector.get(Al),c=r||a.selector,u=a.create(i,[],c,l),d=u.location.nativeElement,f=u.injector.get(bE,null);return f?.registerApplication(d),u.onDestroy(()=>{this.detachView(u.hostView),dl(this.components,u),f?.unregisterApplication(d)}),this._loadComponent(u),he(11,u),u}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){he(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(T0.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new C(101,!1);let t=W(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,W(t),this.afterTick.next(),he(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(or,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<M1;)he(14),this.synchronizeOnce(),he(15)}synchronizeOnce(){if(this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush()),this.dirtyFlags&7){let t=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:r,notifyErrorHandler:i}of this.allViews)N1(r,i,t,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}else this._rendererFactory?.begin?.(),this._rendererFactory?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Hl(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;dl(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(T1,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>dl(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new C(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function dl(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function N1(n,e,t,r){if(!t&&!Hl(n))return;aE(n,e,t&&!r?0:1)}function Ql(n,e,t,r){let i=oe(),s=Hi();if(St(i,s,e)){let o=He(),a=dh();tM(a,i,n,e,t,r)}return Ql}function R1(n,e,t,r){return St(n,Hi(),t)?e+Tn(t)+r:ct}function k1(n,e,t,r,i,s){let o=Gv(),a=$h(n,o,t,i);return $l(2),a?e+Tn(t)+r+Tn(i)+s:ct}function P1(n,e,t,r,i,s,o,a){let l=Gv(),c=b1(n,l,t,i,o);return $l(3),c?e+Tn(t)+r+Tn(i)+s+Tn(o)+a:ct}function al(n,e){return n<<17|e<<2}function qr(n){return n>>17&32767}function O1(n){return(n&2)==2}function F1(n,e){return n&131071|e<<17}function jf(n){return n|2}function Vi(n){return(n&131068)>>2}function Gd(n,e){return n&-131069|e<<2}function L1(n){return(n&1)===1}function Uf(n){return n|1}function V1(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=qr(o),l=Vi(o);n[r]=t;let c=!1,u;if(Array.isArray(t)){let d=t;u=d[1],(u===null||Ys(d,u)>0)&&(c=!0)}else u=t;if(i)if(l!==0){let f=qr(n[a+1]);n[r+1]=al(f,a),f!==0&&(n[f+1]=Gd(n[f+1],r)),n[a+1]=F1(n[a+1],r)}else n[r+1]=al(a,0),a!==0&&(n[a+1]=Gd(n[a+1],r)),a=r;else n[r+1]=al(l,0),a===0?a=r:n[l+1]=Gd(n[l+1],r),l=r;c&&(n[r+1]=jf(n[r+1])),tv(n,u,r,!0),tv(n,u,r,!1),j1(e,u,n,r,s),o=al(a,l),s?e.classBindings=o:e.styleBindings=o}function j1(n,e,t,r,i){let s=i?n.residualClasses:n.residualStyles;s!=null&&typeof e=="string"&&Ys(s,e)>=0&&(t[r+1]=Uf(t[r+1]))}function tv(n,e,t,r){let i=n[t+1],s=e===null,o=r?qr(i):Vi(i),a=!1;for(;o!==0&&(a===!1||s);){let l=n[o],c=n[o+1];U1(l,e)&&(a=!0,n[o+1]=r?Uf(c):jf(c)),o=r?qr(c):Vi(c)}a&&(n[t+1]=r?jf(i):Uf(i))}function U1(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?Ys(n,e)>=0:!1}var jt={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function B1(n){return n.substring(jt.key,jt.keyEnd)}function H1(n){return $1(n),SE(n,TE(n,0,jt.textEnd))}function SE(n,e){let t=jt.textEnd;return t===e?-1:(e=jt.keyEnd=z1(n,jt.key=e,t),TE(n,e,t))}function $1(n){jt.key=0,jt.keyEnd=0,jt.value=0,jt.valueEnd=0,jt.textEnd=n.length}function TE(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function z1(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}function le(n,e,t){let r=oe(),i=Hi();if(St(r,i,e)){let s=He(),o=dh();J0(s,o,r,n,e,r[Ne],t,!1)}return le}function Bf(n,e,t,r,i){Th(e,n,t,i?"class":"style",r)}function ye(n,e){return G1(n,e,null,!0),ye}function _e(n){q1(X1,W1,n,!0)}function W1(n,e){for(let t=H1(e);t>=0;t=SE(e,t))th(n,B1(e),!0)}function G1(n,e,t,r){let i=oe(),s=He(),o=$l(2);if(s.firstUpdatePass&&AE(s,n,o,r),e!==ct&&St(i,o,e)){let a=s.data[cn()];ME(s,a,i,i[Ne],n,i[o+1]=tN(e,t),r,o)}}function q1(n,e,t,r){let i=He(),s=$l(2);i.firstUpdatePass&&AE(i,null,s,r);let o=oe();if(t!==ct&&St(o,s,t)){let a=i.data[cn()];if(NE(a,r)&&!xE(i,s)){let l=r?a.classesWithoutHost:a.stylesWithoutHost;l!==null&&(t=Jd(l,t||"")),Bf(i,a,o,t,r)}else eN(i,a,o,o[Ne],o[s+1],o[s+1]=J1(n,e,t),r,s)}}function xE(n,e){return e>=n.expandoStartIndex}function AE(n,e,t,r){let i=n.data;if(i[t+1]===null){let s=i[cn()],o=xE(n,t);NE(s,r)&&e===null&&!o&&(e=!1),e=K1(i,s,e,r),V1(i,s,e,t,o,r)}}function K1(n,e,t,r){let i=mx(n),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=qd(null,n,e,t,r),t=Ks(t,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||n[o]!==i)if(t=qd(i,n,e,t,r),s===null){let l=Y1(n,e,r);l!==void 0&&Array.isArray(l)&&(l=qd(null,n,e,l[1],r),l=Ks(l,e.attrs,r),Q1(n,e,r,l))}else s=Z1(n,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),t}function Y1(n,e,t){let r=t?e.classBindings:e.styleBindings;if(Vi(r)!==0)return n[qr(r)]}function Q1(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[qr(i)]=r}function Z1(n,e,t){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=n[s].hostAttrs;r=Ks(r,o,t)}return Ks(r,e.attrs,t)}function qd(n,e,t,r,i){let s=null,o=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<o&&(s=e[a],r=Ks(r,s.hostAttrs,i),s!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function Ks(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),th(n,o,t?!0:e[++s]))}return n===void 0?null:n}function J1(n,e,t){if(t==null||t==="")return at;let r=[],i=Vn(t);if(Array.isArray(i))for(let s=0;s<i.length;s++)n(r,i[s],!0);else if(typeof i=="object")for(let s in i)i.hasOwnProperty(s)&&n(r,s,i[s]);else typeof i=="string"&&e(r,i);return r}function X1(n,e,t){let r=String(e);r!==""&&!r.includes(" ")&&th(n,r,t)}function eN(n,e,t,r,i,s,o,a){i===ct&&(i=at);let l=0,c=0,u=0<i.length?i[0]:null,d=0<s.length?s[0]:null;for(;u!==null||d!==null;){let f=l<i.length?i[l+1]:void 0,h=c<s.length?s[c+1]:void 0,y=null,v;u===d?(l+=2,c+=2,f!==h&&(y=d,v=h)):d===null||u!==null&&u<d?(l+=2,y=u):(c+=2,y=d,v=h),y!==null&&ME(n,e,t,r,y,v,o,a),u=l<i.length?i[l]:null,d=c<s.length?s[c]:null}}function ME(n,e,t,r,i,s,o,a){if(!(e.type&3))return;let l=n.data,c=l[a+1],u=L1(c)?nv(l,e,t,i,Vi(c),o):void 0;if(!Nl(u)){Nl(s)||O1(c)&&(s=nv(l,null,t,i,a,o));let d=Ov(cn(),t);wM(r,o,d,i,s)}}function nv(n,e,t,r,i,s){let o=e===null,a;for(;i>0;){let l=n[i],c=Array.isArray(l),u=c?l[1]:l,d=u===null,f=t[i+1];f===ct&&(f=d?at:void 0);let h=d?Ld(f,r):u===r?f:void 0;if(c&&!Nl(h)&&(h=Ld(l,r)),Nl(h)&&(a=h,o))return a;let y=n[i+1];i=o?qr(y):Vi(y)}if(e!==null){let l=s?e.residualClasses:e.residualStyles;l!=null&&(a=Ld(l,r))}return a}function Nl(n){return n!==void 0}function tN(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Ct(Vn(n)))),n}function NE(n,e){return(n.flags&(e?8:16))!==0}var Hf=class{destroy(e){}updateValue(e,t){}swap(e,t){let r=Math.min(e,t),i=Math.max(e,t),s=this.detach(i);if(i-r>1){let o=this.detach(r);this.attach(r,s),this.attach(i,o)}else this.attach(r,s)}move(e,t){this.attach(t,this.detach(e))}};function Kd(n,e,t,r,i){return n===t&&Object.is(e,r)?1:Object.is(i(n,e),i(t,r))?-1:0}function nN(n,e,t){let r,i,s=0,o=n.length-1,a=void 0;if(Array.isArray(e)){let l=e.length-1;for(;s<=o&&s<=l;){let c=n.at(s),u=e[s],d=Kd(s,c,s,u,t);if(d!==0){d<0&&n.updateValue(s,u),s++;continue}let f=n.at(o),h=e[l],y=Kd(o,f,l,h,t);if(y!==0){y<0&&n.updateValue(o,h),o--,l--;continue}let v=t(s,c),w=t(o,f),I=t(s,u);if(Object.is(I,w)){let P=t(l,h);Object.is(P,v)?(n.swap(s,o),n.updateValue(o,h),l--,o--):n.move(o,s),n.updateValue(s,u),s++;continue}if(r??=new Rl,i??=iv(n,s,o,t),$f(n,r,s,I))n.updateValue(s,u),s++,o++;else if(i.has(I))r.set(v,n.detach(s)),o--;else{let P=n.create(s,e[s]);n.attach(s,P),s++,o++}}for(;s<=l;)rv(n,r,t,s,e[s]),s++}else if(e!=null){let l=e[Symbol.iterator](),c=l.next();for(;!c.done&&s<=o;){let u=n.at(s),d=c.value,f=Kd(s,u,s,d,t);if(f!==0)f<0&&n.updateValue(s,d),s++,c=l.next();else{r??=new Rl,i??=iv(n,s,o,t);let h=t(s,d);if($f(n,r,s,h))n.updateValue(s,d),s++,o++,c=l.next();else if(!i.has(h))n.attach(s,n.create(s,d)),s++,o++,c=l.next();else{let y=t(s,u);r.set(y,n.detach(s)),o--}}}for(;!c.done;)rv(n,r,t,n.length,c.value),c=l.next()}for(;s<=o;)n.destroy(n.detach(o--));r?.forEach(l=>{n.destroy(l)})}function $f(n,e,t,r){return e!==void 0&&e.has(r)?(n.attach(t,e.get(r)),e.delete(r),!0):!1}function rv(n,e,t,r,i){if($f(n,e,r,t(r,i)))n.updateValue(r,i);else{let s=n.create(r,i);n.attach(r,s)}}function iv(n,e,t,r){let i=new Set;for(let s=e;s<=t;s++)i.add(r(s,n.at(s)));return i}var Rl=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let t=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(t)?(this.kvMap.set(e,this._vMap.get(t)),this._vMap.delete(t)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,t){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,t)}else this.kvMap.set(e,t)}forEach(e){for(let[t,r]of this.kvMap)if(e(r,t),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,t)}}};function ie(n,e){Wi("NgControlFlow");let t=oe(),r=Hi(),i=t[r]!==ct?t[r]:-1,s=i!==-1?kl(t,Be+i):void 0,o=0;if(St(t,r,n)){let a=W(null);try{if(s!==void 0&&fE(s,o),n!==-1){let l=Be+n,c=kl(t,l),u=qf(t[X],l),d=Uh(c,u.tView.ssrId),f=Ah(t,u,e,{dehydratedView:d});Lh(c,f,o,Mh(u,d))}}finally{W(a)}}else if(s!==void 0){let a=dE(s,o);a!==void 0&&(a[Me]=e)}}var zf=class{lContainer;$implicit;$index;constructor(e,t,r){this.lContainer=e,this.$implicit=t,this.$index=r}get $count(){return this.lContainer.length-lt}};function Zl(n){return n}var Wf=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,t,r){this.hasEmptyBlock=e,this.trackByFn=t,this.liveCollection=r}};function Qe(n,e,t,r,i,s,o,a,l,c,u,d,f){Wi("NgControlFlow");let h=oe(),y=He(),v=l!==void 0,w=oe(),I=a?o.bind(w[Bt][Me]):o,P=new Wf(v,I);w[Be+n]=P,Lf(h,y,n+1,e,t,r,i,Fi(y.consts,s)),v&&Lf(h,y,n+2,l,c,u,d,Fi(y.consts,f))}var Gf=class extends Hf{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,t,r){super(),this.lContainer=e,this.hostLView=t,this.templateTNode=r}get length(){return this.lContainer.length-lt}at(e){return this.getLView(e)[Me].$implicit}attach(e,t){let r=t[$s];this.needsIndexUpdate||=e!==this.length,Lh(this.lContainer,t,e,Mh(this.templateTNode,r))}detach(e){return this.needsIndexUpdate||=e!==this.length-1,rN(this.lContainer,e)}create(e,t){let r=Uh(this.lContainer,this.templateTNode.tView.ssrId),i=Ah(this.hostLView,this.templateTNode,new zf(this.lContainer,t,e),{dehydratedView:r});return this.operationsCounter?.recordCreate(),i}destroy(e){kh(e[X],e),this.operationsCounter?.recordDestroy()}updateValue(e,t){this.getLView(e)[Me].$implicit=t}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[Me].$index=e}getLView(e){return iN(this.lContainer,e)}};function Ze(n){let e=W(null),t=cn();try{let r=oe(),i=r[X],s=r[t],o=t+1,a=kl(r,o);if(s.liveCollection===void 0){let c=qf(i,o);s.liveCollection=new Gf(a,r,c)}else s.liveCollection.reset();let l=s.liveCollection;if(nN(l,n,s.trackByFn),l.updateIndexes(),s.hasEmptyBlock){let c=Hi(),u=l.length===0;if(St(r,c,u)){let d=t+2,f=kl(r,d);if(u){let h=qf(i,d),y=Uh(f,h.tView.ssrId),v=Ah(r,h,void 0,{dehydratedView:y});Lh(f,v,0,Mh(h,y))}else fE(f,0)}}}finally{W(e)}}function kl(n,e){return n[e]}function rN(n,e){return Vh(n,e)}function iN(n,e){return dE(n,e)}function qf(n,e){return oh(n,e)}function p(n,e,t,r){let i=oe(),s=He(),o=Be+n,a=i[Ne],l=s.firstCreatePass?yE(o,s,i,e,X0,Bv(),t,r):s.data[o],c=sN(s,i,l,a,e,n);i[o]=c;let u=sh(l);return Zs(l,!0),z0(a,c,l),!eE(l)&&fh()&&Ph(s,i,c,l),(nx()===0||u)&&Js(c,i),rx(),u&&(Sh(s,i,l),N0(s,l,i)),r!==null&&Z0(i,l),p}function m(){let n=Ht();$v()?cx():(n=n.parent,Zs(n,!1));let e=n;ox(e)&&ax(),ix();let t=He();return t.firstCreatePass&&_E(t,e),e.classesWithoutHost!=null&&wx(e)&&Bf(t,e,oe(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&bx(e)&&Bf(t,e,oe(),e.stylesWithoutHost,!1),m}function E(n,e,t,r){return p(n,e,t,r),m(),E}var sN=(n,e,t,r,i,s)=>(hh(!0),H0(r,i,_x()));function ve(){return oe()}var Vr=void 0;function oN(n){let e=Math.floor(Math.abs(n)),t=n.toString().replace(/^[^.]*\.?/,"").length;return e===1&&t===0?1:5}var aN=["en",[["a","p"],["AM","PM"],Vr],[["AM","PM"],Vr,Vr],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Vr,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Vr,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Vr,"{1} 'at' {0}",Vr],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",oN],Yd={};function ut(n){let e=lN(n),t=sv(e);if(t)return t;let r=e.split("-")[0];if(t=sv(r),t)return t;if(r==="en")return aN;throw new C(701,!1)}function sv(n){return n in Yd||(Yd[n]=tn.ng&&tn.ng.common&&tn.ng.common.locales&&tn.ng.common.locales[n]),Yd[n]}var we=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(we||{});function lN(n){return n.toLowerCase().replace(/_/g,"-")}var Pl="en-US",cN="USD";var uN=Pl;function dN(n){typeof n=="string"&&(uN=n.toLowerCase().replace(/_/g,"-"))}function ov(n,e,t){return function r(i){if(i===Function)return t;let s=Ui(n)?sn(n.index,e):e;Fh(s,5);let o=e[Me],a=av(e,o,t,i),l=r.__ngNextListenerFn__;for(;l;)a=av(e,o,l,i)&&a,l=l.__ngNextListenerFn__;return a}}function av(n,e,t,r){let i=W(null);try{return he(6,e,t),t(r)!==!1}catch(s){return fN(n,s),!1}finally{he(7,e,t),W(i)}}function fN(n,e){let t=n[ki],r=t?t.get(Rn,null):null;r&&r.handleError(e)}function lv(n,e,t,r,i,s){let o=e[t],a=e[X],c=a.data[t].outputs[r],u=o[c],d=a.firstCreatePass?Uv(a):null,f=jv(e),h=u.subscribe(s),y=f.length;f.push(s,h),d&&d.push(i,n.index,y,-(y+1))}function A(n,e,t,r){let i=oe(),s=He(),o=Ht();return RE(s,i,i[Ne],o,n,e,r),A}function hN(n,e,t,r){let i=n.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===t&&i[s+1]===r){let a=e[yl],l=i[s+2];return a.length>l?a[l]:null}typeof o=="string"&&(s+=2)}return null}function RE(n,e,t,r,i,s,o){let a=sh(r),c=n.firstCreatePass?Uv(n):null,u=jv(e),d=!0;if(r.type&3||o){let f=Ln(r,e),h=o?o(f):f,y=u.length,v=o?I=>o(Mn(I[r.index])):r.index,w=null;if(!o&&a&&(w=hN(n,e,i,r.index)),w!==null){let I=w.__ngLastListenerFn__||w;I.__ngNextListenerFn__=s,w.__ngLastListenerFn__=s,d=!1}else{s=ov(r,e,s),oA(e,h,i,s);let I=t.listen(h,i,s);u.push(s,I),c&&c.push(i,v,y,y+1)}}else s=ov(r,e,s);if(d){let f=r.outputs?.[i],h=r.hostDirectiveOutputs?.[i];if(h&&h.length)for(let y=0;y<h.length;y+=2){let v=h[y],w=h[y+1];lv(r,e,v,w,i,s)}if(f&&f.length)for(let y of f)lv(r,e,y,i,i,s)}}function T(n=1){return yx(n)}function un(n){let e=ux();return ah(e,Be+n)}function g(n,e=""){let t=oe(),r=He(),i=n+Be,s=r.firstCreatePass?jh(r,i,1,e,null):r.data[i],o=pN(r,t,s,e,n);t[i]=o,fh()&&Ph(r,t,o,s),Zs(s,!1)}var pN=(n,e,t,r,i)=>(hh(!0),TA(e[Ne],r));function Q(n){return F("",n,""),Q}function F(n,e,t){let r=oe(),i=R1(r,n,e,t);return i!==ct&&zh(r,cn(),i),F}function no(n,e,t,r,i){let s=oe(),o=k1(s,n,e,t,r,i);return o!==ct&&zh(s,cn(),o),no}function Jl(n,e,t,r,i,s,o){let a=oe(),l=P1(a,n,e,t,r,i,s,o);return l!==ct&&zh(a,cn(),l),Jl}function zh(n,e,t){let r=Ov(e,n);xA(n[Ne],r,t)}function xt(n,e,t){y0(e)&&(e=e());let r=oe(),i=Hi();if(St(r,i,e)){let s=He(),o=dh();J0(s,o,r,n,e,r[Ne],t,!1)}return xt}function $t(n,e){let t=y0(n);return t&&n.set(e),t}function At(n,e){let t=oe(),r=He(),i=Ht();return RE(r,t,t[Ne],i,n,e),At}function mN(n,e,t){let r=He();if(r.firstCreatePass){let i=rn(n);Kf(t,r.data,r.blueprint,i,!0),Kf(e,r.data,r.blueprint,i,!1)}}function Kf(n,e,t,r,i){if(n=Ye(n),Array.isArray(n))for(let s=0;s<n.length;s++)Kf(n[s],e,t,r,i);else{let s=He(),o=oe(),a=Ht(),l=Ri(n)?n:Ye(n.provide),c=Sv(n),u=a.providerIndexes&1048575,d=a.directiveStart,f=a.providerIndexes>>20;if(Ri(n)||!n.multi){let h=new Wr(c,i,ne),y=Zd(l,e,i?u:u+f,d);y===-1?(ff(bl(a,o),s,l),Qd(s,n,e.length),e.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(h),o.push(h)):(t[y]=h,o[y]=h)}else{let h=Zd(l,e,u+f,d),y=Zd(l,e,u,u+f),v=h>=0&&t[h],w=y>=0&&t[y];if(i&&!w||!i&&!v){ff(bl(a,o),s,l);let I=_N(i?yN:gN,t.length,i,r,c);!i&&w&&(t[y].providerFactory=I),Qd(s,n,e.length,0),e.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(I),o.push(I)}else{let I=kE(t[i?y:h],c,!i&&r);Qd(s,n,h>-1?h:y,I)}!i&&r&&w&&t[y].componentProviders++}}}function Qd(n,e,t,r){let i=Ri(e),s=UT(e);if(i||s){let l=(s?Ye(e.useClass):e).prototype.ngOnDestroy;if(l){let c=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let u=c.indexOf(t);u===-1?c.push(t,[r,l]):c[u+1].push(r,l)}else c.push(t,l)}}}function kE(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function Zd(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function gN(n,e,t,r,i){return Yf(this.multi,[])}function yN(n,e,t,r,i){let s=this.multi,o;if(this.providerFactory){let a=this.providerFactory.componentProviders,l=Cl(r,r[X],this.providerFactory.index,i);o=l.slice(0,a),Yf(s,o);for(let c=a;c<l.length;c++)o.push(l[c])}else o=[],Yf(s,o);return o}function Yf(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function _N(n,e,t,r,i){let s=new Wr(n,t,ne);return s.multi=[],s.index=e,s.componentProviders=0,kE(s,i,r&&!t),s}function lr(n,e=[]){return t=>{t.providersResolver=(r,i)=>mN(r,i?i(n):n,e)}}function PE(n,e){let t=n[e];return t===ct?void 0:t}function vN(n,e,t,r,i,s){let o=e+t;return St(n,o,i)?wE(n,o+1,s?r.call(s,i):r(i)):PE(n,o+1)}function EN(n,e,t,r,i,s,o){let a=e+t;return $h(n,a,i,s)?wE(n,a+2,o?r.call(o,i,s):r(i,s)):PE(n,a+2)}function Mt(n,e){let t=He(),r,i=n+Be;t.firstCreatePass?(r=wN(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let s=r.factory||(r.factory=Ur(r.type,!0)),o,a=ot(ne);try{let l=wl(!1),c=s();return wl(l),XT(t,oe(),i,c),c}finally{ot(a)}}function wN(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function Xl(n,e,t){let r=n+Be,i=oe(),s=ah(i,r);return OE(i,r)?vN(i,Wv(),e,s.transform,t,s):s.transform(t)}function dn(n,e,t,r){let i=n+Be,s=oe(),o=ah(s,i);return OE(s,i)?EN(s,Wv(),e,o.transform,t,r,o):o.transform(t,r)}function OE(n,e){return n[X].data[e].pure}var bN=(()=>{class n{zone=S(be);changeDetectionScheduler=S(Gr);applicationRef=S(Li);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function CN({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new be(H(D({},IN()),{scheduleInRootZone:t})),[{provide:be,useFactory:n},{provide:Bs,multi:!0,useFactory:()=>{let r=S(bN,{optional:!0});return()=>r.initialize()}},{provide:Bs,multi:!0,useFactory:()=>{let r=S(DN);return()=>{r.initialize()}}},e===!0?{provide:f0,useValue:!0}:[],{provide:ph,useValue:t??d0}]}function IN(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var DN=(()=>{class n{subscription=new Ke;initialized=!1;zone=S(be);pendingTasks=S(zi);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{be.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{be.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var FE=(()=>{class n{appRef=S(Li);taskService=S(zi);ngZone=S(be);zonelessEnabled=S(Wl);tracing=S(Gl,{optional:!0});disableScheduling=S(f0,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Ke;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Sl):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(S(ph,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Tl||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let r=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?F_:h0;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Sl+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,F_(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function LE(){return Wi("NgZoneless"),Ll([{provide:Gr,useExisting:FE},{provide:be,useClass:Tl},{provide:Wl,useValue:!0},{provide:ph,useValue:!1},[]])}function SN(){return typeof $localize<"u"&&$localize.locale||Pl}var ro=new N("",{providedIn:"root",factory:()=>S(ro,Y.Optional|Y.SkipSelf)||SN()}),VE=new N("",{providedIn:"root",factory:()=>cN});var Qf=new N(""),TN=new N("");function Ls(n){return!n.moduleRef}function xN(n){let e=Ls(n)?n.r3Injector:n.moduleRef.injector,t=e.get(be);return t.run(()=>{Ls(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(Rn,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:s=>{r.handleError(s)}})}),Ls(n)){let s=()=>e.destroy(),o=n.platformInjector.get(Qf);o.add(s),e.onDestroy(()=>{i.unsubscribe(),o.delete(s)})}else{let s=()=>n.moduleRef.destroy(),o=n.platformInjector.get(Qf);o.add(s),n.moduleRef.onDestroy(()=>{dl(n.allPlatformModules,n.moduleRef),i.unsubscribe(),o.delete(s)})}return MN(r,t,()=>{let s=e.get(DE);return s.runInitializers(),s.donePromise.then(()=>{let o=e.get(ro,Pl);if(dN(o||Pl),!e.get(TN,!0))return Ls(n)?e.get(Li):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(Ls(n)){let l=e.get(Li);return n.rootComponent!==void 0&&l.bootstrap(n.rootComponent),l}else return AN(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function AN(n,e){let t=n.injector.get(Li);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new C(-403,!1);e.push(n)}function MN(n,e,t){try{let r=t();return to(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}var fl=null;function NN(n=[],e){return Nn.create({name:e,providers:[{provide:Vl,useValue:"platform"},{provide:Qf,useValue:new Set([()=>fl=null])},...n]})}function RN(n=[]){if(fl)return fl;let e=NN(n);return fl=e,x1(),kN(e),e}function kN(n){let e=n.get(_h,null);jl(n,()=>{e?.forEach(t=>t())})}var Wh=(()=>{class n{static __NG_ELEMENT_ID__=PN}return n})();function PN(n){return ON(Ht(),oe(),(n&16)===16)}function ON(n,e,t){if(Ui(n)&&!t){let r=sn(n.index,e);return new Nf(r,r)}else if(n.type&175){let r=e[Bt];return new Nf(r,e)}return null}function jE(n){let{rootComponent:e,appProviders:t,platformProviders:r,platformRef:i}=n;he(8);try{let s=i?.injector??RN(r),o=[CN({}),{provide:Gr,useExisting:FE},...t||[]],a=new Ml({providers:o,parent:s,debugName:"",runEnvironmentInitializers:!1});return xN({r3Injector:a.injector,platformInjector:s,rootComponent:e})}catch(s){return Promise.reject(s)}finally{he(9)}}function Gh(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function Hn(n){return Cd(n)}function $(n,e){return vd(n,e?.equal)}var Zf=class{[wt];constructor(e){this[wt]=e}destroy(){this[wt].destroy()}};function Jr(n,e){!e?.injector&&GT(Jr);let t=e?.injector??S(Nn),r=e?.manualCleanup!==!0?t.get(zl):null,i,s=t.get(x0,null,{optional:!0}),o=t.get(Gr);return s!==null&&!e?.forceRoot?(i=VN(s.view,o,n),r instanceof Dl&&r._lView===s.view&&(r=null)):i=jN(n,t.get(CE),o),i.injector=t,r!==null&&(i.onDestroyFn=r.onDestroy(()=>i.destroy())),new Zf(i)}var UE=H(D({},Ci),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,dirty:!0,hasRun:!1,cleanupFns:void 0,zone:null,kind:"effect",onDestroyFn:qs,run(){if(this.dirty=!1,this.hasRun&&!ka(this))return;this.hasRun=!0;let n=r=>(this.cleanupFns??=[]).push(r),e=Ns(this),t=El(!1);try{this.maybeCleanup(),this.fn(n)}finally{El(t),Ra(this,e)}},maybeCleanup(){if(this.cleanupFns?.length)try{for(;this.cleanupFns.length;)this.cleanupFns.pop()()}finally{this.cleanupFns=[]}}}),FN=H(D({},UE),{consumerMarkedDirty(){this.scheduler.schedule(this),this.notifier.notify(12)},destroy(){Rs(this),this.onDestroyFn(),this.maybeCleanup(),this.scheduler.remove(this)}}),LN=H(D({},UE),{consumerMarkedDirty(){this.view[L]|=8192,Qs(this.view),this.notifier.notify(13)},destroy(){Rs(this),this.onDestroyFn(),this.maybeCleanup(),this.view[Hr]?.delete(this)}});function VN(n,e,t){let r=Object.create(LN);return r.view=n,r.zone=typeof Zone<"u"?Zone.current:null,r.notifier=e,r.fn=t,n[Hr]??=new Set,n[Hr].add(r),r.consumerMarkedDirty(r),r}function jN(n,e,t){let r=Object.create(FN);return r.fn=n,r.scheduler=e,r.notifier=t,r.zone=typeof Zone<"u"?Zone.current:null,r.scheduler.schedule(r),r.notifier.notify(12),r}var $e=new N("");var BE=null;function $n(){return BE}function qh(n){BE??=n}var io=class{};var GE={ADP:[void 0,void 0,0],AFN:[void 0,"\u060B",0],ALL:[void 0,void 0,0],AMD:[void 0,"\u058F",2],AOA:[void 0,"Kz"],ARS:[void 0,"$"],AUD:["A$","$"],AZN:[void 0,"\u20BC"],BAM:[void 0,"KM"],BBD:[void 0,"$"],BDT:[void 0,"\u09F3"],BHD:[void 0,void 0,3],BIF:[void 0,void 0,0],BMD:[void 0,"$"],BND:[void 0,"$"],BOB:[void 0,"Bs"],BRL:["R$"],BSD:[void 0,"$"],BWP:[void 0,"P"],BYN:[void 0,void 0,2],BYR:[void 0,void 0,0],BZD:[void 0,"$"],CAD:["CA$","$",2],CHF:[void 0,void 0,2],CLF:[void 0,void 0,4],CLP:[void 0,"$",0],CNY:["CN\xA5","\xA5"],COP:[void 0,"$",2],CRC:[void 0,"\u20A1",2],CUC:[void 0,"$"],CUP:[void 0,"$"],CZK:[void 0,"K\u010D",2],DJF:[void 0,void 0,0],DKK:[void 0,"kr",2],DOP:[void 0,"$"],EGP:[void 0,"E\xA3"],ESP:[void 0,"\u20A7",0],EUR:["\u20AC"],FJD:[void 0,"$"],FKP:[void 0,"\xA3"],GBP:["\xA3"],GEL:[void 0,"\u20BE"],GHS:[void 0,"GH\u20B5"],GIP:[void 0,"\xA3"],GNF:[void 0,"FG",0],GTQ:[void 0,"Q"],GYD:[void 0,"$",2],HKD:["HK$","$"],HNL:[void 0,"L"],HRK:[void 0,"kn"],HUF:[void 0,"Ft",2],IDR:[void 0,"Rp",2],ILS:["\u20AA"],INR:["\u20B9"],IQD:[void 0,void 0,0],IRR:[void 0,void 0,0],ISK:[void 0,"kr",0],ITL:[void 0,void 0,0],JMD:[void 0,"$"],JOD:[void 0,void 0,3],JPY:["\xA5",void 0,0],KHR:[void 0,"\u17DB"],KMF:[void 0,"CF",0],KPW:[void 0,"\u20A9",0],KRW:["\u20A9",void 0,0],KWD:[void 0,void 0,3],KYD:[void 0,"$"],KZT:[void 0,"\u20B8"],LAK:[void 0,"\u20AD",0],LBP:[void 0,"L\xA3",0],LKR:[void 0,"Rs"],LRD:[void 0,"$"],LTL:[void 0,"Lt"],LUF:[void 0,void 0,0],LVL:[void 0,"Ls"],LYD:[void 0,void 0,3],MGA:[void 0,"Ar",0],MGF:[void 0,void 0,0],MMK:[void 0,"K",0],MNT:[void 0,"\u20AE",2],MRO:[void 0,void 0,0],MUR:[void 0,"Rs",2],MXN:["MX$","$"],MYR:[void 0,"RM"],NAD:[void 0,"$"],NGN:[void 0,"\u20A6"],NIO:[void 0,"C$"],NOK:[void 0,"kr",2],NPR:[void 0,"Rs"],NZD:["NZ$","$"],OMR:[void 0,void 0,3],PHP:["\u20B1"],PKR:[void 0,"Rs",2],PLN:[void 0,"z\u0142"],PYG:[void 0,"\u20B2",0],RON:[void 0,"lei"],RSD:[void 0,void 0,0],RUB:[void 0,"\u20BD"],RWF:[void 0,"RF",0],SBD:[void 0,"$"],SEK:[void 0,"kr",2],SGD:[void 0,"$"],SHP:[void 0,"\xA3"],SLE:[void 0,void 0,2],SLL:[void 0,void 0,0],SOS:[void 0,void 0,0],SRD:[void 0,"$"],SSP:[void 0,"\xA3"],STD:[void 0,void 0,0],STN:[void 0,"Db"],SYP:[void 0,"\xA3",0],THB:[void 0,"\u0E3F"],TMM:[void 0,void 0,0],TND:[void 0,void 0,3],TOP:[void 0,"T$"],TRL:[void 0,void 0,0],TRY:[void 0,"\u20BA"],TTD:[void 0,"$"],TWD:["NT$","$",2],TZS:[void 0,void 0,2],UAH:[void 0,"\u20B4"],UGX:[void 0,void 0,0],USD:["$"],UYI:[void 0,void 0,0],UYU:[void 0,"$"],UYW:[void 0,void 0,4],UZS:[void 0,void 0,2],VEF:[void 0,"Bs",2],VND:["\u20AB",void 0,0],VUV:[void 0,void 0,0],XAF:["FCFA",void 0,0],XCD:["EC$","$"],XOF:["F\u202FCFA",void 0,0],XPF:["CFPF",void 0,0],XXX:["\xA4"],YER:[void 0,void 0,0],ZAR:[void 0,"R"],ZMK:[void 0,void 0,0],ZMW:[void 0,"ZK"],ZWD:[void 0,void 0,0]},ep=function(n){return n[n.Decimal=0]="Decimal",n[n.Percent=1]="Percent",n[n.Currency=2]="Currency",n[n.Scientific=3]="Scientific",n}(ep||{});var ze=function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n}(ze||{}),fe=function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n}(fe||{}),dt=function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n}(dt||{}),ft={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function qE(n){return ut(n)[we.LocaleId]}function KE(n,e,t){let r=ut(n),i=[r[we.DayPeriodsFormat],r[we.DayPeriodsStandalone]],s=Nt(i,e);return Nt(s,t)}function YE(n,e,t){let r=ut(n),i=[r[we.DaysFormat],r[we.DaysStandalone]],s=Nt(i,e);return Nt(s,t)}function QE(n,e,t){let r=ut(n),i=[r[we.MonthsFormat],r[we.MonthsStandalone]],s=Nt(i,e);return Nt(s,t)}function ZE(n,e){let r=ut(n)[we.Eras];return Nt(r,e)}function so(n,e){let t=ut(n);return Nt(t[we.DateFormat],e)}function oo(n,e){let t=ut(n);return Nt(t[we.TimeFormat],e)}function ao(n,e){let r=ut(n)[we.DateTimeFormat];return Nt(r,e)}function fn(n,e){let t=ut(n),r=t[we.NumberSymbols][e];if(typeof r>"u"){if(e===ft.CurrencyDecimal)return t[we.NumberSymbols][ft.Decimal];if(e===ft.CurrencyGroup)return t[we.NumberSymbols][ft.Group]}return r}function JE(n,e){return ut(n)[we.NumberFormats][e]}function UN(n){return ut(n)[we.Currencies]}function XE(n){if(!n[we.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[we.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function ew(n){let e=ut(n);return XE(e),(e[we.ExtraData][2]||[]).map(r=>typeof r=="string"?Kh(r):[Kh(r[0]),Kh(r[1])])}function tw(n,e,t){let r=ut(n);XE(r);let i=[r[we.ExtraData][0],r[we.ExtraData][1]],s=Nt(i,e)||[];return Nt(s,t)||[]}function Nt(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new Error("Locale data API: locale data undefined")}function Kh(n){let[e,t]=n.split(":");return{hours:+e,minutes:+t}}function nw(n,e,t="en"){let r=UN(t)[n]||GE[n]||[],i=r[1];return e==="narrow"&&typeof i=="string"?i:r[0]||n}var BN=2;function rw(n){let e,t=GE[n];return t&&(e=t[2]),typeof e=="number"?e:BN}var HN=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,ec={},$N=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function iw(n,e,t,r){let i=JN(n);e=zn(t,e)||e;let o=[],a;for(;e;)if(a=$N.exec(e),a){o=o.concat(a.slice(1));let u=o.pop();if(!u)break;e=u}else{o.push(e);break}let l=i.getTimezoneOffset();r&&(l=ow(r,l),i=ZN(i,r));let c="";return o.forEach(u=>{let d=YN(u);c+=d?d(i,t,l):u==="''"?"'":u.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),c}function sc(n,e,t){let r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function zn(n,e){let t=qE(n);if(ec[t]??={},ec[t][e])return ec[t][e];let r="";switch(e){case"shortDate":r=so(n,dt.Short);break;case"mediumDate":r=so(n,dt.Medium);break;case"longDate":r=so(n,dt.Long);break;case"fullDate":r=so(n,dt.Full);break;case"shortTime":r=oo(n,dt.Short);break;case"mediumTime":r=oo(n,dt.Medium);break;case"longTime":r=oo(n,dt.Long);break;case"fullTime":r=oo(n,dt.Full);break;case"short":let i=zn(n,"shortTime"),s=zn(n,"shortDate");r=tc(ao(n,dt.Short),[i,s]);break;case"medium":let o=zn(n,"mediumTime"),a=zn(n,"mediumDate");r=tc(ao(n,dt.Medium),[o,a]);break;case"long":let l=zn(n,"longTime"),c=zn(n,"longDate");r=tc(ao(n,dt.Long),[l,c]);break;case"full":let u=zn(n,"fullTime"),d=zn(n,"fullDate");r=tc(ao(n,dt.Full),[u,d]);break}return r&&(ec[t][e]=r),r}function tc(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return e!=null&&r in e?e[r]:t})),n}function zt(n,e,t="-",r,i){let s="";(n<0||i&&n<=0)&&(i?n=-n+1:(n=-n,s=t));let o=String(n);for(;o.length<e;)o="0"+o;return r&&(o=o.slice(o.length-e)),s+o}function zN(n,e){return zt(n,3).substring(0,e)}function Te(n,e,t=0,r=!1,i=!1){return function(s,o){let a=WN(n,s);if((t>0||a>-t)&&(a+=t),n===3)a===0&&t===-12&&(a=12);else if(n===6)return zN(a,e);let l=fn(o,ft.MinusSign);return zt(a,e,l,r,i)}}function WN(n,e){switch(n){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();case 3:return e.getHours();case 4:return e.getMinutes();case 5:return e.getSeconds();case 6:return e.getMilliseconds();case 7:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}function pe(n,e,t=ze.Format,r=!1){return function(i,s){return GN(i,s,n,e,t,r)}}function GN(n,e,t,r,i,s){switch(t){case 2:return QE(e,i,r)[n.getMonth()];case 1:return YE(e,i,r)[n.getDay()];case 0:let o=n.getHours(),a=n.getMinutes();if(s){let c=ew(e),u=tw(e,i,r),d=c.findIndex(f=>{if(Array.isArray(f)){let[h,y]=f,v=o>=h.hours&&a>=h.minutes,w=o<y.hours||o===y.hours&&a<y.minutes;if(h.hours<y.hours){if(v&&w)return!0}else if(v||w)return!0}else if(f.hours===o&&f.minutes===a)return!0;return!1});if(d!==-1)return u[d]}return KE(e,i,r)[o<12?0:1];case 3:return ZE(e,r)[n.getFullYear()<=0?0:1];default:let l=t;throw new Error(`unexpected translation type ${l}`)}}function nc(n){return function(e,t,r){let i=-1*r,s=fn(t,ft.MinusSign),o=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case 0:return(i>=0?"+":"")+zt(o,2,s)+zt(Math.abs(i%60),2,s);case 1:return"GMT"+(i>=0?"+":"")+zt(o,1,s);case 2:return"GMT"+(i>=0?"+":"")+zt(o,2,s)+":"+zt(Math.abs(i%60),2,s);case 3:return r===0?"Z":(i>=0?"+":"")+zt(o,2,s)+":"+zt(Math.abs(i%60),2,s);default:throw new Error(`Unknown zone width "${n}"`)}}}var qN=0,ic=4;function KN(n){let e=sc(n,qN,1).getDay();return sc(n,0,1+(e<=ic?ic:ic+7)-e)}function sw(n){let e=n.getDay(),t=e===0?-3:ic-e;return sc(n.getFullYear(),n.getMonth(),n.getDate()+t)}function Yh(n,e=!1){return function(t,r){let i;if(e){let s=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,o=t.getDate();i=1+Math.floor((o+s)/7)}else{let s=sw(t),o=KN(s.getFullYear()),a=s.getTime()-o.getTime();i=1+Math.round(a/6048e5)}return zt(i,n,fn(r,ft.MinusSign))}}function rc(n,e=!1){return function(t,r){let s=sw(t).getFullYear();return zt(s,n,fn(r,ft.MinusSign),e)}}var Qh={};function YN(n){if(Qh[n])return Qh[n];let e;switch(n){case"G":case"GG":case"GGG":e=pe(3,fe.Abbreviated);break;case"GGGG":e=pe(3,fe.Wide);break;case"GGGGG":e=pe(3,fe.Narrow);break;case"y":e=Te(0,1,0,!1,!0);break;case"yy":e=Te(0,2,0,!0,!0);break;case"yyy":e=Te(0,3,0,!1,!0);break;case"yyyy":e=Te(0,4,0,!1,!0);break;case"Y":e=rc(1);break;case"YY":e=rc(2,!0);break;case"YYY":e=rc(3);break;case"YYYY":e=rc(4);break;case"M":case"L":e=Te(1,1,1);break;case"MM":case"LL":e=Te(1,2,1);break;case"MMM":e=pe(2,fe.Abbreviated);break;case"MMMM":e=pe(2,fe.Wide);break;case"MMMMM":e=pe(2,fe.Narrow);break;case"LLL":e=pe(2,fe.Abbreviated,ze.Standalone);break;case"LLLL":e=pe(2,fe.Wide,ze.Standalone);break;case"LLLLL":e=pe(2,fe.Narrow,ze.Standalone);break;case"w":e=Yh(1);break;case"ww":e=Yh(2);break;case"W":e=Yh(1,!0);break;case"d":e=Te(2,1);break;case"dd":e=Te(2,2);break;case"c":case"cc":e=Te(7,1);break;case"ccc":e=pe(1,fe.Abbreviated,ze.Standalone);break;case"cccc":e=pe(1,fe.Wide,ze.Standalone);break;case"ccccc":e=pe(1,fe.Narrow,ze.Standalone);break;case"cccccc":e=pe(1,fe.Short,ze.Standalone);break;case"E":case"EE":case"EEE":e=pe(1,fe.Abbreviated);break;case"EEEE":e=pe(1,fe.Wide);break;case"EEEEE":e=pe(1,fe.Narrow);break;case"EEEEEE":e=pe(1,fe.Short);break;case"a":case"aa":case"aaa":e=pe(0,fe.Abbreviated);break;case"aaaa":e=pe(0,fe.Wide);break;case"aaaaa":e=pe(0,fe.Narrow);break;case"b":case"bb":case"bbb":e=pe(0,fe.Abbreviated,ze.Standalone,!0);break;case"bbbb":e=pe(0,fe.Wide,ze.Standalone,!0);break;case"bbbbb":e=pe(0,fe.Narrow,ze.Standalone,!0);break;case"B":case"BB":case"BBB":e=pe(0,fe.Abbreviated,ze.Format,!0);break;case"BBBB":e=pe(0,fe.Wide,ze.Format,!0);break;case"BBBBB":e=pe(0,fe.Narrow,ze.Format,!0);break;case"h":e=Te(3,1,-12);break;case"hh":e=Te(3,2,-12);break;case"H":e=Te(3,1);break;case"HH":e=Te(3,2);break;case"m":e=Te(4,1);break;case"mm":e=Te(4,2);break;case"s":e=Te(5,1);break;case"ss":e=Te(5,2);break;case"S":e=Te(6,1);break;case"SS":e=Te(6,2);break;case"SSS":e=Te(6,3);break;case"Z":case"ZZ":case"ZZZ":e=nc(0);break;case"ZZZZZ":e=nc(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=nc(1);break;case"OOOO":case"ZZZZ":case"zzzz":e=nc(2);break;default:return null}return Qh[n]=e,e}function ow(n,e){n=n.replace(/:/g,"");let t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function QN(n,e){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+e),n}function ZN(n,e,t){let i=n.getTimezoneOffset(),s=ow(e,i);return QN(n,-1*(s-i))}function JN(n){if(HE(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[i,s=1,o=1]=n.split("-").map(a=>+a);return sc(i,s-1,o)}let t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(HN))return XN(r)}let e=new Date(n);if(!HE(e))throw new Error(`Unable to convert "${n}" into a date`);return e}function XN(n){let e=new Date(0),t=0,r=0,i=n[8]?e.setUTCFullYear:e.setFullYear,s=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));let o=Number(n[4]||0)-t,a=Number(n[5]||0)-r,l=Number(n[6]||0),c=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return s.call(e,o,a,l,c),e}function HE(n){return n instanceof Date&&!isNaN(n.valueOf())}var eR=/^(\d+)?\.((\d+)(-(\d+))?)?$/,$E=22,oc=".",lo="0",tR=";",nR=",",Zh="#",zE="\xA4";function rR(n,e,t,r,i,s,o=!1){let a="",l=!1;if(!isFinite(n))a=fn(t,ft.Infinity);else{let c=oR(n);o&&(c=sR(c));let u=e.minInt,d=e.minFrac,f=e.maxFrac;if(s){let P=s.match(eR);if(P===null)throw new Error(`${s} is not a valid digit info`);let B=P[1],ue=P[3],Ft=P[5];B!=null&&(u=Jh(B)),ue!=null&&(d=Jh(ue)),Ft!=null?f=Jh(Ft):ue!=null&&d>f&&(f=d)}aR(c,d,f);let h=c.digits,y=c.integerLen,v=c.exponent,w=[];for(l=h.every(P=>!P);y<u;y++)h.unshift(0);for(;y<0;y++)h.unshift(0);y>0?w=h.splice(y,h.length):(w=h,h=[0]);let I=[];for(h.length>=e.lgSize&&I.unshift(h.splice(-e.lgSize,h.length).join(""));h.length>e.gSize;)I.unshift(h.splice(-e.gSize,h.length).join(""));h.length&&I.unshift(h.join("")),a=I.join(fn(t,r)),w.length&&(a+=fn(t,i)+w.join("")),v&&(a+=fn(t,ft.Exponential)+"+"+v)}return n<0&&!l?a=e.negPre+a+e.negSuf:a=e.posPre+a+e.posSuf,a}function aw(n,e,t,r,i){let s=JE(e,ep.Currency),o=iR(s,fn(e,ft.MinusSign));return o.minFrac=rw(r),o.maxFrac=o.minFrac,rR(n,o,e,ft.CurrencyGroup,ft.CurrencyDecimal,i).replace(zE,t).replace(zE,"").trim()}function iR(n,e="-"){let t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(tR),i=r[0],s=r[1],o=i.indexOf(oc)!==-1?i.split(oc):[i.substring(0,i.lastIndexOf(lo)+1),i.substring(i.lastIndexOf(lo)+1)],a=o[0],l=o[1]||"";t.posPre=a.substring(0,a.indexOf(Zh));for(let u=0;u<l.length;u++){let d=l.charAt(u);d===lo?t.minFrac=t.maxFrac=u+1:d===Zh?t.maxFrac=u+1:t.posSuf+=d}let c=a.split(nR);if(t.gSize=c[1]?c[1].length:0,t.lgSize=c[2]||c[1]?(c[2]||c[1]).length:0,s){let u=i.length-t.posPre.length-t.posSuf.length,d=s.indexOf(Zh);t.negPre=s.substring(0,d).replace(/'/g,""),t.negSuf=s.slice(d+u).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}function sR(n){if(n.digits[0]===0)return n;let e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(e===0?n.digits.push(0,0):e===1&&n.digits.push(0),n.integerLen+=2),n}function oR(n){let e=Math.abs(n)+"",t=0,r,i,s,o,a;for((i=e.indexOf(oc))>-1&&(e=e.replace(oc,"")),(s=e.search(/e/i))>0?(i<0&&(i=s),i+=+e.slice(s+1),e=e.substring(0,s)):i<0&&(i=e.length),s=0;e.charAt(s)===lo;s++);if(s===(a=e.length))r=[0],i=1;else{for(a--;e.charAt(a)===lo;)a--;for(i-=s,r=[],o=0;s<=a;s++,o++)r[o]=Number(e.charAt(s))}return i>$E&&(r=r.splice(0,$E-1),t=i-1,i=1),{digits:r,exponent:t,integerLen:i}}function aR(n,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let r=n.digits,i=r.length-n.integerLen,s=Math.min(Math.max(e,i),t),o=s+n.integerLen,a=r[o];if(o>0){r.splice(Math.max(n.integerLen,o));for(let d=o;d<r.length;d++)r[d]=0}else{i=Math.max(0,i),n.integerLen=1,r.length=Math.max(1,o=s+1),r[0]=0;for(let d=1;d<o;d++)r[d]=0}if(a>=5)if(o-1<0){for(let d=0;d>o;d--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[o-1]++;for(;i<Math.max(0,s);i++)r.push(0);let l=s!==0,c=e+n.integerLen,u=r.reduceRight(function(d,f,h,y){return f=f+d,y[h]=f<10?f:f-10,l&&(y[h]===0&&h>=c?y.pop():l=!1),f>=10?1:0},0);u&&(r.unshift(u),n.integerLen++)}function Jh(n){let e=parseInt(n);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+n);return e}var Xh=/\s+/,WE=[],co=(()=>{class n{_ngEl;_renderer;initialClasses=WE;rawClass;stateMap=new Map;constructor(t,r){this._ngEl=t,this._renderer=r}set klass(t){this.initialClasses=t!=null?t.trim().split(Xh):WE}set ngClass(t){this.rawClass=typeof t=="string"?t.trim().split(Xh):t}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(let r of t)this._updateState(r,!0);else if(t!=null)for(let r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){let i=this.stateMap.get(t);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let t of this.stateMap){let r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){t=t.trim(),t.length>0&&t.split(Xh).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static \u0275fac=function(r){return new(r||n)(ne(ar),ne(Zr))};static \u0275dir=Oe({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return n})();function lw(n,e){return new C(2100,!1)}var lR="mediumDate",cw=new N(""),uw=new N(""),Wn=(()=>{class n{locale;defaultTimezone;defaultOptions;constructor(t,r,i){this.locale=t,this.defaultTimezone=r,this.defaultOptions=i}transform(t,r,i,s){if(t==null||t===""||t!==t)return null;try{let o=r??this.defaultOptions?.dateFormat??lR,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return iw(t,o,s||this.locale,a)}catch(o){throw lw(n,o.message)}}static \u0275fac=function(r){return new(r||n)(ne(ro,16),ne(cw,24),ne(uw,24))};static \u0275pipe=Hh({name:"date",type:n,pure:!0})}return n})();var uo=(()=>{class n{_locale;_defaultCurrencyCode;constructor(t,r="USD"){this._locale=t,this._defaultCurrencyCode=r}transform(t,r=this._defaultCurrencyCode,i="symbol",s,o){if(!cR(t))return null;o||=this._locale,typeof i=="boolean"&&(i=i?"symbol":"code");let a=r||this._defaultCurrencyCode;i!=="code"&&(i==="symbol"||i==="symbol-narrow"?a=nw(a,i==="symbol"?"wide":"narrow",o):a=i);try{let l=uR(t);return aw(l,o,a,r,s)}catch(l){throw lw(n,l.message)}}static \u0275fac=function(r){return new(r||n)(ne(ro,16),ne(VE,16))};static \u0275pipe=Hh({name:"currency",type:n,pure:!0})}return n})();function cR(n){return!(n==null||n===""||n!==n)}function uR(n){if(typeof n=="string"&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if(typeof n!="number")throw new Error(`${n} is not a number`);return n}var xe=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Bn({type:n});static \u0275inj=On({})}return n})();function fo(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,s]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var tp="browser",dw="server";function ac(n){return n===dw}var Xr=class{};var uc=new N(""),sp=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i,s){return this._findPluginFor(r).addEventListener(t,r,i,s)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new C(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(V(uc),V(be))};static \u0275prov=G({token:n,factory:n.\u0275fac})}return n})(),po=class{_doc;constructor(e){this._doc=e}manager},lc="ng-app-id";function fw(n){for(let e of n)e.remove()}function hw(n,e){let t=e.createElement("style");return t.textContent=n,t}function fR(n,e,t,r){let i=n.head?.querySelectorAll(`style[${lc}="${e}"],link[${lc}="${e}"]`);if(i)for(let s of i)s.removeAttribute(lc),s instanceof HTMLLinkElement?r.set(s.href.slice(s.href.lastIndexOf("/")+1),{usage:0,elements:[s]}):s.textContent&&t.set(s.textContent,{usage:0,elements:[s]})}function rp(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var op=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,this.isServer=ac(s),fR(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,hw);r?.forEach(i=>this.addUsage(i,this.external,rp))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let s=r.get(t);s?s.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(o=>this.addElement(o,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(fw(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])fw(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,hw(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,rp(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),this.isServer&&r.setAttribute(lc,this.appId),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(V($e),V(yh),V(Eh,8),V(Xs))};static \u0275prov=G({token:n,factory:n.\u0275fac})}return n})(),np={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},ap=/%COMP%/g;var mw="%COMP%",hR=`_nghost-${mw}`,pR=`_ngcontent-${mw}`,mR=!0,gR=new N("",{providedIn:"root",factory:()=>mR});function yR(n){return pR.replace(ap,n)}function _R(n){return hR.replace(ap,n)}function gw(n,e){return e.map(t=>t.replace(ap,n))}var yo=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,s,o,a,l,c=null,u=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=l,this.nonce=c,this.tracingService=u,this.platformIsServer=ac(a),this.defaultRenderer=new mo(t,o,l,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===on.ShadowDom&&(r=H(D({},r),{encapsulation:on.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof cc?i.applyToHost(t):i instanceof go&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,s=i.get(r.id);if(!s){let o=this.doc,a=this.ngZone,l=this.eventManager,c=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,d=this.platformIsServer,f=this.tracingService;switch(r.encapsulation){case on.Emulated:s=new cc(l,c,r,this.appId,u,o,a,d,f);break;case on.ShadowDom:return new ip(l,c,t,r,o,a,this.nonce,d,f);default:s=new go(l,c,r,u,o,a,d,f);break}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(V(sp),V(op),V(yh),V(gR),V($e),V(Xs),V(be),V(Eh),V(Gl,8))};static \u0275prov=G({token:n,factory:n.\u0275fac})}return n})(),mo=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,s){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=s}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(np[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(pw(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(pw(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new C(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let s=np[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=np[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Pn.DashCase|Pn.Important)?e.style.setProperty(t,r,i&Pn.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Pn.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=$n().getGlobalEventTarget(this.doc,e),!e))throw new C(5102,!1);let s=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(s=this.tracingService.wrapEventListener(e,t,s)),this.eventManager.addEventListener(e,t,s,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function pw(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var ip=class extends mo{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,r,i,s,o,a,l,c){super(e,s,o,l,c),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=i.styles;u=gw(i.id,u);for(let f of u){let h=document.createElement("style");a&&h.setAttribute("nonce",a),h.textContent=f,this.shadowRoot.appendChild(h)}let d=i.getExternalStyles?.();if(d)for(let f of d){let h=rp(f,s);a&&h.setAttribute("nonce",a),this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},go=class extends mo{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,s,o,a,l,c){super(e,s,o,a,l),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let u=r.styles;this.styles=c?gw(c,u):u,this.styleUrls=r.getExternalStyles?.(c)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},cc=class extends go{contentAttr;hostAttr;constructor(e,t,r,i,s,o,a,l,c){let u=i+"-"+r.id;super(e,t,r,s,o,a,l,c,u),this.contentAttr=yR(u),this.hostAttr=_R(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var dc=class n extends io{supportsDOMEvents=!0;static makeCurrent(){qh(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=vR();return t==null?null:ER(t)}resetBaseElement(){_o=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return fo(document.cookie,e)}},_o=null;function vR(){return _o=_o||document.head.querySelector("base"),_o?_o.getAttribute("href"):null}function ER(n){return new URL(n,document.baseURI).pathname}var wR=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:n.\u0275fac})}return n})(),_w=(()=>{class n extends po{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,s){return t.addEventListener(r,i,s),()=>this.removeEventListener(t,r,i,s)}removeEventListener(t,r,i,s){return t.removeEventListener(r,i,s)}static \u0275fac=function(r){return new(r||n)(V($e))};static \u0275prov=G({token:n,factory:n.\u0275fac})}return n})(),yw=["alt","control","meta","shift"],bR={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},CR={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},vw=(()=>{class n extends po{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,s){let o=n.parseEventName(r),a=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>$n().onAndCancel(t,o.domEventName,a,s))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let s=n._normalizeKey(r.pop()),o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),yw.forEach(c=>{let u=r.indexOf(c);u>-1&&(r.splice(u,1),o+=c+".")}),o+=s,r.length!=0||s.length===0)return null;let l={};return l.domEventName=i,l.fullKey=o,l}static matchEventFullKeyCode(t,r){let i=bR[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),yw.forEach(o=>{if(o!==i){let a=CR[o];a(t)&&(s+=o+".")}}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(V($e))};static \u0275prov=G({token:n,factory:n.\u0275fac})}return n})();function lp(n,e,t){return jE(D({rootComponent:n,platformRef:t?.platformRef},IR(e)))}function IR(n){return{appProviders:[...AR,...n?.providers??[]],platformProviders:xR}}function DR(){dc.makeCurrent()}function SR(){return new Rn}function TR(){return I0(document),document}var xR=[{provide:Xs,useValue:tp},{provide:_h,useValue:DR,multi:!0},{provide:$e,useFactory:TR}];var AR=[{provide:Vl,useValue:"root"},{provide:Rn,useFactory:SR},{provide:uc,useClass:_w,multi:!0,deps:[$e]},{provide:uc,useClass:vw,multi:!0,deps:[$e]},yo,op,sp,{provide:or,useExisting:yo},{provide:Xr,useClass:wR},[]];var qi=class{},Eo=class{},ei=class n{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(e){e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let i=t.slice(0,r),s=t.slice(r+1).trim();this.addHeaderEntry(i,s)}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.addHeaderEntry(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let i=(e.op==="a"?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":let s=e.value;if(!s)this.headers.delete(t),this.normalizedNames.delete(t);else{let o=this.headers.get(t);if(!o)return;o=o.filter(a=>s.indexOf(a)===-1),o.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}break}}addHeaderEntry(e,t){let r=e.toLowerCase();this.maybeSetNormalizedName(e,r),this.headers.has(r)?this.headers.get(r).push(t):this.headers.set(r,[t])}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(s=>s.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var hc=class{encodeKey(e){return Ew(e)}encodeValue(e){return Ew(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function MR(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{let s=i.indexOf("="),[o,a]=s==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],l=t.get(o)||[];l.push(a),t.set(o,l)}),t}var NR=/%(\d[a-f0-9])/gi,RR={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Ew(n){return encodeURIComponent(n).replace(NR,(e,t)=>RR[t]??e)}function fc(n){return`${n}`}var cr=class n{map;encoder;updates=null;cloneFrom=null;constructor(e={}){if(this.encoder=e.encoder||new hc,e.fromString){if(e.fromObject)throw new C(2805,!1);this.map=MR(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let r=e.fromObject[t],i=Array.isArray(r)?r.map(fc):[fc(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(s=>{t.push({param:r,value:s,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(fc(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(fc(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var pc=class{map=new Map;set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function kR(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function ww(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function bw(n){return typeof Blob<"u"&&n instanceof Blob}function Cw(n){return typeof FormData<"u"&&n instanceof FormData}function PR(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var Iw="Content-Type",Dw="Accept",Sw="X-Request-URL",Tw="text/plain",xw="application/json",OR=`${xw}, ${Tw}, */*`,vo=class n{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;responseType="json";method;params;urlWithParams;transferCache;constructor(e,t,r,i){this.url=t,this.method=e.toUpperCase();let s;if(kR(this.method)||i?(this.body=r!==void 0?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers??=new ei,this.context??=new pc,!this.params)this.params=new cr,this.urlWithParams=t;else{let o=this.params.toString();if(o.length===0)this.urlWithParams=t;else{let a=t.indexOf("?"),l=a===-1?"?":a<t.length-1?"&":"";this.urlWithParams=t+l+o}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||ww(this.body)||bw(this.body)||Cw(this.body)||PR(this.body)?this.body:this.body instanceof cr?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||Cw(this.body)?null:bw(this.body)?this.body.type||null:ww(this.body)?null:typeof this.body=="string"?Tw:this.body instanceof cr?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?xw:null}clone(e={}){let t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,s=e.transferCache??this.transferCache,o=e.body!==void 0?e.body:this.body,a=e.withCredentials??this.withCredentials,l=e.reportProgress??this.reportProgress,c=e.headers||this.headers,u=e.params||this.params,d=e.context??this.context;return e.setHeaders!==void 0&&(c=Object.keys(e.setHeaders).reduce((f,h)=>f.set(h,e.setHeaders[h]),c)),e.setParams&&(u=Object.keys(e.setParams).reduce((f,h)=>f.set(h,e.setParams[h]),u)),new n(t,r,o,{params:u,headers:c,context:d,reportProgress:l,responseType:i,withCredentials:a,transferCache:s})}},Gi=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(Gi||{}),Ki=class{headers;status;statusText;url;ok;type;constructor(e,t=200,r="OK"){this.headers=e.headers||new ei,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},mc=class n extends Ki{constructor(e={}){super(e)}type=Gi.ResponseHeader;clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},gc=class n extends Ki{body;constructor(e={}){super(e),this.body=e.body!==void 0?e.body:null}type=Gi.Response;clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},yc=class extends Ki{name="HttpErrorResponse";message;error;ok=!1;constructor(e){super(e,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},FR=200,LR=204;function cp(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var VR=(()=>{class n{handler;constructor(t){this.handler=t}request(t,r,i={}){let s;if(t instanceof vo)s=t;else{let l;i.headers instanceof ei?l=i.headers:l=new ei(i.headers);let c;i.params&&(i.params instanceof cr?c=i.params:c=new cr({fromObject:i.params})),s=new vo(t,r,i.body!==void 0?i.body:null,{headers:l,context:i.context,params:c,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache})}let o=nl(s).pipe(Pd(l=>this.handler.handle(l)));if(t instanceof vo||i.observe==="events")return o;let a=o.pipe(kd(l=>l instanceof gc));switch(i.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe(st(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new C(2806,!1);return l.body}));case"blob":return a.pipe(st(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new C(2807,!1);return l.body}));case"text":return a.pipe(st(l=>{if(l.body!==null&&typeof l.body!="string")throw new C(2808,!1);return l.body}));case"json":default:return a.pipe(st(l=>l.body))}case"response":return a;default:throw new C(2809,!1)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:new cr().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,cp(i,r))}post(t,r,i={}){return this.request("POST",t,cp(i,r))}put(t,r,i={}){return this.request("PUT",t,cp(i,r))}static \u0275fac=function(r){return new(r||n)(V(qi))};static \u0275prov=G({token:n,factory:n.\u0275fac})}return n})();var jR=new N("");function UR(n,e){return e(n)}function BR(n,e,t){return(r,i)=>jl(t,()=>e(r,s=>n(s,i)))}var Aw=new N(""),HR=new N(""),Mw=new N("",{providedIn:"root",factory:()=>!0});var _c=(()=>{class n extends qi{backend;injector;chain=null;pendingTasks=S(zi);contributeToStability=S(Mw);constructor(t,r){super(),this.backend=t,this.injector=r}handle(t){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(Aw),...this.injector.get(HR,[])]));this.chain=r.reduceRight((i,s)=>BR(i,s,this.injector),UR)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(Od(()=>this.pendingTasks.remove(r)))}else return this.chain(t,r=>this.backend.handle(r))}static \u0275fac=function(r){return new(r||n)(V(Eo),V(xn))};static \u0275prov=G({token:n,factory:n.\u0275fac})}return n})();var $R=/^\)\]\}',?\n/,zR=RegExp(`^${Sw}:`,"m");function WR(n){return"responseURL"in n&&n.responseURL?n.responseURL:zR.test(n.getAllResponseHeaders())?n.getResponseHeader(Sw):null}var up=(()=>{class n{xhrFactory;constructor(t){this.xhrFactory=t}handle(t){if(t.method==="JSONP")throw new C(-2800,!1);let r=this.xhrFactory;return(r.\u0275loadImpl?Lr(r.\u0275loadImpl()):nl(null)).pipe(Fd(()=>new De(s=>{let o=r.build();if(o.open(t.method,t.urlWithParams),t.withCredentials&&(o.withCredentials=!0),t.headers.forEach((v,w)=>o.setRequestHeader(v,w.join(","))),t.headers.has(Dw)||o.setRequestHeader(Dw,OR),!t.headers.has(Iw)){let v=t.detectContentTypeHeader();v!==null&&o.setRequestHeader(Iw,v)}if(t.responseType){let v=t.responseType.toLowerCase();o.responseType=v!=="json"?v:"text"}let a=t.serializeBody(),l=null,c=()=>{if(l!==null)return l;let v=o.statusText||"OK",w=new ei(o.getAllResponseHeaders()),I=WR(o)||t.url;return l=new mc({headers:w,status:o.status,statusText:v,url:I}),l},u=()=>{let{headers:v,status:w,statusText:I,url:P}=c(),B=null;w!==LR&&(B=typeof o.response>"u"?o.responseText:o.response),w===0&&(w=B?FR:0);let ue=w>=200&&w<300;if(t.responseType==="json"&&typeof B=="string"){let Ft=B;B=B.replace($R,"");try{B=B!==""?JSON.parse(B):null}catch(vt){B=Ft,ue&&(ue=!1,B={error:vt,text:B})}}ue?(s.next(new gc({body:B,headers:v,status:w,statusText:I,url:P||void 0})),s.complete()):s.error(new yc({error:B,headers:v,status:w,statusText:I,url:P||void 0}))},d=v=>{let{url:w}=c(),I=new yc({error:v,status:o.status||0,statusText:o.statusText||"Unknown Error",url:w||void 0});s.error(I)},f=!1,h=v=>{f||(s.next(c()),f=!0);let w={type:Gi.DownloadProgress,loaded:v.loaded};v.lengthComputable&&(w.total=v.total),t.responseType==="text"&&o.responseText&&(w.partialText=o.responseText),s.next(w)},y=v=>{let w={type:Gi.UploadProgress,loaded:v.loaded};v.lengthComputable&&(w.total=v.total),s.next(w)};return o.addEventListener("load",u),o.addEventListener("error",d),o.addEventListener("timeout",d),o.addEventListener("abort",d),t.reportProgress&&(o.addEventListener("progress",h),a!==null&&o.upload&&o.upload.addEventListener("progress",y)),o.send(a),s.next({type:Gi.Sent}),()=>{o.removeEventListener("error",d),o.removeEventListener("abort",d),o.removeEventListener("load",u),o.removeEventListener("timeout",d),t.reportProgress&&(o.removeEventListener("progress",h),a!==null&&o.upload&&o.upload.removeEventListener("progress",y)),o.readyState!==o.DONE&&o.abort()}})))}static \u0275fac=function(r){return new(r||n)(V(Xr))};static \u0275prov=G({token:n,factory:n.\u0275fac})}return n})(),Nw=new N(""),GR="XSRF-TOKEN",qR=new N("",{providedIn:"root",factory:()=>GR}),KR="X-XSRF-TOKEN",YR=new N("",{providedIn:"root",factory:()=>KR}),wo=class{},QR=(()=>{class n{doc;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(t,r){this.doc=t,this.cookieName=r}getToken(){let t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=fo(t,this.cookieName),this.lastCookieString=t),this.lastToken}static \u0275fac=function(r){return new(r||n)(V($e),V(qR))};static \u0275prov=G({token:n,factory:n.\u0275fac})}return n})(),ZR=/^(?:https?:)?\/\//i;function JR(n,e){if(!S(Nw)||n.method==="GET"||n.method==="HEAD"||ZR.test(n.url))return e(n);let t=S(wo).getToken(),r=S(YR);return t!=null&&!n.headers.has(r)&&(n=n.clone({headers:n.headers.set(r,t)})),e(n)}function dp(...n){let e=[VR,up,_c,{provide:qi,useExisting:_c},{provide:Eo,useFactory:()=>S(jR,{optional:!0})??S(up)},{provide:Aw,useValue:JR,multi:!0},{provide:Nw,useValue:!0},{provide:wo,useClass:QR}];for(let t of n)e.push(...t.\u0275providers);return Ll(e)}var ti=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:function(r){let i=null;return r?i=new(r||n):i=V(ek),i},providedIn:"root"})}return n})(),ek=(()=>{class n extends ti{_doc;constructor(t){super(),this._doc=t}sanitize(t,r){if(r==null)return null;switch(t){case Un.NONE:return r;case Un.HTML:return Yr(r,"HTML")?Vn(r):bh(this._doc,String(r)).toString();case Un.STYLE:return Yr(r,"Style")?Vn(r):r;case Un.SCRIPT:if(Yr(r,"Script"))return Vn(r);throw new C(5200,!1);case Un.URL:return Yr(r,"URL")?Vn(r):wh(String(r));case Un.RESOURCE_URL:if(Yr(r,"ResourceURL"))return Vn(r);throw new C(5201,!1);default:throw new C(5202,!1)}}bypassSecurityTrustHtml(t){return R0(t)}bypassSecurityTrustStyle(t){return k0(t)}bypassSecurityTrustScript(t){return P0(t)}bypassSecurityTrustUrl(t){return O0(t)}bypassSecurityTrustResourceUrl(t){return F0(t)}static \u0275fac=function(r){return new(r||n)(V($e))};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Rw=()=>{};var hp={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};var b=function(n,e){if(!n)throw ni(e)},ni=function(n){return new Error("Firebase Database ("+hp.SDK_VERSION+") INTERNAL ASSERT FAILED: "+n)};var Ow=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},tk=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],o=n[t++],a=n[t++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{let s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Ec={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],o=i+1<n.length,a=o?n[i+1]:0,l=i+2<n.length,c=l?n[i+2]:0,u=s>>2,d=(s&3)<<4|a>>4,f=(a&15)<<2|c>>6,h=c&63;l||(h=64,o||(f=64)),r.push(t[u],t[d],t[f],t[h])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Ow(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):tk(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let c=i<n.length?t[n.charAt(i)]:64;++i;let d=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||a==null||c==null||d==null)throw new pp;let f=s<<2|a>>4;if(r.push(f),c!==64){let h=a<<4&240|c>>2;if(r.push(h),d!==64){let y=c<<6&192|d;r.push(y)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},pp=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},gp=function(n){let e=Ow(n);return Ec.encodeByteArray(e,!0)},Co=function(n){return gp(n).replace(/\./g,"")},Yi=function(n){try{return Ec.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Fw(n){return Lw(void 0,n)}function Lw(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:let t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(let t in e)!e.hasOwnProperty(t)||!nk(t)||(n[t]=Lw(n[t],e[t]));return n}function nk(n){return n!=="__proto__"}function rk(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var ik=()=>rk().__FIREBASE_DEFAULTS__,sk=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},ok=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Yi(n[1]);return e&&JSON.parse(e)},yp=()=>{try{return Rw()||ik()||sk()||ok()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},_p=n=>yp()?.emulatorHosts?.[n],Vw=n=>{let e=_p(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},vp=()=>yp()?.config,Ep=n=>yp()?.[`_${n}`];var Gn=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function ur(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function wc(n){return(await fetch(n,{credentials:"include"})).ok}function jw(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=D({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Co(JSON.stringify(t)),Co(JSON.stringify(o)),""].join(".")}var bo={};function ak(){let n={prod:[],emulator:[]};for(let e of Object.keys(bo))bo[e]?n.emulator.push(e):n.prod.push(e);return n}function lk(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var kw=!1;function bc(n,e){if(typeof window>"u"||typeof document>"u"||!ur(window.location.host)||bo[n]===e||bo[n]||kw)return;bo[n]=e;function t(f){return`__firebase__banner__${f}`}let r="__firebase__banner",s=ak().prod.length>0;function o(){let f=document.getElementById(r);f&&f.remove()}function a(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function l(f,h){f.setAttribute("width","24"),f.setAttribute("id",h),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function c(){let f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{kw=!0,o()},f}function u(f,h){f.setAttribute("id",h),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function d(){let f=lk(r),h=t("text"),y=document.getElementById(h)||document.createElement("span"),v=t("learnmore"),w=document.getElementById(v)||document.createElement("a"),I=t("preprendIcon"),P=document.getElementById(I)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){let B=f.element;a(B),u(w,v);let ue=c();l(P,I),B.append(P,y,w,ue),document.body.appendChild(B)}s?(y.innerText="Preview backend disconnected.",P.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(P.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,y.innerText="Preview backend running in this workspace."),y.setAttribute("id",h)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}function We(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Io(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(We())}function Uw(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Bw(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Cc(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Hw(){let n=We();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function hn(){return hp.NODE_CLIENT===!0||hp.NODE_ADMIN===!0}function $w(){try{return typeof indexedDB=="object"}catch{return!1}}function zw(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}var ck="FirebaseError",Wt=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=ck,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,qn.prototype.create)}},qn=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?uk(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Wt(i,a,r)}};function uk(n,e){return n.replace(dk,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var dk=/\{\$([^}]+)}/g;function Qi(n){return JSON.parse(n)}function Re(n){return JSON.stringify(n)}var Ww=function(n){let e={},t={},r={},i="";try{let s=n.split(".");e=Qi(Yi(s[0])||""),t=Qi(Yi(s[1])||""),i=s[2],r=t.d||{},delete t.d}catch{}return{header:e,claims:t,data:r,signature:i}};var Gw=function(n){let e=Ww(n),t=e.claims;return!!t&&typeof t=="object"&&t.hasOwnProperty("iat")},qw=function(n){let e=Ww(n).claims;return typeof e=="object"&&e.admin===!0};function Gt(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function ri(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]}function Do(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function So(n,e,t){let r={};for(let i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=e.call(t,n[i],i,n));return r}function pn(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let s=n[i],o=e[i];if(Pw(s)&&Pw(o)){if(!pn(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function Pw(n){return n!==null&&typeof n=="object"}function ii(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Zi(n){let e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Ji(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}var vc=class{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);let r=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)r[d]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let d=0;d<16;d++)r[d]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let d=16;d<80;d++){let f=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(f<<1|f>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],l=this.chain_[4],c,u;for(let d=0;d<80;d++){d<40?d<20?(c=a^s&(o^a),u=1518500249):(c=s^o^a,u=1859775393):d<60?(c=s&o|a&(s|o),u=2400959708):(c=s^o^a,u=3395469782);let f=(i<<5|i>>>27)+c+l+u+r[d]&4294967295;l=a,a=o,o=(s<<30|s>>>2)&4294967295,s=i,i=f}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,t){if(e==null)return;t===void 0&&(t=e.length);let r=t-this.blockSize,i=0,s=this.buf_,o=this.inbuf_;for(;i<t;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<t;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<t;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=t}digest(){let e=[],t=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=t&255,t/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}};function Kw(n,e){let t=new mp(n,e);return t.subscribe.bind(t)}var mp=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");fk(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=fp),i.error===void 0&&(i.error=fp),i.complete===void 0&&(i.complete=fp);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function fk(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function fp(){}function To(n,e){return`${n} failed: ${e} argument `}var Yw=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);if(i>=55296&&i<=56319){let s=i-55296;r++,b(r<n.length,"Surrogate pair missing trail surrogate.");let o=n.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):i<65536?(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},xo=function(n){let e=0;for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,t++):e+=3}return e};var Z8=4*60*60*1e3;function Le(n){return n&&n._delegate?n._delegate:n}var Rt=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var si="[DEFAULT]";var Ic=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new Gn;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){let t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(pk(e))try{this.getOrInitializeService({instanceIdentifier:si})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=si){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=si){return this.instances.has(e)}getOptions(e=si){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,t){let r=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);let s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:hk(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=si){return this.component?this.component.multipleInstances?e:si:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function hk(n){return n===si?void 0:n}function pk(n){return n.instantiationMode==="EAGER"}var Ao=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new Ic(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var mk=[],de=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(de||{}),gk={debug:de.DEBUG,verbose:de.VERBOSE,info:de.INFO,warn:de.WARN,error:de.ERROR,silent:de.SILENT},yk=de.INFO,_k={[de.DEBUG]:"log",[de.VERBOSE]:"log",[de.INFO]:"info",[de.WARN]:"warn",[de.ERROR]:"error"},vk=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=_k[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},dr=class{constructor(e){this.name=e,this._logLevel=yk,this._logHandler=vk,this._userLogHandler=null,mk.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in de))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?gk[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,de.DEBUG,...e),this._logHandler(this,de.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,de.VERBOSE,...e),this._logHandler(this,de.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,de.INFO,...e),this._logHandler(this,de.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,de.WARN,...e),this._logHandler(this,de.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,de.ERROR,...e),this._logHandler(this,de.ERROR,...e)}};var Ek=(n,e)=>e.some(t=>n instanceof t),Qw,Zw;function wk(){return Qw||(Qw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function bk(){return Zw||(Zw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var Jw=new WeakMap,bp=new WeakMap,Xw=new WeakMap,wp=new WeakMap,Ip=new WeakMap;function Ck(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(mn(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&Jw.set(t,n)}).catch(()=>{}),Ip.set(e,n),e}function Ik(n){if(bp.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});bp.set(n,e)}var Cp={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return bp.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Xw.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return mn(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function eb(n){Cp=n(Cp)}function Dk(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(Dc(this),e,...t);return Xw.set(r,e.sort?e.sort():[e]),mn(r)}:bk().includes(n)?function(...e){return n.apply(Dc(this),e),mn(Jw.get(this))}:function(...e){return mn(n.apply(Dc(this),e))}}function Sk(n){return typeof n=="function"?Dk(n):(n instanceof IDBTransaction&&Ik(n),Ek(n,wk())?new Proxy(n,Cp):n)}function mn(n){if(n instanceof IDBRequest)return Ck(n);if(wp.has(n))return wp.get(n);let e=Sk(n);return e!==n&&(wp.set(n,e),Ip.set(e,n)),e}var Dc=n=>Ip.get(n);function nb(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(n,e),a=mn(o);return r&&o.addEventListener("upgradeneeded",l=>{r(mn(o.result),l.oldVersion,l.newVersion,mn(o.transaction),l)}),t&&o.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}var Tk=["get","getKey","getAll","getAllKeys","count"],xk=["put","add","delete","clear"],Dp=new Map;function tb(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Dp.get(e))return Dp.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=xk.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Tk.includes(t)))return;let s=async function(o,...a){let l=this.transaction(o,i?"readwrite":"readonly"),c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[t](...a),i&&l.done]))[0]};return Dp.set(e,s),s}eb(n=>H(D({},n),{get:(e,t,r)=>tb(e,t)||n.get(e,t,r),has:(e,t)=>!!tb(e,t)||n.has(e,t)}));var Tp=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Ak(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function Ak(n){return n.getComponent()?.type==="VERSION"}var xp="@firebase/app",rb="0.14.8";var Kn=new dr("@firebase/app"),Mk="@firebase/app-compat",Nk="@firebase/analytics-compat",Rk="@firebase/analytics",kk="@firebase/app-check-compat",Pk="@firebase/app-check",Ok="@firebase/auth",Fk="@firebase/auth-compat",Lk="@firebase/database",Vk="@firebase/data-connect",jk="@firebase/database-compat",Uk="@firebase/functions",Bk="@firebase/functions-compat",Hk="@firebase/installations",$k="@firebase/installations-compat",zk="@firebase/messaging",Wk="@firebase/messaging-compat",Gk="@firebase/performance",qk="@firebase/performance-compat",Kk="@firebase/remote-config",Yk="@firebase/remote-config-compat",Qk="@firebase/storage",Zk="@firebase/storage-compat",Jk="@firebase/firestore",Xk="@firebase/ai",eP="@firebase/firestore-compat",tP="firebase",nP="12.9.0";var Ap="[DEFAULT]",rP={[xp]:"fire-core",[Mk]:"fire-core-compat",[Rk]:"fire-analytics",[Nk]:"fire-analytics-compat",[Pk]:"fire-app-check",[kk]:"fire-app-check-compat",[Ok]:"fire-auth",[Fk]:"fire-auth-compat",[Lk]:"fire-rtdb",[Vk]:"fire-data-connect",[jk]:"fire-rtdb-compat",[Uk]:"fire-fn",[Bk]:"fire-fn-compat",[Hk]:"fire-iid",[$k]:"fire-iid-compat",[zk]:"fire-fcm",[Wk]:"fire-fcm-compat",[Gk]:"fire-perf",[qk]:"fire-perf-compat",[Kk]:"fire-rc",[Yk]:"fire-rc-compat",[Qk]:"fire-gcs",[Zk]:"fire-gcs-compat",[Jk]:"fire-fst",[eP]:"fire-fst-compat",[Xk]:"fire-vertex","fire-js":"fire-js",[tP]:"fire-js-all"};var Mo=new Map,iP=new Map,Mp=new Map;function ib(n,e){try{n.container.addComponent(e)}catch(t){Kn.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function hr(n){let e=n.name;if(Mp.has(e))return Kn.debug(`There were multiple attempts to register component ${e}.`),!1;Mp.set(e,n);for(let t of Mo.values())ib(t,n);for(let t of iP.values())ib(t,n);return!0}function Ro(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Je(n){return n==null?!1:n.settings!==void 0}var sP={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},fr=new qn("app","Firebase",sP);var Np=class{constructor(e,t,r){this._isDeleted=!1,this._options=D({},e),this._config=D({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Rt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw fr.create("app-deleted",{appName:this._name})}};var pr=nP;function ko(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=D({name:Ap,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw fr.create("bad-app-name",{appName:String(i)});if(t||(t=vp()),!t)throw fr.create("no-options");let s=Mo.get(i);if(s){if(pn(t,s.options)&&pn(r,s.config))return s;throw fr.create("duplicate-app",{appName:i})}let o=new Ao(i);for(let l of Mp.values())o.addComponent(l);let a=new Np(t,r,o);return Mo.set(i,a),a}function mr(n=Ap){let e=Mo.get(n);if(!e&&n===Ap&&vp())return ko();if(!e)throw fr.create("no-app",{appName:n});return e}function Sc(){return Array.from(Mo.values())}function qt(n,e,t){let r=rP[n]??n;t&&(r+=`-${t}`);let i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){let o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Kn.warn(o.join(" "));return}hr(new Rt(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var oP="firebase-heartbeat-database",aP=1,No="firebase-heartbeat-store",Sp=null;function lb(){return Sp||(Sp=nb(oP,aP,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(No)}catch(t){console.warn(t)}}}}).catch(n=>{throw fr.create("idb-open",{originalErrorMessage:n.message})})),Sp}async function lP(n){try{let t=(await lb()).transaction(No),r=await t.objectStore(No).get(cb(n));return await t.done,r}catch(e){if(e instanceof Wt)Kn.warn(e.message);else{let t=fr.create("idb-get",{originalErrorMessage:e?.message});Kn.warn(t.message)}}}async function sb(n,e){try{let r=(await lb()).transaction(No,"readwrite");await r.objectStore(No).put(e,cb(n)),await r.done}catch(t){if(t instanceof Wt)Kn.warn(t.message);else{let r=fr.create("idb-set",{originalErrorMessage:t?.message});Kn.warn(r.message)}}}function cb(n){return`${n.name}!${n.options.appId}`}var cP=1024,uP=30,Rp=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new kp(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{let t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=ob();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>uP){let i=fP(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Kn.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";let e=ob(),{heartbeatsToSend:t,unsentEntries:r}=dP(this._heartbeatsCache.heartbeats),i=Co(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return Kn.warn(e),""}}};function ob(){return new Date().toISOString().substring(0,10)}function dP(n,e=cP){let t=[],r=n.slice();for(let i of n){let s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),ab(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),ab(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var kp=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return $w()?zw().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let t=await lP(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){let r=await this.read();return sb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){let r=await this.read();return sb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}};function ab(n){return Co(JSON.stringify({version:2,heartbeats:n})).length}function fP(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function hP(n){hr(new Rt("platform-logger",e=>new Tp(e),"PRIVATE")),hr(new Rt("heartbeat",e=>new Rp(e),"PRIVATE")),qt(xp,rb,n),qt(xp,rb,"esm2020"),qt("fire-js","")}hP("");var pP="firebase",mP="12.9.0";qt(pP,mP,"app");var ub="@firebase/database",db="1.1.0";var Um="";function gP(n){Um=n}var Bp=class{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){t==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Re(t))}get(e){let t=this.domStorage_.getItem(this.prefixedName_(e));return t==null?null:Qi(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}};var Hp=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){t==null?delete this.cache_[e]:this.cache_[e]=t}get(e){return Gt(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}};var $b=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){let e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Bp(e)}}catch{}return new Hp},ai=$b("localStorage"),$p=$b("sessionStorage");var ts=new dr("@firebase/database"),yP=function(){let n=1;return function(){return n++}}(),zb=function(n){let e=Yw(n),t=new vc;t.update(e);let r=t.digest();return Ec.encodeByteArray(r)},Zo=function(...n){let e="";for(let t=0;t<n.length;t++){let r=n[t];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=Zo.apply(null,r):typeof r=="object"?e+=Re(r):e+=r,e+=" "}return e},li=null,fb=!0,_P=function(n,e){b(!e||n===!0||n===!1,"Can't turn on custom loggers persistently."),n===!0?(ts.logLevel=de.VERBOSE,li=ts.log.bind(ts),e&&$p.set("logging_enabled",!0)):typeof n=="function"?li=n:(li=null,$p.remove("logging_enabled"))},Ve=function(...n){if(fb===!0&&(fb=!1,li===null&&$p.get("logging_enabled")===!0&&_P(!0)),li){let e=Zo.apply(null,n);li(e)}},Jo=function(n){return function(...e){Ve(n,...e)}},zp=function(...n){let e="FIREBASE INTERNAL ERROR: "+Zo(...n);ts.error(e)},Yn=function(...n){let e=`FIREBASE FATAL ERROR: ${Zo(...n)}`;throw ts.error(e),new Error(e)},Xe=function(...n){let e="FIREBASE WARNING: "+Zo(...n);ts.warn(e)},vP=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Xe("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Bm=function(n){return typeof n=="number"&&(n!==n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},EP=function(n){if(hn()||document.readyState==="complete")n();else{let e=!1,t=function(){if(!document.body){setTimeout(t,Math.floor(10));return}e||(e=!0,n())};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&t()}),window.attachEvent("onload",t))}},is="[MIN_NAME]",ci="[MAX_NAME]",di=function(n,e){if(n===e)return 0;if(n===is||e===ci)return-1;if(e===is||n===ci)return 1;{let t=hb(n),r=hb(e);return t!==null?r!==null?t-r===0?n.length-e.length:t-r:-1:r!==null?1:n<e?-1:1}},wP=function(n,e){return n===e?0:n<e?-1:1},Po=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+Re(e))},Hm=function(n){if(typeof n!="object"||n===null)return Re(n);let e=[];for(let r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)r!==0&&(t+=","),t+=Re(e[r]),t+=":",t+=Hm(n[e[r]]);return t+="}",t},Wb=function(n,e){let t=n.length;if(t<=e)return[n];let r=[];for(let i=0;i<t;i+=e)i+e>t?r.push(n.substring(i,t)):r.push(n.substring(i,i+e));return r};function je(n,e){for(let t in n)n.hasOwnProperty(t)&&e(t,n[t])}var Gb=function(n){b(!Bm(n),"Invalid JSON number");let e=11,t=52,r=(1<<e-1)-1,i,s,o,a,l;n===0?(s=0,o=0,i=1/n===-1/0?1:0):(i=n<0,n=Math.abs(n),n>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(n)/Math.LN2),r),s=a+r,o=Math.round(n*Math.pow(2,t-a)-Math.pow(2,t))):(s=0,o=Math.round(n/Math.pow(2,1-r-t))));let c=[];for(l=t;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(l=e;l;l-=1)c.push(s%2?1:0),s=Math.floor(s/2);c.push(i?1:0),c.reverse();let u=c.join(""),d="";for(l=0;l<64;l+=8){let f=parseInt(u.substr(l,8),2).toString(16);f.length===1&&(f="0"+f),d=d+f}return d.toLowerCase()},bP=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},CP=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function IP(n,e){let t="Unknown Error";n==="too_big"?t="The data requested exceeds the maximum size that can be accessed with a single request.":n==="permission_denied"?t="Client doesn't have permission to access the desired data.":n==="unavailable"&&(t="The service is unavailable");let r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}var DP=new RegExp("^-?(0*)\\d{1,10}$"),SP=-2147483648,TP=2147483647,hb=function(n){if(DP.test(n)){let e=Number(n);if(e>=SP&&e<=TP)return e}return null},fs=function(n){try{n()}catch(e){setTimeout(()=>{let t=e.stack||"";throw Xe("Exception was thrown by user callback.",t),e},Math.floor(0))}},xP=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},jo=function(n,e){let t=setTimeout(n,e);return typeof t=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):typeof t=="object"&&t.unref&&t.unref(),t};var Wp=class{constructor(e,t){this.appCheckProvider=t,this.appName=e.name,Je(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.appCheckProvider?.get().then(t=>t.addTokenListener(e))}notifyForInvalidToken(){Xe(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}};var Gp=class{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&t.code==="auth/token-not-initialized"?(Ve("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Xe(e)}},Uo=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}n.OWNER="owner";return n})(),xc="5",qb="v",Kb="s",Yb="r",Qb="f",Zb=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Jb="ls",Xb="p",qp="ac",eC="websocket",tC="long_polling";var Ac=class{constructor(e,t,r,i,s=!1,o="",a=!1,l=!1,c=null){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this.emulatorOptions=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ai.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&ai.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){let e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}};function AP(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams}function nC(n,e,t){b(typeof e=="string","typeof type must == string"),b(typeof t=="object","typeof params must == object");let r;if(e===eC)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else if(e===tC)r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);AP(n)&&(t.ns=n.namespace);let i=[];return je(t,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}var Kp=class{constructor(){this.counters_={}}incrementCounter(e,t=1){Gt(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return Fw(this.counters_)}};var Pp={},Op={};function $m(n){let e=n.toString();return Pp[e]||(Pp[e]=new Kp),Pp[e]}function MP(n,e){let t=n.toString();return Op[t]||(Op[t]=e()),Op[t]}var Yp=class{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){let r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&fs(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var pb="start",NP="close",RP="pLPCommand",kP="pRTLPCB",rC="id",iC="pw",sC="ser",PP="cb",OP="seg",FP="ts",LP="d",VP="dframe",oC=1870,aC=30,jP=oC-aC,UP=25e3,BP=3e4,Qp=class n{constructor(e,t,r,i,s,o,a){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Jo(e),this.stats_=$m(t),this.urlFn=l=>(this.appCheckToken&&(l[qp]=this.appCheckToken),nC(t,tC,l))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Yp(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(BP)),EP(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Zp((...s)=>{let[o,a,l,c,u]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===pb)this.id=a,this.password=l;else if(o===NP)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{let[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);let r={};r[pb]="t",r[sC]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[PP]=this.scriptTagHolder.uniqueCallbackIdentifier),r[qb]=xc,this.transportSessionId&&(r[Kb]=this.transportSessionId),this.lastSessionId&&(r[Jb]=this.lastSessionId),this.applicationId&&(r[Xb]=this.applicationId),this.appCheckToken&&(r[qp]=this.appCheckToken),typeof location<"u"&&location.hostname&&Zb.test(location.hostname)&&(r[Yb]=Qb);let i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){n.forceAllow_=!0}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){return hn()?!1:n.forceAllow_?!0:!n.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!bP()&&!CP()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){let t=Re(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);let r=gp(t),i=Wb(r,jP);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if(hn())return;this.myDisconnFrame=document.createElement("iframe");let r={};r[VP]="t",r[rC]=e,r[iC]=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let t=Re(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}},Zp=class n{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,hn())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=yP(),window[RP+this.uniqueCallbackIdentifier]=e,window[kP+this.uniqueCallbackIdentifier]=t,this.myIFrame=n.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');let o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){Ve("frame writing exception"),a.stack&&Ve(a.stack),Ve(a)}}}static createIFrame_(){let e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Ve("No IE domain setting required")}catch{let r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let e={};e[rC]=this.myID,e[iC]=this.myPW,e[sC]=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+aC+r.length<=oC;){let o=this.pendingSegs.shift();r=r+"&"+OP+i+"="+o.seg+"&"+FP+i+"="+o.ts+"&"+LP+i+"="+o.d,i++}return t=t+r,this.addLongPollTag_(t,this.currentSerial),!0}else return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);let r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(UP)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,t){hn()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;let r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){let i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Ve("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}};var HP=16384,$P=45e3,Mc=null;typeof MozWebSocket<"u"?Mc=MozWebSocket:typeof WebSocket<"u"&&(Mc=WebSocket);var Oo=(()=>{class n{constructor(t,r,i,s,o,a,l){this.connId=t,this.applicationId=i,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Jo(this.connId),this.stats_=$m(r),this.connURL=n.connectionURL_(r,a,l,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,s,o){let a={};return a[qb]=xc,!hn()&&typeof location<"u"&&location.hostname&&Zb.test(location.hostname)&&(a[Yb]=Qb),r&&(a[Kb]=r),i&&(a[Jb]=i),s&&(a[qp]=s),o&&(a[Xb]=o),nC(t,eC,a)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ai.set("previous_websocket_failure",!0);try{let i;if(hn()){let s=this.nodeAdmin?"AdminNode":"Node";i={headers:{"User-Agent":`Firebase/${xc}/${Um}/${process.platform}/${s}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);let o=process.env,a=this.connURL.indexOf("wss://")===0?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new Mc(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){let r=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(r);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&Mc!==null&&!n.forceDisallow_}static previouslyFailed(){return ai.isInMemoryStorage||ai.get("previous_websocket_failure")===!0}markConnectionHealthy(){ai.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){let r=this.frames.join("");this.frames=null;let i=Qi(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(b(this.frames===null,"We already have a frame buffer"),t.length<=6){let r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(this.mySock===null)return;let r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{let i=this.extractFrameCount_(r);i!==null&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();let r=Re(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);let i=Wb(r,HP);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor($P))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4;return n})(),zP=(()=>{class n{static get ALL_TRANSPORTS(){return[Qp,Oo]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(t){this.initTransports_(t)}initTransports_(t){let r=Oo&&Oo.isAvailable(),i=r&&!Oo.previouslyFailed();if(t.webSocketOnly&&(r||Xe("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Oo];else{let s=this.transports_=[];for(let o of n.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}n.globalTransportInitialized_=!1;return n})(),WP=6e4,GP=5e3,qP=10*1024,KP=100*1024,Fp="t",mb="d",YP="s",gb="r",QP="e",yb="o",_b="a",vb="n",Eb="p",ZP="h",Jp=class{constructor(e,t,r,i,s,o,a,l,c,u){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Jo("c:"+this.id+":"),this.transportManager_=new zP(t),this.log_("Connection created"),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));let i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=jo(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>KP?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>qP?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){let t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Fp in e){let t=e[Fp];t===_b?this.upgradeIfSecondaryHealthy_():t===gb?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===yb&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let t=Po("t",e),r=Po("d",e);if(t==="c")this.onSecondaryControl_(r);else if(t==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Eb,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:_b,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:vb,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let t=Po("t",e),r=Po("d",e);t==="c"?this.onControl_(r):t==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let t=Po(Fp,e);if(mb in e){let r=e[mb];if(t===ZP){let i=D({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(t===vb){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===YP?this.onConnectionShutdown_(r):t===gb?this.onReset_(r):t===QP?zp("Server Error: "+r):t===yb?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):zp("Unknown control packet command: "+t)}}onHandshake_(e){let t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),xc!==r&&Xe("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),jo(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(WP))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):jo(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(GP))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Eb,d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ai.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var Nc=class{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}};var Rc=class{constructor(e){this.allowedEvents_=e,this.listeners_={},b(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){let r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});let i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);let i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===t&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){b(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}};var kc=class n extends Rc{static getInstance(){return new n}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Io()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return b(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}};var wb=32,bb=768,ce=class{constructor(e,t){if(t===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)this.pieces_[t]!==""&&(e+="/"+this.pieces_[t]);return e||"/"}};function ae(){return new ce("")}function Z(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function _r(n){return n.pieces_.length-n.pieceNum_}function me(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new ce(n.pieces_,e)}function zm(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function JP(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)n.pieces_[t]!==""&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}function zo(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function lC(n){if(n.pieceNum_>=n.pieces_.length)return null;let e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new ce(e,0)}function Ce(n,e){let t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof ce)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{let r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new ce(t,0)}function ee(n){return n.pieceNum_>=n.pieces_.length}function ht(n,e){let t=Z(n),r=Z(e);if(t===null)return e;if(t===r)return ht(me(n),me(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function XP(n,e){let t=zo(n,0),r=zo(e,0);for(let i=0;i<t.length&&i<r.length;i++){let s=di(t[i],r[i]);if(s!==0)return s}return t.length===r.length?0:t.length<r.length?-1:1}function Wm(n,e){if(_r(n)!==_r(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function kt(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(_r(n)>_r(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}var Xp=class{constructor(e,t){this.errorPrefix_=t,this.parts_=zo(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=xo(this.parts_[r]);cC(this)}};function eO(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=xo(e),cC(n)}function tO(n){let e=n.parts_.pop();n.byteLength_-=xo(e),n.parts_.length>0&&(n.byteLength_-=1)}function cC(n){if(n.byteLength_>bb)throw new Error(n.errorPrefix_+"has a key path longer than "+bb+" bytes ("+n.byteLength_+").");if(n.parts_.length>wb)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+wb+") or object contains a cycle "+oi(n))}function oi(n){return n.parts_.length===0?"":"in property '"+n.parts_.join(".")+"'"}var em=class n extends Rc{static getInstance(){return new n}constructor(){super(["visible"]);let e,t;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{let r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}getInitialEvent(e){return b(e==="visible","Unknown event type: "+e),[this.visible_]}};var Fo=1e3,nO=60*5*1e3,Cb=30*1e3,rO=1.3,iO=3e4,sO="server_kill",Ib=3,Gm=(()=>{class n extends Nc{constructor(t,r,i,s,o,a,l,c){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=l,this.authOverride_=c,this.id=n.nextPersistentConnectionId_++,this.log_=Jo("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Fo,this.maxReconnectDelay_=nO,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c&&!hn())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");em.getInstance().on("visible",this.onVisible_,this),t.host.indexOf("fblocal")===-1&&kc.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){let s=++this.requestNumber_,o={r:s,a:t,b:r};this.log_(Re(o)),b(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[s]=i)}get(t){this.initConnection_();let r=new Gn,s={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:a=>{let l=a.d;a.s==="ok"?r.resolve(l):r.reject(l)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;let o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),r.promise}listen(t,r,i,s){this.initConnection_();let o=t._queryIdentifier,a=t._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),b(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),b(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");let l={onComplete:s,hashFn:r,query:t,tag:i};this.listens.get(a).set(o,l),this.connected_&&this.sendListen_(l)}sendGet_(t){let r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){let r=t.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);let o={p:i},a="q";t.tag&&(o.q=r._queryObject,o.t=t.tag),o.h=t.hashFn(),this.sendRequest(a,o,l=>{let c=l.d,u=l.s;n.warnOnListenWarnings_(c,r),(this.listens.get(i)&&this.listens.get(i).get(s))===t&&(this.log_("listen response",l),u!=="ok"&&this.removeListen_(i,s),t.onComplete&&t.onComplete(u,c))})}static warnOnListenWarnings_(t,r){if(t&&typeof t=="object"&&Gt(t,"w")){let i=ri(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){let s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',o=r._path.toString();Xe(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&t.length===40||qw(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Cb)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let t=this.authToken_,r=Gw(t)?"auth":"gauth",i={cred:t};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{let o=s.s,a=s.d||"error";this.authToken_===t&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{let r=t.s,i=t.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){let i=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),b(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,t._queryObject,r)}sendUnlisten_(t,r,i,s){this.log_("Unlisten on "+t+" for "+r);let o={p:t},a="n";s&&(o.q=i,o.t=s),this.sendRequest(a,o)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,s){let o={p:r,d:i};this.log_("onDisconnect "+t,o),this.sendRequest(t,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(t,r,i,s){this.putInternal("p",t,r,i,s)}merge(t,r,i,s){this.putInternal("m",t,r,i,s)}putInternal(t,r,i,s,o){this.initConnection_();let a={p:r,d:i};o!==void 0&&(a.h=o),this.outstandingPuts_.push({action:t,request:a,onComplete:s}),this.outstandingPutCount_++;let l=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(l):this.log_("Buffering put: "+r)}sendPut_(t){let r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,o=>{this.log_(r+" response",o),delete this.outstandingPuts_[t],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(t){if(this.connected_){let r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{if(i.s!=="ok"){let o=i.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+Re(t));let r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),t==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):t==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):t==="c"?this.onListenRevoked_(r.p,r.q):t==="ac"?this.onAuthRevoked_(r.s,r.d):t==="apc"?this.onAppCheckRevoked_(r.s,r.d):t==="sd"?this.onSecurityDebugPacket_(r):zp("Unrecognized action received from server: "+Re(t)+`
Are you using the latest client?`)}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){b(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Fo,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Fo,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>iO&&(this.reconnectDelay_=Fo),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let t=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_),r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*rO)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let t=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+n.nextConnectionId_++,o=this.lastSessionId,a=!1,l=null,c=function(){l?l.close():(a=!0,i())},u=function(f){b(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(f)};this.realtime_={close:c,sendRequest:u};let d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[f,h]=await Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);a?Ve("getToken() completed but was canceled"):(Ve("getToken() completed. Creating connection."),this.authToken_=f&&f.accessToken,this.appCheckToken_=h&&h.token,l=new Jp(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,r,i,y=>{Xe(y+" ("+this.repoInfo_.toString()+")"),this.interrupt(sO)},o))}catch(f){this.log_("Failed to get token: "+f),a||(this.repoInfo_.nodeAdmin&&Xe(f),c())}}}interrupt(t){Ve("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Ve("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Do(this.interruptReasons_)&&(this.reconnectDelay_=Fo,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){let r=t-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){let r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;r?i=r.map(o=>Hm(o)).join("$"):i="default";let s=this.removeListen_(t,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,r){let i=new ce(t).toString(),s;if(this.listens.has(i)){let o=this.listens.get(i);s=o.get(r),o.delete(r),o.size===0&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(t,r){Ve("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(t==="invalid_token"||t==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Ib&&(this.reconnectDelay_=Cb,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Ve("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(t==="invalid_token"||t==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Ib&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let t of this.listens.values())for(let r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){let t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){let t={},r="js";hn()&&(this.repoInfo_.nodeAdmin?r="admin_node":r="node"),t["sdk."+r+"."+Um.replace(/\./g,"-")]=1,Io()?t["framework.cordova"]=1:Cc()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){let t=kc.getInstance().currentlyOnline();return Do(this.interruptReasons_)&&t}}n.nextPersistentConnectionId_=0,n.nextConnectionId_=0;return n})(),J=class n{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new n(e,t)}};var ss=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){let r=new J(is,e),i=new J(is,t);return this.compare(r,i)!==0}minPost(){return J.MIN}};var Tc,Pc=class extends ss{static get __EMPTY_NODE(){return Tc}static set __EMPTY_NODE(e){Tc=e}compare(e,t){return di(e.name,t.name)}isDefinedOn(e){throw ni("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return J.MIN}maxPost(){return new J(ci,Tc)}makePost(e,t){return b(typeof e=="string","KeyIndex indexValue must always be a string."),new J(e,Tc)}toString(){return".key"}},ns=new Pc;var es=class{constructor(e,t,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=t?r(e.key,t):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),t;if(this.resultGenerator_?t=this.resultGenerator_(e.key,e.value):t={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},Kt=(()=>{class n{constructor(t,r,i,s,o){this.key=t,this.value=r,this.color=i??n.RED,this.left=s??Pt.EMPTY_NODE,this.right=o??Pt.EMPTY_NODE}copy(t,r,i,s,o){return new n(t??this.key,r??this.value,i??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let s=this,o=i(t,s.key);return o<0?s=s.copy(null,null,null,s.left.insert(t,r,i),null):o===0?s=s.copy(null,r,null,null,null):s=s.copy(null,null,null,null,s.right.insert(t,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Pt.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,s;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),r(t,i.key)===0){if(i.right.isEmpty())return Pt.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){let t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){let t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){let t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){let t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})(),tm=class{copy(e,t,r,i,s){return this}insert(e,t,r){return new Kt(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},Pt=class n{constructor(e,t=n.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new n(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Kt.BLACK,null,null))}remove(e){return new n(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Kt.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),t===0)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();)if(t=this.comparator_(e,r.key),t===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else t<0?r=r.left:t>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new es(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new es(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new es(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new es(this.root_,null,this.comparator_,!0,e)}};Pt.EMPTY_NODE=new tm;function oO(n,e){return di(n.name,e.name)}function qm(n,e){return di(n,e)}var nm;function aO(n){nm=n}var uC=function(n){return typeof n=="number"?"number:"+Gb(n):"string:"+n},dC=function(n){if(n.isLeafNode()){let e=n.val();b(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Gt(e,".sv"),"Priority must be a string or number.")}else b(n===nm||n.isEmpty(),"priority of unexpected type.");b(n===nm||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var Db,os=(()=>{class n{static set __childrenNodeConstructor(t){Db=t}static get __childrenNodeConstructor(){return Db}constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,b(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),dC(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return t===".priority"?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return ee(t)?this:Z(t)===".priority"?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return t===".priority"?this.updatePriority(r):r.isEmpty()&&t!==".priority"?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){let i=Z(t);return i===null?r:r.isEmpty()&&i!==".priority"?this:(b(i!==".priority"||_r(t)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(me(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+uC(this.priorityNode_.val())+":");let r=typeof this.value_;t+=r+":",r==="number"?t+=Gb(this.value_):t+=this.value_,this.lazyHash_=zb(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:(b(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){let r=typeof t.value_,i=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(r),o=n.VALUE_TYPE_ORDER.indexOf(i);return b(s>=0,"Unknown leaf type: "+r),b(o>=0,"Unknown leaf type: "+i),s===o?i==="object"?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){let r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}n.VALUE_TYPE_ORDER=["object","boolean","number","string"];return n})(),fC,hC;function lO(n){fC=n}function cO(n){hC=n}var rm=class extends ss{compare(e,t){let r=e.node.getPriority(),i=t.node.getPriority(),s=r.compareTo(i);return s===0?di(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return J.MIN}maxPost(){return new J(ci,new os("[PRIORITY-POST]",hC))}makePost(e,t){let r=fC(e);return new J(t,new os("[PRIORITY-POST]",r))}toString(){return".priority"}},Ie=new rm;var uO=Math.log(2),im=class{constructor(e){let t=s=>parseInt(Math.log(s)/uO,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=t(e+1),this.current_=this.count-1;let i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}},Oc=function(n,e,t,r){n.sort(e);let i=function(l,c){let u=c-l,d,f;if(u===0)return null;if(u===1)return d=n[l],f=t?t(d):d,new Kt(f,d.node,Kt.BLACK,null,null);{let h=parseInt(u/2,10)+l,y=i(l,h),v=i(h+1,c);return d=n[h],f=t?t(d):d,new Kt(f,d.node,Kt.BLACK,y,v)}},s=function(l){let c=null,u=null,d=n.length,f=function(y,v){let w=d-y,I=d;d-=y;let P=i(w+1,I),B=n[w],ue=t?t(B):B;h(new Kt(ue,B.node,v,null,P))},h=function(y){c?(c.left=y,c=y):(u=y,c=y)};for(let y=0;y<l.count;++y){let v=l.nextBitIsOne(),w=Math.pow(2,l.count-(y+1));v?f(w,Kt.BLACK):(f(w,Kt.BLACK),f(w,Kt.RED))}return u},o=new im(n.length),a=s(o);return new Pt(r||e,a)};var Lp,Xi={},as=class n{static get Default(){return b(Xi&&Ie,"ChildrenNode.ts has not been loaded"),Lp=Lp||new n({".priority":Xi},{".priority":Ie}),Lp}constructor(e,t){this.indexes_=e,this.indexSet_=t}get(e){let t=ri(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Pt?t:null}hasIndex(e){return Gt(this.indexSet_,e.toString())}addIndex(e,t){b(e!==ns,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let r=[],i=!1,s=t.getIterator(J.Wrap),o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let a;i?a=Oc(r,e.getCompare()):a=Xi;let l=e.toString(),c=D({},this.indexSet_);c[l]=e;let u=D({},this.indexes_);return u[l]=a,new n(u,c)}addToIndexes(e,t){let r=So(this.indexes_,(i,s)=>{let o=ri(this.indexSet_,s);if(b(o,"Missing index implementation for "+s),i===Xi)if(o.isDefinedOn(e.node)){let a=[],l=t.getIterator(J.Wrap),c=l.getNext();for(;c;)c.name!==e.name&&a.push(c),c=l.getNext();return a.push(e),Oc(a,o.getCompare())}else return Xi;else{let a=t.get(e.name),l=i;return a&&(l=l.remove(new J(e.name,a))),l.insert(e,e.node)}});return new n(r,this.indexSet_)}removeFromIndexes(e,t){let r=So(this.indexes_,i=>{if(i===Xi)return i;{let s=t.get(e.name);return s?i.remove(new J(e.name,s)):i}});return new n(r,this.indexSet_)}};var Lo,z=(()=>{class n{static get EMPTY_NODE(){return Lo||(Lo=new n(new Pt(qm),null,as.Default))}constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&dC(this.priorityNode_),this.children_.isEmpty()&&b(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Lo}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(t===".priority")return this.getPriority();{let r=this.children_.get(t);return r===null?Lo:r}}getChild(t){let r=Z(t);return r===null?this:this.getImmediateChild(r).getChild(me(t))}hasChild(t){return this.children_.get(t)!==null}updateImmediateChild(t,r){if(b(r,"We should always be passing snapshot nodes"),t===".priority")return this.updatePriority(r);{let i=new J(t,r),s,o;r.isEmpty()?(s=this.children_.remove(t),o=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(t,r),o=this.indexMap_.addToIndexes(i,this.children_));let a=s.isEmpty()?Lo:this.priorityNode_;return new n(s,a,o)}}updateChild(t,r){let i=Z(t);if(i===null)return r;{b(Z(t)!==".priority"||_r(t)===1,".priority must be the last token in a path");let s=this.getImmediateChild(i).updateChild(me(t),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;let r={},i=0,s=0,o=!0;if(this.forEachChild(Ie,(a,l)=>{r[a]=l.val(t),i++,o&&n.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!t&&o&&s<2*i){let a=[];for(let l in r)a[l]=r[l];return a}else return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let t="";this.getPriority().isEmpty()||(t+="priority:"+uC(this.getPriority().val())+":"),this.forEachChild(Ie,(r,i)=>{let s=i.hash();s!==""&&(t+=":"+r+":"+s)}),this.lazyHash_=t===""?"":zb(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){let s=this.resolveIndex_(i);if(s){let o=s.getPredecessorKey(new J(t,r));return o?o.name:null}else return this.children_.getPredecessorKey(t)}getFirstChildName(t){let r=this.resolveIndex_(t);if(r){let i=r.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(t){let r=this.getFirstChildName(t);return r?new J(r,this.children_.get(r)):null}getLastChildName(t){let r=this.resolveIndex_(t);if(r){let i=r.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(t){let r=this.getLastChildName(t);return r?new J(r,this.children_.get(r)):null}forEachChild(t,r){let i=this.resolveIndex_(t);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){let i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,s=>s);{let s=this.children_.getIteratorFrom(t.name,J.Wrap),o=s.peek();for(;o!=null&&r.compare(o,t)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){let i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,s=>s);{let s=this.children_.getReverseIteratorFrom(t.name,J.Wrap),o=s.peek();for(;o!=null&&r.compare(o,t)>0;)s.getNext(),o=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Xo?-1:0}withIndex(t){if(t===ns||this.indexMap_.hasIndex(t))return this;{let r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===ns||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{let r=t;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){let i=this.getIterator(Ie),s=r.getIterator(Ie),o=i.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=i.getNext(),a=s.getNext()}return o===null&&a===null}else return!1;else return!1}}resolveIndex_(t){return t===ns?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})(),sm=class extends z{constructor(){super(new Pt(qm),z.EMPTY_NODE,as.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return z.EMPTY_NODE}isEmpty(){return!1}},Xo=new sm;Object.defineProperties(J,{MIN:{value:new J(is,z.EMPTY_NODE)},MAX:{value:new J(ci,Xo)}});Pc.__EMPTY_NODE=z.EMPTY_NODE;os.__childrenNodeConstructor=z;aO(Xo);cO(Xo);var dO=!0;function Fe(n,e=null){if(n===null)return z.EMPTY_NODE;if(typeof n=="object"&&".priority"in n&&(e=n[".priority"]),b(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof n=="object"&&".value"in n&&n[".value"]!==null&&(n=n[".value"]),typeof n!="object"||".sv"in n){let t=n;return new os(t,Fe(e))}if(!(n instanceof Array)&&dO){let t=[],r=!1;if(je(n,(o,a)=>{if(o.substring(0,1)!=="."){let l=Fe(a);l.isEmpty()||(r=r||!l.getPriority().isEmpty(),t.push(new J(o,l)))}}),t.length===0)return z.EMPTY_NODE;let s=Oc(t,oO,o=>o.name,qm);if(r){let o=Oc(t,Ie.getCompare());return new z(s,Fe(e),new as({".priority":o},{".priority":Ie}))}else return new z(s,Fe(e),as.Default)}else{let t=z.EMPTY_NODE;return je(n,(r,i)=>{if(Gt(n,r)&&r.substring(0,1)!=="."){let s=Fe(i);(s.isLeafNode()||!s.isEmpty())&&(t=t.updateImmediateChild(r,s))}}),t.updatePriority(Fe(e))}}lO(Fe);var om=class extends ss{constructor(e){super(),this.indexPath_=e,b(!ee(e)&&Z(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){let r=this.extractChild(e.node),i=this.extractChild(t.node),s=r.compareTo(i);return s===0?di(e.name,t.name):s}makePost(e,t){let r=Fe(e),i=z.EMPTY_NODE.updateChild(this.indexPath_,r);return new J(t,i)}maxPost(){let e=z.EMPTY_NODE.updateChild(this.indexPath_,Xo);return new J(ci,e)}toString(){return zo(this.indexPath_,0).join("/")}};var am=class extends ss{compare(e,t){let r=e.node.compareTo(t.node);return r===0?di(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return J.MIN}maxPost(){return J.MAX}makePost(e,t){let r=Fe(e);return new J(t,r)}toString(){return".value"}},fO=new am;function pC(n){return{type:"value",snapshotNode:n}}function ls(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function Wo(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function Go(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}function hO(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}var qo=class{constructor(e){this.index_=e}updateChild(e,t,r,i,s,o){b(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");let a=e.getImmediateChild(t);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(t)?o.trackChildChange(Wo(t,a)):b(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(ls(t,r)):o.trackChildChange(Go(t,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return r!=null&&(e.isLeafNode()||e.forEachChild(Ie,(i,s)=>{t.hasChild(i)||r.trackChildChange(Wo(i,s))}),t.isLeafNode()||t.forEachChild(Ie,(i,s)=>{if(e.hasChild(i)){let o=e.getImmediateChild(i);o.equals(s)||r.trackChildChange(Go(i,s,o))}else r.trackChildChange(ls(i,s))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?z.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}};var Fc=class n{constructor(e){this.indexedFilter_=new qo(e.getIndex()),this.index_=e.getIndex(),this.startPost_=n.getStartPost_(e),this.endPost_=n.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){let t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&r}updateChild(e,t,r,i,s,o){return this.matches(new J(t,r))||(r=z.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,s,o)}updateFullNode(e,t,r){t.isLeafNode()&&(t=z.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(z.EMPTY_NODE);let s=this;return t.forEachChild(Ie,(o,a)=>{s.matches(new J(o,a))||(i=i.updateImmediateChild(o,z.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){let t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){let t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}else return e.getIndex().maxPost()}};var lm=class{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{let r=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=t=>{let r=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new Fc(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,r,i,s,o){return this.rangedFilter_.matches(new J(t,r))||(r=z.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,s,o):this.fullLimitUpdateChild_(e,t,r,s,o)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=z.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<t.numChildren()&&t.isIndexed(this.index_)){i=z.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){let a=s.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))i=i.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{i=t.withIndex(this.index_),i=i.updatePriority(z.EMPTY_NODE);let s;this.reverse_?s=i.getReverseIterator(this.index_):s=i.getIterator(this.index_);let o=0;for(;s.hasNext();){let a=s.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:i=i.updateImmediateChild(a.name,z.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,s){let o;if(this.reverse_){let d=this.index_.getCompare();o=(f,h)=>d(h,f)}else o=this.index_.getCompare();let a=e;b(a.numChildren()===this.limit_,"");let l=new J(t,r),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(l);if(a.hasChild(t)){let d=a.getImmediateChild(t),f=i.getChildAfterChild(this.index_,c,this.reverse_);for(;f!=null&&(f.name===t||a.hasChild(f.name));)f=i.getChildAfterChild(this.index_,f,this.reverse_);let h=f==null?1:o(f,l);if(u&&!r.isEmpty()&&h>=0)return s?.trackChildChange(Go(t,r,d)),a.updateImmediateChild(t,r);{s?.trackChildChange(Wo(t,d));let v=a.updateImmediateChild(t,z.EMPTY_NODE);return f!=null&&this.rangedFilter_.matches(f)?(s?.trackChildChange(ls(f.name,f.node)),v.updateImmediateChild(f.name,f.node)):v}}else return r.isEmpty()?e:u&&o(c,l)>=0?(s!=null&&(s.trackChildChange(Wo(c.name,c.node)),s.trackChildChange(ls(t,r))),a.updateImmediateChild(t,r).updateImmediateChild(c.name,z.EMPTY_NODE)):e}};var cm=class n{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ie}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return b(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return b(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:is}hasEnd(){return this.endSet_}getIndexEndValue(){return b(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return b(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ci}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return b(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Ie}copy(){let e=new n;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}};function pO(n){return n.loadsAllData()?new qo(n.getIndex()):n.hasLimit()?new lm(n):new Fc(n)}function Sb(n){let e={};if(n.isDefault())return e;let t;if(n.index_===Ie?t="$priority":n.index_===fO?t="$value":n.index_===ns?t="$key":(b(n.index_ instanceof om,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=Re(t),n.startSet_){let r=n.startAfterSet_?"startAfter":"startAt";e[r]=Re(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+Re(n.indexStartName_))}if(n.endSet_){let r=n.endBeforeSet_?"endBefore":"endAt";e[r]=Re(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+Re(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function Tb(n){let e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;t===""&&(n.isViewFromLeft()?t="l":t="r"),e.vf=t}return n.index_!==Ie&&(e.i=n.index_.toString()),e}var um=class n extends Nc{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return t!==void 0?"tag$"+t:(b(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Jo("p:rest:"),this.listens_={}}listen(e,t,r,i){let s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);let o=n.getListenId_(e,r),a={};this.listens_[o]=a;let l=Sb(e._queryParams);this.restRequest_(s+".json",l,(c,u)=>{let d=u;if(c===404&&(d=null,c=null),c===null&&this.onDataUpdate_(s,d,!1,r),ri(this.listens_,o)===a){let f;c?c===401?f="permission_denied":f="rest_error:"+c:f="ok",i(f,null)}})}unlisten(e,t){let r=n.getListenId_(e,t);delete this.listens_[r]}get(e){let t=Sb(e._queryParams),r=e._path.toString(),i=new Gn;return this.restRequest_(r+".json",t,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(t.auth=i.accessToken),s&&s.token&&(t.ac=s.token);let o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+ii(t);this.log_("Sending REST request for "+o);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=Qi(a.responseText)}catch{Xe("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,l)}else a.status!==401&&a.status!==404&&Xe("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}};var dm=class{constructor(){this.rootNode_=z.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}};function Lc(){return{value:null,children:new Map}}function mC(n,e,t){if(ee(e))n.value=t,n.children.clear();else if(n.value!==null)n.value=n.value.updateChild(e,t);else{let r=Z(e);n.children.has(r)||n.children.set(r,Lc());let i=n.children.get(r);e=me(e),mC(i,e,t)}}function fm(n,e,t){n.value!==null?t(e,n.value):mO(n,(r,i)=>{let s=new ce(e.toString()+"/"+r);fm(i,s,t)})}function mO(n,e){n.children.forEach((t,r)=>{e(r,t)})}var hm=class{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),t=D({},e);return this.last_&&je(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}};var xb=10*1e3,gO=30*1e3,yO=5*60*1e3,pm=class{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new hm(e);let r=xb+(gO-xb)*Math.random();jo(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){let e=this.statsListener_.get(),t={},r=!1;je(e,(i,s)=>{s>0&&Gt(this.statsToReport_,i)&&(t[i]=s,r=!0)}),r&&this.server_.reportStats(t),jo(this.reportStats_.bind(this),Math.floor(Math.random()*2*yO))}};var gn=function(n){return n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",n}(gn||{});function Km(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Ym(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Qm(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}var mm=class n{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=gn.ACK_USER_WRITE,this.source=Km()}operationForChild(e){if(ee(this.path)){if(this.affectedTree.value!=null)return b(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let t=this.affectedTree.subtree(new ce(e));return new n(ae(),t,this.revert)}}else return b(Z(this.path)===e,"operationForChild called for unrelated child."),new n(me(this.path),this.affectedTree,this.revert)}};var Vc=class n{constructor(e,t){this.source=e,this.path=t,this.type=gn.LISTEN_COMPLETE}operationForChild(e){return ee(this.path)?new n(this.source,ae()):new n(this.source,me(this.path))}};var cs=class n{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=gn.OVERWRITE}operationForChild(e){return ee(this.path)?new n(this.source,ae(),this.snap.getImmediateChild(e)):new n(this.source,me(this.path),this.snap)}};var Ko=class n{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=gn.MERGE}operationForChild(e){if(ee(this.path)){let t=this.children.subtree(new ce(e));return t.isEmpty()?null:t.value?new cs(this.source,ae(),t.value):new n(this.source,ae(),t)}else return b(Z(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new n(this.source,me(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var Qn=class{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(ee(e))return this.isFullyInitialized()&&!this.filtered_;let t=Z(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}};var gm=class{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}};function _O(n,e,t,r){let i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&n.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(hO(o.childName,o.snapshotNode))}),Vo(n,i,"child_removed",e,r,t),Vo(n,i,"child_added",e,r,t),Vo(n,i,"child_moved",s,r,t),Vo(n,i,"child_changed",e,r,t),Vo(n,i,"value",e,r,t),i}function Vo(n,e,t,r,i,s){let o=r.filter(a=>a.type===t);o.sort((a,l)=>EO(n,a,l)),o.forEach(a=>{let l=vO(n,a,s);i.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(l,n.query_))})})}function vO(n,e,t){return e.type==="value"||e.type==="child_removed"||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}function EO(n,e,t){if(e.childName==null||t.childName==null)throw ni("Should only compare child_ events.");let r=new J(e.childName,e.snapshotNode),i=new J(t.childName,t.snapshotNode);return n.index_.compare(r,i)}function Qc(n,e){return{eventCache:n,serverCache:e}}function Bo(n,e,t,r){return Qc(new Qn(e,t,r),n.serverCache)}function gC(n,e,t,r){return Qc(n.eventCache,new Qn(e,t,r))}function ym(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function ui(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}var Vp,wO=()=>(Vp||(Vp=new Pt(wP)),Vp),et=class n{static fromObject(e){let t=new n(null);return je(e,(r,i)=>{t=t.set(new ce(r),i)}),t}constructor(e,t=wO()){this.value=e,this.children=t}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(this.value!=null&&t(this.value))return{path:ae(),value:this.value};if(ee(e))return null;{let r=Z(e),i=this.children.get(r);if(i!==null){let s=i.findRootMostMatchingPathAndValue(me(e),t);return s!=null?{path:Ce(new ce(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(ee(e))return this;{let t=Z(e),r=this.children.get(t);return r!==null?r.subtree(me(e)):new n(null)}}set(e,t){if(ee(e))return new n(t,this.children);{let r=Z(e),s=(this.children.get(r)||new n(null)).set(me(e),t),o=this.children.insert(r,s);return new n(this.value,o)}}remove(e){if(ee(e))return this.children.isEmpty()?new n(null):new n(null,this.children);{let t=Z(e),r=this.children.get(t);if(r){let i=r.remove(me(e)),s;return i.isEmpty()?s=this.children.remove(t):s=this.children.insert(t,i),this.value===null&&s.isEmpty()?new n(null):new n(this.value,s)}else return this}}get(e){if(ee(e))return this.value;{let t=Z(e),r=this.children.get(t);return r?r.get(me(e)):null}}setTree(e,t){if(ee(e))return t;{let r=Z(e),s=(this.children.get(r)||new n(null)).setTree(me(e),t),o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new n(this.value,o)}}fold(e){return this.fold_(ae(),e)}fold_(e,t){let r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(Ce(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,ae(),t)}findOnPath_(e,t,r){let i=this.value?r(t,this.value):!1;if(i)return i;if(ee(e))return null;{let s=Z(e),o=this.children.get(s);return o?o.findOnPath_(me(e),Ce(t,s),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,ae(),t)}foreachOnPath_(e,t,r){if(ee(e))return this;{this.value&&r(t,this.value);let i=Z(e),s=this.children.get(i);return s?s.foreachOnPath_(me(e),Ce(t,i),r):new n(null)}}foreach(e){this.foreach_(ae(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(Ce(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}};var Yt=class n{constructor(e){this.writeTree_=e}static empty(){return new n(new et(null))}};function Ho(n,e,t){if(ee(e))return new Yt(new et(t));{let r=n.writeTree_.findRootMostValueAndPath(e);if(r!=null){let i=r.path,s=r.value,o=ht(i,e);return s=s.updateChild(o,t),new Yt(n.writeTree_.set(i,s))}else{let i=new et(t),s=n.writeTree_.setTree(e,i);return new Yt(s)}}}function _m(n,e,t){let r=n;return je(t,(i,s)=>{r=Ho(r,Ce(e,i),s)}),r}function Ab(n,e){if(ee(e))return Yt.empty();{let t=n.writeTree_.setTree(e,new et(null));return new Yt(t)}}function vm(n,e){return fi(n,e)!=null}function fi(n,e){let t=n.writeTree_.findRootMostValueAndPath(e);return t!=null?n.writeTree_.get(t.path).getChild(ht(t.path,e)):null}function Mb(n){let e=[],t=n.writeTree_.value;return t!=null?t.isLeafNode()||t.forEachChild(Ie,(r,i)=>{e.push(new J(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new J(r,i.value))}),e}function yr(n,e){if(ee(e))return n;{let t=fi(n,e);return t!=null?new Yt(new et(t)):new Yt(n.writeTree_.subtree(e))}}function Em(n){return n.writeTree_.isEmpty()}function us(n,e){return yC(ae(),n.writeTree_,e)}function yC(n,e,t){if(e.value!=null)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(b(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):t=yC(Ce(n,i),s,t)}),!t.getChild(n).isEmpty()&&r!==null&&(t=t.updateChild(Ce(n,".priority"),r)),t}}function Zm(n,e){return wC(e,n)}function bO(n,e,t,r,i){b(r>n.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=Ho(n.visibleWrites,e,t)),n.lastWriteId=r}function CO(n,e,t,r){b(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=_m(n.visibleWrites,e,t),n.lastWriteId=r}function IO(n,e){for(let t=0;t<n.allWrites.length;t++){let r=n.allWrites[t];if(r.writeId===e)return r}return null}function DO(n,e){let t=n.allWrites.findIndex(a=>a.writeId===e);b(t>=0,"removeWrite called with nonexistent writeId.");let r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,s=!1,o=n.allWrites.length-1;for(;i&&o>=0;){let a=n.allWrites[o];a.visible&&(o>=t&&SO(a,r.path)?i=!1:kt(r.path,a.path)&&(s=!0)),o--}if(i){if(s)return TO(n),!0;if(r.snap)n.visibleWrites=Ab(n.visibleWrites,r.path);else{let a=r.children;je(a,l=>{n.visibleWrites=Ab(n.visibleWrites,Ce(r.path,l))})}return!0}else return!1}function SO(n,e){if(n.snap)return kt(n.path,e);for(let t in n.children)if(n.children.hasOwnProperty(t)&&kt(Ce(n.path,t),e))return!0;return!1}function TO(n){n.visibleWrites=_C(n.allWrites,xO,ae()),n.allWrites.length>0?n.lastWriteId=n.allWrites[n.allWrites.length-1].writeId:n.lastWriteId=-1}function xO(n){return n.visible}function _C(n,e,t){let r=Yt.empty();for(let i=0;i<n.length;++i){let s=n[i];if(e(s)){let o=s.path,a;if(s.snap)kt(t,o)?(a=ht(t,o),r=Ho(r,a,s.snap)):kt(o,t)&&(a=ht(o,t),r=Ho(r,ae(),s.snap.getChild(a)));else if(s.children){if(kt(t,o))a=ht(t,o),r=_m(r,a,s.children);else if(kt(o,t))if(a=ht(o,t),ee(a))r=_m(r,ae(),s.children);else{let l=ri(s.children,Z(a));if(l){let c=l.getChild(me(a));r=Ho(r,ae(),c)}}}else throw ni("WriteRecord should have .snap or .children")}}return r}function vC(n,e,t,r,i){if(!r&&!i){let s=fi(n.visibleWrites,e);if(s!=null)return s;{let o=yr(n.visibleWrites,e);if(Em(o))return t;if(t==null&&!vm(o,ae()))return null;{let a=t||z.EMPTY_NODE;return us(o,a)}}}else{let s=yr(n.visibleWrites,e);if(!i&&Em(s))return t;if(!i&&t==null&&!vm(s,ae()))return null;{let o=function(c){return(c.visible||i)&&(!r||!~r.indexOf(c.writeId))&&(kt(c.path,e)||kt(e,c.path))},a=_C(n.allWrites,o,e),l=t||z.EMPTY_NODE;return us(a,l)}}}function AO(n,e,t){let r=z.EMPTY_NODE,i=fi(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Ie,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(t){let s=yr(n.visibleWrites,e);return t.forEachChild(Ie,(o,a)=>{let l=us(yr(s,new ce(o)),a);r=r.updateImmediateChild(o,l)}),Mb(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{let s=yr(n.visibleWrites,e);return Mb(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function MO(n,e,t,r,i){b(r||i,"Either existingEventSnap or existingServerSnap must exist");let s=Ce(e,t);if(vm(n.visibleWrites,s))return null;{let o=yr(n.visibleWrites,s);return Em(o)?i.getChild(t):us(o,i.getChild(t))}}function NO(n,e,t,r){let i=Ce(e,t),s=fi(n.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(t)){let o=yr(n.visibleWrites,i);return us(o,r.getNode().getImmediateChild(t))}else return null}function RO(n,e){return fi(n.visibleWrites,e)}function kO(n,e,t,r,i,s,o){let a,l=yr(n.visibleWrites,e),c=fi(l,ae());if(c!=null)a=c;else if(t!=null)a=us(l,t);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){let u=[],d=o.getCompare(),f=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o),h=f.getNext();for(;h&&u.length<i;)d(h,r)!==0&&u.push(h),h=f.getNext();return u}else return[]}function PO(){return{visibleWrites:Yt.empty(),allWrites:[],lastWriteId:-1}}function jc(n,e,t,r){return vC(n.writeTree,n.treePath,e,t,r)}function Jm(n,e){return AO(n.writeTree,n.treePath,e)}function Nb(n,e,t,r){return MO(n.writeTree,n.treePath,e,t,r)}function Uc(n,e){return RO(n.writeTree,Ce(n.treePath,e))}function OO(n,e,t,r,i,s){return kO(n.writeTree,n.treePath,e,t,r,i,s)}function Xm(n,e,t){return NO(n.writeTree,n.treePath,e,t)}function EC(n,e){return wC(Ce(n.treePath,e),n.writeTree)}function wC(n,e){return{treePath:n,writeTree:e}}var wm=class{constructor(){this.changeMap=new Map}trackChildChange(e){let t=e.type,r=e.childName;b(t==="child_added"||t==="child_changed"||t==="child_removed","Only child changes supported for tracking"),b(r!==".priority","Only non-priority child changes can be tracked.");let i=this.changeMap.get(r);if(i){let s=i.type;if(t==="child_added"&&s==="child_removed")this.changeMap.set(r,Go(r,e.snapshotNode,i.snapshotNode));else if(t==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(t==="child_removed"&&s==="child_changed")this.changeMap.set(r,Wo(r,i.oldSnap));else if(t==="child_changed"&&s==="child_added")this.changeMap.set(r,ls(r,e.snapshotNode));else if(t==="child_changed"&&s==="child_changed")this.changeMap.set(r,Go(r,e.snapshotNode,i.oldSnap));else throw ni("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}};var bm=class{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}},bC=new bm,Yo=class{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){let t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{let r=this.optCompleteServerCache_!=null?new Qn(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Xm(this.writes_,e,r)}}getChildAfterChild(e,t,r){let i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:ui(this.viewCache_),s=OO(this.writes_,i,t,1,r,e);return s.length===0?null:s[0]}};function FO(n){return{filter:n}}function LO(n,e){b(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),b(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}function VO(n,e,t,r,i){let s=new wm,o,a;if(t.type===gn.OVERWRITE){let c=t;c.source.fromUser?o=Cm(n,e,c.path,c.snap,r,i,s):(b(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!ee(c.path),o=Bc(n,e,c.path,c.snap,r,i,a,s))}else if(t.type===gn.MERGE){let c=t;c.source.fromUser?o=UO(n,e,c.path,c.children,r,i,s):(b(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),o=Im(n,e,c.path,c.children,r,i,a,s))}else if(t.type===gn.ACK_USER_WRITE){let c=t;c.revert?o=$O(n,e,c.path,r,i,s):o=BO(n,e,c.path,c.affectedTree,r,i,s)}else if(t.type===gn.LISTEN_COMPLETE)o=HO(n,e,t.path,r,s);else throw ni("Unknown operation type: "+t.type);let l=s.getChanges();return jO(e,o,l),{viewCache:o,changes:l}}function jO(n,e,t){let r=e.eventCache;if(r.isFullyInitialized()){let i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=ym(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&t.push(pC(ym(e)))}}function CC(n,e,t,r,i,s){let o=e.eventCache;if(Uc(r,t)!=null)return e;{let a,l;if(ee(t))if(b(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){let c=ui(e),u=c instanceof z?c:z.EMPTY_NODE,d=Jm(r,u);a=n.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{let c=jc(r,ui(e));a=n.filter.updateFullNode(e.eventCache.getNode(),c,s)}else{let c=Z(t);if(c===".priority"){b(_r(t)===1,"Can't have a priority with additional path components");let u=o.getNode();l=e.serverCache.getNode();let d=Nb(r,t,u,l);d!=null?a=n.filter.updatePriority(u,d):a=o.getNode()}else{let u=me(t),d;if(o.isCompleteForChild(c)){l=e.serverCache.getNode();let f=Nb(r,t,o.getNode(),l);f!=null?d=o.getNode().getImmediateChild(c).updateChild(u,f):d=o.getNode().getImmediateChild(c)}else d=Xm(r,c,e.serverCache);d!=null?a=n.filter.updateChild(o.getNode(),c,d,u,i,s):a=o.getNode()}}return Bo(e,a,o.isFullyInitialized()||ee(t),n.filter.filtersNodes())}}function Bc(n,e,t,r,i,s,o,a){let l=e.serverCache,c,u=o?n.filter:n.filter.getIndexedFilter();if(ee(t))c=u.updateFullNode(l.getNode(),r,null);else if(u.filtersNodes()&&!l.isFiltered()){let h=l.getNode().updateChild(t,r);c=u.updateFullNode(l.getNode(),h,null)}else{let h=Z(t);if(!l.isCompleteForPath(t)&&_r(t)>1)return e;let y=me(t),w=l.getNode().getImmediateChild(h).updateChild(y,r);h===".priority"?c=u.updatePriority(l.getNode(),w):c=u.updateChild(l.getNode(),h,w,y,bC,null)}let d=gC(e,c,l.isFullyInitialized()||ee(t),u.filtersNodes()),f=new Yo(i,d,s);return CC(n,d,t,i,f,a)}function Cm(n,e,t,r,i,s,o){let a=e.eventCache,l,c,u=new Yo(i,e,s);if(ee(t))c=n.filter.updateFullNode(e.eventCache.getNode(),r,o),l=Bo(e,c,!0,n.filter.filtersNodes());else{let d=Z(t);if(d===".priority")c=n.filter.updatePriority(e.eventCache.getNode(),r),l=Bo(e,c,a.isFullyInitialized(),a.isFiltered());else{let f=me(t),h=a.getNode().getImmediateChild(d),y;if(ee(f))y=r;else{let v=u.getCompleteChild(d);v!=null?zm(f)===".priority"&&v.getChild(lC(f)).isEmpty()?y=v:y=v.updateChild(f,r):y=z.EMPTY_NODE}if(h.equals(y))l=e;else{let v=n.filter.updateChild(a.getNode(),d,y,f,u,o);l=Bo(e,v,a.isFullyInitialized(),n.filter.filtersNodes())}}}return l}function Rb(n,e){return n.eventCache.isCompleteForChild(e)}function UO(n,e,t,r,i,s,o){let a=e;return r.foreach((l,c)=>{let u=Ce(t,l);Rb(e,Z(u))&&(a=Cm(n,a,u,c,i,s,o))}),r.foreach((l,c)=>{let u=Ce(t,l);Rb(e,Z(u))||(a=Cm(n,a,u,c,i,s,o))}),a}function kb(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function Im(n,e,t,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,c;ee(t)?c=r:c=new et(null).setTree(t,r);let u=e.serverCache.getNode();return c.children.inorderTraversal((d,f)=>{if(u.hasChild(d)){let h=e.serverCache.getNode().getImmediateChild(d),y=kb(n,h,f);l=Bc(n,l,new ce(d),y,i,s,o,a)}}),c.children.inorderTraversal((d,f)=>{let h=!e.serverCache.isCompleteForChild(d)&&f.value===null;if(!u.hasChild(d)&&!h){let y=e.serverCache.getNode().getImmediateChild(d),v=kb(n,y,f);l=Bc(n,l,new ce(d),v,i,s,o,a)}}),l}function BO(n,e,t,r,i,s,o){if(Uc(i,t)!=null)return e;let a=e.serverCache.isFiltered(),l=e.serverCache;if(r.value!=null){if(ee(t)&&l.isFullyInitialized()||l.isCompleteForPath(t))return Bc(n,e,t,l.getNode().getChild(t),i,s,a,o);if(ee(t)){let c=new et(null);return l.getNode().forEachChild(ns,(u,d)=>{c=c.set(new ce(u),d)}),Im(n,e,t,c,i,s,a,o)}else return e}else{let c=new et(null);return r.foreach((u,d)=>{let f=Ce(t,u);l.isCompleteForPath(f)&&(c=c.set(u,l.getNode().getChild(f)))}),Im(n,e,t,c,i,s,a,o)}}function HO(n,e,t,r,i){let s=e.serverCache,o=gC(e,s.getNode(),s.isFullyInitialized()||ee(t),s.isFiltered());return CC(n,o,t,r,bC,i)}function $O(n,e,t,r,i,s){let o;if(Uc(r,t)!=null)return e;{let a=new Yo(r,e,i),l=e.eventCache.getNode(),c;if(ee(t)||Z(t)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=jc(r,ui(e));else{let d=e.serverCache.getNode();b(d instanceof z,"serverChildren would be complete if leaf node"),u=Jm(r,d)}u=u,c=n.filter.updateFullNode(l,u,s)}else{let u=Z(t),d=Xm(r,u,e.serverCache);d==null&&e.serverCache.isCompleteForChild(u)&&(d=l.getImmediateChild(u)),d!=null?c=n.filter.updateChild(l,u,d,me(t),a,s):e.eventCache.getNode().hasChild(u)?c=n.filter.updateChild(l,u,z.EMPTY_NODE,me(t),a,s):c=l,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=jc(r,ui(e)),o.isLeafNode()&&(c=n.filter.updateFullNode(c,o,s)))}return o=e.serverCache.isFullyInitialized()||Uc(r,ae())!=null,Bo(e,c,o,n.filter.filtersNodes())}}var Dm=class{constructor(e,t){this.query_=e,this.eventRegistrations_=[];let r=this.query_._queryParams,i=new qo(r.getIndex()),s=pO(r);this.processor_=FO(s);let o=t.serverCache,a=t.eventCache,l=i.updateFullNode(z.EMPTY_NODE,o.getNode(),null),c=s.updateFullNode(z.EMPTY_NODE,a.getNode(),null),u=new Qn(l,o.isFullyInitialized(),i.filtersNodes()),d=new Qn(c,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=Qc(d,u),this.eventGenerator_=new gm(this.query_)}get query(){return this.query_}};function zO(n){return n.viewCache_.serverCache.getNode()}function WO(n,e){let t=ui(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!ee(e)&&!t.getImmediateChild(Z(e)).isEmpty())?t.getChild(e):null}function Pb(n){return n.eventRegistrations_.length===0}function GO(n,e){n.eventRegistrations_.push(e)}function Ob(n,e,t){let r=[];if(t){b(e==null,"A cancel should cancel all event registrations.");let i=n.query._path;n.eventRegistrations_.forEach(s=>{let o=s.createCancelEvent(t,i);o&&r.push(o)})}if(e){let i=[];for(let s=0;s<n.eventRegistrations_.length;++s){let o=n.eventRegistrations_[s];if(!o.matches(e))i.push(o);else if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(s+1));break}}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function Fb(n,e,t,r){e.type===gn.MERGE&&e.source.queryId!==null&&(b(ui(n.viewCache_),"We should always have a full cache before handling merges"),b(ym(n.viewCache_),"Missing event cache, even though we have a server cache"));let i=n.viewCache_,s=VO(n.processor_,i,e,t,r);return LO(n.processor_,s.viewCache),b(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,IC(n,s.changes,s.viewCache.eventCache.getNode(),null)}function qO(n,e){let t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Ie,(s,o)=>{r.push(ls(s,o))}),t.isFullyInitialized()&&r.push(pC(t.getNode())),IC(n,r,t.getNode(),e)}function IC(n,e,t,r){let i=r?[r]:n.eventRegistrations_;return _O(n.eventGenerator_,e,t,i)}var Hc,Sm=class{constructor(){this.views=new Map}};function KO(n){b(!Hc,"__referenceConstructor has already been defined"),Hc=n}function YO(){return b(Hc,"Reference.ts has not been loaded"),Hc}function QO(n){return n.views.size===0}function eg(n,e,t,r){let i=e.source.queryId;if(i!==null){let s=n.views.get(i);return b(s!=null,"SyncTree gave us an op for an invalid query."),Fb(s,e,t,r)}else{let s=[];for(let o of n.views.values())s=s.concat(Fb(o,e,t,r));return s}}function ZO(n,e,t,r,i){let s=e._queryIdentifier,o=n.views.get(s);if(!o){let a=jc(t,i?r:null),l=!1;a?l=!0:r instanceof z?(a=Jm(t,r),l=!1):(a=z.EMPTY_NODE,l=!1);let c=Qc(new Qn(a,l,!1),new Qn(r,i,!1));return new Dm(e,c)}return o}function JO(n,e,t,r,i,s){let o=ZO(n,e,r,i,s);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,o),GO(o,t),qO(o,t)}function XO(n,e,t,r){let i=e._queryIdentifier,s=[],o=[],a=vr(n);if(i==="default")for(let[l,c]of n.views.entries())o=o.concat(Ob(c,t,r)),Pb(c)&&(n.views.delete(l),c.query._queryParams.loadsAllData()||s.push(c.query));else{let l=n.views.get(i);l&&(o=o.concat(Ob(l,t,r)),Pb(l)&&(n.views.delete(i),l.query._queryParams.loadsAllData()||s.push(l.query)))}return a&&!vr(n)&&s.push(new(YO())(e._repo,e._path)),{removed:s,events:o}}function DC(n){let e=[];for(let t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function rs(n,e){let t=null;for(let r of n.views.values())t=t||WO(r,e);return t}function SC(n,e){if(e._queryParams.loadsAllData())return Zc(n);{let r=e._queryIdentifier;return n.views.get(r)}}function TC(n,e){return SC(n,e)!=null}function vr(n){return Zc(n)!=null}function Zc(n){for(let e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}var $c;function eF(n){b(!$c,"__referenceConstructor has already been defined"),$c=n}function tF(){return b($c,"Reference.ts has not been loaded"),$c}var nF=1,zc=class{constructor(e){this.listenProvider_=e,this.syncPointTree_=new et(null),this.pendingWriteTree_=PO(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function xC(n,e,t,r,i){return bO(n.pendingWriteTree_,e,t,r,i),i?hs(n,new cs(Km(),e,t)):[]}function rF(n,e,t,r){CO(n.pendingWriteTree_,e,t,r);let i=et.fromObject(t);return hs(n,new Ko(Km(),e,i))}function gr(n,e,t=!1){let r=IO(n.pendingWriteTree_,e);if(DO(n.pendingWriteTree_,e)){let s=new et(null);return r.snap!=null?s=s.set(ae(),!0):je(r.children,o=>{s=s.set(new ce(o),!0)}),hs(n,new mm(r.path,s,t))}else return[]}function Jc(n,e,t){return hs(n,new cs(Ym(),e,t))}function iF(n,e,t){let r=et.fromObject(t);return hs(n,new Ko(Ym(),e,r))}function sF(n,e){return hs(n,new Vc(Ym(),e))}function oF(n,e,t){let r=ng(n,t);if(r){let i=rg(r),s=i.path,o=i.queryId,a=ht(s,e),l=new Vc(Qm(o),a);return ig(n,s,l)}else return[]}function Tm(n,e,t,r,i=!1){let s=e._path,o=n.syncPointTree_.get(s),a=[];if(o&&(e._queryIdentifier==="default"||TC(o,e))){let l=XO(o,e,t,r);QO(o)&&(n.syncPointTree_=n.syncPointTree_.remove(s));let c=l.removed;if(a=l.events,!i){let u=c.findIndex(f=>f._queryParams.loadsAllData())!==-1,d=n.syncPointTree_.findOnPath(s,(f,h)=>vr(h));if(u&&!d){let f=n.syncPointTree_.subtree(s);if(!f.isEmpty()){let h=cF(f);for(let y=0;y<h.length;++y){let v=h[y],w=v.query,I=NC(n,v);n.listenProvider_.startListening($o(w),Wc(n,w),I.hashFn,I.onComplete)}}}!d&&c.length>0&&!r&&(u?n.listenProvider_.stopListening($o(e),null):c.forEach(f=>{let h=n.queryToTagMap.get(Xc(f));n.listenProvider_.stopListening($o(f),h)}))}uF(n,c)}return a}function aF(n,e,t,r){let i=ng(n,r);if(i!=null){let s=rg(i),o=s.path,a=s.queryId,l=ht(o,e),c=new cs(Qm(a),l,t);return ig(n,o,c)}else return[]}function lF(n,e,t,r){let i=ng(n,r);if(i){let s=rg(i),o=s.path,a=s.queryId,l=ht(o,e),c=et.fromObject(t),u=new Ko(Qm(a),l,c);return ig(n,o,u)}else return[]}function Lb(n,e,t,r=!1){let i=e._path,s=null,o=!1;n.syncPointTree_.foreachOnPath(i,(f,h)=>{let y=ht(f,i);s=s||rs(h,y),o=o||vr(h)});let a=n.syncPointTree_.get(i);a?(o=o||vr(a),s=s||rs(a,ae())):(a=new Sm,n.syncPointTree_=n.syncPointTree_.set(i,a));let l;s!=null?l=!0:(l=!1,s=z.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((h,y)=>{let v=rs(y,ae());v&&(s=s.updateImmediateChild(h,v))}));let c=TC(a,e);if(!c&&!e._queryParams.loadsAllData()){let f=Xc(e);b(!n.queryToTagMap.has(f),"View does not exist, but we have a tag");let h=dF();n.queryToTagMap.set(f,h),n.tagToQueryMap.set(h,f)}let u=Zm(n.pendingWriteTree_,i),d=JO(a,e,t,u,s,l);if(!c&&!o&&!r){let f=SC(a,e);d=d.concat(fF(n,e,f))}return d}function tg(n,e,t){let i=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(e,(o,a)=>{let l=ht(o,e),c=rs(a,l);if(c)return c});return vC(i,e,s,t,!0)}function hs(n,e){return AC(e,n.syncPointTree_,null,Zm(n.pendingWriteTree_,ae()))}function AC(n,e,t,r){if(ee(n.path))return MC(n,e,t,r);{let i=e.get(ae());t==null&&i!=null&&(t=rs(i,ae()));let s=[],o=Z(n.path),a=n.operationForChild(o),l=e.children.get(o);if(l&&a){let c=t?t.getImmediateChild(o):null,u=EC(r,o);s=s.concat(AC(a,l,c,u))}return i&&(s=s.concat(eg(i,n,r,t))),s}}function MC(n,e,t,r){let i=e.get(ae());t==null&&i!=null&&(t=rs(i,ae()));let s=[];return e.children.inorderTraversal((o,a)=>{let l=t?t.getImmediateChild(o):null,c=EC(r,o),u=n.operationForChild(o);u&&(s=s.concat(MC(u,a,l,c)))}),i&&(s=s.concat(eg(i,n,r,t))),s}function NC(n,e){let t=e.query,r=Wc(n,t);return{hashFn:()=>(zO(e)||z.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?oF(n,t._path,r):sF(n,t._path);{let s=IP(i,t);return Tm(n,t,null,s)}}}}function Wc(n,e){let t=Xc(e);return n.queryToTagMap.get(t)}function Xc(n){return n._path.toString()+"$"+n._queryIdentifier}function ng(n,e){return n.tagToQueryMap.get(e)}function rg(n){let e=n.indexOf("$");return b(e!==-1&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new ce(n.substr(0,e))}}function ig(n,e,t){let r=n.syncPointTree_.get(e);b(r,"Missing sync point for query tag that we're tracking");let i=Zm(n.pendingWriteTree_,e);return eg(r,t,i,null)}function cF(n){return n.fold((e,t,r)=>{if(t&&vr(t))return[Zc(t)];{let i=[];return t&&(i=DC(t)),je(r,(s,o)=>{i=i.concat(o)}),i}})}function $o(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(tF())(n._repo,n._path):n}function uF(n,e){for(let t=0;t<e.length;++t){let r=e[t];if(!r._queryParams.loadsAllData()){let i=Xc(r),s=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(s)}}}function dF(){return nF++}function fF(n,e,t){let r=e._path,i=Wc(n,e),s=NC(n,t),o=n.listenProvider_.startListening($o(e),i,s.hashFn,s.onComplete),a=n.syncPointTree_.subtree(r);if(i)b(!vr(a.value),"If we're adding a query, it shouldn't be shadowed");else{let l=a.fold((c,u,d)=>{if(!ee(c)&&u&&vr(u))return[Zc(u).query];{let f=[];return u&&(f=f.concat(DC(u).map(h=>h.query))),je(d,(h,y)=>{f=f.concat(y)}),f}});for(let c=0;c<l.length;++c){let u=l[c];n.listenProvider_.stopListening($o(u),Wc(n,u))}}return o}var xm=class n{constructor(e){this.node_=e}getImmediateChild(e){let t=this.node_.getImmediateChild(e);return new n(t)}node(){return this.node_}},Am=class n{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){let t=Ce(this.path_,e);return new n(this.syncTree_,t)}node(){return tg(this.syncTree_,this.path_)}},hF=function(n){return n=n||{},n.timestamp=n.timestamp||new Date().getTime(),n},Vb=function(n,e,t){if(!n||typeof n!="object")return n;if(b(".sv"in n,"Unexpected leaf node or priority contents"),typeof n[".sv"]=="string")return pF(n[".sv"],e,t);if(typeof n[".sv"]=="object")return mF(n[".sv"],e);b(!1,"Unexpected server value: "+JSON.stringify(n,null,2))},pF=function(n,e,t){switch(n){case"timestamp":return t.timestamp;default:b(!1,"Unexpected server value: "+n)}},mF=function(n,e,t){n.hasOwnProperty("increment")||b(!1,"Unexpected server value: "+JSON.stringify(n,null,2));let r=n.increment;typeof r!="number"&&b(!1,"Unexpected increment value: "+r);let i=e.node();if(b(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;let o=i.getValue();return typeof o!="number"?r:o+r},RC=function(n,e,t,r){return sg(e,new Am(t,n),r)},kC=function(n,e,t){return sg(n,new xm(e),t)};function sg(n,e,t){let r=n.getPriority().val(),i=Vb(r,e.getImmediateChild(".priority"),t),s;if(n.isLeafNode()){let o=n,a=Vb(o.getValue(),e,t);return a!==o.getValue()||i!==o.getPriority().val()?new os(a,Fe(i)):n}else{let o=n;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new os(i))),o.forEachChild(Ie,(a,l)=>{let c=sg(l,e.getImmediateChild(a),t);c!==l&&(s=s.updateImmediateChild(a,c))}),s}}var Qo=class{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}};function og(n,e){let t=e instanceof ce?e:new ce(e),r=n,i=Z(t);for(;i!==null;){let s=ri(r.node.children,i)||{children:{},childCount:0};r=new Qo(i,r,s),t=me(t),i=Z(t)}return r}function ps(n){return n.node.value}function PC(n,e){n.node.value=e,Mm(n)}function OC(n){return n.node.childCount>0}function gF(n){return ps(n)===void 0&&!OC(n)}function eu(n,e){je(n.node.children,(t,r)=>{e(new Qo(t,n,r))})}function FC(n,e,t,r){t&&!r&&e(n),eu(n,i=>{FC(i,e,!0,r)}),t&&r&&e(n)}function yF(n,e,t){let r=t?n:n.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function ea(n){return new ce(n.parent===null?n.name:ea(n.parent)+"/"+n.name)}function Mm(n){n.parent!==null&&_F(n.parent,n.name,n)}function _F(n,e,t){let r=gF(t),i=Gt(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,Mm(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,Mm(n))}var vF=/[\[\].#$\/\u0000-\u001F\u007F]/,EF=/[\[\].#$\u0000-\u001F\u007F]/,jp=10*1024*1024,ag=function(n){return typeof n=="string"&&n.length!==0&&!vF.test(n)},LC=function(n){return typeof n=="string"&&n.length!==0&&!EF.test(n)},wF=function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),LC(n)},bF=function(n){return n===null||typeof n=="string"||typeof n=="number"&&!Bm(n)||n&&typeof n=="object"&&Gt(n,".sv")},CF=function(n,e,t,r){r&&e===void 0||tu(To(n,"value"),e,t)},tu=function(n,e,t){let r=t instanceof ce?new Xp(t,n):t;if(e===void 0)throw new Error(n+"contains undefined "+oi(r));if(typeof e=="function")throw new Error(n+"contains a function "+oi(r)+" with contents = "+e.toString());if(Bm(e))throw new Error(n+"contains "+e.toString()+" "+oi(r));if(typeof e=="string"&&e.length>jp/3&&xo(e)>jp)throw new Error(n+"contains a string greater than "+jp+" utf8 bytes "+oi(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(je(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!ag(o)))throw new Error(n+" contains an invalid key ("+o+") "+oi(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);eO(r,o),tu(n,a,r),tO(r)}),i&&s)throw new Error(n+' contains ".value" child '+oi(r)+" in addition to actual children.")}},IF=function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];let s=zo(r);for(let o=0;o<s.length;o++)if(!(s[o]===".priority"&&o===s.length-1)){if(!ag(s[o]))throw new Error(n+"contains an invalid key ("+s[o]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(XP);let i=null;for(t=0;t<e.length;t++){if(r=e[t],i!==null&&kt(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}},DF=function(n,e,t,r){if(r&&e===void 0)return;let i=To(n,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");let s=[];je(e,(o,a)=>{let l=new ce(o);if(tu(i,a,Ce(t,l)),zm(l)===".priority"&&!bF(a))throw new Error(i+"contains an invalid value for '"+l.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(l)}),IF(i,s)};var VC=function(n,e,t,r){if(!(r&&t===void 0)&&!LC(t))throw new Error(To(n,e)+'was an invalid path = "'+t+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},SF=function(n,e,t,r){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),VC(n,e,t,r)},TF=function(n,e){if(Z(e)===".info")throw new Error(n+" failed = Can't modify data under /.info/")},xF=function(n,e){let t=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!ag(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||t.length!==0&&!wF(t))throw new Error(To(n,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var Nm=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function nu(n,e){let t=null;for(let r=0;r<e.length;r++){let i=e[r],s=i.getPath();t!==null&&!Wm(s,t.path)&&(n.eventLists_.push(t),t=null),t===null&&(t={events:[],path:s}),t.events.push(i)}t&&n.eventLists_.push(t)}function jC(n,e,t){nu(n,t),UC(n,r=>Wm(r,e))}function Qt(n,e,t){nu(n,t),UC(n,r=>kt(r,e)||kt(e,r))}function UC(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){let i=n.eventLists_[r];if(i){let s=i.path;e(s)?(AF(n.eventLists_[r]),n.eventLists_[r]=null):t=!1}}t&&(n.eventLists_=[]),n.recursionDepth_--}function AF(n){for(let e=0;e<n.events.length;e++){let t=n.events[e];if(t!==null){n.events[e]=null;let r=t.getEventRunner();li&&Ve("event: "+t.toString()),fs(r)}}}var MF="repo_interrupt",NF=25,Rm=class{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Nm,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Lc(),this.transactionQueueTree_=new Qo,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function RF(n,e,t){if(n.stats_=$m(n.repoInfo_),n.forceRestClient_||xP())n.server_=new um(n.repoInfo_,(r,i,s,o)=>{jb(n,r,i,s,o)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>Ub(n,!0),0);else{if(typeof t<"u"&&t!==null){if(typeof t!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Re(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Gm(n.repoInfo_,e,(r,i,s,o)=>{jb(n,r,i,s,o)},r=>{Ub(n,r)},r=>{PF(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=MP(n.repoInfo_,()=>new pm(n.stats_,n.server_)),n.infoData_=new dm,n.infoSyncTree_=new zc({startListening:(r,i,s,o)=>{let a=[],l=n.infoData_.getNode(r._path);return l.isEmpty()||(a=Jc(n.infoSyncTree_,r._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),lg(n,"connected",!1),n.serverSyncTree_=new zc({startListening:(r,i,s,o)=>(n.server_.listen(r,s,i,(a,l)=>{let c=o(a,l);Qt(n.eventQueue_,r._path,c)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}function kF(n){let t=n.infoData_.getNode(new ce(".info/serverTimeOffset")).val()||0;return new Date().getTime()+t}function ru(n){return hF({timestamp:kF(n)})}function jb(n,e,t,r,i){n.dataUpdateCount++;let s=new ce(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let o=[];if(i)if(r){let l=So(t,c=>Fe(c));o=lF(n.serverSyncTree_,s,l,i)}else{let l=Fe(t);o=aF(n.serverSyncTree_,s,l,i)}else if(r){let l=So(t,c=>Fe(c));o=iF(n.serverSyncTree_,s,l)}else{let l=Fe(t);o=Jc(n.serverSyncTree_,s,l)}let a=s;o.length>0&&(a=ds(n,s)),Qt(n.eventQueue_,a,o)}function Ub(n,e){lg(n,"connected",e),e===!1&&LF(n)}function PF(n,e){je(e,(t,r)=>{lg(n,t,r)})}function lg(n,e,t){let r=new ce("/.info/"+e),i=Fe(t);n.infoData_.updateSnapshot(r,i);let s=Jc(n.infoSyncTree_,r,i);Qt(n.eventQueue_,r,s)}function cg(n){return n.nextWriteId_++}function OF(n,e,t,r,i){iu(n,"set",{path:e.toString(),value:t,priority:r});let s=ru(n),o=Fe(t,r),a=tg(n.serverSyncTree_,e),l=kC(o,a,s),c=cg(n),u=xC(n.serverSyncTree_,e,l,c,!0);nu(n.eventQueue_,u),n.server_.put(e.toString(),o.val(!0),(f,h)=>{let y=f==="ok";y||Xe("set at "+e+" failed: "+f);let v=gr(n.serverSyncTree_,c,!y);Qt(n.eventQueue_,e,v),km(n,i,f,h)});let d=dg(n,e);ds(n,d),Qt(n.eventQueue_,d,[])}function FF(n,e,t,r){iu(n,"update",{path:e.toString(),value:t});let i=!0,s=ru(n),o={};if(je(t,(a,l)=>{i=!1,o[a]=RC(Ce(e,a),Fe(l),n.serverSyncTree_,s)}),i)Ve("update() called with empty data.  Don't do anything."),km(n,r,"ok",void 0);else{let a=cg(n),l=rF(n.serverSyncTree_,e,o,a);nu(n.eventQueue_,l),n.server_.merge(e.toString(),t,(c,u)=>{let d=c==="ok";d||Xe("update at "+e+" failed: "+c);let f=gr(n.serverSyncTree_,a,!d),h=f.length>0?ds(n,e):e;Qt(n.eventQueue_,h,f),km(n,r,c,u)}),je(t,c=>{let u=dg(n,Ce(e,c));ds(n,u)}),Qt(n.eventQueue_,e,[])}}function LF(n){iu(n,"onDisconnectEvents");let e=ru(n),t=Lc();fm(n.onDisconnect_,ae(),(i,s)=>{let o=RC(i,s,n.serverSyncTree_,e);mC(t,i,o)});let r=[];fm(t,ae(),(i,s)=>{r=r.concat(Jc(n.serverSyncTree_,i,s));let o=dg(n,i);ds(n,o)}),n.onDisconnect_=Lc(),Qt(n.eventQueue_,ae(),r)}function VF(n,e,t){let r;Z(e._path)===".info"?r=Lb(n.infoSyncTree_,e,t):r=Lb(n.serverSyncTree_,e,t),jC(n.eventQueue_,e._path,r)}function Bb(n,e,t){let r;Z(e._path)===".info"?r=Tm(n.infoSyncTree_,e,t):r=Tm(n.serverSyncTree_,e,t),jC(n.eventQueue_,e._path,r)}function jF(n){n.persistentConnection_&&n.persistentConnection_.interrupt(MF)}function iu(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Ve(t,...e)}function km(n,e,t,r){e&&fs(()=>{if(t==="ok")e(null);else{let i=(t||"error").toUpperCase(),s=i;r&&(s+=": "+r);let o=new Error(s);o.code=i,e(o)}})}function BC(n,e,t){return tg(n.serverSyncTree_,e,t)||z.EMPTY_NODE}function ug(n,e=n.transactionQueueTree_){if(e||su(n,e),ps(e)){let t=$C(n,e);b(t.length>0,"Sending zero length transaction queue"),t.every(i=>i.status===0)&&UF(n,ea(e),t)}else OC(e)&&eu(e,t=>{ug(n,t)})}function UF(n,e,t){let r=t.map(c=>c.currentWriteId),i=BC(n,e,r),s=i,o=i.hash();for(let c=0;c<t.length;c++){let u=t[c];b(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;let d=ht(e,u.path);s=s.updateChild(d,u.currentOutputSnapshotRaw)}let a=s.val(!0),l=e;n.server_.put(l.toString(),a,c=>{iu(n,"transaction put response",{path:l.toString(),status:c});let u=[];if(c==="ok"){let d=[];for(let f=0;f<t.length;f++)t[f].status=2,u=u.concat(gr(n.serverSyncTree_,t[f].currentWriteId)),t[f].onComplete&&d.push(()=>t[f].onComplete(null,!0,t[f].currentOutputSnapshotResolved)),t[f].unwatcher();su(n,og(n.transactionQueueTree_,e)),ug(n,n.transactionQueueTree_),Qt(n.eventQueue_,e,u);for(let f=0;f<d.length;f++)fs(d[f])}else{if(c==="datastale")for(let d=0;d<t.length;d++)t[d].status===3?t[d].status=4:t[d].status=0;else{Xe("transaction at "+l.toString()+" failed: "+c);for(let d=0;d<t.length;d++)t[d].status=4,t[d].abortReason=c}ds(n,e)}},o)}function ds(n,e){let t=HC(n,e),r=ea(t),i=$C(n,t);return BF(n,i,r),r}function BF(n,e,t){if(e.length===0)return;let r=[],i=[],o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){let l=e[a],c=ht(t,l.path),u=!1,d;if(b(c!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)u=!0,d=l.abortReason,i=i.concat(gr(n.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=NF)u=!0,d="maxretry",i=i.concat(gr(n.serverSyncTree_,l.currentWriteId,!0));else{let f=BC(n,l.path,o);l.currentInputSnapshot=f;let h=e[a].update(f.val());if(h!==void 0){tu("transaction failed: Data returned ",h,l.path);let y=Fe(h);typeof h=="object"&&h!=null&&Gt(h,".priority")||(y=y.updatePriority(f.getPriority()));let w=l.currentWriteId,I=ru(n),P=kC(y,f,I);l.currentOutputSnapshotRaw=y,l.currentOutputSnapshotResolved=P,l.currentWriteId=cg(n),o.splice(o.indexOf(w),1),i=i.concat(xC(n.serverSyncTree_,l.path,P,l.currentWriteId,l.applyLocally)),i=i.concat(gr(n.serverSyncTree_,w,!0))}else u=!0,d="nodata",i=i.concat(gr(n.serverSyncTree_,l.currentWriteId,!0))}Qt(n.eventQueue_,t,i),i=[],u&&(e[a].status=2,function(f){setTimeout(f,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(d),!1,null))))}su(n,n.transactionQueueTree_);for(let a=0;a<r.length;a++)fs(r[a]);ug(n,n.transactionQueueTree_)}function HC(n,e){let t,r=n.transactionQueueTree_;for(t=Z(e);t!==null&&ps(r)===void 0;)r=og(r,t),e=me(e),t=Z(e);return r}function $C(n,e){let t=[];return zC(n,e,t),t.sort((r,i)=>r.order-i.order),t}function zC(n,e,t){let r=ps(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);eu(e,i=>{zC(n,i,t)})}function su(n,e){let t=ps(e);if(t){let r=0;for(let i=0;i<t.length;i++)t[i].status!==2&&(t[r]=t[i],r++);t.length=r,PC(e,t.length>0?t:void 0)}eu(e,r=>{su(n,r)})}function dg(n,e){let t=ea(HC(n,e)),r=og(n.transactionQueueTree_,e);return yF(r,i=>{Up(n,i)}),Up(n,r),FC(r,i=>{Up(n,i)}),t}function Up(n,e){let t=ps(e);if(t){let r=[],i=[],s=-1;for(let o=0;o<t.length;o++)t[o].status===3||(t[o].status===1?(b(s===o-1,"All SENT items should be at beginning of queue."),s=o,t[o].status=3,t[o].abortReason="set"):(b(t[o].status===0,"Unexpected transaction status in abort"),t[o].unwatcher(),i=i.concat(gr(n.serverSyncTree_,t[o].currentWriteId,!0)),t[o].onComplete&&r.push(t[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?PC(e,void 0):t.length=s+1,Qt(n.eventQueue_,ea(e),i);for(let o=0;o<r.length;o++)fs(r[o])}}function HF(n){let e="",t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function $F(n){let e={};n.charAt(0)==="?"&&(n=n.substring(1));for(let t of n.split("&")){if(t.length===0)continue;let r=t.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Xe(`Invalid query segment '${t}' in query '${n}'`)}return e}var Hb=function(n,e){let t=zF(n),r=t.namespace;t.domain==="firebase.com"&&Yn(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&t.domain!=="localhost"&&Yn("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||vP();let i=t.scheme==="ws"||t.scheme==="wss";return{repoInfo:new Ac(t.host,t.secure,r,i,e,"",r!==t.subdomain),path:new ce(t.pathString)}},zF=function(n){let e="",t="",r="",i="",s="",o=!0,a="https",l=443;if(typeof n=="string"){let c=n.indexOf("//");c>=0&&(a=n.substring(0,c-1),n=n.substring(c+2));let u=n.indexOf("/");u===-1&&(u=n.length);let d=n.indexOf("?");d===-1&&(d=n.length),e=n.substring(0,Math.min(u,d)),u<d&&(i=HF(n.substring(u,d)));let f=$F(n.substring(Math.min(n.length,d)));c=e.indexOf(":"),c>=0?(o=a==="https"||a==="wss",l=parseInt(e.substring(c+1),10)):c=e.length;let h=e.slice(0,c);if(h.toLowerCase()==="localhost")t="localhost";else if(h.split(".").length<=2)t=h;else{let y=e.indexOf(".");r=e.substring(0,y).toLowerCase(),t=e.substring(y+1),s=r}"ns"in f&&(s=f.ns)}return{host:e,port:l,domain:t,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};var Gc=class{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){let e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Re(this.snapshot.exportVal())}},qc=class{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}};var Pm=class{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return b(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}};var Om=class n{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return ee(this._path)?null:zm(this._path)}get ref(){return new Zn(this._repo,this._path)}get _queryIdentifier(){let e=Tb(this._queryParams),t=Hm(e);return t==="{}"?"default":t}get _queryObject(){return Tb(this._queryParams)}isEqual(e){if(e=Le(e),!(e instanceof n))return!1;let t=this._repo===e._repo,r=Wm(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return t&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+JP(this._path)}};var Zn=class n extends Om{constructor(e,t){super(e,t,new cm,!1)}get parent(){let e=lC(this._path);return e===null?null:new n(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}},Kc=class n{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){let t=new ce(e),r=Yc(this.ref,e);return new n(this._node.getChild(t),r,Ie)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>e(new n(i,Yc(this.ref,r),Ie)))}hasChild(e){let t=new ce(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}};function yn(n,e){return n=Le(n),n._checkNotDeleted("ref"),e!==void 0?Yc(n._root,e):n._root}function Yc(n,e){return n=Le(n),Z(n._path)===null?SF("child","path",e,!1):VC("child","path",e,!1),new Zn(n._repo,Ce(n._path,e))}function fg(n,e){n=Le(n),TF("set",n._path),CF("set",e,n._path,!1);let t=new Gn;return OF(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function ta(n,e){DF("update",e,n._path,!1);let t=new Gn;return FF(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}var Fm=class n{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,t){let r=t._queryParams.getIndex();return new Gc("value",this,new Kc(e.snapshotNode,new Zn(t._repo,t._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new qc(this,e,t):null}matches(e){return e instanceof n?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}},Lm=class n{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t=e==="children_added"?"child_added":e;return t=t==="children_removed"?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new qc(this,e,t):null}createEvent(e,t){b(e.childName!=null,"Child events should have a childName.");let r=Yc(new Zn(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new Gc(e.type,this,new Kc(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof n?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}};function WF(n,e,t,r,i){let s;if(typeof r=="object"&&(s=void 0,i=r),typeof r=="function"&&(s=r),i&&i.onlyOnce){let l=t,c=(u,d)=>{Bb(n._repo,n,a),l(u,d)};c.userCallback=t.userCallback,c.context=t.context,t=c}let o=new Pm(t,s||void 0),a=e==="value"?new Fm(o):new Lm(e,o);return VF(n._repo,n,a),()=>Bb(n._repo,n,a)}function ou(n,e,t,r){return WF(n,"value",e,t,r)}KO(Zn);eF(Zn);var GF="FIREBASE_DATABASE_EMULATOR_HOST",Vm={},qF=!1;function KF(n,e,t,r){let i=e.lastIndexOf(":"),s=e.substring(0,i),o=ur(s);n.repoInfo_=new Ac(e,o,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0,t),r&&(n.authTokenProvider_=r)}function YF(n,e,t,r,i){let s=r||n.options.databaseURL;s===void 0&&(n.options.projectId||Yn("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ve("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let o=Hb(s,i),a=o.repoInfo,l,c;typeof process<"u"&&process.env&&(c=process.env[GF]),c?(l=!0,s=`http://${c}?ns=${a.namespace}`,o=Hb(s,i),a=o.repoInfo):l=!o.repoInfo.secure;let u=i&&l?new Uo(Uo.OWNER):new Gp(n.name,n.options,e);xF("Invalid Firebase Database URL",o),ee(o.path)||Yn("Database URL must point to the root of a Firebase Database (not including a child path).");let d=ZF(a,n,u,new Wp(n,t));return new jm(d,n)}function QF(n,e){let t=Vm[e];(!t||t[n.key]!==n)&&Yn(`Database ${e}(${n.repoInfo_}) has already been deleted.`),jF(n),delete t[n.key]}function ZF(n,e,t,r){let i=Vm[e.name];i||(i={},Vm[e.name]=i);let s=i[n.toURLString()];return s&&Yn("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new Rm(n,qF,t,r),i[n.toURLString()]=s,s}var jm=class{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(RF(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Zn(this._repo,ae())),this._rootInternal}_delete(){return this._rootInternal!==null&&(QF(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Yn("Cannot call "+e+" on a deleted database.")}};function WC(n=mr(),e){let t=Ro(n,"database").getImmediate({identifier:e});if(!t._instanceStarted){let r=Vw("database");r&&JF(t,...r)}return t}function JF(n,e,t,r={}){n=Le(n),n._checkNotDeleted("useEmulator");let i=`${e}:${t}`,s=n._repoInternal;if(n._instanceStarted){if(i===n._repoInternal.repoInfo_.host&&pn(r,s.repoInfo_.emulatorOptions))return;Yn("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let o;if(s.repoInfo_.nodeAdmin)r.mockUserToken&&Yn('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new Uo(Uo.OWNER);else if(r.mockUserToken){let a=typeof r.mockUserToken=="string"?r.mockUserToken:jw(r.mockUserToken,n.app.options.projectId);o=new Uo(a)}ur(e)&&(wc(e),bc("Database",!0)),KF(s,i,r,o)}function XF(n){gP(pr),hr(new Rt("database",(e,{instanceIdentifier:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return YF(r,i,s,t)},"PUBLIC").setMultipleInstances(!0)),qt(ub,db,n),qt(ub,db,"esm2020")}Gm.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)};Gm.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)};XF();var eL=[{eco:"35526",serial:"92719",sap:"4000026523",ops:["Carlos Eduardo Vazquez Calderon","Cristofer Ariel Rivera Cruz","Juan Gardu\xF1o Chaparro","Victor Hugo Moreno De la cruz"]},{eco:"37191",serial:"95159",sap:void 0,ops:["Miguel \xC1ngel Torres","Jos\xE9 Luis Hern\xE1ndez","Roberto S\xE1nchez","Alejandro Ruiz"]},{eco:"37192",serial:"95162",sap:void 0,ops:["Fernando Mart\xEDnez","Ricardo L\xF3pez","Daniel Garc\xEDa"]},{eco:"37193",serial:"95074",sap:void 0,ops:["Eduardo P\xE9rez","Jorge Ram\xEDrez","Luis Morales","Gabriel Flores"]},{eco:"37194",serial:"95056",sap:void 0,ops:["Oscar Gonz\xE1lez","Adri\xE1n Castillo","Manuel D\xEDaz","Rub\xE9n Romero"]},{eco:"37195",serial:"95049",sap:void 0,ops:["Javier Ortiz","Sergio Medina","Andr\xE9s Vargas","Ra\xFAl Castro"]},{eco:"40019",serial:"97520",sap:void 0,ops:["Hugo Herrera","Francisco Jim\xE9nez","Mart\xEDn Silva","Pedro Mendoza"]},{eco:"40020",serial:"97519",sap:void 0,ops:["Diego Rojas","Alberto Cruz","Mario Aguilar","C\xE9sar Guti\xE9rrez"]},{eco:"40021",serial:"97532",sap:void 0,ops:["Enrique \xC1lvarez","Gustavo M\xE9ndez","Felipe Ortega"]},{eco:"40060",serial:"97529",sap:void 0,ops:["Pablo Rios","H\xE9ctor Delgado","Salvador Pe\xF1a","Tom\xE1s Navarro"]},{eco:"40327",serial:"97560",sap:void 0,ops:["Ismael Guerrero","Rafael Soto","\xC1ngel Campos","Ram\xF3n Vega"]},{eco:"40328",serial:"97562",sap:void 0,ops:["Vicente Molina","Julio Cabrera","Esteban Miranda"]},{eco:"40338",serial:"66458",sap:void 0,ops:["Emilio Pacheco","F\xE9lix Cordero","Lorenzo Montes","Benjam\xEDn Sol\xEDs"]},{eco:"29439",serial:"66454",sap:"4000018761",ops:["Gerardo Lara","Mauricio Acosta"]},{eco:"29440",serial:"66541",sap:"4000018763",ops:["Samuel Valencia","Dario Espinoza"]},{eco:"35482",serial:"92714",sap:"4000026495",ops:["Alfredo Beltr\xE1n","Rogelio C\xE1rdenas","Sim\xF3n Orozco","Elias Villalobos"]},{eco:"35483",serial:"92730",sap:"4000026496",ops:["Lucas Maldonado","Mateo Ibarra","Nicol\xE1s Zavala","Joaqu\xEDn Trejo"]},{eco:"35494",serial:"92732",sap:"4000026522",ops:["Sebasti\xE1n Gallegos","Dami\xE1n Ponce","Juli\xE1n Esquivel","Leonardo Rocha"]}],tL="Sergio Guadarrama Gonzales",nL="Planta Cuautitl\xE1n - Cuautitl\xE1n Izcalli, Edo de Mex.",rL="Toyota 32-8FG30";function GC(n){return eL.map((e,t)=>{let r=Math.random(),i=0;r>.95?i=1:r>.85&&(i=2),e.eco==="35526"&&(i=1);let s=n[i],o=new Date;return i!==0&&o.setDate(o.getDate()-Math.floor(Math.random()*5)),{id:e.eco,brand:"Toyota",model:rL,serial:e.serial,sapCode:e.sap,acquisitionDate:"2020-06-15",fuelType:"GLP/Gasolina Dual",status:s,statusSince:o.toISOString(),location:nL,critical:t<5,cleanlinessStatus:"Pending",supervisor:tL,operatingHours:Math.floor(Math.random()*1301+1200),assignedOperators:e.ops.map((a,l)=>({name:a,role:"Operador",shift:`Turno ${l%4+1}`})),maintenanceTasks:[]}})}var _n={production:!1,firebase:{apiKey:"AIzaSyCQkT-TQy-rtKr_bmTWJS78HghTh97x3eE",authDomain:"asset-guard-demo.firebaseapp.com",databaseURL:"https://asset-guard-demo-default-rtdb.firebaseio.com",projectId:"asset-guard-demo",storageBucket:"asset-guard-demo.firebasestorage.app",messagingSenderId:"730419123254",appId:"1:730419123254:web:74de062f3e9e0851087497"},geminiApiKey:"AIzaSyDg8fHddzzerQlkBfNr49q51ZZoo1fvlM08"};var pt=(()=>{class n{constructor(){this.firebaseConfig=_n.firebase,this.connectionStatus=O("syncing"),this.lastUpdate=O(new Date),this.plantMode=O(!1),this.isKioskMode=O(!1),this.activeSlide=O(0),this.statuses=[{id:"1",name:"Operativo",color:"bg-emerald-100 text-emerald-800 border-emerald-200",hex:"#10b981"},{id:"2",name:"Taller",color:"bg-red-100 text-red-800 border-red-200",hex:"#ef4444"},{id:"3",name:"Preventivo",color:"bg-amber-100 text-amber-800 border-amber-200",hex:"#f59e0b"},{id:"4",name:"Baja",color:"bg-slate-100 text-slate-800 border-slate-200",hex:"#64748b"}],this.assetsSignal=O(this.loadRealFleet()),this.reportsSignal=O(this.generateRealReports()),this.forkliftFailures=O(this.generateRealLiveFailures()),this.assets=this.assetsSignal.asReadonly(),this.reports=this.reportsSignal.asReadonly(),this.kpiData=$(()=>{let t=this.assetsSignal().length,r=this.assetsSignal().filter(c=>c.status.name==="Operativo").length,i=this.reportsSignal().filter(c=>c.exitDate),s=0;i.forEach(c=>{let u=new Date(c.entryDate).getTime(),d=new Date(c.exitDate).getTime();s+=(d-u)/(1e3*60*60)});let o=i.length>0?s/i.length:0,a=new Date().getMonth(),l=this.reportsSignal().filter(c=>new Date(c.entryDate).getMonth()===a).reduce((c,u)=>c+u.estimatedCost,0);return{availability:t>0?r/t*100:0,mttr:Math.round(o*10)/10,totalCostMonth:l,budgetMonth:18e3}}),this.fleetAvailability=$(()=>{let t=this.assetsSignal();if(t.length===0)return{percentage:100,label:"Excelente",color:"#10b981"};let i=t.filter(s=>s.status.name==="Operativo").length/t.length*100;return{percentage:Math.round(i),label:i>=90?"Excelente":i>=80?"Regular":"Cr\xEDtico",color:i>=90?"#10b981":i>=80?"#f59e0b":"#ef4444"}}),this.topOperators=$(()=>{let t=this.forkliftFailures(),r={};return t.forEach(i=>{i.reporta&&(r[i.reporta]=(r[i.reporta]||0)+10)}),Object.entries(r).map(([i,s])=>({name:i,points:s})).sort((i,s)=>s.points-i.points).slice(0,3)}),this.safetyStats=O({daysWithoutAccident:142,record:180,announcement:"Uso obligatorio de EPP en Patio de Maniobras"}),this.crewLeaderboard=O([{rank:1,name:"Turno 1 (Matutino)",score:98,pallets:1450},{rank:2,name:"Turno 2 (Vespertino)",score:94,pallets:1320},{rank:3,name:"Turno 3 (Nocturno)",score:89,pallets:1105}]),this.initFirebase(),this.syncAssetsWithFailures(this.forkliftFailures()),Jr(()=>{this.isKioskMode()?this.startKioskRotation():this.stopKioskRotation()}),window.addEventListener("online",()=>this.updateConnectionStatus()),window.addEventListener("offline",()=>this.updateConnectionStatus())}initFirebase(){try{if(!this.firebaseConfig.apiKey||!this.firebaseConfig.databaseURL||!this.firebaseConfig.projectId){console.warn("Firebase configuration incomplete. Running in offline mode."),this.connectionStatus.set("offline");return}this.app=Sc().length>0?mr():ko(this.firebaseConfig),this.db=WC(this.app);let t=yn(this.db,".info/connected");ou(t,r=>{r.val()===!0?this.connectionStatus.set("online"):this.connectionStatus.set("offline")}),this.setupListeners()}catch(t){console.error("Firebase init error:",t),this.connectionStatus.set("offline")}}updateConnectionStatus(){this.connectionStatus.set(navigator.onLine?"online":"offline")}setupListeners(){let t=yn(this.db,"failures");ou(t,i=>{let s=i.val();if(this.lastUpdate.set(new Date),s){let o=Object.values(s);o.sort((a,l)=>new Date(l.fechaIngreso).getTime()-new Date(a.fechaIngreso).getTime()),this.forkliftFailures.set(o),this.syncAssetsWithFailures(o)}else this.seedDatabase()},i=>{console.info("\u{1F4F4} Modo Offline activado - Usando datos locales de demostraci\xF3n."),this.connectionStatus.set("offline")});let r=yn(this.db,"settings/kioskMode");ou(r,i=>{let s=i.val();s!==null&&this.isKioskMode()!==s&&this.isKioskMode.set(s)})}seedDatabase(){let t={};this.forkliftFailures().forEach(i=>{t["failures/"+i.id]=i}),t["settings/kioskMode"]=!1,ta(yn(this.db),t).catch(()=>{})}toggleKioskMode(){let t=!this.isKioskMode();this.isKioskMode.set(t),this.connectionStatus()==="online"&&fg(yn(this.db,"settings/kioskMode"),t).catch(()=>{})}startKioskRotation(){this.kioskInterval&&clearInterval(this.kioskInterval),this.kioskInterval=setInterval(()=>{this.activeSlide.update(t=>(t+1)%3)},15e3)}stopKioskRotation(){this.kioskInterval&&clearInterval(this.kioskInterval),this.activeSlide.set(0)}togglePlantMode(){this.plantMode.update(t=>!t)}getAsset(t){return this.assetsSignal().find(r=>r.id===t)}getAssetHistory(t){return this.reportsSignal().filter(r=>r.assetId===t).sort((r,i)=>new Date(i.entryDate).getTime()-new Date(r.entryDate).getTime())}addLiveFailure(t){let r=H(D({},t),{id:"F-"+Date.now(),fechaIngreso:new Date().toISOString(),seguimiento:[]});this.connectionStatus.set("syncing"),this.forkliftFailures.update(i=>[r,...i]),this.syncAssetsWithFailures(this.forkliftFailures()),this.connectionStatus()!=="offline"&&fg(yn(this.db,"failures/"+r.id),r).then(()=>this.connectionStatus.set("online")).catch(()=>this.connectionStatus.set("offline"))}addFailureUpdate(t,r,i){let s=this.forkliftFailures().find(a=>a.id===t);if(!s)return;let o=H(D({},s),{estatus:"En Proceso",seguimiento:[...s.seguimiento,{usuario:i,mensaje:r,fecha:new Date().toISOString()}]});this.forkliftFailures.update(a=>a.map(l=>l.id===t?o:l)),this.connectionStatus()!=="offline"&&ta(yn(this.db,"failures/"+t),o).catch(console.error)}updateToyotaLogistics(t,r,i,s){let o={ordenCompra:r,estatusRefaccion:i,fechaPromesa:s,estatus:"En Proceso"};this.forkliftFailures.update(a=>a.map(l=>l.id===t?H(D(D({},l),o),{estatus:"En Proceso"}):l)),this.connectionStatus()!=="offline"&&ta(yn(this.db,"failures/"+t),o).catch(console.error)}closeLiveFailure(t){let r=this.forkliftFailures().find(s=>s.id===t);if(!r)return;let i=H(D({},r),{estatus:"Cerrada",fechaSalida:new Date().toISOString()});this.forkliftFailures.update(s=>s.map(o=>o.id===t?i:o)),this.syncAssetsWithFailures(this.forkliftFailures()),this.connectionStatus()!=="offline"&&ta(yn(this.db,"failures/"+t),i).catch(console.error)}reportFailure(t,r,i){this.addLiveFailure({economico:t,falla:r,prioridad:"Media",reporta:"Operador (App)",estatus:"Abierta"})}completeRepair(t,r,i,s){let o=this.forkliftFailures().find(a=>a.economico===t&&a.estatus!=="Cerrada");o&&this.closeLiveFailure(o.id)}updateAssetsFromExcel(t){}syncAssetsWithFailures(t){let r=t.filter(l=>l.estatus!=="Cerrada"),i=new Set(r.map(l=>l.economico)),s=new Map(r.map(l=>[l.economico,l])),o=this.statuses.find(l=>l.name==="Taller"),a=this.statuses.find(l=>l.name==="Operativo");this.assetsSignal.update(l=>l.map(c=>{if(i.has(c.id)){if(c.status.name!=="Taller")return H(D({},c),{status:o,statusSince:s.get(c.id)?.fechaIngreso||new Date().toISOString(),lastFailure:s.get(c.id)?.falla})}else if(c.status.name==="Taller"&&!i.has(c.id))return H(D({},c),{status:a,statusSince:new Date().toISOString(),lastFailure:void 0});return c}))}loadRealFleet(){let t=GC(this.statuses);return t.forEach((r,i)=>{r.maintenanceTasks=this.generateMockMaintenance(i)}),t}generateMockMaintenance(t){let r=[],i=Math.floor(Math.random()*45)-5,s=new Date;s.setDate(s.getDate()+i);let o=["Cambio de Aceite","Revisi\xF3n de Frenos","Ajuste de Cadenas","Servicio General","Inspecci\xF3n de Bater\xEDa"][t%5];return r.push({id:`T-${t}-1`,date:s.toISOString(),description:o,status:i<0?"Overdue":"Pending"}),r}generateRealReports(){return[]}generateRealLiveFailures(){return[{id:"FAIL-2026-0001",economico:"35526",falla:"Fuga de aceite hidr\xE1ulico en cilindro de elevaci\xF3n principal.",reporta:"Carlos Eduardo Vazquez Calderon",fechaIngreso:new Date().toISOString(),prioridad:"Alta",estatus:"Abierta",seguimiento:[]}]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var qC=["user","model","function","system"];var au=function(n){return n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n}(au||{});var Ge=class extends Error{constructor(e){super(`[GoogleGenerativeAI Error]: ${e}`)}},Er=class extends Ge{constructor(e,t){super(e),this.response=t}},cu=class extends Ge{constructor(e,t,r,i){super(e),this.status=t,this.statusText=r,this.errorDetails=i}},vn=class extends Ge{};var iL="https://generativelanguage.googleapis.com",sL="v1beta",oL="0.21.0",aL="genai-js",ms=function(n){return n.GENERATE_CONTENT="generateContent",n.STREAM_GENERATE_CONTENT="streamGenerateContent",n.COUNT_TOKENS="countTokens",n.EMBED_CONTENT="embedContent",n.BATCH_EMBED_CONTENTS="batchEmbedContents",n}(ms||{}),hg=class{constructor(e,t,r,i,s){this.model=e,this.task=t,this.apiKey=r,this.stream=i,this.requestOptions=s}toString(){var e,t;let r=((e=this.requestOptions)===null||e===void 0?void 0:e.apiVersion)||sL,s=`${((t=this.requestOptions)===null||t===void 0?void 0:t.baseUrl)||iL}/${r}/${this.model}:${this.task}`;return this.stream&&(s+="?alt=sse"),s}};function lL(n){let e=[];return n?.apiClient&&e.push(n.apiClient),e.push(`${aL}/${oL}`),e.join(" ")}async function cL(n){var e;let t=new Headers;t.append("Content-Type","application/json"),t.append("x-goog-api-client",lL(n.requestOptions)),t.append("x-goog-api-key",n.apiKey);let r=(e=n.requestOptions)===null||e===void 0?void 0:e.customHeaders;if(r){if(!(r instanceof Headers))try{r=new Headers(r)}catch(i){throw new vn(`unable to convert customHeaders value ${JSON.stringify(r)} to Headers: ${i.message}`)}for(let[i,s]of r.entries()){if(i==="x-goog-api-key")throw new vn(`Cannot set reserved header name ${i}`);if(i==="x-goog-api-client")throw new vn(`Header name ${i} can only be set using the apiClient field`);t.append(i,s)}}return t}async function uL(n,e,t,r,i,s){let o=new hg(n,e,t,r,s);return{url:o.toString(),fetchOptions:Object.assign(Object.assign({},pL(s)),{method:"POST",headers:await cL(o),body:i})}}async function sa(n,e,t,r,i,s={},o=fetch){let{url:a,fetchOptions:l}=await uL(n,e,t,r,i,s);return dL(a,l,o)}async function dL(n,e,t=fetch){let r;try{r=await t(n,e)}catch(i){fL(i,n)}return r.ok||await hL(r,n),r}function fL(n,e){let t=n;throw n instanceof cu||n instanceof vn||(t=new Ge(`Error fetching from ${e.toString()}: ${n.message}`),t.stack=n.stack),t}async function hL(n,e){let t="",r;try{let i=await n.json();t=i.error.message,i.error.details&&(t+=` ${JSON.stringify(i.error.details)}`,r=i.error.details)}catch{}throw new cu(`Error fetching from ${e.toString()}: [${n.status} ${n.statusText}] ${t}`,n.status,n.statusText,r)}function pL(n){let e={};if(n?.signal!==void 0||n?.timeout>=0){let t=new AbortController;n?.timeout>=0&&setTimeout(()=>t.abort(),n.timeout),n?.signal&&n.signal.addEventListener("abort",()=>{t.abort()}),e.signal=t.signal}return e}function mg(n){return n.text=()=>{if(n.candidates&&n.candidates.length>0){if(n.candidates.length>1&&console.warn(`This response had ${n.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),lu(n.candidates[0]))throw new Er(`${wr(n)}`,n);return mL(n)}else if(n.promptFeedback)throw new Er(`Text not available. ${wr(n)}`,n);return""},n.functionCall=()=>{if(n.candidates&&n.candidates.length>0){if(n.candidates.length>1&&console.warn(`This response had ${n.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),lu(n.candidates[0]))throw new Er(`${wr(n)}`,n);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),KC(n)[0]}else if(n.promptFeedback)throw new Er(`Function call not available. ${wr(n)}`,n)},n.functionCalls=()=>{if(n.candidates&&n.candidates.length>0){if(n.candidates.length>1&&console.warn(`This response had ${n.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),lu(n.candidates[0]))throw new Er(`${wr(n)}`,n);return KC(n)}else if(n.promptFeedback)throw new Er(`Function call not available. ${wr(n)}`,n)},n}function mL(n){var e,t,r,i;let s=[];if(!((t=(e=n.candidates)===null||e===void 0?void 0:e[0].content)===null||t===void 0)&&t.parts)for(let o of(i=(r=n.candidates)===null||r===void 0?void 0:r[0].content)===null||i===void 0?void 0:i.parts)o.text&&s.push(o.text),o.executableCode&&s.push("\n```"+o.executableCode.language+`
`+o.executableCode.code+"\n```\n"),o.codeExecutionResult&&s.push("\n```\n"+o.codeExecutionResult.output+"\n```\n");return s.length>0?s.join(""):""}function KC(n){var e,t,r,i;let s=[];if(!((t=(e=n.candidates)===null||e===void 0?void 0:e[0].content)===null||t===void 0)&&t.parts)for(let o of(i=(r=n.candidates)===null||r===void 0?void 0:r[0].content)===null||i===void 0?void 0:i.parts)o.functionCall&&s.push(o.functionCall);if(s.length>0)return s}var gL=[au.RECITATION,au.SAFETY,au.LANGUAGE];function lu(n){return!!n.finishReason&&gL.includes(n.finishReason)}function wr(n){var e,t,r;let i="";if((!n.candidates||n.candidates.length===0)&&n.promptFeedback)i+="Response was blocked",!((e=n.promptFeedback)===null||e===void 0)&&e.blockReason&&(i+=` due to ${n.promptFeedback.blockReason}`),!((t=n.promptFeedback)===null||t===void 0)&&t.blockReasonMessage&&(i+=`: ${n.promptFeedback.blockReasonMessage}`);else if(!((r=n.candidates)===null||r===void 0)&&r[0]){let s=n.candidates[0];lu(s)&&(i+=`Candidate was blocked due to ${s.finishReason}`,s.finishMessage&&(i+=`: ${s.finishMessage}`))}return i}function na(n){return this instanceof na?(this.v=n,this):new na(n)}function yL(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(f){r[f]&&(i[f]=function(h){return new Promise(function(y,v){s.push([f,h,y,v])>1||a(f,h)})})}function a(f,h){try{l(r[f](h))}catch(y){d(s[0][3],y)}}function l(f){f.value instanceof na?Promise.resolve(f.value.v).then(c,u):d(s[0][2],f)}function c(f){a("next",f)}function u(f){a("throw",f)}function d(f,h){f(h),s.shift(),s.length&&a(s[0][0],s[0][1])}}var YC=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function _L(n){let e=n.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),t=wL(e),[r,i]=t.tee();return{stream:EL(r),response:vL(i)}}async function vL(n){let e=[],t=n.getReader();for(;;){let{done:r,value:i}=await t.read();if(r)return mg(bL(e));e.push(i)}}function EL(n){return yL(this,arguments,function*(){let t=n.getReader();for(;;){let{value:r,done:i}=yield na(t.read());if(i)break;yield yield na(mg(r))}})}function wL(n){let e=n.getReader();return new ReadableStream({start(r){let i="";return s();function s(){return e.read().then(({value:o,done:a})=>{if(a){if(i.trim()){r.error(new Ge("Failed to parse stream"));return}r.close();return}i+=o;let l=i.match(YC),c;for(;l;){try{c=JSON.parse(l[1])}catch{r.error(new Ge(`Error parsing JSON response: "${l[1]}"`));return}r.enqueue(c),i=i.substring(l[0].length),l=i.match(YC)}return s()})}}})}function bL(n){let e=n[n.length-1],t={promptFeedback:e?.promptFeedback};for(let r of n){if(r.candidates)for(let i of r.candidates){let s=i.index;if(t.candidates||(t.candidates=[]),t.candidates[s]||(t.candidates[s]={index:i.index}),t.candidates[s].citationMetadata=i.citationMetadata,t.candidates[s].groundingMetadata=i.groundingMetadata,t.candidates[s].finishReason=i.finishReason,t.candidates[s].finishMessage=i.finishMessage,t.candidates[s].safetyRatings=i.safetyRatings,i.content&&i.content.parts){t.candidates[s].content||(t.candidates[s].content={role:i.content.role||"user",parts:[]});let o={};for(let a of i.content.parts)a.text&&(o.text=a.text),a.functionCall&&(o.functionCall=a.functionCall),a.executableCode&&(o.executableCode=a.executableCode),a.codeExecutionResult&&(o.codeExecutionResult=a.codeExecutionResult),Object.keys(o).length===0&&(o.text=""),t.candidates[s].content.parts.push(o)}}r.usageMetadata&&(t.usageMetadata=r.usageMetadata)}return t}async function XC(n,e,t,r){let i=await sa(e,ms.STREAM_GENERATE_CONTENT,n,!0,JSON.stringify(t),r);return _L(i)}async function eI(n,e,t,r){let s=await(await sa(e,ms.GENERATE_CONTENT,n,!1,JSON.stringify(t),r)).json();return{response:mg(s)}}function tI(n){if(n!=null){if(typeof n=="string")return{role:"system",parts:[{text:n}]};if(n.text)return{role:"system",parts:[n]};if(n.parts)return n.role?n:{role:"system",parts:n.parts}}}function ra(n){let e=[];if(typeof n=="string")e=[{text:n}];else for(let t of n)typeof t=="string"?e.push({text:t}):e.push(t);return CL(e)}function CL(n){let e={role:"user",parts:[]},t={role:"function",parts:[]},r=!1,i=!1;for(let s of n)"functionResponse"in s?(t.parts.push(s),i=!0):(e.parts.push(s),r=!0);if(r&&i)throw new Ge("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!r&&!i)throw new Ge("No content is provided for sending chat message.");return r?e:t}function IL(n,e){var t;let r={model:e?.model,generationConfig:e?.generationConfig,safetySettings:e?.safetySettings,tools:e?.tools,toolConfig:e?.toolConfig,systemInstruction:e?.systemInstruction,cachedContent:(t=e?.cachedContent)===null||t===void 0?void 0:t.name,contents:[]},i=n.generateContentRequest!=null;if(n.contents){if(i)throw new vn("CountTokensRequest must have one of contents or generateContentRequest, not both.");r.contents=n.contents}else if(i)r=Object.assign(Object.assign({},r),n.generateContentRequest);else{let s=ra(n);r.contents=[s]}return{generateContentRequest:r}}function QC(n){let e;return n.contents?e=n:e={contents:[ra(n)]},n.systemInstruction&&(e.systemInstruction=tI(n.systemInstruction)),e}function DL(n){return typeof n=="string"||Array.isArray(n)?{content:ra(n)}:n}var ZC=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],SL={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function TL(n){let e=!1;for(let t of n){let{role:r,parts:i}=t;if(!e&&r!=="user")throw new Ge(`First content should be with role 'user', got ${r}`);if(!qC.includes(r))throw new Ge(`Each item should include role field. Got ${r} but valid roles are: ${JSON.stringify(qC)}`);if(!Array.isArray(i))throw new Ge("Content should have 'parts' property with an array of Parts");if(i.length===0)throw new Ge("Each Content should have at least one part");let s={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(let a of i)for(let l of ZC)l in a&&(s[l]+=1);let o=SL[r];for(let a of ZC)if(!o.includes(a)&&s[a]>0)throw new Ge(`Content with role '${r}' can't contain '${a}' part`);e=!0}}var JC="SILENT_ERROR",pg=class{constructor(e,t,r,i={}){this.model=t,this.params=r,this._requestOptions=i,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,r?.history&&(TL(r.history),this._history=r.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e,t={}){var r,i,s,o,a,l;await this._sendPromise;let c=ra(e),u={safetySettings:(r=this.params)===null||r===void 0?void 0:r.safetySettings,generationConfig:(i=this.params)===null||i===void 0?void 0:i.generationConfig,tools:(s=this.params)===null||s===void 0?void 0:s.tools,toolConfig:(o=this.params)===null||o===void 0?void 0:o.toolConfig,systemInstruction:(a=this.params)===null||a===void 0?void 0:a.systemInstruction,cachedContent:(l=this.params)===null||l===void 0?void 0:l.cachedContent,contents:[...this._history,c]},d=Object.assign(Object.assign({},this._requestOptions),t),f;return this._sendPromise=this._sendPromise.then(()=>eI(this._apiKey,this.model,u,d)).then(h=>{var y;if(h.response.candidates&&h.response.candidates.length>0){this._history.push(c);let v=Object.assign({parts:[],role:"model"},(y=h.response.candidates)===null||y===void 0?void 0:y[0].content);this._history.push(v)}else{let v=wr(h.response);v&&console.warn(`sendMessage() was unsuccessful. ${v}. Inspect response object for details.`)}f=h}),await this._sendPromise,f}async sendMessageStream(e,t={}){var r,i,s,o,a,l;await this._sendPromise;let c=ra(e),u={safetySettings:(r=this.params)===null||r===void 0?void 0:r.safetySettings,generationConfig:(i=this.params)===null||i===void 0?void 0:i.generationConfig,tools:(s=this.params)===null||s===void 0?void 0:s.tools,toolConfig:(o=this.params)===null||o===void 0?void 0:o.toolConfig,systemInstruction:(a=this.params)===null||a===void 0?void 0:a.systemInstruction,cachedContent:(l=this.params)===null||l===void 0?void 0:l.cachedContent,contents:[...this._history,c]},d=Object.assign(Object.assign({},this._requestOptions),t),f=XC(this._apiKey,this.model,u,d);return this._sendPromise=this._sendPromise.then(()=>f).catch(h=>{throw new Error(JC)}).then(h=>h.response).then(h=>{if(h.candidates&&h.candidates.length>0){this._history.push(c);let y=Object.assign({},h.candidates[0].content);y.role||(y.role="model"),this._history.push(y)}else{let y=wr(h);y&&console.warn(`sendMessageStream() was unsuccessful. ${y}. Inspect response object for details.`)}}).catch(h=>{h.message!==JC&&console.error(h)}),f}};async function xL(n,e,t,r){return(await sa(e,ms.COUNT_TOKENS,n,!1,JSON.stringify(t),r)).json()}async function AL(n,e,t,r){return(await sa(e,ms.EMBED_CONTENT,n,!1,JSON.stringify(t),r)).json()}async function ML(n,e,t,r){let i=t.requests.map(o=>Object.assign(Object.assign({},o),{model:e}));return(await sa(e,ms.BATCH_EMBED_CONTENTS,n,!1,JSON.stringify({requests:i}),r)).json()}var uu=class{constructor(e,t,r={}){this.apiKey=e,this._requestOptions=r,t.model.includes("/")?this.model=t.model:this.model=`models/${t.model}`,this.generationConfig=t.generationConfig||{},this.safetySettings=t.safetySettings||[],this.tools=t.tools,this.toolConfig=t.toolConfig,this.systemInstruction=tI(t.systemInstruction),this.cachedContent=t.cachedContent}async generateContent(e,t={}){var r;let i=QC(e),s=Object.assign(Object.assign({},this._requestOptions),t);return eI(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},i),s)}async generateContentStream(e,t={}){var r;let i=QC(e),s=Object.assign(Object.assign({},this._requestOptions),t);return XC(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},i),s)}startChat(e){var t;return new pg(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(t=this.cachedContent)===null||t===void 0?void 0:t.name},e),this._requestOptions)}async countTokens(e,t={}){let r=IL(e,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),i=Object.assign(Object.assign({},this._requestOptions),t);return xL(this.apiKey,this.model,r,i)}async embedContent(e,t={}){let r=DL(e),i=Object.assign(Object.assign({},this._requestOptions),t);return AL(this.apiKey,this.model,r,i)}async batchEmbedContents(e,t={}){let r=Object.assign(Object.assign({},this._requestOptions),t);return ML(this.apiKey,this.model,e,r)}};var ia=class{constructor(e){this.apiKey=e}getGenerativeModel(e,t){if(!e.model)throw new Ge("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new uu(this.apiKey,e,t)}getGenerativeModelFromCachedContent(e,t,r){if(!e.name)throw new vn("Cached content must contain a `name` field.");if(!e.model)throw new vn("Cached content must contain a `model` field.");let i=["model","systemInstruction"];for(let o of i)if(t?.[o]&&e[o]&&t?.[o]!==e[o]){if(o==="model"){let a=t.model.startsWith("models/")?t.model.replace("models/",""):t.model,l=e.model.startsWith("models/")?e.model.replace("models/",""):e.model;if(a===l)continue}throw new vn(`Different value for "${o}" specified in modelParams (${t[o]}) and cachedContent (${e[o]})`)}let s=Object.assign(Object.assign({},t),{model:e.model,tools:e.tools,toolConfig:e.toolConfig,systemInstruction:e.systemInstruction,cachedContent:e});return new uu(this.apiKey,s,r)}};var gs=(()=>{class n{constructor(){let t=_n.geminiApiKey;t&&t!==""?this.ai=new ia(t):(console.info("\u2139\uFE0F Modo Demo: Las funciones de IA est\xE1n deshabilitadas. Para activarlas, configure la API Key de Gemini en environment.ts"),this.ai=new ia(""))}async analyzeMaintenanceHistory(t,r){if(!_n.geminiApiKey)return'<p class="text-yellow-600">\u26A0\uFE0F API key no configurada. Por favor configura geminiApiKey en tu archivo environment.ts</p>';try{let i=`
        Act\xFAa como Analista de Mantenimiento Predictivo con especializaci\xF3n en Machine Learning aplicado a activos industriales.

        ENTRADA DE DATOS:
        Activo: ${t.brand} ${t.model} (ID: ${t.id})
        Historial de Fallas:
        ${JSON.stringify(r.map(l=>({fecha:l.entryDate,tipo:l.type,componente:l.failureDescription,severidad:l.estimatedCost>2e3?"Alta":"Media"})))}

        AN\xC1LISIS REQUERIDO:
        1. \u{1F52E} DETECCI\xD3N DE PATRONES: Identifica fallas recurrentes y calcula MTBF aproximado.
        2. \u{1F4C8} PREDICCI\xD3N: Estima qu\xE9 componente tiene mayor probabilidad de fallar pr\xF3ximamente.
        3. \u2699\uFE0F RECOMENDACIONES: Sugiere inspecciones o reemplazos preventivos.

        FORMATO DE SALIDA:
        HTML limpio (sin markdown \`\`\`html). Usa iconos y negritas.
        Estructura:
        <div class="space-y-4">
          <div><h4 class="font-bold text-red-400">\u{1F52E} Patrones Detectados</h4>...</div>
          <div><h4 class="font-bold text-orange-400">\u26A0\uFE0F Riesgo Inminente</h4>...</div>
          <div><h4 class="font-bold text-green-400">\u2705 Acci\xF3n Recomendada</h4>...</div>
        </div>
      `;return(await(await this.ai.getGenerativeModel({model:"gemini-2.0-flash-exp"}).generateContent(i)).response).text()||"<p>Datos insuficientes para predicci\xF3n.</p>"}catch(i){return console.error("Gemini Error:",i),'<p class="text-red-500">Error conectando con el servicio de IA.</p>'}}async generateExecutiveReport(t,r,i){if(!_n.geminiApiKey)return'<p class="text-yellow-600">\u26A0\uFE0F API key no configurada. Por favor configura VITE_API_KEY en tu archivo .env.local</p>';try{let s=`
        Analiza el estado actual de AssetGuard CMMS y genera un resumen ejecutivo profesional para Gerencia de Operaciones.

        DATOS:
        - Disponibilidad: ${i.percentage}% (Meta: 95%)
        - MTTR Promedio: ${t.mttr} horas
        - Gasto Mes: $${t.totalCostMonth} USD
        - Equipos Detenidos (Top 3): ${JSON.stringify(r.slice(0,3).map(c=>`${c.economico} (${c.falla})`))}

        ESTRUCTURA DEL REPORTE (HTML simple para renderizar):

        <h3>\u{1F4CA} 1. KPIs DE DISPONIBILIDAD</h3>
        <p>Resumen de estado vs meta.</p>

        <h3>\u{1F534} 2. AN\xC1LISIS DE PARETO (Top Problemas)</h3>
        <p>Menciona los equipos cr\xEDticos detenidos actualmente.</p>

        <h3>\u{1F4A1} 3. RECOMENDACIONES ESTRAT\xC9GICAS</h3>
        <ul>
          <li>Acci\xF3n 1 para reducir downtime</li>
          <li>Acci\xF3n 2 para optimizar costos</li>
        </ul>

        <h3>\u26A0\uFE0F 4. ALERTAS CR\xCDTICAS</h3>
        <p>Si disponibilidad < 90%, resalta urgencia.</p>

        TONO: Profesional, directo, espa\xF1ol mexicano empresarial. Sin saludos.
      `;return(await(await this.ai.getGenerativeModel({model:"gemini-2.0-flash-exp"}).generateContent(s)).response).text()||"No se pudo generar el reporte ejecutivo."}catch(s){return console.error("Gemini Error:",s),"Error conectando con IA para el reporte."}}async generateLotoProcedure(t,r){if(!_n.geminiApiKey)return'<p class="text-yellow-600">\u26A0\uFE0F API key no configurada. Por favor configura VITE_API_KEY en tu archivo .env.local</p>';try{let i=`
        Act\xFAa como Ingeniero de Seguridad Industrial certificado en LOTO (NOM-004-STPS-1999).
        Genera un procedimiento de bloqueo/etiquetado para:
        Equipo: ${t.brand} ${t.model} (${t.fuelType})
        Tarea: Reparaci\xF3n de ${r}

        ESTRUCTURA HTML (Lista de verificaci\xF3n):
        <div class="loto-card">
          <h3 class="text-red-600 font-bold mb-2">\u{1F6A8} IDENTIFICACI\xD3N DE PELIGROS</h3>
          [Lista de energ\xEDas peligrosas: El\xE9ctrica, Hidr\xE1ulica, etc.]

          <h3 class="text-blue-600 font-bold mt-4 mb-2">\u{1F512} SECUENCIA DE BLOQUEO</h3>
          <ol class="list-decimal pl-4 space-y-2">
            <li>Paso 1...</li>
            <li>Paso 2...</li>
          </ol>

          <h3 class="text-green-600 font-bold mt-4 mb-2">\u2705 VERIFICACI\xD3N ENERG\xCDA CERO</h3>
          [C\xF3mo verificar que es seguro trabajar]
        </div>

        Resalta ADVERTENCIAS DE SEGURIDAD en negritas.
      `;return(await(await this.ai.getGenerativeModel({model:"gemini-2.0-flash-exp"}).generateContent(i)).response).text()||"Error generando LOTO."}catch{return"<p>No disponible.</p>"}}async analyzeImageInspection(t){if(!_n.geminiApiKey)return console.warn("VITE_API_KEY not configured. Image analysis unavailable."),null;try{let a=(await(await this.ai.getGenerativeModel({model:"gemini-2.0-flash-exp",generationConfig:{responseMimeType:"application/json"}}).generateContent([{inlineData:{mimeType:"image/jpeg",data:t}},`
        Analiza esta imagen capturada por un operador en planta industrial. Act\xFAa como Inspector de Mantenimiento Certificado.

        IDENTIFICA CON PRECISI\xD3N:
        1. Componente afectado
        2. Tipo de da\xF1o visible
        3. Nivel de severidad (BAJA, MEDIA, ALTA, CR\xCDTICA)
        4. Posible causa ra\xEDz
        5. Refacciones estimadas

        FORMATO DE RESPUESTA:
        Responde \xDANICAMENTE con un objeto JSON v\xE1lido siguiendo esta estructura exacta:
        {
          "inspection": {
            "timestamp": "ISO string",
            "asset": { "component_affected": "String", "visual_condition": "String" },
            "damage_analysis": { "damage_type": "String", "visible_signs": ["String"], "affected_area_percentage": "String" },
            "severity": { "level": "String", "risk_score": "String", "safety_impact": "String", "operational_impact": "String" },
            "root_cause_analysis": { "probable_cause": "String", "why_analysis": "String" },
            "immediate_actions": { "safety_measures": ["String"] },
            "repair_plan": {
              "estimated_parts": [{ "part_name": "String", "generic_code": "String", "quantity": "String" }],
              "estimated_mttr_hours": "String",
              "estimated_cost_usd": { "min": number, "max": number }
            }
          }
        }
      `])).response).text();return a?JSON.parse(a):null}catch(r){return console.error("Vision Error:",r),null}}async generateDailySummary(t,r,i){return this.generateExecutiveReport({availability:t.percentage,mttr:4.5,totalCostMonth:12500,budgetMonth:15e3},r,t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function yI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var _I=yI,vI=new qn("auth","Firebase",yI());var gu=new dr("@firebase/auth");function NL(n,...e){gu.logLevel<=de.WARN&&gu.warn(`Auth (${pr}): ${n}`,...e)}function fu(n,...e){gu.logLevel<=de.ERROR&&gu.error(`Auth (${pr}): ${n}`,...e)}function bn(n,...e){throw Ug(n,...e)}function hi(n,...e){return Ug(n,...e)}function EI(n,e,t){let r=H(D({},_I()),{[e]:t});return new qn("auth","Firebase",r).create(e,{appName:n.name})}function En(n){return EI(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ug(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return vI.create(n,...e)}function k(n,e,...t){if(!n)throw Ug(e,...t)}function Jn(n){let e="INTERNAL ASSERTION FAILED: "+n;throw fu(e),new Error(e)}function Ir(n,e){n||Jn(e)}function vg(){return typeof self<"u"&&self.location?.href||""}function RL(){return nI()==="http:"||nI()==="https:"}function nI(){return typeof self<"u"&&self.location?.protocol||null}function kL(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(RL()||Bw()||"connection"in navigator)?navigator.onLine:!0}function PL(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var pi=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ir(t>e,"Short delay should be less than long delay!"),this.isMobile=Io()||Cc()}get(){return kL()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Bg(n,e){Ir(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var yu=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Jn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Jn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Jn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var OL={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var FL=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],LL=new pi(3e4,6e4);function Sr(n,e){return n.tenantId&&!e.tenantId?H(D({},e),{tenantId:n.tenantId}):e}async function er(n,e,t,r,i={}){return wI(n,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});let a=ii(D({key:n.config.apiKey},o)).slice(1),l=await n._getAdditionalHeaders();l["Content-Type"]="application/json",n.languageCode&&(l["X-Firebase-Locale"]=n.languageCode);let c=D({method:e,headers:l},s);return Uw()||(c.referrerPolicy="no-referrer"),n.emulatorConfig&&ur(n.emulatorConfig.host)&&(c.credentials="include"),yu.fetch()(await bI(n,n.config.apiHost,t,a),c)})}async function wI(n,e,t){n._canInitEmulator=!1;let r=D(D({},OL),e);try{let i=new Eg(n),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();let o=await s.json();if("needConfirmation"in o)throw du(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw du(n,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw du(n,"email-already-in-use",o);if(l==="USER_DISABLED")throw du(n,"user-disabled",o);let u=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw EI(n,u,c);bn(n,u)}}catch(i){if(i instanceof Wt)throw i;bn(n,"network-request-failed",{message:String(i)})}}async function ha(n,e,t,r,i={}){let s=await er(n,e,t,r,i);return"mfaPendingCredential"in s&&bn(n,"multi-factor-auth-required",{_serverResponse:s}),s}async function bI(n,e,t,r){let i=`${e}${t}?${r}`,s=n,o=s.config.emulator?Bg(n.config,i):`${n.config.apiScheme}://${i}`;return FL.includes(t)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}function VL(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var Eg=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(hi(this.auth,"network-request-failed")),LL.get())})}};function du(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=hi(n,e,r);return i.customData._tokenResponse=t,i}function rI(n){return n!==void 0&&n.enterprise!==void 0}var wg=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return VL(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}};async function jL(n,e){return er(n,"GET","/v2/recaptchaConfig",Sr(n,e))}async function UL(n,e){return er(n,"POST","/v1/accounts:delete",e)}async function _u(n,e){return er(n,"POST","/v1/accounts:lookup",e)}function aa(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function CI(n,e=!1){let t=Le(n),r=await t.getIdToken(e),i=Hg(r);k(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:aa(gg(i.auth_time)),issuedAtTime:aa(gg(i.iat)),expirationTime:aa(gg(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}}function gg(n){return Number(n)*1e3}function Hg(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return fu("JWT malformed, contained fewer than 3 sections"),null;try{let i=Yi(t);return i?JSON.parse(i):(fu("Failed to decode base64 JWT payload"),null)}catch(i){return fu("Caught error parsing JWT payload as JSON",i?.toString()),null}}function iI(n){let e=Hg(n);return k(e,"internal-error"),k(typeof e.exp<"u","internal-error"),k(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function ys(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Wt&&BL(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function BL({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var bg=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){let t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;let r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};var ca=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=aa(this.lastLoginAt),this.creationTime=aa(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function vu(n){let e=n.auth,t=await n.getIdToken(),r=await ys(n,_u(e,{idToken:t}));k(r?.users.length,e,"internal-error");let i=r.users[0];n._notifyReloadListener(i);let s=i.providerUserInfo?.length?DI(i.providerUserInfo):[],o=HL(n.providerData,s),a=n.isAnonymous,l=!(n.email&&i.passwordHash)&&!o?.length,c=a?l:!1,u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new ca(i.createdAt,i.lastLoginAt),isAnonymous:c};Object.assign(n,u)}async function II(n){let e=Le(n);await vu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function HL(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function DI(n){return n.map(r=>{var i=r,{providerId:e}=i,t=bi(i,["providerId"]);return{providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}})}async function $L(n,e){let t=await wI(n,{},async()=>{let r=ii({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=await bI(n,i,"/v1/token",`key=${s}`),a=await n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let l={method:"POST",headers:a,body:r};return n.emulatorConfig&&ur(n.emulatorConfig.host)&&(l.credentials="include"),yu.fetch()(o,l)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function zL(n,e){return er(n,"POST","/v2/accounts:revokeToken",Sr(n,e))}var la=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){k(e.idToken,"internal-error"),k(typeof e.idToken<"u","internal-error"),k(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):iI(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){k(e.length!==0,"internal-error");let t=iI(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(k(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){let{accessToken:r,refreshToken:i,expiresIn:s}=await $L(e,t);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new n;return r&&(k(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(k(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(k(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Jn("not implemented")}};function br(n,e){k(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Cr=class n{constructor(s){var o=s,{uid:e,auth:t,stsTokenManager:r}=o,i=bi(o,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new bg(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new ca(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){let t=await ys(this,this.stsTokenManager.getToken(this.auth,e));return k(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return CI(this,e)}reload(){return II(this)}_assign(e){this!==e&&(k(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>D({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(H(D({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){k(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await vu(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Je(this.auth.app))return Promise.reject(En(this.auth));let e=await this.getIdToken();return await ys(this,UL(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return H(D({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>D({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){let r=t.displayName??void 0,i=t.email??void 0,s=t.phoneNumber??void 0,o=t.photoURL??void 0,a=t.tenantId??void 0,l=t._redirectEventId??void 0,c=t.createdAt??void 0,u=t.lastLoginAt??void 0,{uid:d,emailVerified:f,isAnonymous:h,providerData:y,stsTokenManager:v}=t;k(d&&v,e,"internal-error");let w=la.fromJSON(this.name,v);k(typeof d=="string",e,"internal-error"),br(r,e.name),br(i,e.name),k(typeof f=="boolean",e,"internal-error"),k(typeof h=="boolean",e,"internal-error"),br(s,e.name),br(o,e.name),br(a,e.name),br(l,e.name),br(c,e.name),br(u,e.name);let I=new n({uid:d,auth:e,email:i,emailVerified:f,displayName:r,isAnonymous:h,photoURL:o,phoneNumber:s,tenantId:a,stsTokenManager:w,createdAt:c,lastLoginAt:u});return y&&Array.isArray(y)&&(I.providerData=y.map(P=>D({},P))),l&&(I._redirectEventId=l),I}static async _fromIdTokenResponse(e,t,r=!1){let i=new la;i.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await vu(s),s}static async _fromGetAccountInfoResponse(e,t,r){let i=t.users[0];k(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?DI(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new la;a.updateFromIdToken(r);let l=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new ca(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(l,c),l}};var sI=new Map;function Xn(n){Ir(n instanceof Function,"Expected a class definition");let e=sI.get(n);return e?(Ir(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,sI.set(n,e),e)}var WL=(()=>{class n{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,r){this.storage[t]=r}async _get(t){let r=this.storage[t];return r===void 0?null:r}async _remove(t){delete this.storage[t]}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),Cg=WL;function hu(n,e,t){return`firebase:${n}:${e}:${t}`}var Eu=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=hu(this.userKey,i.apiKey,s),this.fullPersistenceKey=hu("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=await _u(this.auth,{idToken:e}).catch(()=>{});return t?Cr._fromGetAccountInfoResponse(this.auth,t,e):null}return Cr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new n(Xn(Cg),e,r);let i=(await Promise.all(t.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c),s=i[0]||Xn(Cg),o=hu(r,e.config.apiKey,e.name),a=null;for(let c of t)try{let u=await c._get(o);if(u){let d;if(typeof u=="string"){let f=await _u(e,{idToken:u}).catch(()=>{});if(!f)break;d=await Cr._fromGetAccountInfoResponse(e,f,u)}else d=Cr._fromJSON(e,u);c!==s&&(a=d),s=c;break}}catch{}let l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new n(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(t.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new n(s,e,r))}};function oI(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(AI(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(SI(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(NI(e))return"Blackberry";if(RI(e))return"Webos";if(TI(e))return"Safari";if((e.includes("chrome/")||xI(e))&&!e.includes("edge/"))return"Chrome";if(MI(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function SI(n=We()){return/firefox\//i.test(n)}function TI(n=We()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function xI(n=We()){return/crios\//i.test(n)}function AI(n=We()){return/iemobile/i.test(n)}function MI(n=We()){return/android/i.test(n)}function NI(n=We()){return/blackberry/i.test(n)}function RI(n=We()){return/webos/i.test(n)}function $g(n=We()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function GL(n=We()){return $g(n)&&!!window.navigator?.standalone}function qL(){return Hw()&&document.documentMode===10}function kI(n=We()){return $g(n)||MI(n)||RI(n)||NI(n)||/windows phone/i.test(n)||AI(n)}function PI(n,e=[]){let t;switch(n){case"Browser":t=oI(We());break;case"Worker":t=`${oI(We())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${pr}/${r}`}var Ig=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=s=>new Promise((o,a)=>{try{let l=e(s);o(l)}catch(l){a(l)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}};async function KL(n,e={}){return er(n,"GET","/v2/passwordPolicy",Sr(n,e))}var YL=6,Dg=class{constructor(e){let t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??YL,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){let t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var Sg=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new wu(this),this.idTokenSubscription=new wu(this),this.beforeStateQueue=new Ig(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=vI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Xn(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Eu.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let t=await _u(this,{idToken:e}),r=await Cr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Je(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(o,o))}):this.directlySetCurrentUser(null)}let t=await this.assertedPersistence.getCurrentUser(),r=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let s=this.redirectUser?._redirectEventId,o=r?._redirectEventId,a=await this.tryRedirectSignIn(e);(!s||s===o)&&a?.user&&(r=a.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(s){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return k(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await vu(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=PL()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Je(this.app))return Promise.reject(En(this));let t=e?Le(e):null;return t&&k(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&k(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Je(this.app)?Promise.reject(En(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Je(this.app)?Promise.reject(En(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Xn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=await KL(this),t=new Dg(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new qn("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){let t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await zL(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){let r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let t=e&&Xn(e)||this._popupRedirectResolver;k(t,this,"argument-error"),this.redirectPersistenceManager=await Eu.create(this,[Xn(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(k(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let l=e.addObserver(t,r,i);return()=>{o=!0,l()}}else{let l=e.addObserver(t);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return k(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=PI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){let e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);let t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);let r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(Je(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&NL(`Error while retrieving App Check token: ${e.error}`),e?.token}};function Tr(n){return Le(n)}var wu=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=Kw(t=>this.observer=t)}get next(){return k(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var xu={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function QL(n){xu=n}function OI(n){return xu.loadJS(n)}function ZL(){return xu.recaptchaEnterpriseScript}function JL(){return xu.gapiScript}function FI(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var Tg=class{constructor(){this.enterprise=new xg}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}},xg=class{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}};var XL="recaptcha-enterprise",LI="NO_RECAPTCHA",Ag=class{constructor(e){this.type=XL,this.auth=Tr(e)}async verify(e="verify",t=!1){async function r(s){if(!t){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{jL(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let c=new wg(l);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){let l=window.grecaptcha;rI(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(c=>{o(c)}).catch(()=>{o(LI)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Tg().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{r(this.auth).then(a=>{if(!t&&rI(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=ZL();l.length!==0&&(l+=a),OI(l).then(()=>{i(a,s,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}};async function oa(n,e,t,r=!1,i=!1){let s=new Ag(n),o;if(i)o=LI;else try{o=await s.verify(t)}catch{o=await s.verify(t,!0)}let a=D({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){let l=a.phoneEnrollmentInfo.phoneNumber,c=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){let l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Mg(n,e,t,r,i){if(i==="EMAIL_PASSWORD_PROVIDER")if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let s=await oa(n,e,t,t==="getOobCode");return r(n,s)}else return r(n,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let o=await oa(n,e,t,t==="getOobCode");return r(n,o)}else return Promise.reject(s)});else if(i==="PHONE_PROVIDER")if(n._getRecaptchaConfig()?.isProviderEnabled("PHONE_PROVIDER")){let s=await oa(n,e,t);return r(n,s).catch(async o=>{if(n._getRecaptchaConfig()?.getProviderEnforcementState("PHONE_PROVIDER")==="AUDIT"&&(o.code==="auth/missing-recaptcha-token"||o.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);let a=await oa(n,e,t,!1,!0);return r(n,a)}return Promise.reject(o)})}else{let s=await oa(n,e,t,!1,!0);return r(n,s)}else return Promise.reject(i+" provider is not supported.")}function VI(n,e){let t=Ro(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),s=t.getOptions();if(pn(s,e??{}))return i;bn(i,"already-initialized")}return t.initialize({options:e})}function e2(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Xn);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function jI(n,e,t){let r=Tr(n);k(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,s=UI(e),{host:o,port:a}=t2(e),l=a===null?"":`:${a}`,c={url:`${s}//${o}${l}/`},u=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){k(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),k(pn(c,r.config.emulator)&&pn(u,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=c,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,ur(o)?(wc(`${s}//${o}${l}`),bc("Auth",!0)):i||n2()}function UI(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function t2(n){let e=UI(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:aI(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:aI(o)}}}function aI(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function n2(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var ua=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Jn("not implemented")}_getIdTokenResponse(e){return Jn("not implemented")}_linkToIdToken(e,t){return Jn("not implemented")}_getReauthenticationResolver(e){return Jn("not implemented")}};async function r2(n,e){return er(n,"POST","/v1/accounts:signUp",e)}async function i2(n,e){return ha(n,"POST","/v1/accounts:signInWithPassword",Sr(n,e))}async function s2(n,e){return ha(n,"POST","/v1/accounts:signInWithEmailLink",Sr(n,e))}async function o2(n,e){return ha(n,"POST","/v1/accounts:signInWithEmailLink",Sr(n,e))}var da=class n extends ua{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new n(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Mg(e,t,"signInWithPassword",i2,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return s2(e,{email:this._email,oobCode:this._password});default:bn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":let r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Mg(e,r,"signUpPassword",r2,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return o2(e,{idToken:t,email:this._email,oobCode:this._password});default:bn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};async function yg(n,e){return ha(n,"POST","/v1/accounts:signInWithIdp",Sr(n,e))}function a2(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function l2(n){let e=Zi(Ji(n)).link,t=e?Zi(Ji(e)).deep_link_id:null,r=Zi(Ji(n)).deep_link_id;return(r?Zi(Ji(r)).link:null)||r||t||e||n}var bu=class n{constructor(e){let t=Zi(Ji(e)),r=t.apiKey??null,i=t.oobCode??null,s=a2(t.mode??null);k(r&&i&&s,"argument-error"),this.apiKey=r,this.operation=s,this.code=i,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){let t=l2(e);try{return new n(t)}catch{return null}}};var BI=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,r){return da._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){let i=bu.parseLink(r);return k(i,"argument-error"),da._fromEmailAndCode(t,i.code,i.tenantId)}}n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return n})(),Cu=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Ng=class extends Cu{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};async function HI(n,e){return ha(n,"POST","/v1/accounts:signUp",Sr(n,e))}var Dr=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){let s=await Cr._fromIdTokenResponse(e,r,i),o=lI(r);return new n({user:s,providerId:o,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);let i=lI(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})}};function lI(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}async function zg(n){if(Je(n.app))return Promise.reject(En(n));let e=Tr(n);if(await e._initializationPromise,e.currentUser?.isAnonymous)return new Dr({user:e.currentUser,providerId:null,operationType:"signIn"});let t=await HI(e,{returnSecureToken:!0}),r=await Dr._fromIdTokenResponse(e,"signIn",t,!0);return await e._updateCurrentUser(r.user),r}var Rg=class n extends Wt{constructor(e,t,r,i){super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function $I(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Rg._fromErrorAndOperation(n,s,e,r):s})}async function c2(n,e,t=!1){let r=await ys(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Dr._forOperation(n,"link",r)}async function u2(n,e,t=!1){let{auth:r}=n;if(Je(r.app))return Promise.reject(En(r));let i="reauthenticate";try{let s=await ys(n,$I(r,i,e,n),t);k(s.idToken,r,"internal-error");let o=Hg(s.idToken);k(o,r,"internal-error");let{sub:a}=o;return k(n.uid===a,r,"user-mismatch"),Dr._forOperation(n,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&bn(r,"user-mismatch"),s}}async function zI(n,e,t=!1){if(Je(n.app))return Promise.reject(En(n));let r="signIn",i=await $I(n,r,e),s=await Dr._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(s.user),s}async function WI(n,e){return zI(Tr(n),e)}async function GI(n){let e=Tr(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Wg(n,e,t){if(Je(n.app))return Promise.reject(En(n));let r=Tr(n),o=await Mg(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",HI,"EMAIL_PASSWORD_PROVIDER").catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&GI(n),l}),a=await Dr._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function Gg(n,e,t){return Je(n.app)?Promise.reject(En(n)):WI(Le(n),BI.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&GI(n),r})}async function d2(n,e){return er(n,"POST","/v1/accounts:update",e)}async function qg(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;let r=Le(n),s={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},o=await ys(r,d2(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;let a=r.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function qI(n,e,t,r){return Le(n).onIdTokenChanged(e,t,r)}function KI(n,e,t){return Le(n).beforeAuthStateChanged(e,t)}function Kg(n,e,t,r){return Le(n).onAuthStateChanged(e,t,r)}function Yg(n){return Le(n).signOut()}var Iu="__sak";var Du=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Iu,"1"),this.storage.removeItem(Iu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var f2=1e3,h2=10,p2=(()=>{class n extends Du{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=kI(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&t(r,s,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,l,c)=>{this.notifyListeners(a,c)});return}let i=t.key;r?this.detachListener():this.stopPolling();let s=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);qL()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,h2):s()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},f2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,r){await super._set(t,r),this.localCache[t]=JSON.stringify(r)}async _get(t){let r=await super._get(t);return this.localCache[t]=JSON.stringify(r),r}async _remove(t){await super._remove(t),delete this.localCache[t]}}return n.type="LOCAL",n})(),YI=p2;var m2=(()=>{class n extends Du{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),Qg=m2;function g2(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}var y2=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(s=>s.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){let r=t,{eventId:i,eventType:s,data:o}=r.data,a=this.handlersMap[s];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let l=Array.from(a).map(async u=>u(r.origin,o)),c=await g2(l);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:c})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function QI(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var kg=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{let c=QI("",20);i.port1.start();let u=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(d){let f=d;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(u),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(f.data.response);break;default:clearTimeout(u),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}};function wn(){return window}function _2(n){wn().location.href=n}function ZI(){return typeof wn().WorkerGlobalScope<"u"&&typeof wn().importScripts=="function"}async function v2(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function E2(){return navigator?.serviceWorker?.controller||null}function w2(){return ZI()?self:null}var JI="firebaseLocalStorageDb",b2=1,Su="firebaseLocalStorage",XI="fbase_key",mi=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function Au(n,e){return n.transaction([Su],e?"readwrite":"readonly").objectStore(Su)}function C2(){let n=indexedDB.deleteDatabase(JI);return new mi(n).toPromise()}function Pg(){let n=indexedDB.open(JI,b2);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(Su,{keyPath:XI})}catch(i){t(i)}}),n.addEventListener("success",async()=>{let r=n.result;r.objectStoreNames.contains(Su)?e(r):(r.close(),await C2(),e(await Pg()))})})}async function cI(n,e,t){let r=Au(n,!0).put({[XI]:e,value:t});return new mi(r).toPromise()}async function I2(n,e){let t=Au(n,!1).get(e),r=await new mi(t).toPromise();return r===void 0?null:r.value}function uI(n,e){let t=Au(n,!0).delete(e);return new mi(t).toPromise()}var D2=800,S2=3,T2=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Pg(),this.db)}async _withRetries(t){let r=0;for(;;)try{let i=await this._openDb();return await t(i)}catch(i){if(r++>S2)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ZI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=y2._getInstance(w2()),this.receiver._subscribe("keyChanged",async(t,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(t,r)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await v2(),!this.activeServiceWorker)return;this.sender=new kg(this.activeServiceWorker);let t=await this.sender._send("ping",{},800);t&&t[0]?.fulfilled&&t[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||E2()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;let t=await Pg();return await cI(t,Iu,"1"),await uI(t,Iu),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,r){return this._withPendingWrite(async()=>(await this._withRetries(i=>cI(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)))}async _get(t){let r=await this._withRetries(i=>I2(i,t));return this.localCache[t]=r,r}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(r=>uI(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){let t=await this._withRetries(s=>{let o=Au(s,!1).getAll();return new mi(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:s,value:o}of t)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),D2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),eD=T2;var K6=FI("rcb"),Y6=new pi(3e4,6e4);function x2(n,e){return e?Xn(e):(k(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var fa=class extends ua{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return yg(e,this._buildIdpRequest())}_linkToIdToken(e,t){return yg(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return yg(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function A2(n){return zI(n.auth,new fa(n),n.bypassAuthState)}function M2(n){let{auth:e,user:t}=n;return k(t,e,"internal-error"),u2(t,new fa(n),n.bypassAuthState)}async function N2(n){let{auth:e,user:t}=n;return k(t,e,"internal-error"),c2(t,new fa(n),n.bypassAuthState)}var Og=class{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){let{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let l={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return A2;case"linkViaPopup":case"linkViaRedirect":return N2;case"reauthViaPopup":case"reauthViaRedirect":return M2;default:bn(this.auth,"internal-error")}}resolve(e){Ir(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ir(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var Q6=new pi(2e3,1e4);var R2="pendingRedirect",pu=new Map,Fg=class extends Og{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=pu.get(this.auth._key());if(!e){try{let r=await k2(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}pu.set(this.auth._key(),e)}return this.bypassAuthState||pu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}};async function k2(n,e){let t=F2(e),r=O2(n);if(!await r._isAvailable())return!1;let i=await r._get(t)==="true";return await r._remove(t),i}function P2(n,e){pu.set(n._key(),e)}function O2(n){return Xn(n._redirectPersistence)}function F2(n){return hu(R2,n.config.apiKey,n.name)}async function L2(n,e,t=!1){if(Je(n.app))return Promise.reject(En(n));let r=Tr(n),i=x2(r,e),o=await new Fg(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}var V2=10*60*1e3,Lg=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!j2(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!tD(e)){let r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(hi(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=V2&&this.cachedEventUids.clear(),this.cachedEventUids.has(dI(e))}saveEventToCache(e){this.cachedEventUids.add(dI(e)),this.lastProcessedEventTime=Date.now()}};function dI(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function tD({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function j2(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return tD(n);default:return!1}}async function U2(n,e={}){return er(n,"GET","/v1/projects",e)}var B2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,H2=/^https?/;async function $2(n){if(n.config.emulator)return;let{authorizedDomains:e}=await U2(n);for(let t of e)try{if(z2(t))return}catch{}bn(n,"unauthorized-domain")}function z2(n){let e=vg(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!H2.test(t))return!1;if(B2.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var W2=new pi(3e4,6e4);function fI(){let n=wn().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function G2(n){return new Promise((e,t)=>{function r(){fI(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{fI(),t(hi(n,"network-request-failed"))},timeout:W2.get()})}if(wn().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(wn().gapi?.load)r();else{let i=FI("iframefcb");return wn()[i]=()=>{gapi.load?r():t(hi(n,"network-request-failed"))},OI(`${JL()}?onload=${i}`).catch(s=>t(s))}}).catch(e=>{throw mu=null,e})}var mu=null;function q2(n){return mu=mu||G2(n),mu}var K2=new pi(5e3,15e3),Y2="__/auth/iframe",Q2="emulator/auth/iframe",Z2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},J2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function X2(n){let e=n.config;k(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?Bg(e,Q2):`https://${n.config.authDomain}/${Y2}`,r={apiKey:e.apiKey,appName:n.name,v:pr},i=J2.get(n.config.apiHost);i&&(r.eid=i);let s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${ii(r).slice(1)}`}async function eV(n){let e=await q2(n),t=wn().gapi;return k(t,n,"internal-error"),e.open({where:document.body,url:X2(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Z2,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});let o=hi(n,"network-request-failed"),a=wn().setTimeout(()=>{s(o)},K2.get());function l(){wn().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}var tV={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},nV=500,rV=600,iV="_blank",sV="http://localhost",Tu=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function oV(n,e,t,r=nV,i=rV){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",l=H(D({},tV),{width:r.toString(),height:i.toString(),top:s,left:o}),c=We().toLowerCase();t&&(a=xI(c)?iV:t),SI(c)&&(e=e||sV,l.scrollbars="yes");let u=Object.entries(l).reduce((f,[h,y])=>`${f}${h}=${y},`,"");if(GL(c)&&a!=="_self")return aV(e||"",a),new Tu(null);let d=window.open(e||"",a,u);k(d,n,"popup-blocked");try{d.focus()}catch{}return new Tu(d)}function aV(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var lV="__/auth/handler",cV="emulator/auth/handler",uV=encodeURIComponent("fac");async function hI(n,e,t,r,i,s){k(n.config.authDomain,n,"auth-domain-config-required"),k(n.config.apiKey,n,"invalid-api-key");let o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:pr,eventId:i};if(e instanceof Cu){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",Do(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[u,d]of Object.entries(s||{}))o[u]=d}if(e instanceof Ng){let u=e.getScopes().filter(d=>d!=="");u.length>0&&(o.scopes=u.join(","))}n.tenantId&&(o.tid=n.tenantId);let a=o;for(let u of Object.keys(a))a[u]===void 0&&delete a[u];let l=await n._getAppCheckToken(),c=l?`#${uV}=${encodeURIComponent(l)}`:"";return`${dV(n)}?${ii(a).slice(1)}${c}`}function dV({config:n}){return n.emulator?Bg(n,cV):`https://${n.authDomain}/${lV}`}var _g="webStorageSupport",Vg=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Qg,this._completeRedirectFn=L2,this._overrideRedirectResult=P2}async _openPopup(e,t,r,i){Ir(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");let s=await hI(e,t,r,vg(),i);return oV(e,s,QI())}async _openRedirect(e,t,r,i){await this._originValidation(e);let s=await hI(e,t,r,vg(),i);return _2(s),new Promise(()=>{})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(Ir(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){let t=await eV(e),r=new Lg(e);return t.register("authEvent",i=>(k(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(_g,{type:_g},i=>{let s=i?.[0]?.[_g];s!==void 0&&t(!!s),bn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=$2(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return kI()||TI()||$g()}},nD=Vg;var pI="@firebase/auth",mI="1.12.0";var jg=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){k(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function fV(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function hV(n){hr(new Rt("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;k(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let l={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:PI(n)},c=new Sg(r,i,s,l);return e2(c,t),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),hr(new Rt("auth-internal",e=>{let t=Tr(e.getProvider("auth").getImmediate());return(r=>new jg(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),qt(pI,mI,fV(n)),qt(pI,mI,"esm2020")}var pV=5*60,mV=Ep("authIdTokenMaxAge")||pV,gI=null,gV=n=>async e=>{let t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>mV)return;let i=t?.token;gI!==i&&(gI=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Zg(n=mr()){let e=Ro(n,"auth");if(e.isInitialized())return e.getImmediate();let t=VI(n,{popupRedirectResolver:nD,persistence:[eD,YI,Qg]}),r=Ep("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=gV(s.toString());KI(t,o,()=>o(t.currentUser)),qI(t,a=>o(a))}}let i=_p("auth");return i&&jI(t,`http://${i}`),t}function yV(){return document.getElementsByTagName("head")?.[0]??document}QL({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let s=hi("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",yV().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});hV("Browser");var Mu=(()=>{class n{constructor(){this.ngZone=S(be),this.app=Sc().length>0?mr():ko(_n.firebase),this.auth=Zg(this.app),this.currentUser=O(null),this.isLoading=O(!0),this.error=O(null),this.isAuthenticated=$(()=>this.currentUser()!==null),Kg(this.auth,t=>{this.ngZone.run(()=>{t?this.currentUser.set({uid:t.uid,email:t.email,displayName:t.displayName,photoURL:t.photoURL}):this.currentUser.set(null),this.isLoading.set(!1)})})}async login(t,r){this.error.set(null),this.isLoading.set(!0);try{let i=await Gg(this.auth,t,r);return this.ngZone.run(()=>{this.currentUser.set({uid:i.user.uid,email:i.user.email,displayName:i.user.displayName,photoURL:i.user.photoURL}),this.isLoading.set(!1)}),!0}catch(i){return this.ngZone.run(()=>{this.handleAuthError(i),this.isLoading.set(!1)}),!1}}async register(t,r,i){this.error.set(null),this.isLoading.set(!0);try{let s=await Wg(this.auth,t,r);return await qg(s.user,{displayName:i}),this.ngZone.run(()=>{this.currentUser.set({uid:s.user.uid,email:s.user.email,displayName:i,photoURL:s.user.photoURL}),this.isLoading.set(!1)}),!0}catch(s){return this.ngZone.run(()=>{this.handleAuthError(s),this.isLoading.set(!1)}),!1}}async logout(){try{await Yg(this.auth),this.ngZone.run(()=>{this.currentUser.set(null)})}catch(t){console.error("Error al cerrar sesi\xF3n:",t)}}async loginAsDemo(){this.error.set(null),this.isLoading.set(!0);try{let t=await zg(this.auth);return this.currentUser.set({uid:t.user.uid,email:"demo@assetguard.com",displayName:"Usuario Demo",photoURL:null}),this.isLoading.set(!1),!0}catch(t){return console.error("Error en acceso demo:",t),this.currentUser.set({uid:"demo-user-local",email:"demo@assetguard.com",displayName:"Usuario Demo (Offline)",photoURL:null}),this.isLoading.set(!1),!0}}handleAuthError(t){let r=t.code,i="Error desconocido. Intenta de nuevo.";switch(r){case"auth/invalid-email":i="El correo electr\xF3nico no es v\xE1lido.";break;case"auth/user-disabled":i="Esta cuenta ha sido deshabilitada.";break;case"auth/user-not-found":i="No existe una cuenta con este correo.";break;case"auth/wrong-password":i="Contrase\xF1a incorrecta.";break;case"auth/invalid-credential":i="Credenciales inv\xE1lidas. Verifica tu correo y contrase\xF1a.";break;case"auth/email-already-in-use":i="Ya existe una cuenta con este correo.";break;case"auth/weak-password":i="La contrase\xF1a debe tener al menos 6 caracteres.";break;case"auth/too-many-requests":i="Demasiados intentos. Espera un momento.";break}this.error.set(i)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var rD=(()=>{class n{constructor(){this.title="",this.subtitle="",this.value="",this.unit="",this.status="neutral",this.statusText="",this.footerLabel="",this.footerValue="",this.trendLabel="",this.containerClasses=$(()=>"bg-white dark:bg-slate-900/60 border-slate-200 dark:border-slate-700/60"),this.badgeClasses=$(()=>{let t="inline-flex items-center gap-1.5 rounded-full text-[10px] font-bold px-2.5 py-1 border backdrop-blur-sm ";switch(this.status){case"success":return t+"bg-emerald-50 text-emerald-700 border-emerald-200 dark:bg-emerald-500/10 dark:text-emerald-300 dark:border-emerald-500/40";case"warning":return t+"bg-amber-50 text-amber-700 border-amber-200 dark:bg-amber-500/10 dark:text-amber-300 dark:border-amber-500/40";case"danger":return t+"bg-red-50 text-red-700 border-red-200 dark:bg-red-500/10 dark:text-red-300 dark:border-red-500/40";case"info":return t+"bg-sky-50 text-sky-700 border-sky-200 dark:bg-sky-500/10 dark:text-sky-300 dark:border-sky-500/40";default:return t+"bg-slate-50 text-slate-600 border-slate-200 dark:bg-slate-800 dark:text-slate-400 dark:border-slate-700"}}),this.dotColor=$(()=>{switch(this.status){case"success":return"bg-emerald-500";case"warning":return"bg-amber-500";case"danger":return"bg-red-500";case"info":return"bg-sky-500";default:return"bg-slate-400"}}),this.trendClass=$(()=>this.trendLabel.includes("+")&&this.status==="success"?"text-emerald-600 dark:text-emerald-400 font-medium":this.trendLabel.includes("-")&&this.status==="danger"?"text-red-600 dark:text-red-400 font-medium":this.status==="warning"?"text-amber-600 dark:text-amber-400 font-medium":"text-emerald-600 dark:text-emerald-400 font-medium")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Pe({type:n,selectors:[["app-kpi-card"]],inputs:{title:"title",subtitle:"subtitle",value:"value",unit:"unit",status:"status",statusText:"statusText",footerLabel:"footerLabel",footerValue:"footerValue",trendLabel:"trendLabel"},decls:23,vars:15,consts:[[1,"h-full","rounded-2xl","border","shadow-lg","p-4","flex","flex-col","gap-3","transition-all","hover:shadow-xl","relative","overflow-hidden","group",3,"ngClass"],[1,"absolute","inset-0","bg-gradient-to-br","from-white/5","to-transparent","pointer-events-none"],[1,"flex","items-start","justify-between","relative","z-10"],[1,"text-sm","font-medium","text-slate-500","dark:text-slate-300"],[1,"text-xs","text-slate-400","mt-0.5"],[1,"flex","items-baseline","gap-2","mt-1","relative","z-10"],[1,"text-3xl","font-bold","tracking-tight","text-slate-800","dark:text-slate-50"],[1,"text-xs","font-bold","text-slate-400","uppercase","tracking-wide"],[1,"mt-auto","flex","items-center","justify-between","text-xs","text-slate-500","dark:text-slate-400","pt-3","border-t","border-slate-100","dark:border-slate-700/50","relative","z-10"],[1,"text-slate-700","dark:text-slate-200","font-medium"]],template:function(r,i){r&1&&(p(0,"article",0),E(1,"div",1),p(2,"header",2)(3,"div")(4,"h2",3),g(5),m(),p(6,"p",4),g(7),m()(),p(8,"span"),E(9,"span"),g(10),m()(),p(11,"div",5)(12,"span",6),g(13),m(),p(14,"span",7),g(15),m()(),p(16,"footer",8)(17,"span"),g(18),p(19,"span",9),g(20),m()(),p(21,"span"),g(22),m()()()),r&2&&(le("ngClass",i.containerClasses()),_(5),Q(i.title),_(2),Q(i.subtitle),_(),_e(i.badgeClasses()),_(),_e("h-1.5 w-1.5 rounded-full "+i.dotColor()),_(),F(" ",i.statusText," "),_(3),Q(i.value),_(2),Q(i.unit),_(3),F("",i.footerLabel,": "),_(2),Q(i.footerValue),_(),_e(i.trendClass()),_(),Q(i.trendLabel))},dependencies:[xe,co],encapsulation:2})}}return n})();var _V=(n,e)=>e.id;function vV(n,e){if(n&1&&(p(0,"span",25),g(1),m()),n&2){let t=T();_(),no(" ",t.activeFailures().length," ",t.activeFailures().length===1?"unidad":"unidades"," en atenci\xF3n ")}}function EV(n,e){if(n&1){let t=ve();p(0,"tr",34)(1,"td",29)(2,"div",60),E(3,"div"),p(4,"div")(5,"div",61),g(6),m(),p(7,"span"),g(8),m()()()(),p(9,"td",30)(10,"div",62),g(11),Mt(12,"date"),m(),p(13,"div",63),g(14),m()(),p(15,"td",30)(16,"span"),E(17,"span"),g(18),m()(),p(19,"td",31)(20,"div",64)(21,"span",65),g(22),m(),p(23,"span"),g(24),m()()(),p(25,"td",66)(26,"button",67),A("click",function(){let i=j(t).$implicit,s=T();return U(s.selectAsset(i.economico))}),g(27," Ver Detalle "),E(28,"i",68),m()()()}if(n&2){let t=e.$implicit,r=T();_(3),_e("w-1.5 h-10 rounded-full "+r.getPriorityColor(t.prioridad)),_(3),Q(t.economico),_(),_e("text-[10px] font-bold uppercase px-1.5 py-0.5 rounded border "+r.getPriorityBadgeClass(t.prioridad)),_(),F(" ",t.prioridad," "),_(3),F(" ",dn(12,18,t.fechaIngreso,"dd MMM, HH:mm")," "),_(2),le("title",t.falla),_(),F(" ",t.falla," "),_(2),_e("inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-[10px] font-bold uppercase border "+r.getStatusBadgeClass(t)),_(),_e("w-1.5 h-1.5 rounded-full "+r.getStatusDotClass(t)),_(),F(" ",t.estatus==="Abierta"?"Diagn\xF3stico":"En Reparaci\xF3n"," "),_(4),F(" ",r.getTimeInShop(t.fechaIngreso).text," "),_(),_e("text-[10px] font-bold uppercase "+r.getTimeInShop(t.fechaIngreso).color),_(),F(" ",r.getTimeInShop(t.fechaIngreso).label," ")}}function wV(n,e){n&1&&(p(0,"tr")(1,"td",69)(2,"div",70)(3,"div",71),E(4,"i",72),m(),p(5,"h3",73),g(6,"Sin unidades en taller"),m(),p(7,"p",74),g(8,"La flota opera al 100% de capacidad."),m()()()())}function bV(n,e){if(n&1&&(p(0,"div",59)(1,"div",75),E(2,"i"),m(),p(3,"p",76),g(4),m(),p(5,"div",77)(6,"span",78),g(7),m(),p(8,"span",79),g(9),m()()()),n&2){let t=e.$implicit;_(),le("ngClass",t.color),_(),_e("fas "+t.icon),_(2),Q(t.title),_(3),Q(t.time),_(2),Q(t.user)}}var iD=(()=>{class n{constructor(){this.dataService=S(pt),this.kpi=this.dataService.kpiData,this.safetyStats=this.dataService.safetyStats,this.fleetAvailability=this.dataService.fleetAvailability,this.activeFailures=$(()=>this.dataService.forkliftFailures().filter(t=>t.estatus!=="Cerrada")),this.operativeCount=$(()=>this.dataService.assets().filter(t=>t.status.name==="Operativo").length),this.totalAssets=$(()=>this.dataService.assets().length),this.lastUpdate=this.dataService.lastUpdate,this.availabilityStatus=$(()=>{let t=this.fleetAvailability().percentage;return t>=95?"success":t>=85?"warning":"danger"}),this.availabilityStatusText=$(()=>{let t=this.fleetAvailability().percentage;return t>=95?"Meta Cumplida":t>=85?"En Riesgo":"Cr\xEDtico"}),this.availabilityGap=$(()=>{let r=this.fleetAvailability().percentage-95;return`Brecha: ${r>0?"+":""}${r.toFixed(0)} pts`}),this.fleetCapacityLabel=$(()=>{let t=this.totalAssets();if(t===0)return"0% capacidad";let r=this.operativeCount();return`${Math.round(r/t*100)}% de capacidad operativa`}),this.formattedCost=$(()=>{let t=this.kpi().totalCostMonth;return t===0?"Sin gastos":"$"+t.toLocaleString("en-US")}),this.costUnit=$(()=>this.kpi().totalCostMonth===0?"registrados este mes":"USD"),this.budgetStatus=$(()=>{let t=this.kpi().totalCostMonth,r=this.kpi().budgetMonth;return t===0?"neutral":t>r?"danger":t>r*.9?"warning":"success"}),this.budgetStatusText=$(()=>{let t=this.kpi().totalCostMonth,r=this.kpi().budgetMonth;return t===0?"Presupuesto Intacto":t>r?"Excedido":"Bajo presupuesto"}),this.budgetVariance=$(()=>{let t=this.kpi().totalCostMonth,r=this.kpi().budgetMonth;if(t===0)return"Disponible: 100%";let i=(t-r)/r*100;return i>0?`+${i.toFixed(1)}% vs Presupuesto`:`${i.toFixed(1)}% vs Presupuesto`}),this.recentEvents=$(()=>[{title:"Unidad 35526 ingres\xF3 a Taller",time:"Hace 15 min",user:"Op. M\xF3vil",color:"bg-red-500",icon:"fa-exclamation-circle"},{title:'Refacci\xF3n "Kit Sellos" solicitada',time:"Hace 45 min",user:"Toyota Tech",color:"bg-blue-500",icon:"fa-box-open"},{title:"Turno Matutino inici\xF3 operaciones",time:"06:00 AM",user:"Sistema",color:"bg-emerald-500",icon:"fa-check"}])}selectAsset(t){window.dispatchEvent(new CustomEvent("asset-selected",{detail:t}))}filterByIssue(t){alert(`[DEMO] Filtrando activos con fallas en: ${t}`)}downloadReport(){window.print()}getTimeInShop(t){let r=new Date(t).getTime(),i=new Date().getTime(),s=Math.floor((i-r)/(1e3*60*60)),o="",a="",l="";return s<1?(o="< 1h",a="A tiempo",l="text-emerald-500"):s<24?(o=`${s}h`,a="En proceso",l="text-blue-500"):(o=`${Math.floor(s/24)}d ${s%24}h`,a="Demorado",l="text-amber-500"),s>48&&(a="Cr\xEDtico",l="text-red-500"),{text:o,label:a,color:l}}getStatusBadgeClass(t){return t.estatus==="Abierta"?"bg-amber-50 text-amber-700 border-amber-200 dark:bg-amber-500/10 dark:text-amber-400 dark:border-amber-500/20":"bg-blue-50 text-blue-700 border-blue-200 dark:bg-blue-500/10 dark:text-blue-400 dark:border-blue-500/20"}getStatusDotClass(t){return t.estatus==="Abierta"?"bg-amber-500":"bg-blue-500"}getPriorityColor(t){return t==="Alta"?"bg-red-500":t==="Media"?"bg-amber-400":"bg-blue-400"}getPriorityBadgeClass(t){return t==="Alta"?"bg-red-50 text-red-600 border-red-200 dark:bg-red-900/20 dark:text-red-300 dark:border-red-800":t==="Media"?"bg-amber-50 text-amber-600 border-amber-200 dark:bg-amber-900/20 dark:text-amber-300 dark:border-amber-800":"bg-blue-50 text-blue-600 border-blue-200 dark:bg-blue-900/20 dark:text-blue-300 dark:border-blue-800"}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Pe({type:n,selectors:[["app-dashboard"]],decls:100,vars:25,consts:[[1,"space-y-6","pb-10"],[1,"flex","flex-col","md:flex-row","md:items-center","justify-between","gap-4","mb-2"],[1,"text-2xl","font-black","text-slate-800","dark:text-white","tracking-tight"],[1,"text-sm","text-slate-500","dark:text-slate-400","flex","items-center","gap-2"],[1,"relative","flex","h-2.5","w-2.5"],[1,"animate-ping","absolute","inline-flex","h-full","w-full","rounded-full","bg-emerald-400","opacity-75"],[1,"relative","inline-flex","rounded-full","h-2.5","w-2.5","bg-emerald-500"],[1,"font-bold","text-slate-700","dark:text-slate-300"],[1,"mx-1","text-slate-300"],[1,"far","fa-clock","text-slate-400"],[1,"text-xs"],[1,"flex","gap-2"],[1,"bg-white","dark:bg-slate-800","border","border-slate-200","dark:border-slate-700","text-slate-600","dark:text-slate-300","px-4","py-2","rounded-lg","text-xs","font-bold","uppercase","hover:bg-slate-50","transition","shadow-sm",3,"click"],[1,"fas","fa-download","mr-2"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-4","gap-4"],["title","Seguridad","subtitle","D\xEDas sin incidentes","unit","d\xEDas","status","success","statusText","En buen nivel","footerLabel","Meta Hist\xF3rica",3,"value","footerValue","trendLabel"],["title","Disponibilidad","subtitle","Flota operativa efectiva","unit","%","footerLabel","Meta 95%","footerValue","",3,"value","status","statusText","trendLabel"],["title","Flota Activa","subtitle","Estado actual de montacargas","status","info","statusText","Vista general","footerLabel","En Taller",3,"value","unit","footerValue","trendLabel"],["title","Costo Mensual","subtitle","Mantenimiento y refacciones","footerLabel","Presupuesto",3,"value","unit","status","statusText","footerValue","trendLabel"],[1,"grid","grid-cols-1","lg:grid-cols-3","gap-6"],[1,"lg:col-span-2","bg-white","dark:bg-[#1e293b]","rounded-2xl","shadow-sm","border","border-slate-200","dark:border-slate-700/60","flex","flex-col","overflow-hidden","h-[500px]"],[1,"p-5","border-b","border-slate-100","dark:border-slate-700/50","flex","justify-between","items-center","bg-slate-50/50","dark:bg-slate-800/20"],[1,"font-bold","text-slate-800","dark:text-white","flex","items-center","gap-2"],[1,"fas","fa-wrench","text-slate-400"],[1,"text-xs","text-slate-500","mt-1"],[1,"text-xs","font-bold","text-red-600","bg-red-50","dark:bg-red-500/10","px-3","py-1","rounded-full","border","border-red-100","dark:border-red-500/20","animate-pulse"],[1,"flex-1","overflow-y-auto","custom-scroll","relative"],[1,"w-full","text-left","text-sm"],[1,"bg-slate-50","dark:bg-slate-800","text-slate-500","font-bold","text-xs","uppercase","sticky","top-0","z-10","shadow-sm"],[1,"p-4","pl-6"],[1,"p-4"],[1,"p-4","text-center"],[1,"p-4","text-right","pr-6"],[1,"divide-y","divide-slate-100","dark:divide-slate-700/50"],[1,"hover:bg-slate-50","dark:hover:bg-slate-800/50","transition-colors","group"],[1,"flex","flex-col","gap-6"],[1,"bg-white","dark:bg-[#1e293b]","rounded-2xl","shadow-sm","border","border-slate-200","dark:border-slate-700/60","p-5"],[1,"flex","justify-between","items-center","mb-4"],[1,"font-bold","text-slate-800","dark:text-white","text-sm"],[1,"text-[10px]","font-bold","text-slate-400","uppercase","bg-slate-100","dark:bg-slate-800","px-2","py-1","rounded"],[1,"space-y-3"],[1,"w-full","text-left","p-3","rounded-xl","bg-slate-50","dark:bg-slate-800/50","border","border-slate-100","dark:border-slate-700","group","hover:border-red-200","transition-colors","cursor-pointer","relative",3,"click"],[1,"flex","justify-between","items-start","mb-2"],[1,"text-xs","font-bold","text-slate-700","dark:text-slate-200","group-hover:text-[#ce1126]","transition-colors"],[1,"text-xs","font-black","text-red-500"],[1,"w-full","bg-slate-200","dark:bg-slate-700","h-1.5","rounded-full","overflow-hidden","mb-3"],[1,"bg-red-500","h-full","w-[45%]"],[1,"flex","justify-between","items-center"],[1,"text-[10px]","text-slate-400","font-medium"],[1,"text-[10px]","bg-white","dark:bg-slate-700","border","border-slate-200","dark:border-slate-600","px-3","py-1.5","rounded-lg","text-slate-600","group-hover:text-[#ce1126]","group-hover:border-red-100","font-bold","shadow-sm","transition-all","group-hover:shadow-md","flex","items-center","gap-1"],[1,"fas","fa-arrow-right","text-[9px]"],[1,"w-full","text-left","p-3","rounded-xl","bg-slate-50","dark:bg-slate-800/50","border","border-slate-100","dark:border-slate-700","group","hover:border-amber-200","transition-colors","cursor-pointer","relative",3,"click"],[1,"text-xs","font-bold","text-slate-700","dark:text-slate-200","group-hover:text-amber-600","transition-colors"],[1,"text-xs","font-black","text-amber-500"],[1,"bg-amber-500","h-full","w-[20%]"],[1,"text-[10px]","bg-white","dark:bg-slate-700","border","border-slate-200","dark:border-slate-600","px-3","py-1.5","rounded-lg","text-slate-600","group-hover:text-amber-600","group-hover:border-amber-100","font-bold","shadow-sm","transition-all","group-hover:shadow-md","flex","items-center","gap-1"],[1,"flex-1","bg-white","dark:bg-[#1e293b]","rounded-2xl","shadow-sm","border","border-slate-200","dark:border-slate-700/60","p-5","flex","flex-col"],[1,"text-[10px]","font-bold","text-[#ce1126]","hover:underline"],[1,"relative","pl-4","border-l","border-slate-200","dark:border-slate-700","space-y-6"],[1,"relative","group"],[1,"flex","items-center","gap-3"],[1,"font-black","text-slate-800","dark:text-white","text-base"],[1,"text-xs","text-slate-500","font-medium"],[1,"text-sm","font-bold","text-slate-700","dark:text-slate-300","max-w-[220px]","truncate","cursor-help",3,"title"],[1,"flex","flex-col","items-center"],[1,"font-mono","text-sm","font-bold","text-slate-700","dark:text-slate-200"],[1,"p-4","pr-6","text-right"],[1,"bg-white","dark:bg-slate-700","border","border-slate-200","dark:border-slate-600","text-slate-600","dark:text-slate-200","hover:text-[#ce1126]","hover:border-[#ce1126]","px-3","py-1.5","rounded-lg","text-xs","font-bold","transition","shadow-sm","group-hover:shadow-md",3,"click"],[1,"fas","fa-arrow-right","ml-1"],["colspan","5",1,"py-20","text-center"],[1,"flex","flex-col","items-center","justify-center","opacity-60"],[1,"w-16","h-16","bg-emerald-50","dark:bg-emerald-500/10","rounded-full","flex","items-center","justify-center","mb-4","border","border-emerald-100"],[1,"fas","fa-check","text-2xl","text-emerald-500"],[1,"text-slate-800","dark:text-white","font-bold","text-lg"],[1,"text-slate-500","text-sm","mt-1","mb-4"],[1,"absolute","-left-[25px]","top-0","h-7","w-7","rounded-full","border-2","border-white","dark:border-slate-900","flex","items-center","justify-center","text-[10px]","text-white","shadow-sm","transition-transform","group-hover:scale-110",3,"ngClass"],[1,"text-xs","font-bold","text-slate-700","dark:text-slate-300","leading-tight"],[1,"flex","items-center","gap-2","mt-1"],[1,"text-[10px]","text-slate-400","font-mono"],[1,"text-[10px]","bg-slate-100","dark:bg-slate-800","px-1.5","py-0.5","rounded","text-slate-500","font-bold","uppercase"]],template:function(r,i){r&1&&(p(0,"div",0)(1,"div",1)(2,"div")(3,"h1",2),g(4,"Centro de Monitoreo (NOC)"),m(),p(5,"p",3)(6,"span",4),E(7,"span",5)(8,"span",6),m(),p(9,"span",7),g(10,"Operaci\xF3n Estable"),m(),p(11,"span",8),g(12,"|"),m(),E(13,"i",9),p(14,"span",10),g(15),Mt(16,"date"),m()()(),p(17,"div",11)(18,"button",12),A("click",function(){return i.downloadReport()}),E(19,"i",13),g(20," Reporte PDF "),m()()(),p(21,"div",14),E(22,"app-kpi-card",15)(23,"app-kpi-card",16)(24,"app-kpi-card",17)(25,"app-kpi-card",18),Mt(26,"currency"),m(),p(27,"div",19)(28,"div",20)(29,"div",21)(30,"div")(31,"h3",22),E(32,"i",23),g(33," Taller en Vivo "),m(),p(34,"p",24),g(35,"\xD3rdenes activas y tiempos de respuesta"),m()(),re(36,vV,2,2,"span",25),m(),p(37,"div",26)(38,"table",27)(39,"thead",28)(40,"tr")(41,"th",29),g(42,"Prioridad / Unidad"),m(),p(43,"th",30),g(44,"Falla Reportada"),m(),p(45,"th",30),g(46,"Estado"),m(),p(47,"th",31),g(48,"SLA (Tiempo)"),m(),p(49,"th",32),g(50,"Acci\xF3n"),m()()(),p(51,"tbody",33),Qe(52,EV,29,21,"tr",34,_V,!1,wV,9,0,"tr"),m()()()(),p(55,"div",35)(56,"div",36)(57,"div",37)(58,"h3",38),g(59,"Top 3 Problemas"),m(),p(60,"span",39),g(61,"\xDAltimos 30 d\xEDas"),m()(),p(62,"div",40)(63,"button",41),A("click",function(){return i.filterByIssue("Hidr\xE1ulico")}),p(64,"div",42)(65,"span",43),g(66,"Sistema Hidr\xE1ulico"),m(),p(67,"span",44),g(68,"45%"),m()(),p(69,"div",45),E(70,"div",46),m(),p(71,"div",47)(72,"span",48),g(73,"12 incidentes reportados"),m(),p(74,"span",49),g(75," Ver equipos "),E(76,"i",50),m()()(),p(77,"button",51),A("click",function(){return i.filterByIssue("Frenos")}),p(78,"div",42)(79,"span",52),g(80,"Frenos / Desgaste"),m(),p(81,"span",53),g(82,"20%"),m()(),p(83,"div",45),E(84,"div",54),m(),p(85,"div",47)(86,"span",48),g(87,"8 incidentes reportados"),m(),p(88,"span",55),g(89," Ver equipos "),E(90,"i",50),m()()()()(),p(91,"div",56)(92,"div",37)(93,"h3",38),g(94,"Eventos Recientes"),m(),p(95,"button",57),g(96,"Ver todo"),m()(),p(97,"div",58),Qe(98,bV,10,6,"div",59,Zl),m()()()()()),r&2&&(_(15),F("Actualizado: ",dn(16,20,i.lastUpdate(),"HH:mm:ss"),""),_(7),le("value",i.safetyStats().daysWithoutAccident)("footerValue",i.safetyStats().record+" d\xEDas")("trendLabel","Faltan "+(i.safetyStats().record-i.safetyStats().daysWithoutAccident)+" para r\xE9cord"),_(),le("value",i.fleetAvailability().percentage)("status",i.availabilityStatus())("statusText",i.availabilityStatusText())("trendLabel",i.availabilityGap()),_(),le("value",i.operativeCount())("unit","de "+i.totalAssets())("footerValue",i.activeFailures().length+(i.activeFailures().length===1?" unidad":" unidades"))("trendLabel",i.fleetCapacityLabel()),_(),le("value",i.formattedCost())("unit",i.costUnit())("status",i.budgetStatus())("statusText",i.budgetStatusText())("footerValue",Xl(26,23,i.kpi().budgetMonth)||"$0")("trendLabel",i.budgetVariance()),_(11),ie(i.activeFailures().length>0?36:-1),_(16),Ze(i.activeFailures()),_(46),Ze(i.recentEvents()))},dependencies:[xe,co,uo,Wn,rD],encapsulation:2})}}return n})();var CV=(n,e)=>e.id;function IV(n,e){n&1&&(p(0,"div",26),E(1,"i",37),g(2," > 48h "),m())}function DV(n,e){n&1&&E(0,"i",32)}function SV(n,e){if(n&1&&(p(0,"div",33),g(1),Mt(2,"date"),m()),n&2){let t=T().$implicit;_(),F(" Desde: ",dn(2,1,t.statusSince,"dd MMM HH:mm")," ")}}function TV(n,e){if(n&1){let t=ve();p(0,"tr",24),A("click",function(){let i=j(t).$implicit,s=T();return U(s.selectAsset(i))}),p(1,"td",25),g(2),re(3,IV,3,0,"div",26),m(),p(4,"td",20)(5,"div",12),g(6),m(),p(7,"div",27),g(8),m()(),p(9,"td",28),E(10,"i",29),g(11),m(),p(12,"td",20)(13,"div",30)(14,"span"),E(15,"span",31),g(16),m(),re(17,DV,1,0,"i",32),m(),re(18,SV,3,4,"div",33),m(),p(19,"td",34),g(20),m(),p(21,"td",21)(22,"button",35),E(23,"i",36),m()()()}if(n&2){let t=e.$implicit,r=T();ye("hover:bg-slate-50",!r.isCriticalMaintenance(t))("border-transparent",!r.isCriticalMaintenance(t))("border-red-500",r.isCriticalMaintenance(t))("bg-red-50",r.isCriticalMaintenance(t)),_(2),F(" ",t.id," "),_(),ie(r.isCriticalMaintenance(t)?3:-1),_(3),no("",t.brand," ",t.model,""),_(2),F("SN: ",t.serial,""),_(3),F(" ",t.location," "),_(3),_e("inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-bold border "+t.status.color),_(2),F(" ",t.status.name," "),_(),ie(r.isCriticalMaintenance(t)?17:-1),_(),ie(t.status.name!=="Operativo"?18:-1),_(2),F(" ",t.supervisor||"N/A"," ")}}function xV(n,e){n&1&&(p(0,"tr")(1,"td",38),g(2,"No se encontraron activos."),m()())}var sD=(()=>{class n{constructor(){this.dataService=S(pt),this.filter=O(""),this.filteredAssets=$(()=>{let t=this.filter().toLowerCase();return this.dataService.assets().filter(r=>r.id.toLowerCase().includes(t)||r.brand.toLowerCase().includes(t)||r.serial.toLowerCase().includes(t))}),this.stats=$(()=>{let t=this.dataService.assets();return{total:t.length,operative:t.filter(r=>r.status.name==="Operativo").length,maintenance:t.filter(r=>r.status.name==="Taller").length,preventive:t.filter(r=>r.status.name==="Preventivo").length}})}selectAsset(t){window.dispatchEvent(new CustomEvent("asset-selected",{detail:t.id}))}isCriticalMaintenance(t){if(t.status.name!=="Taller"||!t.statusSince)return!1;let r=new Date(t.statusSince).getTime();return new Date().getTime()-r>1728e5}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Pe({type:n,selectors:[["app-asset-list"]],decls:49,vars:5,consts:[[1,"space-y-6"],[1,"grid","grid-cols-2","md:grid-cols-4","gap-4"],[1,"bg-white","p-4","rounded-xl","border","border-slate-200","shadow-sm"],[1,"text-xs","text-slate-500","uppercase","font-bold"],[1,"text-2xl","font-black","text-slate-800"],[1,"bg-white","p-4","rounded-xl","border-l-4","border-emerald-500","shadow-sm"],[1,"text-2xl","font-black","text-emerald-600"],[1,"bg-white","p-4","rounded-xl","border-l-4","border-red-500","shadow-sm"],[1,"text-2xl","font-black","text-red-600"],[1,"bg-white","p-4","rounded-xl","border-l-4","border-amber-500","shadow-sm"],[1,"text-2xl","font-black","text-amber-600"],[1,"flex","flex-col","md:flex-row","justify-between","items-center","gap-4","bg-white","p-4","rounded-xl","border","border-slate-200","shadow-sm"],[1,"font-bold","text-slate-700"],[1,"relative","w-full","md:w-64"],[1,"fas","fa-search","absolute","left-3","top-3","text-slate-400","text-xs"],["type","text","placeholder","Buscar por ID, Serie o Marca...",1,"w-full","pl-8","pr-4","py-2","bg-slate-50","border","border-slate-200","rounded-lg","text-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"input"],[1,"bg-white","rounded-xl","shadow-sm","border","border-slate-200","overflow-hidden"],[1,"overflow-x-auto"],[1,"w-full","text-sm","text-left"],[1,"bg-slate-50","text-slate-500","font-bold","text-xs","uppercase","border-b","border-slate-200"],[1,"p-4"],[1,"p-4","text-right"],[1,"divide-y","divide-slate-100"],[1,"transition-colors","group","cursor-pointer","border-l-4",3,"hover:bg-slate-50","border-transparent","border-red-500","bg-red-50"],[1,"transition-colors","group","cursor-pointer","border-l-4",3,"click"],[1,"p-4","font-black","text-slate-800"],[1,"mt-1","inline-flex","items-center","gap-1","text-[9px]","uppercase","font-bold","text-red-600","animate-pulse"],[1,"text-xs","text-slate-400","font-mono"],[1,"p-4","text-slate-600"],[1,"fas","fa-map-marker-alt","text-slate-300","mr-1"],[1,"flex","items-center","gap-2"],[1,"w-1.5","h-1.5","rounded-full","bg-current","mr-1.5"],["title","Atenci\xF3n requerida: Tiempo excedido",1,"fas","fa-exclamation-triangle","text-red-500","text-sm","animate-bounce"],[1,"text-[10px]","text-slate-400","mt-1","pl-1"],[1,"p-4","text-slate-600","text-xs"],[1,"text-slate-400","hover:text-blue-600","group-hover:translate-x-1","transition-transform"],[1,"fas","fa-arrow-right"],[1,"fas","fa-clock"],["colspan","6",1,"p-8","text-center","text-slate-400","italic"]],template:function(r,i){r&1&&(p(0,"div",0)(1,"div",1)(2,"div",2)(3,"p",3),g(4,"Total Flota"),m(),p(5,"p",4),g(6),m()(),p(7,"div",5)(8,"p",3),g(9,"Operativos"),m(),p(10,"p",6),g(11),m()(),p(12,"div",7)(13,"p",3),g(14,"En Taller"),m(),p(15,"p",8),g(16),m()(),p(17,"div",9)(18,"p",3),g(19,"Preventivo"),m(),p(20,"p",10),g(21),m()()(),p(22,"div",11)(23,"h2",12),g(24,"Inventario Detallado"),m(),p(25,"div",13),E(26,"i",14),p(27,"input",15),A("input",function(o){return i.filter.set(o.target.value)}),m()()(),p(28,"div",16)(29,"div",17)(30,"table",18)(31,"thead",19)(32,"tr")(33,"th",20),g(34,"ID Economico"),m(),p(35,"th",20),g(36,"Detalles"),m(),p(37,"th",20),g(38,"Ubicaci\xF3n"),m(),p(39,"th",20),g(40,"Estatus Actual"),m(),p(41,"th",20),g(42,"Supervisor"),m(),p(43,"th",21),g(44,"Acci\xF3n"),m()()(),p(45,"tbody",22),Qe(46,TV,24,20,"tr",23,CV,!1,xV,3,0,"tr"),m()()()()()),r&2&&(_(6),Q(i.stats().total),_(5),Q(i.stats().operative),_(5),Q(i.stats().maintenance),_(5),Q(i.stats().preventive),_(25),Ze(i.filteredAssets()))},dependencies:[xe,Wn],encapsulation:2})}}return n})();var mD=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(ne(Zr),ne(ar))};static \u0275dir=Oe({type:n})}return n})(),ty=(()=>{class n extends mD{static \u0275fac=(()=>{let t;return function(i){return(t||(t=$i(n)))(i||n)}})();static \u0275dir=Oe({type:n,features:[Tt]})}return n})(),Vu=new N("");var AV={provide:Vu,useExisting:an(()=>Ar),multi:!0};function MV(){let n=$n()?$n().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var NV=new N(""),Ar=(()=>{class n extends mD{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!MV())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(ne(Zr),ne(ar),ne(NV,8))};static \u0275dir=Oe({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&A("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},standalone:!1,features:[lr([AV]),Tt]})}return n})();function RV(n){return n==null||gD(n)===0}function gD(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var ju=new N(""),yD=new N("");function kV(n){return RV(n.value)?{required:!0}:null}function PV(n){return e=>{let t=e.value?.length??gD(e.value);return t===null||t===0?null:t<n?{minlength:{requiredLength:n,actualLength:t}}:null}}function oD(n){return null}function _D(n){return n!=null}function vD(n){return to(n)?Lr(n):n}function ED(n){let e={};return n.forEach(t=>{e=t!=null?D(D({},e),t):e}),Object.keys(e).length===0?null:e}function wD(n,e){return e.map(t=>t(n))}function OV(n){return!n.validate}function bD(n){return n.map(e=>OV(e)?e:t=>e.validate(t))}function FV(n){if(!n)return null;let e=n.filter(_D);return e.length==0?null:function(t){return ED(wD(t,e))}}function ny(n){return n!=null?FV(bD(n)):null}function LV(n){if(!n)return null;let e=n.filter(_D);return e.length==0?null:function(t){let r=wD(t,e).map(vD);return Rd(r).pipe(st(ED))}}function ry(n){return n!=null?LV(bD(n)):null}function aD(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function VV(n){return n._rawValidators}function jV(n){return n._rawAsyncValidators}function Jg(n){return n?Array.isArray(n)?n:[n]:[]}function Ru(n,e){return Array.isArray(n)?n.includes(e):n===e}function lD(n,e){let t=Jg(e);return Jg(n).forEach(i=>{Ru(t,i)||t.push(i)}),t}function cD(n,e){return Jg(e).filter(t=>!Ru(n,t))}var ku=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=ny(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=ry(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Es=class extends ku{name;get formDirective(){return null}get path(){return null}},va=class extends ku{_parent=null;name=null;valueAccessor=null},Pu=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},UV={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},eG=H(D({},UV),{"[class.ng-submitted]":"isSubmitted"}),ws=(()=>{class n extends Pu{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(ne(va,2))};static \u0275dir=Oe({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&ye("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[Tt]})}return n})(),CD=(()=>{class n extends Pu{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(ne(Es,10))};static \u0275dir=Oe({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&ye("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[Tt]})}return n})();var pa="VALID",Nu="INVALID",_s="PENDING",ma="DISABLED",xr=class{},Ou=class extends xr{value;source;constructor(e,t){super(),this.value=e,this.source=t}},ya=class extends xr{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},_a=class extends xr{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},vs=class extends xr{status;source;constructor(e,t){super(),this.status=e,this.source=t}},Xg=class extends xr{source;constructor(e){super(),this.source=e}},ey=class extends xr{source;constructor(e){super(),this.source=e}};function ID(n){return(Uu(n)?n.validators:n)||null}function BV(n){return Array.isArray(n)?ny(n):n||null}function DD(n,e){return(Uu(e)?e.asyncValidators:n)||null}function HV(n){return Array.isArray(n)?ry(n):n||null}function Uu(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function $V(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new C(1e3,"");if(!r[t])throw new C(1001,"")}function zV(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new C(1002,"")})}var Fu=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Hn(this.statusReactive)}set status(e){Hn(()=>this.statusReactive.set(e))}_status=$(()=>this.statusReactive());statusReactive=O(void 0);get valid(){return this.status===pa}get invalid(){return this.status===Nu}get pending(){return this.status==_s}get disabled(){return this.status===ma}get enabled(){return this.status!==ma}errors;get pristine(){return Hn(this.pristineReactive)}set pristine(e){Hn(()=>this.pristineReactive.set(e))}_pristine=$(()=>this.pristineReactive());pristineReactive=O(!0);get dirty(){return!this.pristine}get touched(){return Hn(this.touchedReactive)}set touched(e){Hn(()=>this.touchedReactive.set(e))}_touched=$(()=>this.touchedReactive());touchedReactive=O(!1);get untouched(){return!this.touched}_events=new Sn;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(lD(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(lD(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(cD(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(cD(e,this._rawAsyncValidators))}hasValidator(e){return Ru(this._rawValidators,e)}hasAsyncValidator(e){return Ru(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(H(D({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new _a(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new _a(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(H(D({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new ya(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new ya(!0,r))}markAsPending(e={}){this.status=_s;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new vs(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(H(D({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=ma,this.errors=null,this._forEachChild(i=>{i.disable(H(D({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Ou(this.value,r)),this._events.next(new vs(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(H(D({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=pa,this._forEachChild(r=>{r.enable(H(D({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(H(D({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===pa||this.status===_s)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Ou(this.value,t)),this._events.next(new vs(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(H(D({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ma:pa}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=_s,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let r=vD(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new vs(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new _t,this.statusChanges=new _t}_calculateStatus(){return this._allControlsDisabled()?ma:this.errors?Nu:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(_s)?_s:this._anyControlsHaveStatus(Nu)?Nu:pa}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new ya(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new _a(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Uu(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=BV(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=HV(this._rawAsyncValidators)}},Lu=class extends Fu{constructor(e,t,r){super(ID(t),DD(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){zV(this,!0,e),Object.keys(e).forEach(r=>{$V(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var iy=new N("",{providedIn:"root",factory:()=>sy}),sy="always";function WV(n,e){return[...e.path,n]}function SD(n,e,t=sy){TD(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),qV(n,e),YV(n,e),KV(n,e),GV(n,e)}function uD(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function GV(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function TD(n,e){let t=VV(n);e.validator!==null?n.setValidators(aD(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=jV(n);e.asyncValidator!==null?n.setAsyncValidators(aD(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();uD(e._rawValidators,i),uD(e._rawAsyncValidators,i)}function qV(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&xD(n,e)})}function KV(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&xD(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function xD(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function YV(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function QV(n,e){n==null,TD(n,e)}function ZV(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function JV(n){return Object.getPrototypeOf(n.constructor)===ty}function XV(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function ej(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(s=>{s.constructor===Ar?t=s:JV(s)?r=s:i=s}),i||r||t||null}var tj={provide:Es,useExisting:an(()=>oy)},ga=Promise.resolve(),oy=(()=>{class n extends Es{callSetDisabledState;get submitted(){return Hn(this.submittedReactive)}_submitted=$(()=>this.submittedReactive());submittedReactive=O(!1);_directives=new Set;form;ngSubmit=new _t;options;constructor(t,r,i){super(),this.callSetDisabledState=i,this.form=new Lu({},ny(t),ry(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){ga.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),SD(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){ga.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){ga.then(()=>{let r=this._findContainer(t.path),i=new Lu({});QV(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){ga.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){ga.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),XV(this.form,this._directives),this.ngSubmit.emit(t),this.form._events.next(new Xg(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1),this.form._events.next(new ey(this.form))}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static \u0275fac=function(r){return new(r||n)(ne(ju,10),ne(yD,10),ne(iy,8))};static \u0275dir=Oe({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&A("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[lr([tj]),Tt]})}return n})();function dD(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function fD(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var nj=class extends Fu{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(ID(t),DD(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Uu(t)&&(t.nonNullable||t.initialValueIsDefault)&&(fD(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){dD(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){dD(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){fD(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var rj={provide:va,useExisting:an(()=>gi)},hD=Promise.resolve(),gi=(()=>{class n extends va{_changeDetectorRef;callSetDisabledState;control=new nj;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new _t;constructor(t,r,i,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=ej(this,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),ZV(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){SD(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){hD.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&Gh(r);hD.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?WV(t,this._parent):[t]}static \u0275fac=function(r){return new(r||n)(ne(Es,9),ne(ju,10),ne(yD,10),ne(Vu,10),ne(Wh,8),ne(iy,8))};static \u0275dir=Oe({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[lr([rj]),Tt,Bl]})}return n})();var AD=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=Oe({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})();var ij={provide:Vu,useExisting:an(()=>Bu),multi:!0};function MD(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function sj(n){return n.split(":")[0]}var Bu=(()=>{class n extends ty{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r=this._getOptionId(t),i=MD(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=sj(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=$i(n)))(i||n)}})();static \u0275dir=Oe({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&A("change",function(o){return i.onChange(o.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[lr([ij]),Tt]})}return n})(),bs=(()=>{class n{_element;_renderer;_select;id;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(MD(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(ne(ar),ne(Zr),ne(Bu,9))};static \u0275dir=Oe({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),oj={provide:Vu,useExisting:an(()=>ND),multi:!0};function pD(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function aj(n){return n.split(":")[0]}var ND=(()=>{class n extends ty{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(s=>this._getOptionId(s));r=(s,o)=>{s._setSelected(i.indexOf(o.toString())>-1)}}else r=(i,s)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],s=r.selectedOptions;if(s!==void 0){let o=s;for(let a=0;a<o.length;a++){let l=o[a],c=this._getOptionValue(l.value);i.push(c)}}else{let o=r.options;for(let a=0;a<o.length;a++){let l=o[a];if(l.selected){let c=this._getOptionValue(l.value);i.push(c)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=aj(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=$i(n)))(i||n)}})();static \u0275dir=Oe({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&A("change",function(o){return i.onChange(o.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[lr([oj]),Tt]})}return n})(),Cs=(()=>{class n{_element;_renderer;_select;id;_value;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(pD(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(pD(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(ne(ar),ne(Zr),ne(ND,9))};static \u0275dir=Oe({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();function lj(n){return typeof n=="number"?n:parseInt(n,10)}var RD=(()=>{class n{_validator=oD;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):oD,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Oe({type:n,features:[Bl]})}return n})();var cj={provide:ju,useExisting:an(()=>ay),multi:!0};var ay=(()=>{class n extends RD{required;inputName="required";normalizeInput=Gh;createValidator=t=>kV;enabled(t){return t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=$i(n)))(i||n)}})();static \u0275dir=Oe({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&Ql("required",i._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[lr([cj]),Tt]})}return n})();var uj={provide:ju,useExisting:an(()=>ly),multi:!0},ly=(()=>{class n extends RD{minlength;inputName="minlength";normalizeInput=t=>lj(t);createValidator=t=>PV(t);static \u0275fac=(()=>{let t;return function(i){return(t||(t=$i(n)))(i||n)}})();static \u0275dir=Oe({type:n,selectors:[["","minlength","","formControlName",""],["","minlength","","formControl",""],["","minlength","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&Ql("minlength",i._enabled?i.minlength:null)},inputs:{minlength:"minlength"},standalone:!1,features:[lr([uj]),Tt]})}return n})();var dj=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Bn({type:n});static \u0275inj=On({})}return n})();var Cn=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:iy,useValue:t.callSetDisabledState??sy}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Bn({type:n});static \u0275inj=On({imports:[dj]})}return n})();var fj=(n,e)=>e.id,hj=(n,e)=>e.part_name;function pj(n,e){n&1&&(p(0,"div",6),E(1,"i",53),g(2," Prioridad Alta "),m())}function mj(n,e){n&1&&(p(0,"div",62),E(1,"i",74),g(2," Analizando da\xF1os... "),m())}function gj(n,e){if(n&1&&(p(0,"li"),g(1),m()),n&2){let t=e.$implicit;_(),Jl(" ",t.quantity,"x ",t.part_name," (",t.generic_code,") ")}}function yj(n,e){if(n&1&&(p(0,"div",72)(1,"p")(2,"strong",75),g(3,"Severidad Detectada:"),m(),g(4),m(),p(5,"p")(6,"strong",75),g(7,"Refacciones Sugeridas:"),m()(),p(8,"ul",76),Qe(9,gj,2,3,"li",null,hj),m()()),n&2){let t,r,i=T(3);_(4),F(" ",(t=i.inspectionData())==null||t.inspection==null||t.inspection.severity==null?null:t.inspection.severity.level," "),_(5),Ze((r=i.inspectionData())==null||r.inspection==null||r.inspection.repair_plan==null?null:r.inspection.repair_plan.estimated_parts)}}function _j(n,e){if(n&1){let t=ve();p(0,"div",32)(1,"h4",54),E(2,"i",55),g(3," Registrar Ingreso a Taller "),m(),p(4,"div",56)(5,"input",57),A("change",function(i){j(t);let s=T(2);return U(s.handleImageUpload(i))}),m(),p(6,"div",58),E(7,"i",59),p(8,"p",60),g(9,"Inspecci\xF3n Visual IA"),m(),p(10,"p",61),g(11," Sube una foto de la aver\xEDa para autocompletar "),m()(),re(12,mj,3,0,"div",62),m(),p(13,"div",63)(14,"select",64,0)(16,"option",65),g(17,"Falla Mec\xE1nica"),m(),p(18,"option",66),g(19,"Falla El\xE9ctrica"),m(),p(20,"option",67),g(21,"Sistema Hidr\xE1ulico"),m(),p(22,"option",68),g(23,"Llantas / Rodaje"),m(),p(24,"option",69),g(25,"Estructural"),m(),p(26,"option",70),g(27,"Da\xF1o por Operaci\xF3n"),m()(),E(28,"textarea",71,1),re(30,yj,11,1,"div",72),p(31,"button",73),A("click",function(){j(t);let i=un(15),s=un(29),o=T(2);return U(o.reportFailure(s.value,i.value))}),g(32," Confirmar Ingreso "),m()()()}if(n&2){let t,r,i=T(2);_(12),ie(i.analyzingImage()?12:-1),_(2),le("value",((t=i.inspectionData())==null||t.inspection==null||t.inspection.damage_analysis==null?null:t.inspection.damage_analysis.damage_type)||"Mec\xE1nico"),_(14),le("value",i.inspectionData()?((r=i.inspectionData())==null||r.inspection==null||r.inspection.asset==null?null:r.inspection.asset.visual_condition)+" - Causa Probable: "+((r=i.inspectionData())==null||r.inspection==null||r.inspection.root_cause_analysis==null?null:r.inspection.root_cause_analysis.probable_cause):""),_(2),ie(i.inspectionData()?30:-1)}}function vj(n,e){if(n&1){let t=ve();p(0,"div",33)(1,"h4",77),E(2,"i",78),g(3," Finalizar y Liberar Equipo "),m(),p(4,"div",63),E(5,"textarea",79,2),p(7,"div",80),E(8,"input",81,3)(10,"input",82,4),m(),p(12,"button",83),A("click",function(){j(t);let i=un(6),s=un(9),o=un(11),a=T(2);return U(a.finishRepair(i.value,s.value,o.value))}),g(13," Liberar Equipo a Operaci\xF3n "),m()()()}}function Ej(n,e){n&1&&(p(0,"span",86),g(1," ABIERTO "),m())}function wj(n,e){if(n&1&&(p(0,"span",94),g(1),m()),n&2){let t=e.$implicit;_(),F(" ",t," ")}}function bj(n,e){if(n&1&&(p(0,"div",89),Qe(1,wj,2,1,"span",94,Zl),m()),n&2){let t=T().$implicit;_(),Ze(t.partsUsed)}}function Cj(n,e){n&1&&(p(0,"span",90),g(1,"N/A"),m())}function Ij(n,e){if(n&1&&(p(0,"tr",84)(1,"td",85),g(2),Mt(3,"date"),re(4,Ej,2,0,"span",86),m(),p(5,"td",87),g(6),m(),p(7,"td",88),g(8),m(),p(9,"td",88),re(10,bj,3,0,"div",89)(11,Cj,2,0,"span",90),m(),p(12,"td",91)(13,"span",92),g(14),m()(),p(15,"td",93),g(16),Mt(17,"currency"),m()()),n&2){let t=e.$implicit;ye("bg-red-50",!t.exitDate)("border-l-4",!t.exitDate)("border-[#ce1126]",!t.exitDate),_(2),F(" ",dn(3,13,t.entryDate,"shortDate")," "),_(2),ie(t.exitDate?-1:4),_(2),F(" ",t.failureDescription," "),_(2),F(" ",t.diagnosis||"-"," "),_(2),ie(t.partsUsed&&t.partsUsed.length>0?10:11),_(4),Q(t.type),_(2),F(" ",Xl(17,16,t.estimatedCost)," ")}}function Dj(n,e){n&1&&(p(0,"div",51)(1,"div",95),E(2,"i",96)(3,"i",97),m(),p(4,"p",98),g(5," Analizando historial y sensores... "),m()())}function Sj(n,e){if(n&1){let t=ve();E(0,"div",99),p(1,"button",100),A("click",function(){j(t);let i=T(2);return U(i.runAnalysis())}),g(2," Regenerar An\xE1lisis "),m()}if(n&2){let t=T(2);le("innerHTML",t.aiResult(),Qr)}}function Tj(n,e){if(n&1){let t=ve();p(0,"div",101)(1,"p",102),E(2,"i",103),g(3," Esto enviar\xE1 los \xFAltimos 20 reportes a Gemini. "),m()(),p(4,"button",104),A("click",function(){j(t);let i=T(2);return U(i.runAnalysis())}),E(5,"i",105),g(6," Ejecutar Predicci\xF3n con IA "),m()}}function xj(n,e){if(n&1){let t=ve();p(0,"div",52)(1,"div",106)(2,"h3",107),E(3,"i",108),g(4," Procedimiento LOTO "),m(),p(5,"button",109),A("click",function(){j(t);let i=T(2);return U(i.lotoResult.set(null))}),E(6,"i",110),m()(),E(7,"div",111),p(8,"button",112),A("click",function(){j(t);let i=T(2);return U(i.printLoto())}),E(9,"i",113),g(10," Imprimir Etiqueta "),m()()}if(n&2){let t=T(2);_(7),le("innerHTML",t.lotoResult(),Qr)}}function Aj(n,e){if(n&1){let t=ve();p(0,"div",5),re(1,pj,3,0,"div",6),p(2,"div",7)(3,"div")(4,"div",8)(5,"h2",9),g(6),m(),p(7,"span",10),g(8),m()(),p(9,"p",11),g(10),m(),p(11,"div",12)(12,"span"),E(13,"i",13),g(14),m(),E(15,"span",14),p(16,"span"),E(17,"i",15),g(18),m()()(),p(19,"div",16)(20,"button",17),A("click",function(){j(t);let i=T();return U(i.close())}),E(21,"i",18),m(),p(22,"button",19),A("click",function(){j(t);let i=T();return U(i.exportPdf())}),E(23,"i",20),g(24," PDF "),m(),p(25,"button",21),A("click",function(){j(t);let i=T();return U(i.generateLoto())}),E(26,"i",22),g(27," Generar LOTO "),m()()(),p(28,"div",23)(29,"div",24)(30,"div",25)(31,"div",26)(32,"div",27),g(33," Combustible "),m(),p(34,"div",28),g(35),m()(),p(36,"div",26)(37,"div",27),g(38," Adquisici\xF3n "),m(),p(39,"div",28),g(40),Mt(41,"date"),m()(),p(42,"div",26)(43,"div",27),g(44," Total Fallas "),m(),p(45,"div",28),g(46),m()()(),p(47,"div",29)(48,"h3",30),E(49,"i",31),g(50," Panel de Control Operativo "),m(),re(51,_j,33,4,"div",32)(52,vj,14,0,"div",33),m(),p(53,"div")(54,"div",34),E(55,"div",35),p(56,"h3",36),g(57,"Historial Cl\xEDnico"),m()(),p(58,"div",37)(59,"table",38)(60,"thead",39)(61,"tr")(62,"th",40),g(63,"Fecha"),m(),p(64,"th",41),g(65,"Falla"),m(),p(66,"th",41),g(67,"Diagn\xF3stico"),m(),p(68,"th",41),g(69,"Refacciones"),m(),p(70,"th",41),g(71,"Tipo"),m(),p(72,"th",42),g(73,"Costo"),m()()(),p(74,"tbody",43),Qe(75,Ij,18,18,"tr",44,fj),m()()()()(),p(77,"div",45)(78,"div",46)(79,"div",34)(80,"div",47),E(81,"i",48),m(),p(82,"h3",49),g(83,"Mantenimiento Predictivo"),m()(),p(84,"p",50),g(85," Gemini AI analiza patrones de desgaste, MTBF y condiciones de uso para predecir fallas futuras. "),m(),re(86,Dj,6,0,"div",51)(87,Sj,3,1)(88,Tj,7,0),m(),re(89,xj,11,1,"div",52),m()()()}if(n&2){let t=T();_(),ie(t.asset().critical?1:-1),_(5),Q(t.asset().id),_(2),F(" ",t.asset().status.name," "),_(2),Jl(" ",t.asset().brand," ",t.asset().model," | SN: ",t.asset().serial," "),_(4),Q(t.asset().location),_(4),Q(t.asset().fuelType),_(17),Q(t.asset().fuelType),_(5),F(" ",dn(41,14,t.asset().acquisitionDate,"MM/yyyy")," "),_(6),Q(t.history().length),_(5),ie(t.asset().status.name==="Operativo"?51:t.asset().status.name==="Taller"?52:-1),_(24),Ze(t.history()),_(11),ie(t.aiLoading()?86:t.aiResult()?87:88),_(3),ie(t.lotoResult()?89:-1)}}var kD=(()=>{class n{constructor(){this.assetId=m0(""),this.dataService=S(pt),this.geminiService=S(gs),this.sanitizer=S(ti),this.asset=$(()=>this.dataService.getAsset(this.assetId())),this.history=$(()=>this.assetId()?this.dataService.getAssetHistory(this.assetId()):[]),this.aiLoading=O(!1),this.aiResult=O(null),this.analyzingImage=O(!1),this.inspectionData=O(null),this.lotoResult=O(null),Jr(()=>{this.assetId(),this.aiResult.set(null),this.inspectionData.set(null),this.lotoResult.set(null)},{allowSignalWrites:!0})}handleImageUpload(t){let r=t.target.files[0];if(!r)return;this.analyzingImage.set(!0);let i=new FileReader;i.onload=async s=>{let o=s.target.result.split(",")[1],a=await this.geminiService.analyzeImageInspection(o);this.inspectionData.set(a),this.analyzingImage.set(!1)},i.readAsDataURL(r)}async generateLoto(){let t=this.asset();if(!t)return;let r=t.lastFailure||"Mantenimiento General Preventivo";this.lotoResult.set('<p class="text-gray-500 animate-pulse">Generando procedimiento de seguridad...</p>');let i=await this.geminiService.generateLotoProcedure(t,r);this.lotoResult.set(i)}printLoto(){let t=window.open("","","height=600,width=800");t&&this.lotoResult()&&(t.document.write("<html><head><title>LOTO</title>"),t.document.write('<script src="https://cdn.tailwindcss.com"><\/script>'),t.document.write('</head><body class="p-8">'),t.document.write(this.lotoResult()),t.document.write("</body></html>"),t.document.close(),setTimeout(()=>t.print(),500))}reportFailure(t,r){if(!t)return alert("Por favor describe la falla.");this.dataService.reportFailure(this.assetId(),t,r)}finishRepair(t,r,i){if(!t)return alert("El diagn\xF3stico es requerido.");let s=parseFloat(r)||0,o=i.split(",").map(a=>a.trim()).filter(a=>a);this.dataService.completeRepair(this.assetId(),t,s,o)}async runAnalysis(){let t=this.asset();if(!t)return;this.aiLoading.set(!0);let r=await this.geminiService.analyzeMaintenanceHistory(t,this.history());this.aiResult.set(r),this.aiLoading.set(!1)}async exportPdf(){let t=await import("./chunk-4IDCEKHZ.js"),{jsPDF:r}=t.default??t,i=new r,s=this.asset();if(!s)return;i.setFontSize(20),i.setTextColor(206,17,38),i.text(`Historial Cl\xEDnico: ${s.id}`,14,20),i.setTextColor(0,0,0),i.setFontSize(10),i.text(`Marca: ${s.brand} | Modelo: ${s.model}`,14,28),i.text(`Serie: ${s.serial} | Estatus: ${s.status.name}`,14,33),i.text(`Generado: ${new Date().toLocaleDateString()}`,14,38);let o=this.history().map(l=>[new Date(l.entryDate).toLocaleDateString(),l.failureDescription,l.diagnosis||"-",(l.partsUsed||[]).join(", "),`$${l.estimatedCost}`]),a=50;i.text("Historial de Fallas:",14,a),a+=10,o.forEach((l,c)=>{i.text(`${c+1}. ${l[0]} - ${l[1]}`,14,a),a+=5,a>280&&(i.addPage(),a=20)}),i.save(`historial_${s.id}.pdf`)}sendEmail(){let t=this.asset();if(!t)return;let r=encodeURIComponent(`Seguimiento de Activo ${t.id} - ${t.status.name}`),i=`
Hola,

Adjunto el seguimiento para el equipo:
ID: ${t.id}
Marca: ${t.brand}
Modelo: ${t.model}
Serie: ${t.serial}

Estatus Actual: ${t.status.name}
\xDAltima Falla Registrada: ${t.lastFailure||"N/A"}

Favor de revisar el historial en el sistema para m\xE1s detalles.

Saludos,
AssetGuard System
    `.trim(),s=encodeURIComponent(i);window.location.href=`mailto:?subject=${r}&body=${s}`}close(){window.dispatchEvent(new CustomEvent("asset-closed"))}printReport(){window.print()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Pe({type:n,selectors:[["app-asset-detail"]],inputs:{assetId:[1,"assetId"]},decls:1,vars:1,consts:[["failType",""],["failDesc",""],["diagnosis",""],["cost",""],["parts",""],[1,"bg-white","rounded-xl","shadow-lg","border","border-gray-200","overflow-hidden","animate-fade-in","relative"],[1,"absolute","top-0","right-0","bg-yellow-400","text-black","text-[10px]","uppercase","font-black","px-4","py-2","rounded-bl-lg","z-10","shadow-sm","tracking-wide"],[1,"bg-[#ce1126]","text-white","p-6","flex","flex-col","md:flex-row","justify-between","items-start","md:items-center","gap-4"],[1,"flex","items-center","gap-3"],[1,"text-3xl","font-black","tracking-tight"],[1,"px-3","py-0.5","rounded-full","text-xs","font-bold","uppercase","bg-white/20","border","border-white/30","backdrop-blur-sm"],[1,"text-red-100","font-medium","mt-1"],[1,"text-xs","text-red-200","mt-2","flex","gap-2","items-center"],[1,"fas","fa-map-marker-alt","mr-1"],[1,"w-1","h-1","rounded-full","bg-white","opacity-50"],[1,"fas","fa-gas-pump","mr-1"],[1,"flex","flex-wrap","gap-2"],["title","Volver",1,"px-4","py-2","rounded-lg","bg-white/10","hover:bg-white/20","text-white","text-sm","font-bold","transition","border","border-white/10",3,"click"],[1,"fas","fa-arrow-left"],[1,"px-4","py-2","rounded-lg","bg-white","text-[#ce1126]","hover:bg-gray-100","text-sm","font-bold","transition","shadow-md","flex","items-center",3,"click"],[1,"fas","fa-file-pdf","mr-2"],[1,"px-4","py-2","rounded-lg","bg-yellow-400","text-black","hover:bg-yellow-300","text-sm","font-bold","transition","shadow-md","flex","items-center",3,"click"],[1,"fas","fa-lock","mr-2"],[1,"p-6","grid","grid-cols-1","lg:grid-cols-3","gap-8"],[1,"lg:col-span-2","space-y-6"],[1,"grid","grid-cols-3","gap-4"],[1,"p-4","bg-gray-50","rounded-lg","border","border-gray-100","text-center"],[1,"text-[10px]","text-gray-500","uppercase","font-bold","tracking-wider"],[1,"font-bold","text-gray-800","text-lg"],[1,"bg-white","p-6","rounded-xl","border","border-gray-200","shadow-sm"],[1,"text-sm","font-bold","text-gray-400","uppercase","tracking-widest","mb-4","flex","items-center","gap-2"],[1,"fas","fa-cogs"],[1,"bg-red-50","p-5","rounded-lg","border","border-red-100","relative"],[1,"bg-green-50","p-5","rounded-lg","border","border-green-100"],[1,"flex","items-center","gap-3","mb-4"],[1,"h-6","w-1","bg-[#ce1126]"],[1,"text-lg","font-bold","text-gray-800"],[1,"overflow-x-auto","rounded-lg","border","border-gray-200"],[1,"w-full","text-sm","text-left","min-w-[800px]"],[1,"bg-gray-50","text-gray-500","font-bold","text-xs","uppercase","tracking-wider"],[1,"p-3","whitespace-nowrap"],[1,"p-3"],[1,"p-3","text-right"],[1,"divide-y","divide-gray-100"],[1,"hover:bg-gray-50","transition",3,"bg-red-50","border-l-4","border-[#ce1126]"],[1,"space-y-6"],[1,"bg-gradient-to-br","from-gray-900","to-black","p-6","rounded-xl","border","border-gray-800","text-white","shadow-xl"],[1,"p-2","bg-[#ce1126]","text-white","rounded","shadow-sm"],[1,"fas","fa-robot","text-lg"],[1,"text-lg","font-bold"],[1,"text-sm","text-gray-400","mb-6","leading-relaxed"],[1,"flex","flex-col","items-center","justify-center","py-6","text-center","space-y-3"],[1,"bg-yellow-50","p-6","rounded-xl","border","border-yellow-200","shadow-lg"],[1,"fas","fa-exclamation-triangle","mr-1"],[1,"text-[#ce1126]","font-bold","mb-3","flex","items-center","gap-2"],[1,"fas","fa-tools"],[1,"mb-4","p-4","border-2","border-dashed","border-red-200","rounded-lg","bg-white/50","text-center","relative","group","hover:border-red-400","transition-colors"],["type","file","accept","image/*",1,"absolute","inset-0","w-full","h-full","opacity-0","cursor-pointer","z-10",3,"change"],[1,"flex","flex-col","items-center","gap-2"],[1,"fas","fa-camera","text-2xl","text-red-300","group-hover:text-red-500"],[1,"text-xs","font-bold","text-red-800","uppercase"],[1,"text-[10px]","text-gray-500"],[1,"absolute","inset-0","bg-white/90","z-20","flex","items-center","justify-center","text-[#ce1126]","font-bold","text-xs","gap-2"],[1,"flex","flex-col","gap-3"],[1,"w-full","p-2.5","border","border-gray-300","rounded","text-sm","bg-white","focus:ring-2","focus:ring-red-500","outline-none",3,"value"],["value","Mec\xE1nico"],["value","El\xE9ctrico"],["value","Hidr\xE1ulico"],["value","Llantas"],["value","Estructural"],["value","Operador"],["rows","3","placeholder","Describe la falla detalladamente...",1,"w-full","p-2.5","border","border-gray-300","rounded","text-sm","bg-white","focus:ring-2","focus:ring-red-500","outline-none",3,"value"],[1,"bg-white","p-3","rounded","border","border-red-100","text-xs","text-gray-600","mb-2"],[1,"w-full","bg-[#ce1126]","hover:bg-[#a30d1d]","text-white","font-bold","py-2.5","rounded","transition","uppercase","tracking-wide","text-xs",3,"click"],[1,"fas","fa-spinner","fa-spin"],[1,"text-red-700"],[1,"list-disc","pl-4","mt-1"],[1,"text-green-800","font-bold","mb-3","flex","items-center","gap-2"],[1,"fas","fa-check-circle"],["rows","2","placeholder","Diagn\xF3stico final y soluci\xF3n...",1,"w-full","p-2.5","border","border-green-200","rounded","text-sm","bg-white","focus:ring-2","focus:ring-green-500","outline-none"],[1,"grid","grid-cols-2","gap-3"],["type","number","placeholder","Costo Refacciones ($)",1,"p-2.5","border","border-green-200","rounded","text-sm","bg-white"],["type","text","placeholder","Refacciones (separar por coma)",1,"p-2.5","border","border-green-200","rounded","text-sm","bg-white"],[1,"w-full","bg-green-600","hover:bg-green-700","text-white","font-bold","py-2.5","rounded","transition","uppercase","tracking-wide","text-xs",3,"click"],[1,"hover:bg-gray-50","transition"],[1,"p-3","text-gray-600","align-top","whitespace-nowrap","font-medium"],[1,"inline-block","px-2","py-0.5","rounded","bg-[#ce1126]","text-white","text-[10px]","font-bold","mt-1","ml-2"],[1,"p-3","text-gray-900","align-top","font-medium"],[1,"p-3","text-gray-600","text-xs","align-top","max-w-[200px]"],[1,"flex","flex-wrap","gap-1.5"],[1,"text-gray-400","italic","text-xs"],[1,"p-3","align-top"],[1,"px-2","py-1","bg-gray-100","text-gray-600","text-[10px]","font-bold","uppercase","rounded","whitespace-nowrap"],[1,"p-3","text-right","font-mono","text-gray-900","font-bold","align-top","whitespace-nowrap"],[1,"inline-flex","items-center","px-2","py-0.5","rounded","text-[10px]","font-bold","bg-gray-100","text-gray-600","border","border-gray-200"],[1,"relative"],[1,"fas","fa-circle-notch","fa-spin","text-3xl","text-[#ce1126]"],[1,"fas","fa-brain","absolute","top-1/2","left-1/2","-translate-x-1/2","-translate-y-1/2","text-[10px]","text-white"],[1,"text-xs","font-bold","text-gray-300","animate-pulse","uppercase","tracking-wide"],[1,"prose","prose-sm","prose-invert","bg-white/5","p-4","rounded-lg","border","border-white/10","max-h-96","overflow-y-auto","custom-scroll","text-sm",3,"innerHTML"],[1,"mt-4","w-full","py-2","text-xs","font-bold","text-gray-400","hover:text-white","uppercase","tracking-wide","border","border-gray-700","rounded","hover:bg-gray-800","transition",3,"click"],[1,"bg-white/5","rounded-lg","p-3","mb-4","border","border-white/10"],[1,"text-[10px]","text-gray-400","italic","mb-1"],[1,"fas","fa-info-circle","mr-1"],[1,"w-full","py-3","bg-[#ce1126]","hover:bg-[#a30d1d]","text-white","rounded-lg","font-bold","shadow-lg","shadow-red-900/20","transition","flex","items-center","justify-center","gap-2","uppercase","tracking-wide","text-xs",3,"click"],[1,"fas","fa-magic"],[1,"flex","justify-between","items-center","mb-4"],[1,"font-black","text-yellow-800","flex","items-center","gap-2"],[1,"fas","fa-lock"],[1,"text-yellow-600","hover:text-black",3,"click"],[1,"fas","fa-times"],[1,"prose","prose-sm","prose-yellow","max-h-64","overflow-y-auto","custom-scroll",3,"innerHTML"],[1,"w-full","mt-4","py-2","bg-yellow-400","hover:bg-yellow-500","text-black","font-bold","rounded","uppercase","text-xs",3,"click"],[1,"fas","fa-print","mr-1"]],template:function(r,i){r&1&&re(0,Aj,90,17,"div",5),r&2&&ie(i.asset()?0:-1)},dependencies:[xe,uo,Wn,Cn,bs,Cs],styles:[".animate-fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}"]})}}return n})();function Mj(n,e){n&1&&(E(0,"i",55),g(1," Analizando Flota... "))}function Nj(n,e){n&1&&(E(0,"i",56),g(1," Generar Reporte Diario "))}function Rj(n,e){if(n&1){let t=ve();p(0,"button",54),A("click",function(){j(t);let i=T();return U(i.generateDailyReport())}),re(1,Mj,2,0)(2,Nj,2,0),m()}if(n&2){let t=T();le("disabled",t.isAnalyzing()),_(),ie(t.isAnalyzing()?1:2)}}function kj(n,e){if(n&1){let t=ve();p(0,"div",26),E(1,"div",57),p(2,"div",58)(3,"button",59),A("click",function(){j(t);let i=T();return U(i.aiReport.set(null))}),g(4," Cerrar "),m(),p(5,"button",60),A("click",function(){j(t);let i=T();return U(i.copyReport())}),E(6,"i",61),g(7," Copiar "),m()()()}if(n&2){let t=T();_(),le("innerHTML",t.aiReport(),Qr)}}var PD=(()=>{class n{constructor(){this.dataService=S(pt),this.geminiService=S(gs),this.sanitizer=S(ti),this.failureForm={economico:"",falla:"",prioridad:"Media",reporta:""},this.isAnalyzing=O(!1),this.aiReport=O(null),this.isKioskMode=this.dataService.isKioskMode}toggleKiosk(){this.dataService.toggleKioskMode()}registerFailure(){if(!this.failureForm.economico||!this.failureForm.falla){alert("Por favor complete los datos de la unidad y la falla.");return}this.dataService.addLiveFailure({economico:this.failureForm.economico.toUpperCase(),falla:this.failureForm.falla,prioridad:this.failureForm.prioridad,reporta:this.failureForm.reporta||"NOC Admin",estatus:"Abierta"}),this.failureForm={economico:"",falla:"",prioridad:"Media",reporta:""}}async generateDailyReport(){this.isAnalyzing.set(!0);let t=this.dataService.fleetAvailability(),r=this.dataService.forkliftFailures().filter(o=>o.estatus!=="Cerrada"),i=this.dataService.forkliftFailures().slice(0,10),s=await this.geminiService.generateDailySummary(t,r,i);this.aiReport.set(s),this.isAnalyzing.set(!1)}copyReport(){if(this.aiReport()){let t=document.createElement("div");t.innerHTML=this.aiReport();let r=new Blob([t.innerText],{type:"text/plain"}),i=new ClipboardItem({"text/plain":r});navigator.clipboard.write([i]).then(()=>alert("Reporte copiado al portapapeles!"))}}async handleFileInput(t){let r=t.target.files[0];if(r)try{let i=new FileReader;i.onload=async s=>{try{let o=await import("./chunk-HUHWQGMW.js"),a=o&&(o.default??o),l=new a.Workbook;await l.xlsx.load(s.target.result);let c=l.worksheets[0],u=[];c.eachRow((d,f)=>{f>1&&u.push({Economico:d.getCell(1).value,Marca:d.getCell(2).value,Modelo:d.getCell(3).value,Estatus:d.getCell(4).value})}),this.dataService.updateAssetsFromExcel(u),alert(`Se procesaron ${u.length} registros exitosamente.`)}catch(o){alert("Error al procesar el archivo Excel."),console.error(o)}},i.readAsArrayBuffer(r)}catch(i){console.error("Import error",i),alert("No se pudo iniciar la importaci\xF3n.")}}async exportData(){let t=this.dataService.forkliftFailures().map(h=>({ID:h.id,Unidad:h.economico,Falla:h.falla,Prioridad:h.prioridad,Estatus:h.estatus,Reporto:h.reporta,FechaIngreso:h.fechaIngreso,FechaCierre:h.fechaSalida||"-"})),r=this.dataService.assets().map(h=>({Economico:h.id,Marca:h.brand,Modelo:h.model,Serie:h.serial,Estatus:h.status.name,Desde:h.statusSince})),i=await import("./chunk-HUHWQGMW.js"),s=i&&(i.default??i),o=new s.Workbook,a=o.addWorksheet("Inventario");r.length>0&&(a.columns=Object.keys(r[0]).map(h=>({header:h,key:h})),r.forEach(h=>a.addRow(h)));let l=o.addWorksheet("Reporte de Fallas");t.length>0&&(l.columns=Object.keys(t[0]).map(h=>({header:h,key:h})),t.forEach(h=>l.addRow(h)));let c=await o.xlsx.writeBuffer(),u=new Blob([c],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),d=window.URL.createObjectURL(u),f=document.createElement("a");f.href=d,f.download=`AssetGuard_Reporte_${new Date().toISOString().slice(0,10)}.xlsx`,f.click(),window.URL.revokeObjectURL(d)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Pe({type:n,selectors:[["app-admin"]],decls:90,vars:18,consts:[[1,"bg-white","rounded-xl","shadow-sm","border","border-gray-100","p-8","max-w-5xl","mx-auto"],[1,"mb-8","border-b","border-gray-100","pb-4"],[1,"text-3xl","font-black","text-gray-800","tracking-tight"],[1,"text-gray-500"],[1,"bg-indigo-50","p-6","rounded-xl","shadow-sm","border","border-indigo-100","mb-8","flex","flex-col","md:flex-row","items-center","justify-between","gap-4","animate-fade-in","relative","overflow-hidden"],[1,"absolute","-right-6","-top-6","text-indigo-100","opacity-50"],[1,"fas","fa-broadcast-tower","text-9xl"],[1,"relative","z-10"],[1,"text-xl","font-bold","text-indigo-900","flex","items-center","gap-2"],[1,"bg-indigo-600","text-white","p-1.5","rounded-lg","text-xs","shadow-md"],[1,"fas","fa-desktop"],[1,"text-sm","text-indigo-700","mt-1","max-w-lg"],[1,"flex","items-center","gap-4","relative","z-10","bg-white","px-6","py-3","rounded-2xl","shadow-sm","border","border-indigo-100"],[1,"text-right"],[1,"text-[10px]","font-bold","uppercase","tracking-wider","text-gray-500"],[1,"text-sm","font-black","transition-colors"],[1,"relative","inline-flex","h-8","w-14","items-center","rounded-full","transition-colors","focus:outline-none","focus:ring-2","focus:ring-indigo-500","focus:ring-offset-2","cursor-pointer",3,"click"],[1,"inline-block","h-6","w-6","transform","rounded-full","bg-white","transition-transform","shadow-md"],[1,"bg-gradient-to-r","from-gray-900","to-slate-800","rounded-xl","p-6","text-white","shadow-xl","mb-8","relative","overflow-hidden"],[1,"absolute","top-0","right-0","p-8","opacity-10"],[1,"fas","fa-brain","text-9xl","text-white"],[1,"text-xl","font-bold","flex","items-center","gap-2","mb-2"],[1,"bg-[#ce1126]","p-1.5","rounded","text-xs"],[1,"fas","fa-robot"],[1,"text-gray-400","text-sm","mb-6","max-w-2xl"],[1,"bg-white","text-gray-900","px-6","py-3","rounded-lg","font-bold","shadow","hover:bg-gray-100","transition","flex","items-center","gap-2","disabled:opacity-50",3,"disabled"],[1,"bg-white/10","rounded-lg","p-6","border","border-white/10","backdrop-blur-sm","animate-fade-in"],[1,"bg-white","p-6","rounded-xl","shadow-lg","mb-8","border-t-4","border-[#ce1126]","border","border-gray-100"],[1,"text-lg","font-bold","mb-4","flex","items-center","gap-2","text-gray-800"],[1,"text-[#ce1126]"],[1,"fas","fa-broadcast-tower"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-4","gap-4","mb-4"],[1,"block","text-xs","font-bold","text-gray-500","uppercase","tracking-wide","mb-1"],["type","text","placeholder","Ej: M-105",1,"w-full","p-2.5","border","border-gray-300","rounded","shadow-sm","focus:ring-2","focus:ring-[#ce1126]","focus:outline-none",3,"ngModelChange","ngModel"],[1,"lg:col-span-2"],["type","text","placeholder","Describe el problema...",1,"w-full","p-2.5","border","border-gray-300","rounded","shadow-sm","focus:ring-2","focus:ring-[#ce1126]","focus:outline-none",3,"ngModelChange","ngModel"],[1,"w-full","p-2.5","border","border-gray-300","rounded","shadow-sm","focus:ring-2","focus:ring-[#ce1126]","focus:outline-none","bg-white",3,"ngModelChange","ngModel"],["value","Baja"],["value","Media"],["value","Alta"],[1,"flex","justify-between","items-center"],[1,"w-1/3"],["type","text","placeholder","Nombre Supervisor",1,"w-full","p-2.5","border","border-gray-300","rounded","shadow-sm","focus:ring-2","focus:ring-[#ce1126]","focus:outline-none",3,"ngModelChange","ngModel"],[1,"bg-[#ce1126]","hover:bg-[#a30d1d]","text-white","px-8","py-3","rounded-lg","font-bold","shadow-md","transition","transform","hover:scale-105","flex","items-center","gap-2",3,"click"],[1,"fas","fa-paper-plane"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-8"],[1,"p-6","border","border-gray-200","rounded-xl","bg-gray-50"],[1,"font-bold","text-gray-700","mb-2"],[1,"fas","fa-file-excel","text-green-600","mr-2"],[1,"text-xs","text-gray-500","mb-4"],["type","file","accept",".xlsx, .xls",1,"block","w-full","text-sm","text-gray-500","file:mr-4","file:py-2","file:px-4","file:rounded-full","file:border-0","file:text-sm","file:font-semibold","file:bg-green-50","file:text-green-700","hover:file:bg-green-100","mb-2","cursor-pointer",3,"change"],[1,"text-[10px]","text-gray-400","italic"],[1,"fas","fa-download","text-blue-600","mr-2"],[1,"w-full","py-2","bg-white","border","border-gray-300","rounded","text-gray-700","font-bold","text-sm","hover:bg-gray-100","transition",3,"click"],[1,"bg-white","text-gray-900","px-6","py-3","rounded-lg","font-bold","shadow","hover:bg-gray-100","transition","flex","items-center","gap-2","disabled:opacity-50",3,"click","disabled"],[1,"fas","fa-circle-notch","fa-spin"],[1,"fas","fa-magic"],[1,"prose","prose-invert","prose-sm","max-w-none",3,"innerHTML"],[1,"mt-4","flex","gap-3"],[1,"text-gray-400","hover:text-white","text-xs","font-bold","underline",3,"click"],[1,"text-[#ce1126]","hover:text-red-400","text-xs","font-bold","uppercase",3,"click"],[1,"fas","fa-copy","mr-1"]],template:function(r,i){r&1&&(p(0,"div",0)(1,"div",1)(2,"h2",2),g(3,"Panel de Administraci\xF3n"),m(),p(4,"p",3),g(5,"Gesti\xF3n de fallas en vivo, control de pantallas y reportes IA."),m()(),p(6,"div",4)(7,"div",5),E(8,"i",6),m(),p(9,"div",7)(10,"h3",8)(11,"span",9),E(12,"i",10),m(),g(13," Control Maestro de Pantallas "),m(),p(14,"p",11),g(15," Activa remotamente el "),p(16,"strong"),g(17,"Modo Quiosco"),m(),g(18," en las Smart TVs de la planta. Esto iniciar\xE1 la rotaci\xF3n autom\xE1tica de KPIs, Mejores Tripulaciones y Seguridad. "),m()(),p(19,"div",12)(20,"div",13)(21,"p",14),g(22," Estatus Transmisi\xF3n "),m(),p(23,"p",15),g(24),m()(),p(25,"button",16),A("click",function(){return i.toggleKiosk()}),E(26,"span",17),m()()(),p(27,"div",18)(28,"div",19),E(29,"i",20),m(),p(30,"div",7)(31,"h3",21)(32,"span",22),E(33,"i",23),g(34," GEMINI 2.0"),m(),g(35," Centro de Inteligencia "),m(),p(36,"p",24),g(37," Genera un resumen ejecutivo instant\xE1neo analizando KPIs, fallas activas y tiempos de respuesta para la junta diaria. "),m(),re(38,Rj,3,2,"button",25)(39,kj,8,1,"div",26),m()(),p(40,"div",27)(41,"h3",28)(42,"span",29),E(43,"i",30),m(),g(44," Registro de Falla (Torre de Control) "),m(),p(45,"div",31)(46,"div")(47,"label",32),g(48,"Unidad (ID)"),m(),p(49,"input",33),At("ngModelChange",function(o){return $t(i.failureForm.economico,o)||(i.failureForm.economico=o),o}),m()(),p(50,"div",34)(51,"label",32),g(52,"Descripci\xF3n de Falla"),m(),p(53,"input",35),At("ngModelChange",function(o){return $t(i.failureForm.falla,o)||(i.failureForm.falla=o),o}),m()(),p(54,"div")(55,"label",32),g(56,"Prioridad"),m(),p(57,"select",36),At("ngModelChange",function(o){return $t(i.failureForm.prioridad,o)||(i.failureForm.prioridad=o),o}),p(58,"option",37),g(59,"Baja"),m(),p(60,"option",38),g(61,"Media"),m(),p(62,"option",39),g(63,"Alta (Cr\xEDtica)"),m()()()(),p(64,"div",40)(65,"div",41)(66,"label",32),g(67,"Reporta"),m(),p(68,"input",42),At("ngModelChange",function(o){return $t(i.failureForm.reporta,o)||(i.failureForm.reporta=o),o}),m()(),p(69,"button",43),A("click",function(){return i.registerFailure()}),E(70,"i",44),g(71," ENVIAR ALERTA "),m()()(),p(72,"div",45)(73,"div",46)(74,"h3",47),E(75,"i",48),g(76," Importaci\xF3n Masiva "),m(),p(77,"p",49),g(78," Carga tu inventario o estatus desde Excel (.xlsx) "),m(),p(79,"input",50),A("change",function(o){return i.handleFileInput(o)}),m(),p(80,"p",51),g(81," Columnas requeridas: Economico, Marca, Modelo, Estatus "),m()(),p(82,"div",46)(83,"h3",47),E(84,"i",52),g(85," Exportar Datos "),m(),p(86,"p",49),g(87,"Descarga el reporte completo de KPIs y Fallas."),m(),p(88,"button",53),A("click",function(){return i.exportData()}),g(89," Descargar Excel "),m()()()()),r&2&&(_(23),ye("text-green-500",i.isKioskMode())("text-gray-400",!i.isKioskMode()),_(),F(" ",i.isKioskMode()?"EN VIVO (ON AIR)":"OFFLINE"," "),_(),ye("bg-indigo-600",i.isKioskMode())("bg-gray-300",!i.isKioskMode()),_(),ye("translate-x-7",i.isKioskMode())("translate-x-1",!i.isKioskMode()),_(12),ie(i.aiReport()?39:38),_(11),xt("ngModel",i.failureForm.economico),_(4),xt("ngModel",i.failureForm.falla),_(4),xt("ngModel",i.failureForm.prioridad),_(11),xt("ngModel",i.failureForm.reporta))},dependencies:[xe,Cn,bs,Cs,Ar,Bu,ws,gi],styles:[".animate-fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .5s ease-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}"]})}}return n})();var Pj=(n,e)=>e.id,Oj=(n,e)=>e.fecha;function Fj(n,e){if(n&1&&(p(0,"div",32)(1,"span",51),g(2),m(),g(3),m()),n&2){let t=e.$implicit;_(2),F("",t.usuario,":"),_(),F(" ",t.mensaje," ")}}function Lj(n,e){if(n&1){let t=ve();p(0,"div",17)(1,"div",19)(2,"div",20)(3,"div",21),g(4),m(),p(5,"div")(6,"h4",22),g(7),m(),p(8,"p",23),g(9),Mt(10,"date"),m()()(),p(11,"div",24)(12,"span"),g(13),m(),p(14,"span",25),g(15),m()()(),p(16,"div",26)(17,"div",27)(18,"p",28),g(19,"Diagn\xF3stico Reportado"),m(),p(20,"div",29),g(21),m(),p(22,"div",30)(23,"p",28),g(24,"Historial T\xE9cnico"),m(),p(25,"div",31),Qe(26,Fj,4,2,"div",32,Oj),m()()(),p(28,"div",33)(29,"h5",34),E(30,"i",35),g(31," Log\xEDstica de Refacciones "),m(),p(32,"div",36)(33,"div")(34,"label",37),g(35,"Orden de Compra (PO)"),m(),E(36,"input",38,0),m(),p(38,"div")(39,"label",37),g(40,"Estatus Refacci\xF3n"),m(),p(41,"select",39,1)(43,"option",40),g(44,"N/A (Solo Mano de Obra)"),m(),p(45,"option",41),g(46,"En Stock"),m(),p(47,"option",42),g(48,"Pedida a Planta"),m(),p(49,"option",43),g(50,"En Tr\xE1nsito"),m()()()(),p(51,"div",44),E(52,"input",45,2),p(54,"button",46),A("click",function(){let i=j(t).$implicit,s=un(53);return T().addNote(i.id,s.value),U(s.value="")}),E(55,"i",47),m()(),p(56,"div",48)(57,"button",49),A("click",function(){let i=j(t).$implicit,s=un(37),o=un(42),a=T();return U(a.saveLogistics(i.id,s.value,o.value))}),g(58," Guardar Cambios "),m(),p(59,"button",50),A("click",function(){let i=j(t).$implicit,s=T();return U(s.closeTicket(i.id))}),g(60," Liberar "),m()()()()()}if(n&2){let t=e.$implicit;_(4),F(" ",t.economico.slice(-3)," "),_(3),Q(t.economico),_(2),Q(dn(10,10,t.fechaIngreso,"medium")),_(3),_e("px-3 py-1 rounded text-xs font-bold uppercase "+(t.prioridad==="Alta"?"bg-red-100 text-red-700":"bg-slate-100 text-slate-600")),_(),F(" ",t.prioridad," "),_(2),F(" ",t.estatus," "),_(6),F(" ",t.falla," "),_(5),Ze(t.seguimiento),_(10),le("value",t.ordenCompra||""),_(5),le("value",t.estatusRefaccion||"N/A")}}function Vj(n,e){n&1&&(p(0,"div",18)(1,"div",52),E(2,"i",53),m(),p(3,"h3",54),g(4,"Todo limpio"),m(),p(5,"p",55),g(6,"No hay unidades pendientes en taller."),m()())}var OD=(()=>{class n{constructor(){this.dataService=S(pt),this.openFailures=this.dataService.forkliftFailures,this.pendingParts=$(()=>this.dataService.forkliftFailures().filter(t=>t.estatusRefaccion==="Pedida").length),this.criticalCount=$(()=>this.dataService.forkliftFailures().filter(t=>t.prioridad==="Alta"&&t.estatus!=="Cerrada").length)}saveLogistics(t,r,i){this.dataService.updateToyotaLogistics(t,r,i)}addNote(t,r){r&&this.dataService.addFailureUpdate(t,r,"Toyota Tech")}closeTicket(t){confirm("\xBFConfirmar liberaci\xF3n de equipo?")&&this.dataService.closeLiveFailure(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Pe({type:n,selectors:[["app-service-panel"]],decls:26,vars:4,consts:[["po",""],["status",""],["note",""],[1,"space-y-6"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4"],[1,"bg-orange-600","text-white","p-6","rounded-xl","shadow-lg","relative","overflow-hidden"],[1,"fas","fa-wrench","absolute","-right-4","-bottom-4","text-8xl","text-orange-700","opacity-50"],[1,"text-xs","uppercase","font-bold","text-orange-100"],[1,"text-4xl","font-black","mt-2"],[1,"bg-white","p-6","rounded-xl","border","border-slate-200","shadow-sm","flex","flex-col","justify-center"],[1,"text-xs","uppercase","font-bold","text-slate-400"],[1,"text-3xl","font-black","text-slate-700","mt-1"],[1,"text-3xl","font-black","text-red-500","mt-1"],[1,"bg-white","rounded-xl","shadow-sm","border","border-slate-200","overflow-hidden","min-h-[500px]"],[1,"p-4","border-b","border-slate-100","bg-slate-50","flex","justify-between","items-center"],[1,"font-bold","text-slate-700","uppercase","tracking-wide","text-sm"],[1,"divide-y","divide-slate-100"],[1,"p-6","hover:bg-slate-50","transition-colors"],[1,"py-20","text-center"],[1,"flex","flex-col","md:flex-row","justify-between","items-start","md:items-center","mb-4","gap-4"],[1,"flex","items-center","gap-4"],[1,"w-12","h-12","rounded-lg","bg-slate-900","text-white","flex","items-center","justify-center","font-black","text-lg"],[1,"font-black","text-xl","text-slate-800"],[1,"text-xs","text-slate-500"],[1,"flex","gap-2"],[1,"px-3","py-1","rounded","text-xs","font-bold","uppercase","bg-blue-100","text-blue-700"],[1,"grid","grid-cols-1","lg:grid-cols-3","gap-8"],[1,"lg:col-span-1"],[1,"text-xs","font-bold","text-slate-400","uppercase","mb-2"],[1,"bg-slate-50","p-3","rounded-lg","border","border-slate-200","text-sm","text-slate-700","font-medium"],[1,"mt-4"],[1,"space-y-2","max-h-32","overflow-y-auto","custom-scroll","text-xs"],[1,"p-2","rounded","bg-slate-50","border","border-slate-100"],[1,"lg:col-span-2","bg-slate-50","rounded-xl","p-5","border","border-slate-200"],[1,"font-bold","text-slate-700","mb-4","flex","items-center","gap-2"],[1,"fas","fa-box-open"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4","mb-4"],[1,"text-xs","font-bold","text-slate-400","uppercase"],["type","text",1,"w-full","mt-1","p-2","rounded","border","border-slate-300","text-sm","focus:ring-2","focus:ring-orange-500",3,"value"],[1,"w-full","mt-1","p-2","rounded","border","border-slate-300","text-sm","bg-white",3,"value"],["value","N/A"],["value","En Stock"],["value","Pedida"],["value","Por Recibir"],[1,"flex","gap-2","mt-4"],["type","text","placeholder","Agregar nota t\xE9cnica...",1,"flex-1","p-2","rounded","border","border-slate-300","text-sm"],[1,"px-4","py-2","bg-slate-200","text-slate-700","font-bold","rounded","text-xs","hover:bg-slate-300","transition",3,"click"],[1,"fas","fa-comment"],[1,"flex","gap-3","mt-4","pt-4","border-t","border-slate-200"],[1,"flex-1","py-2","bg-slate-800","text-white","rounded","font-bold","text-xs","uppercase","hover:bg-slate-900","transition",3,"click"],[1,"px-6","py-2","bg-green-600","text-white","rounded","font-bold","text-xs","uppercase","hover:bg-green-700","transition",3,"click"],[1,"font-bold","text-orange-600"],[1,"inline-flex","items-center","justify-center","w-20","h-20","rounded-full","bg-slate-100","text-slate-300","mb-4"],[1,"fas","fa-check","text-4xl"],[1,"font-bold","text-slate-600"],[1,"text-slate-400","text-sm"]],template:function(r,i){r&1&&(p(0,"div",3)(1,"div",4)(2,"div",5),E(3,"i",6),p(4,"p",7),g(5,"Unidades en Taller"),m(),p(6,"p",8),g(7),m()(),p(8,"div",9)(9,"p",10),g(10,"Refacciones Pendientes"),m(),p(11,"p",11),g(12),m()(),p(13,"div",9)(14,"p",10),g(15,"Prioridad Alta"),m(),p(16,"p",12),g(17),m()()(),p(18,"div",13)(19,"div",14)(20,"h3",15),g(21,"\xD3rdenes de Trabajo Activas"),m()(),p(22,"div",16),Qe(23,Lj,61,13,"div",17,Pj,!1,Vj,7,0,"div",18),m()()()),r&2&&(_(7),Q(i.openFailures().length),_(5),Q(i.pendingParts()),_(5),Q(i.criticalCount()),_(6),Ze(i.openFailures()))},dependencies:[xe,Wn,Cn,bs,Cs],encapsulation:2})}}return n})();var jj=(n,e)=>e.id,Uj=(n,e)=>e.name;function Bj(n,e){n&1&&(p(0,"span",19),E(1,"span",27)(2,"span",28),m())}function Hj(n,e){n&1&&E(0,"span",20)}function $j(n,e){n&1&&(p(0,"div",26)(1,"div",29),E(2,"i",30),m(),p(3,"span",31),g(4,"En Reparaci\xF3n"),m()())}function zj(n,e){if(n&1){let t=ve();p(0,"button",17),A("click",function(){let i=j(t).$implicit,s=T(2);return U(s.selectAsset(i.id))}),p(1,"div",18),re(2,Bj,3,0,"span",19)(3,Hj,1,0,"span",20),m(),p(4,"div",21),E(5,"i",22),m(),p(6,"div",23)(7,"span",24),g(8),m(),p(9,"span",25),g(10),m()(),re(11,$j,5,0,"div",26),m()}if(n&2){let t=e.$implicit;_(2),ie(t.status.name==="Taller"?2:3),_(6),Q(t.id),_(2),Q(t.model),_(),ie(t.status.name!=="Operativo"?11:-1)}}function Wj(n,e){if(n&1&&(p(0,"div",12)(1,"h3",14),g(2,"1. Selecciona la unidad a reportar"),m(),p(3,"div",15),Qe(4,zj,12,4,"button",16,jj),m()()),n&2){let t=T();_(4),Ze(t.assets())}}function Gj(n,e){if(n&1){let t=ve();p(0,"button",50),A("click",function(){let i=j(t).$implicit,s=T(2);return U(s.category.set(i.name))}),E(1,"i"),p(2,"span",51),g(3),m()()}if(n&2){let t=e.$implicit,r=T(2);_e(r.getCategoryClass(t.name)),_(),_e("fas "+t.icon+" text-2xl mb-1"),_(2),Q(t.name)}}function qj(n,e){if(n&1){let t=ve();p(0,"div",13)(1,"div",32)(2,"div",33),E(3,"i",34),m(),p(4,"h3",35),g(5),m(),p(6,"span",36),g(7," Reportando Falla "),m(),p(8,"div",37)(9,"button",38),A("click",function(){j(t);let i=T();return U(i.step.set(1))}),E(10,"i",39),g(11," Cambiar Unidad "),m()()(),p(12,"div",40)(13,"div",41)(14,"label",42)(15,"span",43),g(16,"1"),m(),g(17," Selecciona el Sistema Afectado "),m(),p(18,"div",44),Qe(19,Gj,4,5,"button",45,Uj),m()(),p(21,"div",46)(22,"label",42)(23,"span",43),g(24,"2"),m(),g(25," Detalles Adicionales (Opcional) "),m(),p(26,"textarea",47),At("ngModelChange",function(i){j(t);let s=T();return $t(s.notes,i)||(s.notes=i),U(i)}),m()(),p(27,"button",48),A("click",function(){j(t);let i=T();return U(i.submitReport())}),p(28,"span"),g(29,"ENVIAR REPORTE"),m(),E(30,"i",49),m()()()}if(n&2){let t=T();_(5),Q(t.selectedId()),_(14),Ze(t.categories),_(7),xt("ngModel",t.notes),_(),le("disabled",!t.category())}}var FD=(()=>{class n{constructor(){this.dataService=S(pt),this.assets=this.dataService.assets,this.step=O(1),this.selectedId=O(""),this.category=O(""),this.notes="",this.categories=[{name:"Llantas",icon:"fa-truck-monster"},{name:"Frenos",icon:"fa-ban"},{name:"Motor",icon:"fa-cogs"},{name:"Hidr\xE1ulico",icon:"fa-oil-can"},{name:"El\xE9ctrico",icon:"fa-bolt"},{name:"Da\xF1o F\xEDsico",icon:"fa-car-crash"}]}selectAsset(t){this.dataService.getAsset(t)?.status.name!=="Taller"&&(this.selectedId.set(t),this.step.set(2))}submitReport(){if(!this.category())return;let t=`[${this.category()}] ${this.notes||"Sin detalles adicionales."}`;this.dataService.addLiveFailure({economico:this.selectedId(),falla:t,prioridad:this.category()==="Frenos"?"Alta":"Media",reporta:"Operador M\xF3vil",estatus:"Abierta"}),alert("Reporte enviado exitosamente. Toyota ha sido notificado."),this.step.set(1),this.category.set(""),this.notes="",this.selectedId.set("")}getCategoryClass(t){return this.category()===t?"bg-gradient-to-br from-[#ce1126] to-[#a30d1d] border-transparent text-white shadow-lg shadow-red-900/30 scale-105 z-10":"bg-white border-slate-200 text-slate-500 hover:border-red-200 hover:bg-red-50 hover:text-red-600"}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Pe({type:n,selectors:[["app-solicitor-panel"]],decls:19,vars:7,consts:[[1,"w-full","h-full","bg-slate-50","flex","flex-col","overflow-hidden"],[1,"bg-[#ce1126]","text-white","px-6","py-3","shadow-md","flex","justify-between","items-center","shrink-0","z-20"],[1,"flex","items-center","gap-3"],[1,"w-8","h-8","bg-white/20","rounded-lg","flex","items-center","justify-center"],[1,"fas","fa-mobile-alt","text-sm"],[1,"text-base","font-black","uppercase","tracking-widest","leading-none"],[1,"text-[10px]","text-red-100","opacity-90"],[1,"flex","items-center","gap-3","bg-black/10","px-3","py-1","rounded-full"],[1,"text-[10px]","font-bold","opacity-80","uppercase","tracking-wide"],[1,"flex","gap-1.5"],[1,"w-2","h-2","rounded-full","transition-colors","duration-300"],[1,"flex-1","overflow-hidden","relative"],[1,"h-full","overflow-y-auto","custom-scroll","p-4","md:p-6","bg-slate-100/50"],[1,"h-full","flex","flex-col","md:flex-row","animate-fade-in","divide-y","md:divide-y-0","md:divide-x","divide-slate-200"],[1,"text-sm","font-bold","text-slate-500","uppercase","tracking-wide","mb-4","pl-1"],[1,"grid","grid-cols-2","md:grid-cols-3","lg:grid-cols-4","xl:grid-cols-5","gap-4"],[1,"group","relative","bg-white","rounded-xl","shadow-sm","border-2","border-transparent","hover:border-red-500","focus:border-red-500","transition-all","p-4","flex","flex-col","items-center","justify-between","h-36","md:h-40","hover:shadow-md"],[1,"group","relative","bg-white","rounded-xl","shadow-sm","border-2","border-transparent","hover:border-red-500","focus:border-red-500","transition-all","p-4","flex","flex-col","items-center","justify-between","h-36","md:h-40","hover:shadow-md",3,"click"],[1,"absolute","top-3","right-3","flex","gap-1"],[1,"flex","h-2.5","w-2.5"],["title","Operativo",1,"w-2.5","h-2.5","rounded-full","bg-emerald-500","shadow-sm"],[1,"mt-2","text-slate-200","group-hover:text-red-50","transition-colors","duration-300"],[1,"fas","fa-truck-loading","text-5xl"],[1,"text-center","z-10","w-full"],[1,"block","text-xl","md:text-2xl","font-black","text-slate-800","tracking-tighter","group-hover:scale-110","transition-transform"],[1,"block","text-[10px]","text-slate-500","font-mono","mt-1","border-t","border-slate-100","pt-1","mx-4"],[1,"absolute","inset-0","bg-slate-50/90","backdrop-blur-[1px]","rounded-[10px]","flex","flex-col","items-center","justify-center","z-20","cursor-not-allowed","border-2","border-slate-100"],[1,"animate-ping","absolute","inline-flex","h-full","w-full","rounded-full","bg-red-400","opacity-75"],[1,"relative","inline-flex","rounded-full","h-2.5","w-2.5","bg-red-500"],[1,"bg-white","p-2","rounded-full","shadow-sm","mb-2"],[1,"fas","fa-lock","text-slate-400","text-lg"],[1,"text-[10px]","font-bold","text-slate-500","uppercase","tracking-wide"],[1,"md:w-1/3","lg:w-1/4","bg-white","p-6","flex","flex-col","justify-center","items-center","text-center","shrink-0","shadow-[4px_0_24px_rgba(0,0,0,0.02)]","z-10"],[1,"w-24","h-24","rounded-full","bg-slate-50","border","border-slate-100","shadow-inner","flex","items-center","justify-center","mb-6"],[1,"fas","fa-truck-moving","text-4xl","text-slate-700"],[1,"text-4xl","font-black","text-slate-800","tracking-tight"],[1,"inline-block","mt-2","px-3","py-1","rounded-full","bg-red-50","text-red-600","text-[10px]","font-bold","uppercase","tracking-widest","border","border-red-100"],[1,"mt-auto","w-full","pt-8"],[1,"w-full","px-6","py-3","rounded-xl","border","border-slate-200","text-slate-500","text-xs","font-bold","hover:bg-slate-50","hover:text-slate-800","transition","flex","items-center","justify-center","gap-2","group",3,"click"],[1,"fas","fa-arrow-left","group-hover:-translate-x-1","transition-transform"],[1,"flex-1","bg-[#f8fafc]","p-6","md:p-8","overflow-y-auto","custom-scroll","flex","flex-col","h-full"],[1,"mb-6","shrink-0"],[1,"flex","items-center","gap-2","text-xs","font-bold","text-slate-400","uppercase","mb-3","px-1"],[1,"w-5","h-5","rounded-full","bg-slate-200","text-slate-500","flex","items-center","justify-center","text-[10px]"],[1,"grid","grid-cols-2","sm:grid-cols-3","lg:grid-cols-6","gap-3"],[1,"p-2","rounded-xl","border","transition-all","duration-200","flex","flex-col","items-center","justify-center","gap-2","h-24","hover:shadow-lg",3,"class"],[1,"mb-6","flex-1","min-h-[120px]","flex","flex-col"],["placeholder","Ej: Ruidos extra\xF1os al elevar la carga...",1,"w-full","flex-1","p-4","bg-white","border","border-slate-200","rounded-xl","focus:ring-2","focus:ring-[#ce1126]/20","focus:border-[#ce1126]","outline-none","resize-none","text-sm","transition-shadow","shadow-sm","placeholder:text-slate-300",3,"ngModelChange","ngModel"],[1,"w-full","py-4","bg-gradient-to-r","from-[#ce1126]","to-[#a30d1d]","hover:from-[#a30d1d]","hover:to-[#8a0b18]","disabled:from-slate-300","disabled:to-slate-300","disabled:text-slate-500","text-white","rounded-xl","font-bold","text-lg","shadow-xl","shadow-red-900/20","hover:shadow-red-900/40","transition-all","flex","items-center","justify-center","gap-3","transform","hover:-translate-y-0.5","active:translate-y-0","disabled:transform-none",3,"click","disabled"],[1,"fas","fa-paper-plane"],[1,"p-2","rounded-xl","border","transition-all","duration-200","flex","flex-col","items-center","justify-center","gap-2","h-24","hover:shadow-lg",3,"click"],[1,"text-[10px]","font-bold","uppercase","leading-tight","text-center"]],template:function(r,i){r&1&&(p(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),E(4,"i",4),m(),p(5,"div")(6,"h2",5),g(7,"Reporte R\xE1pido"),m(),p(8,"p",6),g(9,"Terminal Operador"),m()()(),p(10,"div",7)(11,"span",8),g(12),m(),p(13,"div",9),E(14,"div",10)(15,"div",10),m()()(),p(16,"div",11),re(17,Wj,6,0,"div",12)(18,qj,31,3,"div",13),m()()),r&2&&(_(12),F("Paso ",i.step()," de 2"),_(2),_e(i.step()>=1?"bg-white":"bg-white/30"),_(),_e(i.step()>=2?"bg-white":"bg-white/30"),_(2),ie(i.step()===1?17:-1),_(),ie(i.step()===2?18:-1))},dependencies:[xe,Cn,Ar,ws,gi],styles:[".animate-fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .4s cubic-bezier(.16,1,.3,1)}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(5px)}to{opacity:1;transform:translateY(0)}}"]})}}return n})();function Kj(n,e){if(n&1&&(p(0,"div",11),E(1,"i",26),g(2),m()),n&2){let t=T();_(2),F(" ",t.authService.error()," ")}}function Yj(n,e){if(n&1){let t=ve();p(0,"div")(1,"label",13),g(2,"Nombre Completo"),m(),p(3,"div",14),E(4,"i",27),p(5,"input",28),At("ngModelChange",function(i){j(t);let s=T();return $t(s.displayName,i)||(s.displayName=i),U(i)}),m()()()}if(n&2){let t=T();_(5),xt("ngModel",t.displayName)}}function Qj(n,e){n&1&&(E(0,"i",29),g(1," Procesando... "))}function Zj(n,e){if(n&1&&(E(0,"i"),g(1)),n&2){let t=T();_e(t.isLoginMode()?"fas fa-sign-in-alt":"fas fa-user-plus"),_(),F(" ",t.isLoginMode()?"Iniciar Sesi\xF3n":"Crear Cuenta"," ")}}var LD=(()=>{class n{constructor(){this.authService=S(Mu),this.email="",this.password="",this.displayName="",this.isLoginMode=O(!0),this.showPassword=O(!1),this.isSubmitting=O(!1)}async onSubmit(){if(!(!this.email||!this.password)){if(this.isSubmitting.set(!0),this.isLoginMode())await this.authService.login(this.email,this.password);else{if(!this.displayName){this.isSubmitting.set(!1);return}await this.authService.register(this.email,this.password,this.displayName)}this.isSubmitting.set(!1)}}async loginDemo(){this.isSubmitting.set(!0),await this.authService.loginAsDemo(),this.isSubmitting.set(!1)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Pe({type:n,selectors:[["app-login"]],decls:44,vars:14,consts:[[1,"min-h-screen","bg-gradient-to-br","from-slate-900","via-slate-800","to-red-900","flex","items-center","justify-center","p-4"],[1,"absolute","inset-0","opacity-10","bg-[radial-gradient(circle_at_1px_1px,rgba(255,255,255,0.15)_1px,transparent_0)]","bg-[size:40px_40px]"],[1,"relative","w-full","max-w-md"],[1,"text-center","mb-8"],[1,"inline-flex","items-center","justify-center","w-20","h-20","bg-red-600","rounded-2xl","mb-4","shadow-2xl","shadow-red-600/30"],[1,"fas","fa-shield-alt","text-4xl","text-white"],[1,"text-3xl","font-black","text-white","tracking-tight"],[1,"text-slate-400","mt-1"],[1,"bg-white/10","backdrop-blur-xl","rounded-3xl","p-8","shadow-2xl","border","border-white/20"],[1,"flex","gap-2","mb-6"],[3,"click"],[1,"mb-4","p-3","bg-red-500/20","border","border-red-500/50","rounded-xl","flex","items-center","gap-2","text-red-300","text-sm"],[1,"space-y-4",3,"ngSubmit"],[1,"block","text-sm","font-medium","text-slate-300","mb-1.5"],[1,"relative"],[1,"fas","fa-envelope","absolute","left-4","top-1/2","-translate-y-1/2","text-slate-400"],["type","email","name","email","placeholder","tu@email.com","required","","autocomplete","email",1,"w-full","pl-11","pr-4","py-3","bg-white/10","border","border-white/20","rounded-xl","text-white","placeholder-slate-500","focus:outline-none","focus:ring-2","focus:ring-red-500","focus:border-transparent","transition-all",3,"ngModelChange","ngModel"],[1,"fas","fa-lock","absolute","left-4","top-1/2","-translate-y-1/2","text-slate-400"],["name","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022","required","","minlength","6","autocomplete","current-password",1,"w-full","pl-11","pr-12","py-3","bg-white/10","border","border-white/20","rounded-xl","text-white","placeholder-slate-500","focus:outline-none","focus:ring-2","focus:ring-red-500","focus:border-transparent","transition-all",3,"ngModelChange","type","ngModel"],["type","button",1,"absolute","right-4","top-1/2","-translate-y-1/2","text-slate-400","hover:text-white","transition-colors",3,"click"],["type","submit",1,"w-full","py-3.5","bg-gradient-to-r","from-red-600","to-red-500","hover:from-red-500","hover:to-red-400","text-white","font-bold","rounded-xl","shadow-lg","shadow-red-600/30","transition-all","duration-300","disabled:opacity-50","disabled:cursor-not-allowed","flex","items-center","justify-center","gap-2",3,"disabled"],[1,"mt-6","pt-6","border-t","border-white/10"],[1,"text-center","text-slate-400","text-sm","mb-3"],[1,"w-full","py-2.5","bg-slate-700/50","hover:bg-slate-700","text-slate-300","hover:text-white","font-medium","rounded-xl","transition-all","flex","items-center","justify-center","gap-2",3,"click","disabled"],[1,"fas","fa-play-circle"],[1,"text-center","text-slate-500","text-xs","mt-6"],[1,"fas","fa-exclamation-circle"],[1,"fas","fa-user","absolute","left-4","top-1/2","-translate-y-1/2","text-slate-400"],["type","text","name","displayName","placeholder","Tu nombre",1,"w-full","pl-11","pr-4","py-3","bg-white/10","border","border-white/20","rounded-xl","text-white","placeholder-slate-500","focus:outline-none","focus:ring-2","focus:ring-red-500","focus:border-transparent","transition-all",3,"ngModelChange","ngModel"],[1,"fas","fa-circle-notch","fa-spin"]],template:function(r,i){r&1&&(p(0,"div",0),E(1,"div",1),p(2,"div",2)(3,"div",3)(4,"div",4),E(5,"i",5),m(),p(6,"h1",6),g(7,"ASSET GUARD"),m(),p(8,"p",7),g(9,"Sistema de Gesti\xF3n de Activos"),m()(),p(10,"div",8)(11,"div",9)(12,"button",10),A("click",function(){return i.isLoginMode.set(!0)}),g(13," Iniciar Sesi\xF3n "),m(),p(14,"button",10),A("click",function(){return i.isLoginMode.set(!1)}),g(15," Registrarse "),m()(),re(16,Kj,3,1,"div",11),p(17,"form",12),A("ngSubmit",function(){return i.onSubmit()}),re(18,Yj,6,1,"div"),p(19,"div")(20,"label",13),g(21,"Correo Electr\xF3nico"),m(),p(22,"div",14),E(23,"i",15),p(24,"input",16),At("ngModelChange",function(o){return $t(i.email,o)||(i.email=o),o}),m()()(),p(25,"div")(26,"label",13),g(27,"Contrase\xF1a"),m(),p(28,"div",14),E(29,"i",17),p(30,"input",18),At("ngModelChange",function(o){return $t(i.password,o)||(i.password=o),o}),m(),p(31,"button",19),A("click",function(){return i.showPassword.set(!i.showPassword())}),E(32,"i"),m()()(),p(33,"button",20),re(34,Qj,2,0)(35,Zj,2,3),m()(),p(36,"div",21)(37,"p",22),g(38,"\xBFSolo quieres probar?"),m(),p(39,"button",23),A("click",function(){return i.loginDemo()}),E(40,"i",24),g(41," Acceso Demo "),m()()(),p(42,"p",25),g(43," \xA9 2024 Asset Guard Corporate Edition. Todos los derechos reservados. "),m()()()),r&2&&(_(12),_e(i.isLoginMode()?"flex-1 py-2.5 rounded-xl font-semibold text-white bg-red-600 shadow-lg":"flex-1 py-2.5 rounded-xl font-semibold text-slate-400 hover:text-white transition-colors"),_(2),_e(i.isLoginMode()?"flex-1 py-2.5 rounded-xl font-semibold text-slate-400 hover:text-white transition-colors":"flex-1 py-2.5 rounded-xl font-semibold text-white bg-red-600 shadow-lg"),_(2),ie(i.authService.error()?16:-1),_(2),ie(i.isLoginMode()?-1:18),_(6),xt("ngModel",i.email),_(6),le("type",i.showPassword()?"text":"password"),xt("ngModel",i.password),_(2),_e(i.showPassword()?"fas fa-eye-slash":"fas fa-eye"),_(),le("disabled",i.isSubmitting()),_(),ie(i.isSubmitting()?34:35),_(5),le("disabled",i.isSubmitting()))},dependencies:[xe,Cn,AD,Ar,ws,CD,ay,ly,gi,oy],encapsulation:2})}}return n})();function Jj(n,e){n&1&&(p(0,"div",0)(1,"div",2)(2,"div",3),E(3,"i",4),m(),p(4,"h1",5),g(5,"ASSET GUARD"),m(),p(6,"div",6),E(7,"i",7),p(8,"span",8),g(9,"Iniciando sistema..."),m()()()())}function Xj(n,e){n&1&&E(0,"app-login")}function e3(n,e){n&1&&(p(0,"span",50),E(1,"span",82)(2,"span",83),m())}function t3(n,e){n&1&&E(0,"app-dashboard")}function n3(n,e){n&1&&E(0,"app-service-panel")}function r3(n,e){n&1&&E(0,"app-asset-list")}function i3(n,e){n&1&&E(0,"app-solicitor-panel")}function s3(n,e){n&1&&E(0,"app-admin")}function o3(n,e){n&1&&(p(0,"div",63)(1,"div",84),E(2,"i",85)(3,"i",86),m(),p(4,"p",87),g(5,"Analizando flota en tiempo real..."),m()())}function a3(n,e){if(n&1&&E(0,"div",64),n&2){let t=T(2);le("innerHTML",t.aiInsights(),Qr)}}function l3(n,e){n&1&&(p(0,"div",65)(1,"div",88),E(2,"i",89),m(),p(3,"div")(4,"h4",90),g(5,"\xBFC\xF3mo puedo ayudarte?"),m(),p(6,"p",91),g(7," Utilizo los datos actuales de fallas, costos y disponibilidad para generarte reportes al instante. "),m()()())}function c3(n,e){if(n&1&&(p(0,"div",81)(1,"div",92),E(2,"app-asset-detail",93),m()()),n&2){let t=T(2);_(2),le("assetId",t.selectedAssetId())}}function u3(n,e){if(n&1){let t=ve();p(0,"div",9)(1,"aside",10)(2,"div")(3,"div",11),E(4,"i",12),p(5,"span",13),g(6,"ASSET GUARD"),m()(),p(7,"nav",14)(8,"button",15),A("click",function(){j(t);let i=T();return U(i.setView("dashboard"))}),E(9,"i",16),p(10,"span",17),g(11,"Resumen Ejecutivo"),m(),p(12,"div",18),g(13,"Resumen"),m()(),p(14,"button",15),A("click",function(){j(t);let i=T();return U(i.setView("service"))}),E(15,"i",19),p(16,"span",17),g(17,"Taller & Fallas"),m(),p(18,"div",18),g(19,"Taller"),m()(),p(20,"button",15),A("click",function(){j(t);let i=T();return U(i.setView("assets"))}),E(21,"i",20),p(22,"span",17),g(23,"Inventario Flota"),m(),p(24,"div",18),g(25,"Flota"),m()(),p(26,"button",15),A("click",function(){j(t);let i=T();return U(i.setView("solicitor"))}),E(27,"i",21),p(28,"span",17),g(29,"App Operador"),m()()()(),p(30,"div",22)(31,"button",23),A("click",function(){j(t);let i=T();return U(i.setView("settings"))}),E(32,"i",24),p(33,"span",25),g(34,"Configuraci\xF3n"),m()(),p(35,"div",26)(36,"p",27),g(37,"Planta Cuautitl\xE1n"),m(),p(38,"div",28),g(39,"v2.1.0 Enterprise"),m()()()(),p(40,"div",29)(41,"header",30)(42,"div",31)(43,"div",32)(44,"h2",33),g(45),m(),p(46,"div",34)(47,"div",35),E(48,"span",36)(49,"span",37),m(),p(50,"span",38),g(51),m(),p(52,"div",39),g(53," Estado de conexi\xF3n con Firebase Realtime DB "),m()()()(),p(54,"div",40)(55,"div",41)(56,"div")(57,"p",42),g(58,"Ing. Sergio Guadarrama"),m(),p(59,"span",43),g(60,"Supervisor Operaciones"),m()(),p(61,"div",44),E(62,"i",45),m()(),E(63,"div",46),p(64,"button",47),A("click",function(){j(t);let i=T();return U(i.toggleAiPanel())}),E(65,"i",48),p(66,"span",49),g(67,"Asistente"),m(),re(68,e3,3,0,"span",50),m()()(),p(69,"main",51)(70,"div",52),re(71,t3,1,0,"app-dashboard")(72,n3,1,0,"app-service-panel")(73,r3,1,0,"app-asset-list")(74,i3,1,0,"app-solicitor-panel")(75,s3,1,0,"app-admin"),m()(),p(76,"div",53)(77,"div",54)(78,"div",55)(79,"div",56),E(80,"i",57),m(),p(81,"div")(82,"h3",58),g(83,"Gemini Assistant"),m(),p(84,"p",59),g(85,"AssetGuard Intelligence"),m()()(),p(86,"button",60),A("click",function(){j(t);let i=T();return U(i.toggleAiPanel())}),E(87,"i",61),m()(),p(88,"div",62),re(89,o3,6,0,"div",63)(90,a3,1,1,"div",64)(91,l3,8,0,"div",65),m(),p(92,"div",66)(93,"p",67),g(94,"Acciones Sugeridas"),m(),p(95,"button",68),A("click",function(){j(t);let i=T();return U(i.generateExecutiveSummary())}),p(96,"div",69),E(97,"i",70),m(),p(98,"div")(99,"span",71),g(100,"Resumen Ejecutivo del D\xEDa"),m(),p(101,"span",72),g(102,"Estado general y cumplimiento"),m()()(),p(103,"button",73),A("click",function(){j(t);let i=T();return U(i.generateExecutiveSummary())}),p(104,"div",74),E(105,"i",75),m(),p(106,"div")(107,"span",71),g(108,"Explicar Riesgos Operativos"),m(),p(109,"span",76),g(110,"Causas de baja disponibilidad"),m()()(),p(111,"button",77),A("click",function(){j(t);let i=T();return U(i.generateExecutiveSummary())}),p(112,"div",78),E(113,"i",79),m(),p(114,"div")(115,"span",71),g(116,"Sugerir Acciones de Mejora"),m(),p(117,"span",80),g(118,"Optimizaci\xF3n de flota"),m()()()()(),re(119,c3,3,1,"div",81),m()()}if(n&2){let t,r=T();ye("dark",r.plantMode()),_(8),ye("border-[#ce1126]",r.currentView()==="dashboard")("bg-slate-800",r.currentView()==="dashboard")("text-white",r.currentView()==="dashboard")("border-transparent",r.currentView()!=="dashboard")("hover:bg-slate-800",r.currentView()!=="dashboard"),_(),ye("text-[#ce1126]",r.currentView()==="dashboard"),_(5),ye("border-orange-500",r.currentView()==="service")("bg-slate-800",r.currentView()==="service")("text-white",r.currentView()==="service")("border-transparent",r.currentView()!=="service")("hover:bg-slate-800",r.currentView()!=="service"),_(),ye("text-orange-500",r.currentView()==="service"),_(5),ye("border-blue-500",r.currentView()==="assets")("bg-slate-800",r.currentView()==="assets")("text-white",r.currentView()==="assets")("border-transparent",r.currentView()!=="assets")("hover:bg-slate-800",r.currentView()!=="assets"),_(),ye("text-blue-500",r.currentView()==="assets"),_(5),ye("border-slate-500",r.currentView()==="solicitor")("bg-slate-800",r.currentView()==="solicitor")("text-white",r.currentView()==="solicitor")("border-transparent",r.currentView()!=="solicitor")("hover:bg-slate-800",r.currentView()!=="solicitor"),_(),ye("text-slate-400",r.currentView()==="solicitor"),_(18),Q(r.viewTitle),_(3),ye("bg-green-500",r.connectionStatus()==="online")("bg-amber-500",r.connectionStatus()==="syncing")("bg-red-500",r.connectionStatus()==="offline"),_(),ye("bg-green-500",r.connectionStatus()==="online")("bg-amber-500",r.connectionStatus()==="syncing")("bg-red-500",r.connectionStatus()==="offline"),_(2),F(" ",r.syncText()," "),_(17),ie(r.aiLoading()?68:-1),_(3),ie((t=r.currentView())==="dashboard"?71:t==="service"?72:t==="assets"?73:t==="solicitor"?74:t==="settings"?75:-1),_(5),ye("translate-x-full",!r.showAiPanel())("translate-x-0",r.showAiPanel()),_(13),ie(r.aiLoading()?89:r.aiInsights()?90:91),_(30),ie(r.selectedAssetId()?119:-1)}}var VD=(()=>{class n{constructor(){this.dataService=S(pt),this.geminiService=S(gs),this.authService=S(Mu),this.sanitizer=S(ti),this.isAuthenticated=this.authService.isAuthenticated,this.isAuthLoading=this.authService.isLoading,this.currentUser=this.authService.currentUser,this.currentView=O("dashboard"),this.selectedAssetId=O(null),this.showAiPanel=O(!1),this.connectionStatus=this.dataService.connectionStatus,this.lastUpdate=this.dataService.lastUpdate,this.plantMode=this.dataService.plantMode,this.failures=this.dataService.forkliftFailures,this.aiInsights=O(null),this.aiLoading=O(!1),this.previousFailureCount=0,this.syncText=$(()=>this.connectionStatus()==="online"?"Conectado (Firebase RTDB)":this.connectionStatus()==="syncing"?"Sincronizando...":"Modo Offline (Solo Lectura)"),Jr(()=>{let t=this.failures();if(t.length>this.previousFailureCount){let r=t[0];r.estatus==="Abierta"&&this.previousFailureCount>0&&this.playAlert(r.prioridad==="Alta")}this.previousFailureCount=t.length}),window.addEventListener("asset-selected",t=>this.selectedAssetId.set(t.detail)),window.addEventListener("asset-closed",()=>this.selectedAssetId.set(null))}setView(t){this.currentView.set(t),this.selectedAssetId.set(null),t==="dashboard"&&!this.plantMode()&&this.dataService.togglePlantMode(),t!=="dashboard"&&this.plantMode()&&this.dataService.togglePlantMode()}toggleAiPanel(){this.showAiPanel.update(t=>!t),this.showAiPanel()&&this.aiInsights()}async generateExecutiveSummary(){this.aiLoading.set(!0);let t=this.dataService.kpiData(),r=this.dataService.fleetAvailability(),i=this.failures().filter(o=>o.estatus!=="Cerrada"),s=await this.geminiService.generateExecutiveReport(t,i,r);this.aiInsights.set(this.sanitizer.bypassSecurityTrustHtml(s)),this.aiLoading.set(!1)}playAlert(t){new Audio(t?"https://assets.mixkit.co/active_storage/sfx/2869/2869-preview.mp3":"https://assets.mixkit.co/active_storage/sfx/2345/2345-preview.mp3").play().catch(()=>{})}async logout(){await this.authService.logout()}get viewTitle(){switch(this.currentView()){case"dashboard":return"Centro de Monitoreo (NOC)";case"assets":return"Inventario de Flota";case"service":return"Gesti\xF3n T\xE9cnica Toyota";case"solicitor":return"App Operador";case"settings":return"Configuraci\xF3n";default:return"AssetGuard"}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Pe({type:n,selectors:[["app-root"]],decls:3,vars:1,consts:[[1,"min-h-screen","bg-gradient-to-br","from-slate-900","via-slate-800","to-red-900","flex","items-center","justify-center"],[1,"flex","h-screen","bg-slate-50","dark:bg-[#0f172a]","font-sans","overflow-hidden","transition-colors","duration-500",3,"dark"],[1,"text-center"],[1,"inline-flex","items-center","justify-center","w-24","h-24","bg-red-600","rounded-2xl","mb-6","shadow-2xl","shadow-red-600/30"],[1,"fas","fa-shield-alt","text-5xl","text-white"],[1,"text-4xl","font-black","text-white","tracking-tight","mb-2"],[1,"flex","items-center","justify-center","gap-2","text-slate-400"],[1,"fas","fa-circle-notch","fa-spin"],[1,"text-sm"],[1,"flex","h-screen","bg-slate-50","dark:bg-[#0f172a]","font-sans","overflow-hidden","transition-colors","duration-500"],[1,"w-20","lg:w-64","bg-slate-900","text-slate-300","flex","flex-col","justify-between","shrink-0","z-30","transition-all","duration-300","shadow-xl"],[1,"h-16","flex","items-center","justify-center","lg:justify-start","lg:px-6","border-b","border-slate-800","bg-slate-950"],[1,"fas","fa-network-wired","text-[#ce1126]","text-xl","shadow-lg","shadow-red-900/50","rounded-full"],[1,"ml-3","font-black","text-white","italic","text-lg","hidden","lg:block","tracking-tighter"],[1,"p-2","lg:p-4","space-y-1","mt-2"],[1,"w-full","flex","items-center","p-3","rounded-lg","transition-all","group","relative","border-l-4",3,"click"],[1,"fas","fa-chart-pie","w-6","text-center"],[1,"ml-3","text-sm","font-bold","hidden","lg:block"],[1,"lg:hidden","absolute","left-14","bg-slate-900","text-white","text-xs","px-2","py-1","rounded","shadow-lg","opacity-0","group-hover:opacity-100","transition-opacity","z-50","whitespace-nowrap","border","border-slate-700"],[1,"fas","fa-wrench","w-6","text-center"],[1,"fas","fa-truck-moving","w-6","text-center"],[1,"fas","fa-mobile-alt","w-6","text-center"],[1,"p-2","lg:p-4","border-t","border-slate-800","bg-slate-950"],[1,"w-full","flex","items-center","p-3","rounded-xl","hover:bg-slate-800","transition-colors","text-slate-400","hover:text-white",3,"click"],[1,"fas","fa-cog","w-6","text-center"],[1,"ml-3","text-xs","font-bold","uppercase","hidden","lg:block"],[1,"mt-4","text-center","lg:text-left","lg:px-3"],[1,"text-[10px]","text-slate-500","uppercase","font-bold","tracking-widest","hidden","lg:block"],[1,"text-[10px]","text-slate-600","truncate","mt-1"],[1,"flex-1","flex","flex-col","h-full","overflow-hidden","relative"],[1,"h-16","bg-white","dark:bg-[#1e293b]","border-b","border-slate-200","dark:border-slate-700","flex","items-center","justify-between","px-6","shrink-0","z-20","transition-colors","shadow-sm"],[1,"flex","items-center","gap-4"],[1,"flex","flex-col"],[1,"text-sm","font-bold","text-slate-800","dark:text-white","leading-tight"],[1,"flex","items-center","gap-2","mt-0.5","group","cursor-help"],[1,"relative","flex","h-2","w-2"],[1,"animate-ping","absolute","inline-flex","h-full","w-full","rounded-full","opacity-75"],[1,"relative","inline-flex","rounded-full","h-2","w-2"],[1,"text-[10px]","font-bold","text-slate-400","uppercase","tracking-wide","group-hover:text-slate-600","transition-colors"],[1,"hidden","group-hover:block","absolute","top-10","bg-slate-800","text-white","text-[10px]","p-2","rounded","shadow-lg","whitespace-nowrap","z-50"],[1,"flex","items-center","gap-6"],[1,"flex","items-center","gap-3","text-right","hidden","sm:flex"],[1,"text-xs","font-bold","text-slate-700","dark:text-white"],[1,"inline-block","bg-slate-100","dark:bg-slate-700","text-slate-500","dark:text-slate-300","px-1.5","py-0.5","rounded","text-[9px]","font-bold","uppercase","tracking-wider"],[1,"w-8","h-8","rounded-full","bg-slate-200","dark:bg-slate-600","flex","items-center","justify-center","text-slate-500","dark:text-slate-300","border","border-slate-300","dark:border-slate-500"],[1,"fas","fa-user","text-xs"],[1,"h-8","w-px","bg-slate-200","dark:bg-slate-700"],["title","Asistente IA",1,"group","relative","flex","items-center","gap-2","px-3","py-1.5","text-slate-500","hover:text-[#ce1126]","transition-colors","rounded-lg","hover:bg-red-50","dark:hover:bg-slate-800",3,"click"],[1,"fas","fa-sparkles","text-lg","group-hover:rotate-12","transition-transform"],[1,"text-xs","font-bold","hidden","md:inline"],[1,"absolute","top-1","right-1","flex","h-2","w-2"],[1,"flex-1","overflow-y-auto","custom-scroll","p-6","relative","bg-[#f8fafc]","dark:bg-[#0f172a]"],[1,"fade-enter","max-w-7xl","mx-auto","h-full","pb-20"],[1,"fixed","inset-y-0","right-0","w-[400px]","bg-white","dark:bg-[#1e293b]","shadow-2xl","transform","transition-transform","duration-300","z-50","border-l","border-slate-200","dark:border-slate-700","flex","flex-col"],[1,"p-6","border-b","border-slate-100","dark:border-slate-700","flex","justify-between","items-center","bg-gradient-to-r","from-slate-900","to-slate-800","text-white"],[1,"flex","items-center","gap-3"],[1,"w-10","h-10","rounded-full","bg-gradient-to-br","from-[#ce1126]","to-red-600","flex","items-center","justify-center","shadow-lg","shadow-red-900/50"],[1,"fas","fa-robot","text-lg"],[1,"font-bold","text-lg","leading-tight"],[1,"text-[10px]","text-slate-300","opacity-80","uppercase","tracking-widest"],[1,"text-white/60","hover:text-white","transition",3,"click"],[1,"fas","fa-times","text-xl"],[1,"flex-1","overflow-y-auto","p-6","custom-scroll","bg-slate-50","dark:bg-slate-900/50"],[1,"flex","flex-col","items-center","justify-center","py-10","space-y-4","text-slate-400","h-full"],[1,"prose","prose-sm","prose-slate","dark:prose-invert","max-w-none","bg-white","dark:bg-slate-800","p-5","rounded-xl","shadow-sm","border","border-slate-200","dark:border-slate-700",3,"innerHTML"],[1,"flex","flex-col","items-center","justify-center","h-full","text-center","py-10","opacity-60","space-y-6"],[1,"p-4","border-t","border-slate-100","dark:border-slate-700","bg-white","dark:bg-slate-800","space-y-2.5","shadow-[0_-5px_15px_rgba(0,0,0,0.05)]"],[1,"text-[10px]","font-bold","text-slate-400","uppercase","tracking-wider","mb-2"],[1,"w-full","flex","items-center","p-3","bg-slate-50","dark:bg-slate-700","hover:bg-[#ce1126]","hover:text-white","dark:hover:bg-[#ce1126]","rounded-lg","border","border-slate-200","dark:border-slate-600","hover:border-transparent","transition-all","group","text-left",3,"click"],[1,"w-8","h-8","rounded","bg-white","dark:bg-slate-600","text-slate-600","dark:text-slate-300","flex","items-center","justify-center","mr-3","group-hover:text-[#ce1126]","shadow-sm"],[1,"fas","fa-file-alt"],[1,"block","text-xs","font-bold","text-slate-700","dark:text-white","group-hover:text-white"],[1,"block","text-[10px]","text-slate-400","group-hover:text-red-100"],[1,"w-full","flex","items-center","p-3","bg-slate-50","dark:bg-slate-700","hover:bg-amber-500","hover:text-white","rounded-lg","border","border-slate-200","dark:border-slate-600","hover:border-transparent","transition-all","group","text-left",3,"click"],[1,"w-8","h-8","rounded","bg-white","dark:bg-slate-600","text-slate-600","dark:text-slate-300","flex","items-center","justify-center","mr-3","group-hover:text-amber-500","shadow-sm"],[1,"fas","fa-exclamation-triangle"],[1,"block","text-[10px]","text-slate-400","group-hover:text-amber-100"],[1,"w-full","flex","items-center","p-3","bg-slate-50","dark:bg-slate-700","hover:bg-emerald-600","hover:text-white","rounded-lg","border","border-slate-200","dark:border-slate-600","hover:border-transparent","transition-all","group","text-left",3,"click"],[1,"w-8","h-8","rounded","bg-white","dark:bg-slate-600","text-slate-600","dark:text-slate-300","flex","items-center","justify-center","mr-3","group-hover:text-emerald-600","shadow-sm"],[1,"fas","fa-check-double"],[1,"block","text-[10px]","text-slate-400","group-hover:text-emerald-100"],[1,"fixed","inset-0","z-[60]","bg-slate-900/60","backdrop-blur-sm","flex","items-center","justify-center","p-4","fade-enter"],[1,"animate-ping","absolute","inline-flex","h-full","w-full","rounded-full","bg-red-400","opacity-75"],[1,"relative","inline-flex","rounded-full","h-2","w-2","bg-red-500"],[1,"relative"],[1,"fas","fa-circle-notch","fa-spin","text-4xl","text-[#ce1126]"],[1,"fas","fa-brain","absolute","top-1/2","left-1/2","-translate-x-1/2","-translate-y-1/2","text-xs","text-[#ce1126]"],[1,"text-xs","uppercase","font-bold","tracking-widest","animate-pulse","text-center"],[1,"w-20","h-20","bg-slate-100","dark:bg-slate-800","rounded-full","flex","items-center","justify-center"],[1,"fas","fa-lightbulb","text-4xl","text-slate-400","dark:text-slate-500"],[1,"font-bold","text-slate-700","dark:text-slate-300","text-lg"],[1,"text-xs","text-slate-500","mt-2","max-w-[240px]","mx-auto","leading-relaxed"],[1,"w-full","max-w-5xl","max-h-[90vh]","overflow-y-auto","rounded-2xl","shadow-2xl","border","border-white/10"],[3,"assetId"]],template:function(r,i){r&1&&re(0,Jj,10,0,"div",0)(1,Xj,1,0,"app-login")(2,u3,120,72,"div",1),r&2&&ie(i.isAuthLoading()?0:i.isAuthenticated()?2:1)},dependencies:[xe,iD,sD,kD,PD,OD,FD,LD],styles:[".fade-enter[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease-out forwards}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(5px)}to{opacity:1;transform:translateY(0)}}"]})}}return n})();var K=function(n){return n[n.State=0]="State",n[n.Transition=1]="Transition",n[n.Sequence=2]="Sequence",n[n.Group=3]="Group",n[n.Animate=4]="Animate",n[n.Keyframes=5]="Keyframes",n[n.Style=6]="Style",n[n.Trigger=7]="Trigger",n[n.Reference=8]="Reference",n[n.AnimateChild=9]="AnimateChild",n[n.AnimateRef=10]="AnimateRef",n[n.Query=11]="Query",n[n.Stagger=12]="Stagger",n}(K||{}),Zt="*";function jD(n,e=null){return{type:K.Sequence,steps:n,options:e}}function cy(n){return{type:K.Style,styles:n,offset:null}}var tr=class{_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_originalOnDoneFns=[];_originalOnStartFns=[];_started=!1;_destroyed=!1;_finished=!1;_position=0;parentPlayer=null;totalTime;constructor(e=0,t=0){this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}},Is=class{_onDoneFns=[];_onStartFns=[];_finished=!1;_started=!1;_destroyed=!1;_onDestroyFns=[];parentPlayer=null;totalTime=0;players;constructor(e){this.players=e;let t=0,r=0,i=0,s=this.players.length;s==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++t==s&&this._onFinish()}),o.onDestroy(()=>{++r==s&&this._onDestroy()}),o.onStart(()=>{++i==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){let t=e*this.totalTime;this.players.forEach(r=>{let i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){let e=this.players.reduce((t,r)=>t===null||r.totalTime>t.totalTime?r:t,null);return e!=null?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}},wa="!";function UD(n){return new C(3e3,!1)}function d3(){return new C(3100,!1)}function f3(){return new C(3101,!1)}function h3(n){return new C(3001,!1)}function p3(n){return new C(3003,!1)}function m3(n){return new C(3004,!1)}function HD(n,e){return new C(3005,!1)}function $D(){return new C(3006,!1)}function zD(){return new C(3007,!1)}function WD(n,e){return new C(3008,!1)}function GD(n){return new C(3002,!1)}function qD(n,e,t,r,i){return new C(3010,!1)}function KD(){return new C(3011,!1)}function YD(){return new C(3012,!1)}function QD(){return new C(3200,!1)}function ZD(){return new C(3202,!1)}function JD(){return new C(3013,!1)}function XD(n){return new C(3014,!1)}function eS(n){return new C(3015,!1)}function tS(n){return new C(3016,!1)}function nS(n,e){return new C(3404,!1)}function g3(n){return new C(3502,!1)}function rS(n){return new C(3503,!1)}function iS(){return new C(3300,!1)}function sS(n){return new C(3504,!1)}function oS(n){return new C(3301,!1)}function aS(n,e){return new C(3302,!1)}function lS(n){return new C(3303,!1)}function cS(n,e){return new C(3400,!1)}function uS(n){return new C(3401,!1)}function dS(n){return new C(3402,!1)}function fS(n,e){return new C(3505,!1)}function nr(n){switch(n.length){case 0:return new tr;case 1:return n[0];default:return new Is(n)}}function hy(n,e,t=new Map,r=new Map){let i=[],s=[],o=-1,a=null;if(e.forEach(l=>{let c=l.get("offset"),u=c==o,d=u&&a||new Map;l.forEach((f,h)=>{let y=h,v=f;if(h!=="offset")switch(y=n.normalizePropertyName(y,i),v){case wa:v=t.get(h);break;case Zt:v=r.get(h);break;default:v=n.normalizeStyleValue(h,y,v,i);break}d.set(y,v)}),u||s.push(d),a=d,o=c}),i.length)throw g3(i);return s}function Hu(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&uy(t,"start",n)));break;case"done":n.onDone(()=>r(t&&uy(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&uy(t,"destroy",n)));break}}function uy(n,e,t){let r=t.totalTime,i=!!t.disabled,s=$u(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,r??n.totalTime,i),o=n._data;return o!=null&&(s._data=o),s}function $u(n,e,t,r,i="",s=0,o){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:s,disabled:!!o}}function mt(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function py(n){let e=n.indexOf(":"),t=n.substring(1,e),r=n.slice(e+1);return[t,r]}var y3=typeof document>"u"?null:document.documentElement;function zu(n){let e=n.parentNode||n.host||null;return e===y3?null:e}function _3(n){return n.substring(1,6)=="ebkit"}var yi=null,BD=!1;function hS(n){yi||(yi=v3()||{},BD=yi.style?"WebkitAppearance"in yi.style:!1);let e=!0;return yi.style&&!_3(n)&&(e=n in yi.style,!e&&BD&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in yi.style)),e}function v3(){return typeof document<"u"?document.body:null}function my(n,e){for(;e;){if(e===n)return!0;e=zu(e)}return!1}function gy(n,e,t){if(t)return Array.from(n.querySelectorAll(e));let r=n.querySelector(e);return r?[r]:[]}var E3=1e3,yy="{{",w3="}}",_y="ng-enter",Wu="ng-leave",ba="ng-trigger",Ca=".ng-trigger",vy="ng-animating",Gu=".ng-animating";function In(n){if(typeof n=="number")return n;let e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:dy(parseFloat(e[1]),e[2])}function dy(n,e){switch(e){case"s":return n*E3;default:return n}}function Ia(n,e,t){return n.hasOwnProperty("duration")?n:b3(n,e,t)}function b3(n,e,t){let r=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i,i,s=0,o="";if(typeof n=="string"){let a=n.match(r);if(a===null)return e.push(UD(n)),{duration:0,delay:0,easing:""};i=dy(parseFloat(a[1]),a[2]);let l=a[3];l!=null&&(s=dy(parseFloat(l),a[4]));let c=a[5];c&&(o=c)}else i=n;if(!t){let a=!1,l=e.length;i<0&&(e.push(d3()),a=!0),s<0&&(e.push(f3()),a=!0),a&&e.splice(l,0,UD(n))}return{duration:i,delay:s,easing:o}}function pS(n){return n.length?n[0]instanceof Map?n:n.map(e=>new Map(Object.entries(e))):[]}function Jt(n,e,t){e.forEach((r,i)=>{let s=qu(i);t&&!t.has(i)&&t.set(i,n.style[s]),n.style[s]=r})}function Mr(n,e){e.forEach((t,r)=>{let i=qu(r);n.style[i]=""})}function Ds(n){return Array.isArray(n)?n.length==1?n[0]:jD(n):n}function mS(n,e,t){let r=e.params||{},i=Ey(n);i.length&&i.forEach(s=>{r.hasOwnProperty(s)||t.push(h3(s))})}var fy=new RegExp(`${yy}\\s*(.+?)\\s*${w3}`,"g");function Ey(n){let e=[];if(typeof n=="string"){let t;for(;t=fy.exec(n);)e.push(t[1]);fy.lastIndex=0}return e}function Ss(n,e,t){let r=`${n}`,i=r.replace(fy,(s,o)=>{let a=e[o];return a==null&&(t.push(p3(o)),a=""),a.toString()});return i==r?n:i}var C3=/-+([a-z0-9])/g;function qu(n){return n.replace(C3,(...e)=>e[1].toUpperCase())}function gS(n,e){return n===0||e===0}function yS(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((s,o)=>{r.has(o)||i.push(o),r.set(o,s)}),i.length)for(let s=1;s<e.length;s++){let o=e[s];i.forEach(a=>o.set(a,Ku(n,a)))}}return e}function gt(n,e,t){switch(e.type){case K.Trigger:return n.visitTrigger(e,t);case K.State:return n.visitState(e,t);case K.Transition:return n.visitTransition(e,t);case K.Sequence:return n.visitSequence(e,t);case K.Group:return n.visitGroup(e,t);case K.Animate:return n.visitAnimate(e,t);case K.Keyframes:return n.visitKeyframes(e,t);case K.Style:return n.visitStyle(e,t);case K.Reference:return n.visitReference(e,t);case K.AnimateChild:return n.visitAnimateChild(e,t);case K.AnimateRef:return n.visitAnimateRef(e,t);case K.Query:return n.visitQuery(e,t);case K.Stagger:return n.visitStagger(e,t);default:throw m3(e.type)}}function Ku(n,e){return window.getComputedStyle(n)[e]}var Ly=(()=>{class n{validateStyleProperty(t){return hS(t)}containsElement(t,r){return my(t,r)}getParentElement(t){return zu(t)}query(t,r,i){return gy(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,s,o,a=[],l){return new tr(i,s)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:n.\u0275fac})}return n})(),vi=class{static NOOP=new Ly},Ei=class{};var I3=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),Xu=class extends Ei{normalizePropertyName(e,t){return qu(e)}normalizeStyleValue(e,t,r,i){let s="",o=r.toString().trim();if(I3.has(t)&&r!==0&&r!=="0")if(typeof r=="number")s="px";else{let a=r.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&a[1].length==0&&i.push(HD(e,r))}return o+s}};var ed="*";function D3(n,e){let t=[];return typeof n=="string"?n.split(/\s*,\s*/).forEach(r=>S3(r,t,e)):t.push(n),t}function S3(n,e,t){if(n[0]==":"){let l=T3(n,t);if(typeof l=="function"){e.push(l);return}n=l}let r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(r==null||r.length<4)return t.push(eS(n)),e;let i=r[1],s=r[2],o=r[3];e.push(_S(i,o));let a=i==ed&&o==ed;s[0]=="<"&&!a&&e.push(_S(o,i))}function T3(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(tS(n)),"* => *"}}var Yu=new Set(["true","1"]),Qu=new Set(["false","0"]);function _S(n,e){let t=Yu.has(n)||Qu.has(n),r=Yu.has(e)||Qu.has(e);return(i,s)=>{let o=n==ed||n==i,a=e==ed||e==s;return!o&&t&&typeof i=="boolean"&&(o=i?Yu.has(n):Qu.has(n)),!a&&r&&typeof s=="boolean"&&(a=s?Yu.has(e):Qu.has(e)),o&&a}}var xS=":self",x3=new RegExp(`s*${xS}s*,?`,"g");function AS(n,e,t,r){return new Sy(n).build(e,t,r)}var vS="",Sy=class{_driver;constructor(e){this._driver=e}build(e,t,r){let i=new Ty(t);return this._resetContextStyleTimingState(i),gt(this,Ds(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector=vS,e.collectedStyles=new Map,e.collectedStyles.set(vS,new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0,s=[],o=[];return e.name.charAt(0)=="@"&&t.errors.push($D()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),a.type==K.State){let l=a,c=l.name;c.toString().split(/\s*,\s*/).forEach(u=>{l.name=u,s.push(this.visitState(l,t))}),l.name=c}else if(a.type==K.Transition){let l=this.visitTransition(a,t);r+=l.queryCount,i+=l.depCount,o.push(l)}else t.errors.push(zD())}),{type:K.Trigger,name:e.name,states:s,transitions:o,queryCount:r,depCount:i,options:null}}visitState(e,t){let r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){let s=new Set,o=i||{};r.styles.forEach(a=>{a instanceof Map&&a.forEach(l=>{Ey(l).forEach(c=>{o.hasOwnProperty(c)||s.add(c)})})}),s.size&&t.errors.push(WD(e.name,[...s.values()]))}return{type:K.State,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;let r=gt(this,Ds(e.animation),t),i=D3(e.expr,t.errors);return{type:K.Transition,matchers:i,animation:r,queryCount:t.queryCount,depCount:t.depCount,options:_i(e.options)}}visitSequence(e,t){return{type:K.Sequence,steps:e.steps.map(r=>gt(this,r,t)),options:_i(e.options)}}visitGroup(e,t){let r=t.currentTime,i=0,s=e.steps.map(o=>{t.currentTime=r;let a=gt(this,o,t);return i=Math.max(i,t.currentTime),a});return t.currentTime=i,{type:K.Group,steps:s,options:_i(e.options)}}visitAnimate(e,t){let r=R3(e.timings,t.errors);t.currentAnimateTimings=r;let i,s=e.styles?e.styles:cy({});if(s.type==K.Keyframes)i=this.visitKeyframes(s,t);else{let o=e.styles,a=!1;if(!o){a=!0;let c={};r.easing&&(c.easing=r.easing),o=cy(c)}t.currentTime+=r.duration+r.delay;let l=this.visitStyle(o,t);l.isEmptyStep=a,i=l}return t.currentAnimateTimings=null,{type:K.Animate,timings:r,style:i,options:null}}visitStyle(e,t){let r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){let r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of i)typeof a=="string"?a===Zt?r.push(a):t.errors.push(GD(a)):r.push(new Map(Object.entries(a)));let s=!1,o=null;return r.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(o=a.get("easing"),a.delete("easing")),!s)){for(let l of a.values())if(l.toString().indexOf(yy)>=0){s=!0;break}}}),{type:K.Style,styles:r,easing:o,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){let r=t.currentAnimateTimings,i=t.currentTime,s=t.currentTime;r&&s>0&&(s-=r.duration+r.delay),e.styles.forEach(o=>{typeof o!="string"&&o.forEach((a,l)=>{let c=t.collectedStyles.get(t.currentQuerySelector),u=c.get(l),d=!0;u&&(s!=i&&s>=u.startTime&&i<=u.endTime&&(t.errors.push(qD(l,u.startTime,u.endTime,s,i)),d=!1),s=u.startTime),d&&c.set(l,{startTime:s,endTime:i}),t.options&&mS(a,t.options,t.errors)})})}visitKeyframes(e,t){let r={type:K.Keyframes,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(KD()),r;let i=1,s=0,o=[],a=!1,l=!1,c=0,u=e.steps.map(I=>{let P=this._makeStyleAst(I,t),B=P.offset!=null?P.offset:N3(P.styles),ue=0;return B!=null&&(s++,ue=P.offset=B),l=l||ue<0||ue>1,a=a||ue<c,c=ue,o.push(ue),P});l&&t.errors.push(YD()),a&&t.errors.push(QD());let d=e.steps.length,f=0;s>0&&s<d?t.errors.push(ZD()):s==0&&(f=i/(d-1));let h=d-1,y=t.currentTime,v=t.currentAnimateTimings,w=v.duration;return u.forEach((I,P)=>{let B=f>0?P==h?1:f*P:o[P],ue=B*w;t.currentTime=y+v.delay+ue,v.duration=ue,this._validateStyleAst(I,t),I.offset=B,r.styles.push(I)}),r}visitReference(e,t){return{type:K.Reference,animation:gt(this,Ds(e.animation),t),options:_i(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:K.AnimateChild,options:_i(e.options)}}visitAnimateRef(e,t){return{type:K.AnimateRef,animation:this.visitReference(e.animation,t),options:_i(e.options)}}visitQuery(e,t){let r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;let[s,o]=A3(e.selector);t.currentQuerySelector=r.length?r+" "+s:s,mt(t.collectedStyles,t.currentQuerySelector,new Map);let a=gt(this,Ds(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:K.Query,selector:s,limit:i.limit||0,optional:!!i.optional,includeSelf:o,animation:a,originalSelector:e.selector,options:_i(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(JD());let r=e.timings==="full"?{duration:0,delay:0,easing:"full"}:Ia(e.timings,t.errors,!0);return{type:K.Stagger,animation:gt(this,Ds(e.animation),t),timings:r,options:null}}};function A3(n){let e=!!n.split(/\s*,\s*/).find(t=>t==xS);return e&&(n=n.replace(x3,"")),n=n.replace(/@\*/g,Ca).replace(/@\w+/g,t=>Ca+"-"+t.slice(1)).replace(/:animating/g,Gu),[n,e]}function M3(n){return n?D({},n):null}var Ty=class{errors;queryCount=0;depCount=0;currentTransition=null;currentQuery=null;currentQuerySelector=null;currentAnimateTimings=null;currentTime=0;collectedStyles=new Map;options=null;unsupportedCSSPropertiesFound=new Set;constructor(e){this.errors=e}};function N3(n){if(typeof n=="string")return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){let r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){let t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}function R3(n,e){if(n.hasOwnProperty("duration"))return n;if(typeof n=="number"){let s=Ia(n,e).duration;return wy(s,0,"")}let t=n;if(t.split(/\s+/).some(s=>s.charAt(0)=="{"&&s.charAt(1)=="{")){let s=wy(0,0,"");return s.dynamic=!0,s.strValue=t,s}let i=Ia(t,e);return wy(i.duration,i.delay,i.easing)}function _i(n){return n?(n=D({},n),n.params&&(n.params=M3(n.params))):n={},n}function wy(n,e,t){return{duration:n,delay:e,easing:t}}function Vy(n,e,t,r,i,s,o=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:o,subTimeline:a}}var Sa=class{_map=new Map;get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}},k3=1,P3=":enter",O3=new RegExp(P3,"g"),F3=":leave",L3=new RegExp(F3,"g");function MS(n,e,t,r,i,s=new Map,o=new Map,a,l,c=[]){return new xy().buildKeyframes(n,e,t,r,i,s,o,a,l,c)}var xy=class{buildKeyframes(e,t,r,i,s,o,a,l,c,u=[]){c=c||new Sa;let d=new Ay(e,t,c,i,s,u,[]);d.options=l;let f=l.delay?In(l.delay):0;d.currentTimeline.delayNextStep(f),d.currentTimeline.setStyles([o],null,d.errors,l),gt(this,r,d);let h=d.timelines.filter(y=>y.containsAnimation());if(h.length&&a.size){let y;for(let v=h.length-1;v>=0;v--){let w=h[v];if(w.element===t){y=w;break}}y&&!y.allowOnlyTimelineStyles()&&y.setStyles([a],null,d.errors,l)}return h.length?h.map(y=>y.buildKeyframes()):[Vy(t,[],[],[],0,f,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){let r=t.subInstructions.get(t.element);if(r){let i=t.createSubContext(e.options),s=t.currentTimeline.currentTime,o=this._visitSubInstructions(r,i,i.options);s!=o&&t.transformIntoNewTimeline(o)}t.previousNode=e}visitAnimateRef(e,t){let r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,r),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,r){for(let i of e){let s=i?.delay;if(s){let o=typeof s=="number"?s:In(Ss(s,i?.params??{},t.errors));r.delayNextStep(o)}}}_visitSubInstructions(e,t,r){let s=t.currentTimeline.currentTime,o=r.duration!=null?In(r.duration):null,a=r.delay!=null?In(r.delay):null;return o!==0&&e.forEach(l=>{let c=t.appendInstructionToTimeline(l,o,a);s=Math.max(s,c.duration+c.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),gt(this,e.animation,t),t.previousNode=e}visitSequence(e,t){let r=t.subContextCount,i=t,s=e.options;if(s&&(s.params||s.delay)&&(i=t.createSubContext(s),i.transformIntoNewTimeline(),s.delay!=null)){i.previousNode.type==K.Style&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=td);let o=In(s.delay);i.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>gt(this,o,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){let r=[],i=t.currentTimeline.currentTime,s=e.options&&e.options.delay?In(e.options.delay):0;e.steps.forEach(o=>{let a=t.createSubContext(e.options);s&&a.delayNextStep(s),gt(this,o,a),i=Math.max(i,a.currentTimeline.currentTime),r.push(a.currentTimeline)}),r.forEach(o=>t.currentTimeline.mergeTimelineCollectedStyles(o)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){let r=e.strValue,i=t.params?Ss(r,t.params,t.errors):r;return Ia(i,t.errors)}else return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){let r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());let s=e.style;s.type==K.Keyframes?this.visitKeyframes(s,t):(t.incrementTime(r.duration),this.visitStyle(s,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){let r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();let s=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(s):r.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){let r=t.currentAnimateTimings,i=t.currentTimeline.duration,s=r.duration,a=t.createSubContext().currentTimeline;a.easing=r.easing,e.styles.forEach(l=>{let c=l.offset||0;a.forwardTime(c*s),a.setStyles(l.styles,l.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(i+s),t.previousNode=e}visitQuery(e,t){let r=t.currentTimeline.currentTime,i=e.options||{},s=i.delay?In(i.delay):0;s&&(t.previousNode.type===K.Style||r==0&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=td);let o=r,a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=a.length;let l=null;a.forEach((c,u)=>{t.currentQueryIndex=u;let d=t.createSubContext(e.options,c);s&&d.delayNextStep(s),c===t.element&&(l=d.currentTimeline),gt(this,e.animation,d),d.currentTimeline.applyStylesToKeyframe();let f=d.currentTimeline.currentTime;o=Math.max(o,f)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),l&&(t.currentTimeline.mergeTimelineCollectedStyles(l),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){let r=t.parentContext,i=t.currentTimeline,s=e.timings,o=Math.abs(s.duration),a=o*(t.currentQueryTotal-1),l=o*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":l=a-l;break;case"full":l=r.currentStaggerTime;break}let u=t.currentTimeline;l&&u.delayNextStep(l);let d=u.currentTime;gt(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-d+(i.startTime-r.currentTimeline.startTime)}},td={},Ay=class n{_driver;element;subInstructions;_enterClassName;_leaveClassName;errors;timelines;parentContext=null;currentTimeline;currentAnimateTimings=null;previousNode=td;subContextCount=0;options={};currentQueryIndex=0;currentQueryTotal=0;currentStaggerTime=0;constructor(e,t,r,i,s,o,a,l){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=s,this.errors=o,this.timelines=a,this.currentTimeline=l||new nd(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;let r=e,i=this.options;r.duration!=null&&(i.duration=In(r.duration)),r.delay!=null&&(i.delay=In(r.delay));let s=r.params;if(s){let o=i.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!t||!o.hasOwnProperty(a))&&(o[a]=Ss(s[a],o,this.errors))})}}_copyOptions(){let e={};if(this.options){let t=this.options.params;if(t){let r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){let i=t||this.element,s=new n(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=td,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){let i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},s=new My(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(s),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,s,o){let a=[];if(i&&a.push(this.element),e.length>0){e=e.replace(O3,"."+this._enterClassName),e=e.replace(L3,"."+this._leaveClassName);let l=r!=1,c=this._driver.query(this.element,e,l);r!==0&&(c=r<0?c.slice(c.length+r,c.length):c.slice(0,r)),a.push(...c)}return!s&&a.length==0&&o.push(XD(t)),a}},nd=class n{_driver;element;startTime;_elementTimelineStylesLookup;duration=0;easing=null;_previousKeyframe=new Map;_currentKeyframe=new Map;_keyframes=new Map;_styleSummary=new Map;_localTimelineStyles=new Map;_globalTimelineStyles;_pendingStyles=new Map;_backFill=new Map;_currentEmptyStepKeyframe=null;constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){let t=this._keyframes.size===1&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new n(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=k3,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||Zt),this._currentKeyframe.set(t,Zt);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);let s=i&&i.params||{},o=V3(e,this._globalTimelineStyles);for(let[a,l]of o){let c=Ss(l,s,r);this._pendingStyles.set(a,c),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??Zt),this._updateStyle(a,c)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{let i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();let e=new Set,t=new Set,r=this._keyframes.size===1&&this.duration===0,i=[];this._keyframes.forEach((a,l)=>{let c=new Map([...this._backFill,...a]);c.forEach((u,d)=>{u===wa?e.add(d):u===Zt&&t.add(d)}),r||c.set("offset",l/this.duration),i.push(c)});let s=[...e.values()],o=[...t.values()];if(r){let a=i[0],l=new Map(a);a.set("offset",0),l.set("offset",1),i=[a,l]}return Vy(this.element,i,s,o,this.duration,this.startTime,this.easing,!1)}},My=class extends nd{keyframes;preStyleProps;postStyleProps;_stretchStartingKeyframe;timings;constructor(e,t,r,i,s,o,a=!1){super(e,t,o.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){let s=[],o=r+t,a=t/o,l=new Map(e[0]);l.set("offset",0),s.push(l);let c=new Map(e[0]);c.set("offset",ES(a)),s.push(c);let u=e.length-1;for(let d=1;d<=u;d++){let f=new Map(e[d]),h=f.get("offset"),y=t+h*r;f.set("offset",ES(y/o)),s.push(f)}r=o,t=0,i="",e=s}return Vy(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}};function ES(n,e=3){let t=Math.pow(10,e-1);return Math.round(n*t)/t}function V3(n,e){let t=new Map,r;return n.forEach(i=>{if(i==="*"){r??=e.keys();for(let s of r)t.set(s,Zt)}else for(let[s,o]of i)t.set(s,o)}),t}function wS(n,e,t,r,i,s,o,a,l,c,u,d,f){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:s,toState:r,toStyles:o,timelines:a,queriedElements:l,preStyleProps:c,postStyleProps:u,totalTime:d,errors:f}}var by={},rd=class{_triggerName;ast;_stateStyles;constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return j3(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return e!==void 0&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,s,o,a,l,c,u){let d=[],f=this.ast.options&&this.ast.options.params||by,h=a&&a.params||by,y=this.buildStyles(r,h,d),v=l&&l.params||by,w=this.buildStyles(i,v,d),I=new Set,P=new Map,B=new Map,ue=i==="void",Ft={params:NS(v,f),delay:this.ast.options?.delay},vt=u?[]:MS(e,t,this.ast.animation,s,o,y,w,Ft,c,d),qe=0;return vt.forEach(tt=>{qe=Math.max(tt.duration+tt.delay,qe)}),d.length?wS(t,this._triggerName,r,i,ue,y,w,[],[],P,B,qe,d):(vt.forEach(tt=>{let Nr=tt.element,wi=mt(P,Nr,new Set);tt.preStyleProps.forEach(Rr=>wi.add(Rr));let jy=mt(B,Nr,new Set);tt.postStyleProps.forEach(Rr=>jy.add(Rr)),Nr!==t&&I.add(Nr)}),wS(t,this._triggerName,r,i,ue,y,w,vt,[...I.values()],P,B,qe))}};function j3(n,e,t,r,i){return n.some(s=>s(e,t,r,i))}function NS(n,e){let t=D({},e);return Object.entries(n).forEach(([r,i])=>{i!=null&&(t[r]=i)}),t}var Ny=class{styles;defaultParams;normalizer;constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){let r=new Map,i=NS(e,this.defaultParams);return this.styles.styles.forEach(s=>{typeof s!="string"&&s.forEach((o,a)=>{o&&(o=Ss(o,i,t));let l=this.normalizer.normalizePropertyName(a,t);o=this.normalizer.normalizeStyleValue(a,l,o,t),r.set(a,o)})}),r}};function U3(n,e,t){return new Ry(n,e,t)}var Ry=class{name;ast;_normalizer;transitionFactories=[];fallbackTransition;states=new Map;constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,t.states.forEach(i=>{let s=i.options&&i.options.params||{};this.states.set(i.name,new Ny(i.style,s,r))}),bS(this.states,"true","1"),bS(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new rd(e,i,this.states))}),this.fallbackTransition=B3(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(o=>o.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}};function B3(n,e,t){let r=[(o,a)=>!0],i={type:K.Sequence,steps:[],options:null},s={type:K.Transition,animation:i,matchers:r,options:null,queryCount:0,depCount:0};return new rd(n,s,e)}function bS(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}var H3=new Sa,ky=class{bodyNode;_driver;_normalizer;_animations=new Map;_playersById=new Map;players=[];constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r}register(e,t){let r=[],i=[],s=AS(this._driver,t,r,i);if(r.length)throw rS(r);this._animations.set(e,s)}_buildPlayer(e,t,r){let i=e.element,s=hy(this._normalizer,e.keyframes,t,r);return this._driver.animate(i,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){let i=[],s=this._animations.get(e),o,a=new Map;if(s?(o=MS(this._driver,t,s,_y,Wu,new Map,new Map,r,H3,i),o.forEach(u=>{let d=mt(a,u.element,new Map);u.postStyleProps.forEach(f=>d.set(f,null))})):(i.push(iS()),o=[]),i.length)throw sS(i);a.forEach((u,d)=>{u.forEach((f,h)=>{u.set(h,this._driver.computeStyle(d,h,Zt))})});let l=o.map(u=>{let d=a.get(u.element);return this._buildPlayer(u,new Map,d)}),c=nr(l);return this._playersById.set(e,c),c.onDestroy(()=>this.destroy(e)),this.players.push(c),c}destroy(e){let t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);let r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){let t=this._playersById.get(e);if(!t)throw oS(e);return t}listen(e,t,r,i){let s=$u(t,"","","");return Hu(this._getPlayer(e),r,s,i),()=>{}}command(e,t,r,i){if(r=="register"){this.register(e,i[0]);return}if(r=="create"){let o=i[0]||{};this.create(e,t,o);return}let s=this._getPlayer(e);switch(r){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e);break}}},CS="ng-animate-queued",$3=".ng-animate-queued",Cy="ng-animate-disabled",z3=".ng-animate-disabled",W3="ng-star-inserted",G3=".ng-star-inserted",q3=[],RS={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},K3={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Xt="__ng_removed",Ta=class{namespaceId;value;options;get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;let r=e&&e.hasOwnProperty("value"),i=r?e.value:e;if(this.value=Q3(i),r){let s=e,{value:o}=s,a=bi(s,["value"]);this.options=a}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){let t=e.params;if(t){let r=this.options.params;Object.keys(t).forEach(i=>{r[i]==null&&(r[i]=t[i])})}}},Da="void",Iy=new Ta(Da),Py=class{id;hostElement;_engine;players=[];_triggers=new Map;_queue=[];_elementListeners=new Map;_hostClassName;constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this._hostClassName="ng-tns-"+e,Ot(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw aS(r,t);if(r==null||r.length==0)throw lS(t);if(!Z3(r))throw cS(r,t);let s=mt(this._elementListeners,e,[]),o={name:t,phase:r,callback:i};s.push(o);let a=mt(this._engine.statesByElement,e,new Map);return a.has(t)||(Ot(e,ba),Ot(e,ba+"-"+t),a.set(t,Iy)),()=>{this._engine.afterFlush(()=>{let l=s.indexOf(o);l>=0&&s.splice(l,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return this._triggers.has(e)?!1:(this._triggers.set(e,t),!0)}_getTrigger(e){let t=this._triggers.get(e);if(!t)throw uS(e);return t}trigger(e,t,r,i=!0){let s=this._getTrigger(t),o=new xa(this.id,t,e),a=this._engine.statesByElement.get(e);a||(Ot(e,ba),Ot(e,ba+"-"+t),this._engine.statesByElement.set(e,a=new Map));let l=a.get(t),c=new Ta(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&l&&c.absorbOptions(l.options),a.set(t,c),l||(l=Iy),!(c.value===Da)&&l.value===c.value){if(!eU(l.params,c.params)){let v=[],w=s.matchStyles(l.value,l.params,v),I=s.matchStyles(c.value,c.params,v);v.length?this._engine.reportError(v):this._engine.afterFlush(()=>{Mr(e,w),Jt(e,I)})}return}let f=mt(this._engine.playersByElement,e,[]);f.forEach(v=>{v.namespaceId==this.id&&v.triggerName==t&&v.queued&&v.destroy()});let h=s.matchTransition(l.value,c.value,e,c.params),y=!1;if(!h){if(!i)return;h=s.fallbackTransition,y=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:h,fromState:l,toState:c,player:o,isFallbackTransition:y}),y||(Ot(e,CS),o.onStart(()=>{Ts(e,CS)})),o.onDone(()=>{let v=this.players.indexOf(o);v>=0&&this.players.splice(v,1);let w=this._engine.playersByElement.get(e);if(w){let I=w.indexOf(o);I>=0&&w.splice(I,1)}}),this.players.push(o),f.push(o),o}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);let t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){let r=this._engine.driver.query(e,Ca,!0);r.forEach(i=>{if(i[Xt])return;let s=this._engine.fetchNamespacesByElement(i);s.size?s.forEach(o=>o.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){let s=this._engine.statesByElement.get(e),o=new Map;if(s){let a=[];if(s.forEach((l,c)=>{if(o.set(c,l.value),this._triggers.has(c)){let u=this.trigger(e,c,Da,i);u&&a.push(u)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,o),r&&nr(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){let t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){let i=new Set;t.forEach(s=>{let o=s.name;if(i.has(o))return;i.add(o);let l=this._triggers.get(o).fallbackTransition,c=r.get(o)||Iy,u=new Ta(Da),d=new xa(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:l,fromState:c,toState:u,player:d,isFallbackTransition:!0})})}}removeNode(e,t){let r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){let s=r.players.length?r.playersByQueriedElement.get(e):[];if(s&&s.length)i=!0;else{let o=e;for(;o=o.parentNode;)if(r.statesByElement.get(o)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{let s=e[Xt];(!s||s===RS)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){Ot(e,this._hostClassName)}drainQueuedTransitions(e){let t=[];return this._queue.forEach(r=>{let i=r.player;if(i.destroyed)return;let s=r.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==r.triggerName){let l=$u(s,r.triggerName,r.fromState.value,r.toState.value);l._data=e,Hu(r.player,a.phase,l,a.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{let s=r.transition.ast.depCount,o=i.transition.ast.depCount;return s==0||o==0?s-o:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}},Oy=class{bodyNode;driver;_normalizer;players=[];newHostElements=new Map;playersByElement=new Map;playersByQueriedElement=new Map;statesByElement=new Map;disabledNodes=new Set;totalAnimations=0;totalQueuedPlayers=0;_namespaceLookup={};_namespaceList=[];_flushFns=[];_whenQuietFns=[];namespacesByHostElement=new Map;collectedEnterElements=[];collectedLeaveElements=[];onRemovalComplete=(e,t)=>{};_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r}get queuedPlayers(){let e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){let r=new Py(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){let r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let o=!1,a=this.driver.getParentElement(t);for(;a;){let l=i.get(a);if(l){let c=r.indexOf(l);r.splice(c+1,0,e),o=!0;break}a=this.driver.getParentElement(a)}o||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let r=this._fetchNamespace(e);this.namespacesByHostElement.delete(r.hostElement);let i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1),r.destroy(t),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){let t=new Set,r=this.statesByElement.get(e);if(r){for(let i of r.values())if(i.namespaceId){let s=this._fetchNamespace(i.namespaceId);s&&t.add(s)}}return t}trigger(e,t,r,i){if(Zu(t)){let s=this._fetchNamespace(e);if(s)return s.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!Zu(t))return;let s=t[Xt];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;let o=this.collectedLeaveElements.indexOf(t);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){let o=this._fetchNamespace(e);o&&o.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Ot(e,Cy)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Ts(e,Cy))}removeNode(e,t,r){if(Zu(t)){let i=e?this._fetchNamespace(e):null;i?i.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r);let s=this.namespacesByHostElement.get(t);s&&s.id!==e&&s.removeNode(t,r)}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,r,i,s){this.collectedLeaveElements.push(t),t[Xt]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,r,i,s){return Zu(t)?this._fetchNamespace(e).listen(t,r,i,s):()=>{}}_buildInstruction(e,t,r,i,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,Ca,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),this.playersByQueriedElement.size!=0&&(t=this.driver.query(e,Gu,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){let t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){let t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return nr(this.players).onDone(()=>e());e()})}processLeaveNode(e){let t=e[Xt];if(t&&t.setForRemoval){if(e[Xt]=RS,t.namespaceId){this.destroyInnerAnimations(e);let r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(Cy)&&this.markElementAsDisabled(e,!1),this.driver.query(e,z3,!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++){let i=this.collectedEnterElements[r];Ot(i,W3)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++){let i=this.collectedLeaveElements[r];this.processLeaveNode(i)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){let r=this._whenQuietFns;this._whenQuietFns=[],t.length?nr(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw dS(e)}_flushAnimations(e,t){let r=new Sa,i=[],s=new Map,o=[],a=new Map,l=new Map,c=new Map,u=new Set;this.disabledNodes.forEach(x=>{u.add(x);let M=this.driver.query(x,$3,!0);for(let R=0;R<M.length;R++)u.add(M[R])});let d=this.bodyNode,f=Array.from(this.statesByElement.keys()),h=SS(f,this.collectedEnterElements),y=new Map,v=0;h.forEach((x,M)=>{let R=_y+v++;y.set(M,R),x.forEach(se=>Ot(se,R))});let w=[],I=new Set,P=new Set;for(let x=0;x<this.collectedLeaveElements.length;x++){let M=this.collectedLeaveElements[x],R=M[Xt];R&&R.setForRemoval&&(w.push(M),I.add(M),R.hasAnimation?this.driver.query(M,G3,!0).forEach(se=>I.add(se)):P.add(M))}let B=new Map,ue=SS(f,Array.from(I));ue.forEach((x,M)=>{let R=Wu+v++;B.set(M,R),x.forEach(se=>Ot(se,R))}),e.push(()=>{h.forEach((x,M)=>{let R=y.get(M);x.forEach(se=>Ts(se,R))}),ue.forEach((x,M)=>{let R=B.get(M);x.forEach(se=>Ts(se,R))}),w.forEach(x=>{this.processLeaveNode(x)})});let Ft=[],vt=[];for(let x=this._namespaceList.length-1;x>=0;x--)this._namespaceList[x].drainQueuedTransitions(t).forEach(R=>{let se=R.player,ke=R.element;if(Ft.push(se),this.collectedEnterElements.length){let Ue=ke[Xt];if(Ue&&Ue.setForMove){if(Ue.previousTriggersValues&&Ue.previousTriggersValues.has(R.triggerName)){let kr=Ue.previousTriggersValues.get(R.triggerName),Et=this.statesByElement.get(R.element);if(Et&&Et.has(R.triggerName)){let Aa=Et.get(R.triggerName);Aa.value=kr,Et.set(R.triggerName,Aa)}}se.destroy();return}}let en=!d||!this.driver.containsElement(d,ke),yt=B.get(ke),rr=y.get(ke),Ee=this._buildInstruction(R,r,rr,yt,en);if(Ee.errors&&Ee.errors.length){vt.push(Ee);return}if(en){se.onStart(()=>Mr(ke,Ee.fromStyles)),se.onDestroy(()=>Jt(ke,Ee.toStyles)),i.push(se);return}if(R.isFallbackTransition){se.onStart(()=>Mr(ke,Ee.fromStyles)),se.onDestroy(()=>Jt(ke,Ee.toStyles)),i.push(se);return}let Hy=[];Ee.timelines.forEach(Ue=>{Ue.stretchStartingKeyframe=!0,this.disabledNodes.has(Ue.element)||Hy.push(Ue)}),Ee.timelines=Hy,r.append(ke,Ee.timelines);let LS={instruction:Ee,player:se,element:ke};o.push(LS),Ee.queriedElements.forEach(Ue=>mt(a,Ue,[]).push(se)),Ee.preStyleProps.forEach((Ue,kr)=>{if(Ue.size){let Et=l.get(kr);Et||l.set(kr,Et=new Set),Ue.forEach((Aa,cd)=>Et.add(cd))}}),Ee.postStyleProps.forEach((Ue,kr)=>{let Et=c.get(kr);Et||c.set(kr,Et=new Set),Ue.forEach((Aa,cd)=>Et.add(cd))})});if(vt.length){let x=[];vt.forEach(M=>{x.push(fS(M.triggerName,M.errors))}),Ft.forEach(M=>M.destroy()),this.reportError(x)}let qe=new Map,tt=new Map;o.forEach(x=>{let M=x.element;r.has(M)&&(tt.set(M,M),this._beforeAnimationBuild(x.player.namespaceId,x.instruction,qe))}),i.forEach(x=>{let M=x.element;this._getPreviousPlayers(M,!1,x.namespaceId,x.triggerName,null).forEach(se=>{mt(qe,M,[]).push(se),se.destroy()})});let Nr=w.filter(x=>TS(x,l,c)),wi=new Map;DS(wi,this.driver,P,c,Zt).forEach(x=>{TS(x,l,c)&&Nr.push(x)});let Rr=new Map;h.forEach((x,M)=>{DS(Rr,this.driver,new Set(x),l,wa)}),Nr.forEach(x=>{let M=wi.get(x),R=Rr.get(x);wi.set(x,new Map([...M?.entries()??[],...R?.entries()??[]]))});let ld=[],Uy=[],By={};o.forEach(x=>{let{element:M,player:R,instruction:se}=x;if(r.has(M)){if(u.has(M)){R.onDestroy(()=>Jt(M,se.toStyles)),R.disabled=!0,R.overrideTotalTime(se.totalTime),i.push(R);return}let ke=By;if(tt.size>1){let yt=M,rr=[];for(;yt=yt.parentNode;){let Ee=tt.get(yt);if(Ee){ke=Ee;break}rr.push(yt)}rr.forEach(Ee=>tt.set(Ee,ke))}let en=this._buildAnimation(R.namespaceId,se,qe,s,Rr,wi);if(R.setRealPlayer(en),ke===By)ld.push(R);else{let yt=this.playersByElement.get(ke);yt&&yt.length&&(R.parentPlayer=nr(yt)),i.push(R)}}else Mr(M,se.fromStyles),R.onDestroy(()=>Jt(M,se.toStyles)),Uy.push(R),u.has(M)&&i.push(R)}),Uy.forEach(x=>{let M=s.get(x.element);if(M&&M.length){let R=nr(M);x.setRealPlayer(R)}}),i.forEach(x=>{x.parentPlayer?x.syncPlayerEvents(x.parentPlayer):x.destroy()});for(let x=0;x<w.length;x++){let M=w[x],R=M[Xt];if(Ts(M,Wu),R&&R.hasAnimation)continue;let se=[];if(a.size){let en=a.get(M);en&&en.length&&se.push(...en);let yt=this.driver.query(M,Gu,!0);for(let rr=0;rr<yt.length;rr++){let Ee=a.get(yt[rr]);Ee&&Ee.length&&se.push(...Ee)}}let ke=se.filter(en=>!en.destroyed);ke.length?J3(this,M,ke):this.processLeaveNode(M)}return w.length=0,ld.forEach(x=>{this.players.push(x),x.onDone(()=>{x.destroy();let M=this.players.indexOf(x);this.players.splice(M,1)}),x.play()}),ld}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,s){let o=[];if(t){let a=this.playersByQueriedElement.get(e);a&&(o=a)}else{let a=this.playersByElement.get(e);if(a){let l=!s||s==Da;a.forEach(c=>{c.queued||!l&&c.triggerName!=i||o.push(c)})}}return(r||i)&&(o=o.filter(a=>!(r&&r!=a.namespaceId||i&&i!=a.triggerName))),o}_beforeAnimationBuild(e,t,r){let i=t.triggerName,s=t.element,o=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:i;for(let l of t.timelines){let c=l.element,u=c!==s,d=mt(r,c,[]);this._getPreviousPlayers(c,u,o,a,t.toState).forEach(h=>{let y=h.getRealPlayer();y.beforeDestroy&&y.beforeDestroy(),h.destroy(),d.push(h)})}Mr(s,t.fromStyles)}_buildAnimation(e,t,r,i,s,o){let a=t.triggerName,l=t.element,c=[],u=new Set,d=new Set,f=t.timelines.map(y=>{let v=y.element;u.add(v);let w=v[Xt];if(w&&w.removedBeforeQueried)return new tr(y.duration,y.delay);let I=v!==l,P=X3((r.get(v)||q3).map(qe=>qe.getRealPlayer())).filter(qe=>{let tt=qe;return tt.element?tt.element===v:!1}),B=s.get(v),ue=o.get(v),Ft=hy(this._normalizer,y.keyframes,B,ue),vt=this._buildPlayer(y,Ft,P);if(y.subTimeline&&i&&d.add(v),I){let qe=new xa(e,a,v);qe.setRealPlayer(vt),c.push(qe)}return vt});c.forEach(y=>{mt(this.playersByQueriedElement,y.element,[]).push(y),y.onDone(()=>Y3(this.playersByQueriedElement,y.element,y))}),u.forEach(y=>Ot(y,vy));let h=nr(f);return h.onDestroy(()=>{u.forEach(y=>Ts(y,vy)),Jt(l,t.toStyles)}),d.forEach(y=>{mt(i,y,[]).push(h)}),h}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new tr(e.duration,e.delay)}},xa=class{namespaceId;triggerName;element;_player=new tr;_containsRealPlayer=!1;_queuedCallbacks=new Map;destroyed=!1;parentPlayer=null;markedForDestroy=!1;disabled=!1;queued=!0;totalTime=0;constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>Hu(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){let t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){mt(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){let t=this._player;t.triggerCallback&&t.triggerCallback(e)}};function Y3(n,e,t){let r=n.get(e);if(r){if(r.length){let i=r.indexOf(t);r.splice(i,1)}r.length==0&&n.delete(e)}return r}function Q3(n){return n??null}function Zu(n){return n&&n.nodeType===1}function Z3(n){return n=="start"||n=="done"}function IS(n,e){let t=n.style.display;return n.style.display=e??"none",t}function DS(n,e,t,r,i){let s=[];t.forEach(l=>s.push(IS(l)));let o=[];r.forEach((l,c)=>{let u=new Map;l.forEach(d=>{let f=e.computeStyle(c,d,i);u.set(d,f),(!f||f.length==0)&&(c[Xt]=K3,o.push(c))}),n.set(c,u)});let a=0;return t.forEach(l=>IS(l,s[a++])),o}function SS(n,e){let t=new Map;if(n.forEach(a=>t.set(a,[])),e.length==0)return t;let r=1,i=new Set(e),s=new Map;function o(a){if(!a)return r;let l=s.get(a);if(l)return l;let c=a.parentNode;return t.has(c)?l=c:i.has(c)?l=r:l=o(c),s.set(a,l),l}return e.forEach(a=>{let l=o(a);l!==r&&t.get(l).push(a)}),t}function Ot(n,e){n.classList?.add(e)}function Ts(n,e){n.classList?.remove(e)}function J3(n,e,t){nr(t).onDone(()=>n.processLeaveNode(e))}function X3(n){let e=[];return kS(n,e),e}function kS(n,e){for(let t=0;t<n.length;t++){let r=n[t];r instanceof Is?kS(r.players,e):e.push(r)}}function eU(n,e){let t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){let s=t[i];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}function TS(n,e,t){let r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(s=>i.add(s)):e.set(n,r),t.delete(n),!0}var xs=class{_driver;_normalizer;_transitionEngine;_timelineEngine;_triggerCache={};onRemovalComplete=(e,t)=>{};constructor(e,t,r){this._driver=t,this._normalizer=r,this._transitionEngine=new Oy(e.body,t,r),this._timelineEngine=new ky(e.body,t,r),this._transitionEngine.onRemovalComplete=(i,s)=>this.onRemovalComplete(i,s)}registerTrigger(e,t,r,i,s){let o=e+"-"+i,a=this._triggerCache[o];if(!a){let l=[],c=[],u=AS(this._driver,s,l,c);if(l.length)throw nS(i,l);a=U3(i,u,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(t,i,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r){this._transitionEngine.removeNode(e,t,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if(r.charAt(0)=="@"){let[s,o]=py(r),a=i;this._timelineEngine.command(s,t,o,a)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,s){if(r.charAt(0)=="@"){let[o,a]=py(r);return this._timelineEngine.listen(o,t,a,s)}return this._transitionEngine.listen(e,t,r,i,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}};function tU(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=Dy(e[0]),e.length>1&&(r=Dy(e[e.length-1]))):e instanceof Map&&(t=Dy(e)),t||r?new nU(n,t,r):null}var nU=(()=>{class n{_element;_startStyles;_endStyles;static initialStylesByElement=new WeakMap;_state=0;_initialStyles;constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i;let s=n.initialStylesByElement.get(t);s||n.initialStylesByElement.set(t,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&Jt(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Jt(this._element,this._initialStyles),this._endStyles&&(Jt(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Mr(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Mr(this._element,this._endStyles),this._endStyles=null),Jt(this._element,this._initialStyles),this._state=3)}}return n})();function Dy(n){let e=null;return n.forEach((t,r)=>{rU(r)&&(e=e||new Map,e.set(r,t))}),e}function rU(n){return n==="display"||n==="position"}var id=class{element;keyframes;options;_specialStyles;_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_duration;_delay;_initialized=!1;_finished=!1;_started=!1;_destroyed=!1;_finalKeyframe;_originalOnDoneFns=[];_originalOnStartFns=[];domPlayer;time=0;parentPlayer=null;currentSnapshot=new Map;constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;let e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map;let t=()=>this._onFinish();this.domPlayer.addEventListener("finish",t),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",t)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){let t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){return e.animate(this._convertKeyframesToObject(t),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){this.domPlayer===void 0&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){let e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{i!=="offset"&&e.set(i,this._finished?r:Ku(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){let t=e==="start"?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}},sd=class{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}containsElement(e,t){return my(e,t)}getParentElement(e){return zu(e)}query(e,t,r){return gy(e,t,r)}computeStyle(e,t,r){return Ku(e,t)}animate(e,t,r,i,s,o=[]){let a=i==0?"both":"forwards",l={duration:r,delay:i,fill:a};s&&(l.easing=s);let c=new Map,u=o.filter(h=>h instanceof id);gS(r,i)&&u.forEach(h=>{h.currentSnapshot.forEach((y,v)=>c.set(v,y))});let d=pS(t).map(h=>new Map(h));d=yS(e,d,c);let f=tU(e,d);return new id(e,d,l,f)}};var Ju="@",PS="@.disabled",od=class{namespaceId;delegate;engine;_onDestroy;\u0275type=0;constructor(e,t,r,i){this.namespaceId=e,this.delegate=t,this.engine=r,this._onDestroy=i}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.parentNode(t)&&this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){t.charAt(0)==Ju&&t==PS?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r,i){return this.delegate.listen(e,t,r,i)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}},Fy=class extends od{factory;constructor(e,t,r,i,s){super(t,r,i,s),this.factory=e,this.namespaceId=t}setProperty(e,t,r){t.charAt(0)==Ju?t.charAt(1)=="."&&t==PS?(r=r===void 0?!0:!!r,this.disableAnimations(e,r)):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r,i){if(t.charAt(0)==Ju){let s=iU(e),o=t.slice(1),a="";return o.charAt(0)!=Ju&&([o,a]=sU(o)),this.engine.listen(this.namespaceId,s,o,a,l=>{let c=l._data||-1;this.factory.scheduleListenerCallback(c,r,l)})}return this.delegate.listen(e,t,r,i)}};function iU(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}function sU(n){let e=n.indexOf("."),t=n.substring(0,e),r=n.slice(e+1);return[t,r]}var ad=class{delegate;engine;_zone;_currentId=0;_microtaskId=1;_animationCallbacksBuffer=[];_rendererCache=new Map;_cdRecurDepth=0;constructor(e,t,r){this.delegate=e,this.engine=t,this._zone=r,t.onRemovalComplete=(i,s)=>{s?.removeChild(null,i)}}createRenderer(e,t){let r="",i=this.delegate.createRenderer(e,t);if(!e||!t?.data?.animation){let c=this._rendererCache,u=c.get(i);if(!u){let d=()=>c.delete(i);u=new od(r,i,this.engine,d),c.set(i,u)}return u}let s=t.id,o=t.id+"-"+this._currentId;this._currentId++,this.engine.register(o,e);let a=c=>{Array.isArray(c)?c.forEach(a):this.engine.registerTrigger(s,o,e,c.name,c)};return t.data.animation.forEach(a),new Fy(this,o,i,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(e,t,r){if(e>=0&&e<this._microtaskId){this._zone.run(()=>t(r));return}let i=this._animationCallbacksBuffer;i.length==0&&queueMicrotask(()=>{this._zone.run(()=>{i.forEach(s=>{let[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),i.push([t,r])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}componentReplaced(e){this.engine.flush(),this.delegate.componentReplaced?.(e)}};var aU=(()=>{class n extends xs{constructor(t,r,i){super(t,r,i)}ngOnDestroy(){this.flush()}static \u0275fac=function(r){return new(r||n)(V($e),V(vi),V(Ei))};static \u0275prov=G({token:n,factory:n.\u0275fac})}return n})();function lU(){return new Xu}function cU(n,e,t){return new ad(n,e,t)}var OS=[{provide:Ei,useFactory:lU},{provide:xs,useClass:aU},{provide:or,useFactory:cU,deps:[yo,xs,be]}],Eq=[{provide:vi,useClass:Ly},{provide:vh,useValue:"NoopAnimations"},...OS],uU=[{provide:vi,useFactory:()=>new sd},{provide:vh,useFactory:()=>"BrowserAnimations"},...OS];function FS(){return Wi("NgEagerAnimations"),[...uU]}lp(VD,{providers:[LE(),dp(),FS()]}).catch(n=>console.error(n));
