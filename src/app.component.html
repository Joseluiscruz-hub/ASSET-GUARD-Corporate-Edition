
<div class="flex h-screen overflow-hidden bg-slate-50 font-sans">
  
  <!-- Sidebar Navigation (Role Based) -->
  <aside class="w-64 bg-slate-900 text-white flex flex-col shadow-2xl z-20 print:hidden relative">
    
    <!-- Branding -->
    <div class="p-6 border-b border-slate-800">
      <div class="flex items-center gap-3 mb-1">
        <i class="fas fa-network-wired text-[#ce1126] text-xl"></i>
        <h1 class="text-xl font-black italic tracking-tighter">ASSET GUARD</h1>
      </div>
      <p class="text-[10px] text-slate-500 uppercase tracking-widest pl-8">Corporate Edition</p>
    </div>
    
    <!-- Menu -->
    <nav class="flex-1 p-4 space-y-2">
      
      <!-- Panel 1: Display -->
      <button (click)="setView('dashboard')" 
              [class.bg-gradient-to-r]="currentView() === 'dashboard'"
              [class.from-[#ce1126]]="currentView() === 'dashboard'"
              [class.to-red-700]="currentView() === 'dashboard'"
              [class.text-white]="currentView() === 'dashboard'"
              [class.text-slate-400]="currentView() !== 'dashboard'"
              [class.hover:bg-slate-800]="currentView() !== 'dashboard'"
              class="w-full flex items-center gap-4 p-3 rounded-xl transition-all group relative">
        <div class="w-8 h-8 rounded-lg bg-white/10 flex items-center justify-center group-hover:scale-110 transition-transform">
          <i class="fas fa-desktop text-sm"></i>
        </div>
        <div class="text-left">
          <p class="text-xs font-bold uppercase">Visualizador</p>
          <p class="text-[10px] opacity-60">Modo Planta</p>
        </div>

        <!-- Tooltip -->
        <div class="absolute left-full top-1/2 -translate-y-1/2 ml-4 w-56 p-3 bg-slate-800 text-white text-xs rounded-xl shadow-xl border border-slate-700 opacity-0 group-hover:opacity-100 transition-all duration-300 pointer-events-none translate-x-[-10px] group-hover:translate-x-0 z-50">
           <div class="absolute left-0 top-1/2 -translate-x-1 -translate-y-1/2 w-2 h-2 bg-slate-800 border-l border-b border-slate-700 transform rotate-45"></div>
           <p class="font-bold text-[#ce1126] mb-1 uppercase tracking-wider text-[10px]">Dashboard NOC</p>
           <p class="text-slate-300 leading-snug">Monitoreo centralizado de KPIs y estado de la flota en tiempo real.</p>
        </div>
      </button>

      <!-- Panel 2: Toyota -->
      <button (click)="setView('service')" 
              [class.bg-gradient-to-r]="currentView() === 'service'"
              [class.from-orange-600]="currentView() === 'service'"
              [class.to-orange-800]="currentView() === 'service'"
              [class.text-white]="currentView() === 'service'"
              [class.text-slate-400]="currentView() !== 'service'"
              [class.hover:bg-slate-800]="currentView() !== 'service'"
              class="w-full flex items-center gap-4 p-3 rounded-xl transition-all group relative">
        <div class="w-8 h-8 rounded-lg bg-white/10 flex items-center justify-center group-hover:scale-110 transition-transform">
          <i class="fas fa-wrench text-sm"></i>
        </div>
        <div class="text-left">
          <p class="text-xs font-bold uppercase">Gestión Técnica</p>
          <p class="text-[10px] opacity-60">Toyota Panel</p>
        </div>

        <!-- Tooltip -->
        <div class="absolute left-full top-1/2 -translate-y-1/2 ml-4 w-56 p-3 bg-slate-800 text-white text-xs rounded-xl shadow-xl border border-slate-700 opacity-0 group-hover:opacity-100 transition-all duration-300 pointer-events-none translate-x-[-10px] group-hover:translate-x-0 z-50">
           <div class="absolute left-0 top-1/2 -translate-x-1 -translate-y-1/2 w-2 h-2 bg-slate-800 border-l border-b border-slate-700 transform rotate-45"></div>
           <p class="font-bold text-orange-400 mb-1 uppercase tracking-wider text-[10px]">Taller & Refacciones</p>
           <p class="text-slate-300 leading-snug">Administración de órdenes de trabajo, diagnósticos y estatus de refacciones.</p>
        </div>
      </button>

      <!-- Panel 3: Solicitor -->
      <button (click)="setView('solicitor')" 
              [class.bg-gradient-to-r]="currentView() === 'solicitor'"
              [class.from-blue-600]="currentView() === 'solicitor'"
              [class.to-blue-800]="currentView() === 'solicitor'"
              [class.text-white]="currentView() === 'solicitor'"
              [class.text-slate-400]="currentView() !== 'solicitor'"
              [class.hover:bg-slate-800]="currentView() !== 'solicitor'"
              class="w-full flex items-center gap-4 p-3 rounded-xl transition-all group relative">
        <div class="w-8 h-8 rounded-lg bg-white/10 flex items-center justify-center group-hover:scale-110 transition-transform">
          <i class="fas fa-mobile-alt text-sm"></i>
        </div>
        <div class="text-left">
          <p class="text-xs font-bold uppercase">Reporte Rápido</p>
          <p class="text-[10px] opacity-60">Operadores</p>
        </div>

        <!-- Tooltip -->
        <div class="absolute left-full top-1/2 -translate-y-1/2 ml-4 w-56 p-3 bg-slate-800 text-white text-xs rounded-xl shadow-xl border border-slate-700 opacity-0 group-hover:opacity-100 transition-all duration-300 pointer-events-none translate-x-[-10px] group-hover:translate-x-0 z-50">
           <div class="absolute left-0 top-1/2 -translate-x-1 -translate-y-1/2 w-2 h-2 bg-slate-800 border-l border-b border-slate-700 transform rotate-45"></div>
           <p class="font-bold text-blue-400 mb-1 uppercase tracking-wider text-[10px]">App Operador</p>
           <p class="text-slate-300 leading-snug">Portal simplificado para que operadores reporten incidencias desde piso.</p>
        </div>
      </button>

    </nav>

    <!-- Bottom Admin -->
    <div class="p-4 border-t border-slate-800">
      <button (click)="setView('settings')" 
              [class.text-white]="currentView() === 'settings'"
              [class.text-slate-500]="currentView() !== 'settings'"
              class="w-full flex items-center gap-3 p-2 rounded hover:text-white transition-colors text-xs font-bold uppercase tracking-wider group relative">
        <i class="fas fa-cog"></i> Admin Control
        
        <!-- Tooltip -->
        <div class="absolute left-full bottom-2 ml-4 w-56 p-3 bg-slate-800 text-white text-xs rounded-xl shadow-xl border border-slate-700 opacity-0 group-hover:opacity-100 transition-all duration-300 pointer-events-none translate-x-[-10px] group-hover:translate-x-0 z-50">
           <div class="absolute left-0 bottom-3 -translate-x-1 w-2 h-2 bg-slate-800 border-l border-b border-slate-700 transform rotate-45"></div>
           <p class="font-bold text-gray-400 mb-1 uppercase tracking-wider text-[10px]">Configuración Global</p>
           <p class="text-slate-300 leading-snug">Gestión de datos maestros, sincronización de pantallas y reportes IA.</p>
        </div>
      </button>
    </div>
  </aside>

  <!-- Main Content Area -->
  <main class="flex-1 overflow-hidden relative bg-slate-100">
    <div class="h-full w-full overflow-y-auto custom-scroll">
      
      <!-- Views -->
      @if (currentView() === 'dashboard') {
        <div class="view-animate">
          <app-dashboard />
        </div>
      }
      @else if (currentView() === 'service') {
        <div class="view-animate">
          <app-service-panel />
        </div>
      }
      @else if (currentView() === 'solicitor') {
        <div class="view-animate">
          <app-solicitor-panel />
        </div>
      }
      @else if (currentView() === 'settings') {
        <div class="view-animate">
          <div class="p-8">
            <app-admin />
          </div>
        </div>
      }
      @else {
        <!-- Fallback to Assets/Tower if needed, or redirect -->
        <div class="view-animate">
          <div class="p-8">
             <app-asset-list />
          </div>
        </div>
      }
      
      <!-- Overlay for Asset Details (Global) -->
      @if (selectedAssetId()) {
        <div class="fixed inset-0 z-50 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4">
           <div class="w-full max-w-5xl max-h-[90vh] overflow-y-auto rounded-xl shadow-2xl view-animate">
             <app-asset-detail [assetId]="selectedAssetId()!" />
           </div>
        </div>
      }

    </div>
  </main>

</div>
